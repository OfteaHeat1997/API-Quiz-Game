{
  "version": 3,
  "sources": ["../../node_modules/source-map/lib/base64.js", "../../node_modules/source-map/lib/base64-vlq.js", "../../node_modules/source-map/lib/util.js", "../../node_modules/source-map/lib/array-set.js", "../../node_modules/source-map/lib/mapping-list.js", "../../node_modules/source-map/lib/source-map-generator.js", "../../node_modules/source-map/lib/binary-search.js", "../../node_modules/source-map/lib/quick-sort.js", "../../node_modules/source-map/lib/source-map-consumer.js", "../../node_modules/source-map/lib/source-node.js", "../../node_modules/source-map/source-map.js", "../../node_modules/buffer-from/index.js", "../../node_modules/source-map-support/source-map-support.js", "../../node_modules/lodash.debounce/index.js", "../../node_modules/@xmldom/xmldom/lib/conventions.js", "../../node_modules/@xmldom/xmldom/lib/dom.js", "../../node_modules/@xmldom/xmldom/lib/entities.js", "../../node_modules/@xmldom/xmldom/lib/sax.js", "../../node_modules/@xmldom/xmldom/lib/dom-parser.js", "../../node_modules/@xmldom/xmldom/lib/index.js", "../../node_modules/plist/lib/parse.js", "../../node_modules/base64-js/index.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/Utility.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDOMImplementation.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDOMStringList.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDOMConfiguration.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/NodeType.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLAttribute.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLNamedNodeMap.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLElement.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLCharacterData.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLCData.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLComment.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDeclaration.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDTDAttList.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDTDEntity.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDTDElement.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDTDNotation.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDocType.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLRaw.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLText.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLProcessingInstruction.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDummy.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLNodeList.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/DocumentPosition.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLNode.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLStringifier.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/WriterState.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLWriterBase.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLStringWriter.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDocument.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLDocumentCB.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/XMLStreamWriter.js", "../../node_modules/plist/node_modules/xmlbuilder/lib/index.js", "../../node_modules/plist/lib/build.js", "../../node_modules/plist/index.js", "../../node_modules/ansi-regex/index.js", "../../node_modules/strip-ansi/index.js", "../../node_modules/xml2js/lib/defaults.js", "../../node_modules/xmlbuilder/lib/Utility.js", "../../node_modules/xmlbuilder/lib/XMLDOMImplementation.js", "../../node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js", "../../node_modules/xmlbuilder/lib/XMLDOMStringList.js", "../../node_modules/xmlbuilder/lib/XMLDOMConfiguration.js", "../../node_modules/xmlbuilder/lib/NodeType.js", "../../node_modules/xmlbuilder/lib/XMLAttribute.js", "../../node_modules/xmlbuilder/lib/XMLNamedNodeMap.js", "../../node_modules/xmlbuilder/lib/XMLElement.js", "../../node_modules/xmlbuilder/lib/XMLCharacterData.js", "../../node_modules/xmlbuilder/lib/XMLCData.js", "../../node_modules/xmlbuilder/lib/XMLComment.js", "../../node_modules/xmlbuilder/lib/XMLDeclaration.js", "../../node_modules/xmlbuilder/lib/XMLDTDAttList.js", "../../node_modules/xmlbuilder/lib/XMLDTDEntity.js", "../../node_modules/xmlbuilder/lib/XMLDTDElement.js", "../../node_modules/xmlbuilder/lib/XMLDTDNotation.js", "../../node_modules/xmlbuilder/lib/XMLDocType.js", "../../node_modules/xmlbuilder/lib/XMLRaw.js", "../../node_modules/xmlbuilder/lib/XMLText.js", "../../node_modules/xmlbuilder/lib/XMLProcessingInstruction.js", "../../node_modules/xmlbuilder/lib/XMLDummy.js", "../../node_modules/xmlbuilder/lib/XMLNodeList.js", "../../node_modules/xmlbuilder/lib/DocumentPosition.js", "../../node_modules/xmlbuilder/lib/XMLNode.js", "../../node_modules/xmlbuilder/lib/XMLStringifier.js", "../../node_modules/xmlbuilder/lib/WriterState.js", "../../node_modules/xmlbuilder/lib/XMLWriterBase.js", "../../node_modules/xmlbuilder/lib/XMLStringWriter.js", "../../node_modules/xmlbuilder/lib/XMLDocument.js", "../../node_modules/xmlbuilder/lib/XMLDocumentCB.js", "../../node_modules/xmlbuilder/lib/XMLStreamWriter.js", "../../node_modules/xmlbuilder/lib/index.js", "../../node_modules/xml2js/lib/builder.js", "../../node_modules/sax/lib/sax.js", "../../node_modules/xml2js/lib/bom.js", "../../node_modules/xml2js/lib/processors.js", "../../node_modules/xml2js/lib/parser.js", "../../node_modules/xml2js/lib/xml2js.js", "../../node_modules/lcov-parse/lib/index.js", "../../node_modules/vscode-languageclient/lib/common/utils/is.js", "../../node_modules/vscode-jsonrpc/lib/common/is.js", "../../node_modules/vscode-jsonrpc/lib/common/messages.js", "../../node_modules/vscode-jsonrpc/lib/common/linkedMap.js", "../../node_modules/vscode-jsonrpc/lib/common/disposable.js", "../../node_modules/vscode-jsonrpc/lib/common/ral.js", "../../node_modules/vscode-jsonrpc/lib/common/events.js", "../../node_modules/vscode-jsonrpc/lib/common/cancellation.js", "../../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js", "../../node_modules/vscode-jsonrpc/lib/common/semaphore.js", "../../node_modules/vscode-jsonrpc/lib/common/messageReader.js", "../../node_modules/vscode-jsonrpc/lib/common/messageWriter.js", "../../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js", "../../node_modules/vscode-jsonrpc/lib/common/connection.js", "../../node_modules/vscode-jsonrpc/lib/common/api.js", "../../node_modules/vscode-jsonrpc/lib/node/ril.js", "../../node_modules/vscode-jsonrpc/lib/node/main.js", "../../node_modules/vscode-jsonrpc/node.js", "../../node_modules/vscode-languageserver-types/lib/umd/main.js", "../../node_modules/vscode-languageserver-protocol/lib/common/messages.js", "../../node_modules/vscode-languageserver-protocol/lib/common/utils/is.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineCompletion.js", "../../node_modules/vscode-languageserver-protocol/lib/common/protocol.js", "../../node_modules/vscode-languageserver-protocol/lib/common/connection.js", "../../node_modules/vscode-languageserver-protocol/lib/common/api.js", "../../node_modules/vscode-languageserver-protocol/lib/node/main.js", "../../node_modules/vscode-languageclient/lib/common/utils/async.js", "../../node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js", "../../node_modules/vscode-languageclient/lib/common/protocolCodeLens.js", "../../node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js", "../../node_modules/vscode-languageclient/lib/common/protocolCodeAction.js", "../../node_modules/vscode-languageclient/lib/common/protocolDiagnostic.js", "../../node_modules/vscode-languageclient/lib/common/protocolCallHierarchyItem.js", "../../node_modules/vscode-languageclient/lib/common/protocolTypeHierarchyItem.js", "../../node_modules/vscode-languageclient/lib/common/protocolWorkspaceSymbol.js", "../../node_modules/vscode-languageclient/lib/common/protocolInlayHint.js", "../../node_modules/vscode-languageclient/lib/common/codeConverter.js", "../../node_modules/vscode-languageclient/lib/common/protocolConverter.js", "../../node_modules/vscode-languageclient/lib/common/utils/uuid.js", "../../node_modules/vscode-languageclient/lib/common/progressPart.js", "../../node_modules/vscode-languageclient/lib/common/features.js", "../../node_modules/vscode-languageclient/node_modules/minimatch/lib/path.js", "../../node_modules/balanced-match/index.js", "../../node_modules/vscode-languageclient/node_modules/brace-expansion/index.js", "../../node_modules/vscode-languageclient/node_modules/minimatch/minimatch.js", "../../node_modules/vscode-languageclient/lib/common/diagnostic.js", "../../node_modules/vscode-languageclient/lib/common/notebook.js", "../../node_modules/vscode-languageclient/lib/common/configuration.js", "../../node_modules/vscode-languageclient/lib/common/textSynchronization.js", "../../node_modules/vscode-languageclient/lib/common/completion.js", "../../node_modules/vscode-languageclient/lib/common/hover.js", "../../node_modules/vscode-languageclient/lib/common/definition.js", "../../node_modules/vscode-languageclient/lib/common/signatureHelp.js", "../../node_modules/vscode-languageclient/lib/common/documentHighlight.js", "../../node_modules/vscode-languageclient/lib/common/documentSymbol.js", "../../node_modules/vscode-languageclient/lib/common/workspaceSymbol.js", "../../node_modules/vscode-languageclient/lib/common/reference.js", "../../node_modules/vscode-languageclient/lib/common/codeAction.js", "../../node_modules/vscode-languageclient/lib/common/codeLens.js", "../../node_modules/vscode-languageclient/lib/common/formatting.js", "../../node_modules/vscode-languageclient/lib/common/rename.js", "../../node_modules/vscode-languageclient/lib/common/documentLink.js", "../../node_modules/vscode-languageclient/lib/common/executeCommand.js", "../../node_modules/vscode-languageclient/lib/common/fileSystemWatcher.js", "../../node_modules/vscode-languageclient/lib/common/colorProvider.js", "../../node_modules/vscode-languageclient/lib/common/implementation.js", "../../node_modules/vscode-languageclient/lib/common/typeDefinition.js", "../../node_modules/vscode-languageclient/lib/common/workspaceFolder.js", "../../node_modules/vscode-languageclient/lib/common/foldingRange.js", "../../node_modules/vscode-languageclient/lib/common/declaration.js", "../../node_modules/vscode-languageclient/lib/common/selectionRange.js", "../../node_modules/vscode-languageclient/lib/common/progress.js", "../../node_modules/vscode-languageclient/lib/common/callHierarchy.js", "../../node_modules/vscode-languageclient/lib/common/semanticTokens.js", "../../node_modules/vscode-languageclient/lib/common/fileOperations.js", "../../node_modules/vscode-languageclient/lib/common/linkedEditingRange.js", "../../node_modules/vscode-languageclient/lib/common/typeHierarchy.js", "../../node_modules/vscode-languageclient/lib/common/inlineValue.js", "../../node_modules/vscode-languageclient/lib/common/inlayHint.js", "../../node_modules/vscode-languageclient/lib/common/inlineCompletion.js", "../../node_modules/vscode-languageclient/lib/common/client.js", "../../node_modules/vscode-languageclient/lib/node/processes.js", "../../node_modules/vscode-languageserver-protocol/node.js", "../../node_modules/semver/internal/debug.js", "../../node_modules/semver/internal/constants.js", "../../node_modules/semver/internal/re.js", "../../node_modules/semver/internal/parse-options.js", "../../node_modules/semver/internal/identifiers.js", "../../node_modules/semver/classes/semver.js", "../../node_modules/semver/functions/parse.js", "../../node_modules/semver/internal/lrucache.js", "../../node_modules/semver/functions/compare.js", "../../node_modules/semver/functions/eq.js", "../../node_modules/semver/functions/neq.js", "../../node_modules/semver/functions/gt.js", "../../node_modules/semver/functions/gte.js", "../../node_modules/semver/functions/lt.js", "../../node_modules/semver/functions/lte.js", "../../node_modules/semver/functions/cmp.js", "../../node_modules/semver/classes/comparator.js", "../../node_modules/semver/classes/range.js", "../../node_modules/semver/functions/satisfies.js", "../../node_modules/vscode-languageclient/lib/common/api.js", "../../node_modules/vscode-languageclient/lib/node/main.js", "../../node_modules/vscode-languageclient/node.js", "../../node_modules/lodash.throttle/index.js", "../../src/extension.ts", "../../node_modules/source-map-support/register.js", "../../src/commands.ts", "../../src/ui/ProjectPanelProvider.ts", "../../src/configuration.ts", "../../src/ui/ReloadExtension.ts", "../../src/WorkspaceContext.ts", "../../src/FolderContext.ts", "../../src/LinuxMain.ts", "../../src/utilities/filesystem.ts", "../../src/PackageWatcher.ts", "../../src/toolchain/BuildFlags.ts", "../../src/toolchain/toolchain.ts", "../../src/ui/SwiftOutputChannel.ts", "../../src/utilities/utilities.ts", "../../src/utilities/version.ts", "../../src/toolchain/Sanitizer.ts", "../../src/utilities/tasks.ts", "../../src/SwiftPackage.ts", "../../src/TestExplorer/TestExplorer.ts", "../../src/TestExplorer/TestRunner.ts", "../../src/tasks/SwiftTaskProvider.ts", "../../src/tasks/SwiftExecution.ts", "../../src/tasks/SwiftProcess.ts", "../../src/utilities/native.ts", "../../src/tasks/SwiftPseudoterminal.ts", "../../src/debugger/buildConfig.ts", "../../src/debugger/debugAdapter.ts", "../../src/TestExplorer/TestKind.ts", "../../src/debugger/lldb.ts", "../../src/utilities/result.ts", "../../src/TestExplorer/TestParsers/XCTestOutputParser.ts", "../../src/TestExplorer/TestParsers/SwiftTestingOutputParser.ts", "../../src/TestExplorer/TestParsers/TestEventStreamReader.ts", "../../src/debugger/logTracker.ts", "../../src/tasks/TaskQueue.ts", "../../src/TestExplorer/TestXUnitParser.ts", "../../src/TestExplorer/TestUtils.ts", "../../src/TestExplorer/TestRunArguments.ts", "../../src/utilities/tempFolder.ts", "../../src/TestExplorer/TestDiscovery.ts", "../../src/coverage/LcovResults.ts", "../../src/utilities/cancellation.ts", "../../src/sourcekit-lsp/extensions/DocCDocumentationRequest.ts", "../../src/sourcekit-lsp/extensions/GetReferenceDocumentRequest.ts", "../../src/sourcekit-lsp/extensions/GetTestsRequest.ts", "../../src/sourcekit-lsp/extensions/LegacyInlayHintRequest.ts", "../../src/sourcekit-lsp/extensions/PeekDocumentsRequest.ts", "../../src/sourcekit-lsp/extensions/ReIndexProjectRequest.ts", "../../src/sourcekit-lsp/extensions/SourceKitLogMessageNotification.ts", "../../src/sourcekit-lsp/extensions/SymbolInfoRequest.ts", "../../src/sourcekit-lsp/LanguageClientManager.ts", "../../src/sourcekit-lsp/inlayHints.ts", "../../src/sourcekit-lsp/LanguageClientConfiguration.ts", "../../src/DiagnosticsManager.ts", "../../src/commands/captureDiagnostics.ts", "../../src/sourcekit-lsp/uriConverters.ts", "../../src/sourcekit-lsp/peekDocuments.ts", "../../src/sourcekit-lsp/LSPOutputChannel.ts", "../../src/sourcekit-lsp/getReferenceDocument.ts", "../../src/sourcekit-lsp/LanguageClientFactory.ts", "../../src/sourcekit-lsp/didChangeActiveDocument.ts", "../../src/sourcekit-lsp/extensions/DidChangeActiveDocumentRequest.ts", "../../src/TestExplorer/LSPTestDiscovery.ts", "../../src/TestExplorer/SPMTestDiscovery.ts", "../../src/TestExplorer/DocumentSymbolTestDiscovery.ts", "../../src/BackgroundCompilation.ts", "../../src/ui/StatusItem.ts", "../../src/sourcekit-lsp/LanguageClientToolchainCoordinator.ts", "../../src/tasks/TaskManager.ts", "../../src/debugger/launch.ts", "../../src/contextKeys.ts", "../../src/SwiftSnippets.ts", "../../src/editor/CommentCompletion.ts", "../../src/editor/DocumentParser.ts", "../../src/ui/SwiftBuildStatus.ts", "../../src/documentation/DocumentationManager.ts", "../../src/documentation/DocumentationPreviewEditor.ts", "../../src/utilities/workspace.ts", "../../src/tasks/SwiftPluginTaskProvider.ts", "../../src/debugger/debugAdapterFactory.ts", "../../src/ui/ToolchainSelection.ts", "../../src/commands/attachDebugger.ts", "../../src/commands/reindexProject.ts", "../../src/commands/build.ts", "../../src/commands/utilities.ts", "../../src/commands/runSwiftScript.ts", "../../src/commands/dependencies/useLocal.ts", "../../src/commands/dependencies/edit.ts", "../../src/commands/dependencies/unedit.ts", "../../src/commands/openInWorkspace.ts", "../../src/commands/openInExternalEditor.ts", "../../src/commands/switchPlatform.ts", "../../src/commands/insertFunctionComment.ts", "../../src/commands/createNewProject.ts", "../../src/ui/withDelayedProgress.ts", "../../src/commands/openEducationalNote.ts", "../../src/commands/openPackage.ts", "../../src/commands/dependencies/resolve.ts", "../../src/commands/resetPackage.ts", "../../src/commands/dependencies/update.ts", "../../src/commands/runPluginTask.ts", "../../src/commands/testMultipleTimes.ts", "../../src/commands/newFile.ts", "../../src/commands/runAllTests.ts", "../../src/commands/dependencies/updateDepViewList.ts", "../../src/commands/runTask.ts", "../../src/commands/pickProcess.ts", "../../src/process-list/BaseProcessList.ts", "../../src/process-list/platforms/LinuxProcessList.ts", "../../src/process-list/platforms/DarwinProcessList.ts", "../../src/process-list/platforms/WindowsProcessList.ts", "../../src/process-list/index.ts", "../../src/commands/openDocumentation.ts", "../../src/commands/restartLSPServer.ts", "../../src/commands/generateLaunchConfigurations.ts", "../../src/ui/LanguageStatusItems.ts", "../../src/ui/ReadOnlyDocumentProvider.ts", "../../src/ui/win32.ts", "../../src/terminal.ts", "../../src/toolchain/SelectedXcodeWatcher.ts"],
  "sourcesContent": ["/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 === null) {\n    return 1; // aStr2 !== null\n  }\n\n  if (aStr2 === null) {\n    return -1; // aStr1 !== null\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */\nfunction parseSourceMapInput(str) {\n  return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */\nfunction computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n  sourceURL = sourceURL || '';\n\n  if (sourceRoot) {\n    // This follows what Chrome does.\n    if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n      sourceRoot += '/';\n    }\n    // The spec says:\n    //   Line 4: An optional source root, useful for relocating source\n    //   files on a server or removing repeated values in the\n    //   \u201Csources\u201D entry.  This value is prepended to the individual\n    //   entries in the \u201Csource\u201D field.\n    sourceURL = sourceRoot + sourceURL;\n  }\n\n  // Historically, SourceMapConsumer did not take the sourceMapURL as\n  // a parameter.  This mode is still somewhat supported, which is why\n  // this code block is conditional.  However, it's preferable to pass\n  // the source map URL to SourceMapConsumer, so that this function\n  // can implement the source URL resolution algorithm as outlined in\n  // the spec.  This block is basically the equivalent of:\n  //    new URL(sourceURL, sourceMapURL).toString()\n  // ... except it avoids using URL, which wasn't available in the\n  // older releases of node still supported by this library.\n  //\n  // The spec says:\n  //   If the sources are not absolute URLs after prepending of the\n  //   \u201CsourceRoot\u201D, the sources are resolved relative to the\n  //   SourceMap (like resolving script src in a html document).\n  if (sourceMapURL) {\n    var parsed = urlParse(sourceMapURL);\n    if (!parsed) {\n      throw new Error(\"sourceMapURL could not be parsed\");\n    }\n    if (parsed.path) {\n      // Strip the last path component, but keep the \"/\".\n      var index = parsed.path.lastIndexOf('/');\n      if (index >= 0) {\n        parsed.path = parsed.path.substring(0, index + 1);\n      }\n    }\n    sourceURL = join(urlGenerate(parsed), sourceURL);\n  }\n\n  return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var sourceRelative = sourceFile;\n      if (sourceRoot !== null) {\n        sourceRelative = util.relative(sourceRoot, sourceFile);\n      }\n\n      if (!generator._sources.has(sourceRelative)) {\n        generator._sources.add(sourceRelative);\n      }\n\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        throw new Error(\n            'original.line and original.column are not numbers -- you probably meant to omit ' +\n            'the original mapping entirely and only map the generated position. If so, pass ' +\n            'null for the original mapping instead of an object with empty or null values.'\n        );\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap, aSourceMapURL)\n    : new BasicSourceMapConsumer(sourceMap, aSourceMapURL);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap, aSourceMapURL) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap, aSourceMapURL);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      source = util.computeSourceURL(sourceRoot, source, this._sourceMapURL);\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number is 1-based.\n *   - column: Optional. the column number in the original source.\n *    The column number is 0-based.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *    line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *    The column number is 0-based.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    needle.source = this._findSourceIndex(needle.source);\n    if (needle.source < 0) {\n      return [];\n    }\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The first parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  if (sourceRoot) {\n    sourceRoot = util.normalize(sourceRoot);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this._absoluteSources = this._sources.toArray().map(function (s) {\n    return util.computeSourceURL(sourceRoot, s, aSourceMapURL);\n  });\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this._sourceMapURL = aSourceMapURL;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Utility function to find the index of a source.  Returns -1 if not\n * found.\n */\nBasicSourceMapConsumer.prototype._findSourceIndex = function(aSource) {\n  var relativeSource = aSource;\n  if (this.sourceRoot != null) {\n    relativeSource = util.relative(this.sourceRoot, relativeSource);\n  }\n\n  if (this._sources.has(relativeSource)) {\n    return this._sources.indexOf(relativeSource);\n  }\n\n  // Maybe aSource is an absolute URL as returned by |sources|.  In\n  // this case we can't simply undo the transform.\n  var i;\n  for (i = 0; i < this._absoluteSources.length; ++i) {\n    if (this._absoluteSources[i] == aSource) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @param String aSourceMapURL\n *        The URL at which the source map can be found (optional)\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap, aSourceMapURL) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n    smc._sourceMapURL = aSourceMapURL;\n    smc._absoluteSources = smc._sources.toArray().map(function (s) {\n      return util.computeSourceURL(smc.sourceRoot, s, aSourceMapURL);\n    });\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._absoluteSources.slice();\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          source = util.computeSourceURL(this.sourceRoot, source, this._sourceMapURL);\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    var index = this._findSourceIndex(aSource);\n    if (index >= 0) {\n      return this.sourcesContent[index];\n    }\n\n    var relativeSource = aSource;\n    if (this.sourceRoot != null) {\n      relativeSource = util.relative(this.sourceRoot, relativeSource);\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = relativeSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + relativeSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + relativeSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + relativeSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    source = this._findSourceIndex(source);\n    if (source < 0) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The first parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'), aSourceMapURL)\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based. \n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer._findSourceIndex(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        source = util.computeSourceURL(section.consumer.sourceRoot, source, this._sourceMapURL);\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = null;\n        if (mapping.name) {\n          name = section.consumer._names.at(mapping.name);\n          this._names.add(name);\n          name = this._names.indexOf(name);\n        }\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n", "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = require('./source-map-generator').SourceMapGenerator;\nvar util = require('./util');\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n      var lineContents = getNextLine();\n      // The last line of a file might not have a newline.\n      var newLine = getNextLine() || \"\";\n      return lineContents + newLine;\n\n      function getNextLine() {\n        return remainingLinesIndex < remainingLines.length ?\n            remainingLines[remainingLinesIndex++] : undefined;\n      }\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[remainingLinesIndex] || '';\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[remainingLinesIndex] || '';\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n", "/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = require('./lib/source-map-generator').SourceMapGenerator;\nexports.SourceMapConsumer = require('./lib/source-map-consumer').SourceMapConsumer;\nexports.SourceNode = require('./lib/source-node').SourceNode;\n", "/* eslint-disable node/no-deprecated-api */\n\nvar toString = Object.prototype.toString\n\nvar isModern = (\n  typeof Buffer !== 'undefined' &&\n  typeof Buffer.alloc === 'function' &&\n  typeof Buffer.allocUnsafe === 'function' &&\n  typeof Buffer.from === 'function'\n)\n\nfunction isArrayBuffer (input) {\n  return toString.call(input).slice(8, -1) === 'ArrayBuffer'\n}\n\nfunction fromArrayBuffer (obj, byteOffset, length) {\n  byteOffset >>>= 0\n\n  var maxLength = obj.byteLength - byteOffset\n\n  if (maxLength < 0) {\n    throw new RangeError(\"'offset' is out of bounds\")\n  }\n\n  if (length === undefined) {\n    length = maxLength\n  } else {\n    length >>>= 0\n\n    if (length > maxLength) {\n      throw new RangeError(\"'length' is out of bounds\")\n    }\n  }\n\n  return isModern\n    ? Buffer.from(obj.slice(byteOffset, byteOffset + length))\n    : new Buffer(new Uint8Array(obj.slice(byteOffset, byteOffset + length)))\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  return isModern\n    ? Buffer.from(string, encoding)\n    : new Buffer(string, encoding)\n}\n\nfunction bufferFrom (value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (isArrayBuffer(value)) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  return isModern\n    ? Buffer.from(value)\n    : new Buffer(value)\n}\n\nmodule.exports = bufferFrom\n", "var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\n\nvar fs;\ntry {\n  fs = require('fs');\n  if (!fs.existsSync || !fs.readFileSync) {\n    // fs doesn't have all methods we need\n    fs = null;\n  }\n} catch (err) {\n  /* nop */\n}\n\nvar bufferFrom = require('buffer-from');\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param {NodeModule} mod\n * @param {string} request\n */\nfunction dynamicRequire(mod, request) {\n  return mod.require(request);\n}\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function') && !(window.require && window.module && window.process && window.process.type === \"renderer\"));\n}\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction globalProcessVersion() {\n  if ((typeof process === 'object') && (process !== null)) {\n    return process.version;\n  } else {\n    return '';\n  }\n}\n\nfunction globalProcessStderr() {\n  if ((typeof process === 'object') && (process !== null)) {\n    return process.stderr;\n  }\n}\n\nfunction globalProcessExit(code) {\n  if ((typeof process === 'object') && (process !== null) && (typeof process.exit === 'function')) {\n    return process.exit(code);\n  }\n}\n\nfunction handlerExec(list) {\n  return function(arg) {\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n        return ret;\n      }\n    }\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (/^file:/.test(path)) {\n    // existsSync/readFileSync can't handle file protocol, but once stripped, it works\n    path = path.replace(/file:\\/\\/\\/(\\w:)?/, function(protocol, drive) {\n      return drive ?\n        '' : // file:///C:/dir/file -> C:/dir/file\n        '/'; // file:///root-dir/file -> /root-dir/file\n    });\n  }\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  var contents = '';\n  try {\n    if (!fs) {\n      // Use SJAX if we are in the browser\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', path, /** async */ false);\n      xhr.send(null);\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        contents = xhr.responseText;\n      }\n    } else if (fs.existsSync(path)) {\n      // Otherwise, use the filesystem\n      contents = fs.readFileSync(path, 'utf8');\n    }\n  } catch (er) {\n    /* ignore any errors */\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\" or \"file:///\")\nfunction supportRelativeURL(file, url) {\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^\\w+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  var startPath = dir.slice(protocol.length);\n  if (protocol && /^\\/\\w\\:/.test(startPath)) {\n    // handle file:///C:/ paths\n    protocol += '/';\n    return protocol + path.resolve(dir.slice(protocol.length), url).replace(/\\\\/g, '/');\n  }\n  return protocol + path.resolve(dir.slice(protocol.length), url);\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n  if (isInBrowser()) {\n     try {\n       var xhr = new XMLHttpRequest();\n       xhr.open('GET', source, false);\n       xhr.send(null);\n       fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n       // Support providing a sourceMappingURL via the SourceMap header\n       var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                             xhr.getResponseHeader(\"X-SourceMap\");\n       if (sourceMapHeader) {\n         return sourceMapHeader;\n       }\n     } catch (e) {\n     }\n  }\n\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n  var re = /(?:\\/\\/[@#][\\s]*sourceMappingURL=([^\\s'\"]+)[\\s]*$)|(?:\\/\\*[@#][\\s]*sourceMappingURL=([^\\s*'\"]+)[\\s]*(?:\\*\\/)[\\s]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = bufferFrom(rawData, \"base64\").toString();\n    sourceMappingURL = source;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    // Call the (overrideable) retrieveSourceMap function to get the source map.\n    var urlAndMap = retrieveSourceMap(position.source);\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map && typeof sourceMap.map.originalPositionFor === 'function') {\n    var originalPosition = sourceMap.map.originalPositionFor(position);\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n      return originalPosition;\n    }\n  }\n\n  return position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: +match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    // Fixes shim to be backward compatable with Node v0 to v4\n    if (typeName === \"[object Object]\") {\n      typeName = \"null\";\n    }\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame, state) {\n  // provides interface backward compatibility\n  if (state === undefined) {\n    state = { nextPosition: null, curPosition: null }\n  }\n  if(frame.isNative()) {\n    state.curPosition = null;\n    return frame;\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    // Header removed in node at ^10.16 || >=11.11.0\n    // v11 is not an LTS candidate, we can just test the one version with it.\n    // Test node versions for: 10.16-19, 10.20+, 12-19, 20-99, 100+, or 11.11\n    var noHeader = /^v(10\\.1[6-9]|10\\.[2-9][0-9]|10\\.[0-9]{3,}|1[2-9]\\d*|[2-9]\\d|\\d{3,}|11\\.11)/;\n    var headerLength = noHeader.test(globalProcessVersion()) ? 0 : 62;\n    if (line === 1 && column > headerLength && !isInBrowser() && !frame.isEval()) {\n      column -= headerLength;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    state.curPosition = position;\n    frame = cloneCallSite(frame);\n    var originalFunctionName = frame.getFunctionName;\n    frame.getFunctionName = function() {\n      if (state.nextPosition == null) {\n        return originalFunctionName();\n      }\n      return state.nextPosition.name || originalFunctionName();\n    };\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// https://v8.dev/docs/stack-trace-api\nfunction prepareStackTrace(error, stack) {\n  if (emptyCacheBetweenOperations) {\n    fileContentsCache = {};\n    sourceMapCache = {};\n  }\n\n  var name = error.name || 'Error';\n  var message = error.message || '';\n  var errorString = name + \": \" + message;\n\n  var state = { nextPosition: null, curPosition: null };\n  var processedStack = [];\n  for (var i = stack.length - 1; i >= 0; i--) {\n    processedStack.push('\\n    at ' + wrapCallSite(stack[i], state));\n    state.nextPosition = state.curPosition;\n  }\n  state.curPosition = state.nextPosition = null;\n  return errorString + processedStack.reverse().join('');\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync(source)) {\n      try {\n        contents = fs.readFileSync(source, 'utf8');\n      } catch (er) {\n        contents = '';\n      }\n    }\n\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        return source + ':' + line + '\\n' + code + '\\n' +\n          new Array(column).join(' ') + '^';\n      }\n    }\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  // Ensure error is printed synchronously and not truncated\n  var stderr = globalProcessStderr();\n  if (stderr && stderr._handle && stderr._handle.setBlocking) {\n    stderr._handle.setBlocking(true);\n  }\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  globalProcessExit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nvar originalRetrieveFileHandlers = retrieveFileHandlers.slice(0);\nvar originalRetrieveMapHandlers = retrieveMapHandlers.slice(0);\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment + \" was unknown. Available options are {auto, browser, node}\")\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n    retrieveFileHandlers.unshift(options.retrieveFile);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Support runtime transpilers that include inline source maps\n  if (options.hookRequire && !isInBrowser()) {\n    // Use dynamicRequire to avoid including in browser bundles\n    var Module = dynamicRequire(module, 'module');\n    var $compile = Module.prototype._compile;\n\n    if (!$compile.__sourceMapSupport) {\n      Module.prototype._compile = function(content, filename) {\n        fileContentsCache[filename] = content;\n        sourceMapCache[filename] = undefined;\n        return $compile.call(this, content, filename);\n      };\n\n      Module.prototype._compile.__sourceMapSupport = true;\n    }\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Do not override 'uncaughtException' with our own handler in Node.js\n    // Worker threads. Workers pass the error to the main thread as an event,\n    // rather than printing something to stderr and exiting.\n    try {\n      // We need to use `dynamicRequire` because `require` on it's own will be optimized by WebPack/Browserify.\n      var worker_threads = dynamicRequire(module, 'worker_threads');\n      if (worker_threads.isMainThread === false) {\n        installHandler = false;\n      }\n    } catch(e) {}\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n\nexports.resetRetrieveHandlers = function() {\n  retrieveFileHandlers.length = 0;\n  retrieveMapHandlers.length = 0;\n\n  retrieveFileHandlers = originalRetrieveFileHandlers.slice(0);\n  retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);\n\n  retrieveSourceMap = handlerExec(retrieveMapHandlers);\n  retrieveFile = handlerExec(retrieveFileHandlers);\n}\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n", "'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n", "var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list,'length',ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i] || null;\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\uFF1A\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n", "'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES;\n", "var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: \u8FD9\u91CC\u6709\u53EF\u80FDsax\u56DE\u9000\uFF0C\u6709\u4F4D\u7F6E\u9519\u8BEF\u98CE\u9669\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//\u5FD8\u8BB0\u95ED\u5408\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n", "var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n", "var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n", "/**\n * Module dependencies.\n */\n\nconst { DOMParser } = require('@xmldom/xmldom');\n\n/**\n * Module exports.\n */\n\nexports.parse = parse;\n\nvar TEXT_NODE = 3;\nvar CDATA_NODE = 4;\nvar COMMENT_NODE = 8;\n\n\n/**\n * We ignore raw text (usually whitespace), <!-- xml comments -->,\n * and raw CDATA nodes.\n *\n * @param {Element} node\n * @returns {Boolean}\n * @api private\n */\n\nfunction shouldIgnoreNode (node) {\n  return node.nodeType === TEXT_NODE\n    || node.nodeType === COMMENT_NODE\n    || node.nodeType === CDATA_NODE;\n}\n\n/**\n * Check if the node is empty. Some plist file has such node:\n * <key />\n * this node shoud be ignored.\n *\n * @see https://github.com/TooTallNate/plist.js/issues/66\n * @param {Element} node\n * @returns {Boolean}\n * @api private\n */\nfunction isEmptyNode(node){\n  if(!node.childNodes || node.childNodes.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction invariant(test, message) {\n  if (!test) {\n    throw new Error(message);\n  }\n}\n\n/**\n * Parses a Plist XML string. Returns an Object.\n *\n * @param {String} xml - the XML String to decode\n * @returns {Mixed} the decoded value from the Plist XML\n * @api public\n */\n\nfunction parse (xml) {\n  var doc = new DOMParser().parseFromString(xml);\n  invariant(\n    doc.documentElement.nodeName === 'plist',\n    'malformed document. First element should be <plist>'\n  );\n  var plist = parsePlistXML(doc.documentElement);\n\n  // the root <plist> node gets interpreted as an Array,\n  // so pull out the inner data first\n  if (plist.length == 1) plist = plist[0];\n\n  return plist;\n}\n\n/**\n * Convert an XML based plist document into a JSON representation.\n *\n * @param {Object} xml_node - current XML node in the plist\n * @returns {Mixed} built up JSON object\n * @api private\n */\n\nfunction parsePlistXML (node) {\n  var i, new_obj, key, val, new_arr, res, counter, type;\n\n  if (!node)\n    return null;\n\n  if (node.nodeName === 'plist') {\n    new_arr = [];\n    if (isEmptyNode(node)) {\n      return new_arr;\n    }\n    for (i=0; i < node.childNodes.length; i++) {\n      if (!shouldIgnoreNode(node.childNodes[i])) {\n        new_arr.push( parsePlistXML(node.childNodes[i]));\n      }\n    }\n    return new_arr;\n  } else if (node.nodeName === 'dict') {\n    new_obj = {};\n    key = null;\n    counter = 0;\n    if (isEmptyNode(node)) {\n      return new_obj;\n    }\n    for (i=0; i < node.childNodes.length; i++) {\n      if (shouldIgnoreNode(node.childNodes[i])) continue;\n      if (counter % 2 === 0) {\n        invariant(\n          node.childNodes[i].nodeName === 'key',\n          'Missing key while parsing <dict/>.'\n        );\n        key = parsePlistXML(node.childNodes[i]);\n      } else {\n        invariant(\n          node.childNodes[i].nodeName !== 'key',\n          'Unexpected key \"'\n            + parsePlistXML(node.childNodes[i])\n            + '\" while parsing <dict/>.'\n        );\n        new_obj[key] = parsePlistXML(node.childNodes[i]);\n      }\n      counter += 1;\n    }\n    if (counter % 2 === 1) {\n      new_obj[key] = '';\n    }\n    \n    return new_obj;\n\n  } else if (node.nodeName === 'array') {\n    new_arr = [];\n    if (isEmptyNode(node)) {\n      return new_arr;\n    }\n    for (i=0; i < node.childNodes.length; i++) {\n      if (!shouldIgnoreNode(node.childNodes[i])) {\n        res = parsePlistXML(node.childNodes[i]);\n        if (null != res) new_arr.push(res);\n      }\n    }\n    return new_arr;\n\n  } else if (node.nodeName === '#text') {\n    // TODO: what should we do with text types? (CDATA sections)\n\n  } else if (node.nodeName === 'key') {\n    if (isEmptyNode(node)) {\n      return '';\n    }\n\n    invariant(\n      node.childNodes[0].nodeValue !== '__proto__',\n      '__proto__ keys can lead to prototype pollution. More details on CVE-2022-22912'\n    );\n\n    return node.childNodes[0].nodeValue;\n  } else if (node.nodeName === 'string') {\n    res = '';\n    if (isEmptyNode(node)) {\n      return res;\n    }\n    for (i=0; i < node.childNodes.length; i++) {\n      var type = node.childNodes[i].nodeType;\n      if (type === TEXT_NODE || type === CDATA_NODE) {\n        res += node.childNodes[i].nodeValue;\n      }\n    }\n    return res;\n\n  } else if (node.nodeName === 'integer') {\n    invariant(\n      !isEmptyNode(node),\n      'Cannot parse \"\" as integer.'\n    );\n    return parseInt(node.childNodes[0].nodeValue, 10);\n\n  } else if (node.nodeName === 'real') {\n    invariant(\n      !isEmptyNode(node),\n      'Cannot parse \"\" as real.'\n    );\n    res = '';\n    for (i=0; i < node.childNodes.length; i++) {\n      if (node.childNodes[i].nodeType === TEXT_NODE) {\n        res += node.childNodes[i].nodeValue;\n      }\n    }\n    return parseFloat(res);\n\n  } else if (node.nodeName === 'data') {\n    res = '';\n    if (isEmptyNode(node)) {\n      return Buffer.from(res, 'base64');\n    }\n    for (i=0; i < node.childNodes.length; i++) {\n      if (node.childNodes[i].nodeType === TEXT_NODE) {\n        res += node.childNodes[i].nodeValue.replace(/\\s+/g, '');\n      }\n    }\n    return Buffer.from(res, 'base64');\n\n  } else if (node.nodeName === 'date') {\n    invariant(\n      !isEmptyNode(node),\n      'Cannot parse \"\" as Date.'\n    )\n    return new Date(node.childNodes[0].nodeValue);\n\n  } else if (node.nodeName === 'null') {\n    return null;\n\n  } else if (node.nodeName === 'true') {\n    return true;\n\n  } else if (node.nodeName === 'false') {\n    return false;\n  } else {\n    throw new Error('Invalid PLIST tag ' + node.nodeName);\n  }\n}\n", "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Copies all enumerable own properties from `sources` to `target`\n  var assign, getValue, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function(target, ...sources) {\n    var i, key, len, source;\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  // Determines if `val` is a Function object\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  // Determines if `val` is an Object\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  // Determines if `val` is an Array\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  // Determines if `val` is an empty Array or an Object with no own properties\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  // Determines if `val` is a plain Object\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  // Gets the primitive value of an object\n  getValue = function(obj) {\n    if (isFunction(obj.valueOf)) {\n      return obj.valueOf();\n    } else {\n      return obj;\n    }\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n  module.exports.getValue = getValue;\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Implements the DOMImplementation interface\n  var XMLDOMImplementation;\n\n  module.exports = XMLDOMImplementation = class XMLDOMImplementation {\n    // Tests if the DOM implementation implements a specific feature.\n\n    // `feature` package name of the feature to test. In Level 1, the\n    //           legal values are \"HTML\" and \"XML\" (case-insensitive).\n    // `version` version number of the package name to test. \n    //           In Level 1, this is the string \"1.0\". If the version is \n    //           not specified, supporting any version of the feature will \n    //           cause the method to return true.\n    hasFeature(feature, version) {\n      return true;\n    }\n\n    // Creates a new document type declaration.\n\n    // `qualifiedName` qualified name of the document type to be created\n    // `publicId` public identifier of the external subset\n    // `systemId` system identifier of the external subset\n    createDocumentType(qualifiedName, publicId, systemId) {\n      throw new Error(\"This DOM method is not implemented.\");\n    }\n\n    // Creates a new document.\n\n    // `namespaceURI` namespace URI of the document element to create\n    // `qualifiedName` the qualified name of the document to be created\n    // `doctype` the type of document to be created or null\n    createDocument(namespaceURI, qualifiedName, doctype) {\n      throw new Error(\"This DOM method is not implemented.\");\n    }\n\n    // Creates a new HTML document.\n\n    // `title` document title\n    createHTMLDocument(title) {\n      throw new Error(\"This DOM method is not implemented.\");\n    }\n\n    // Returns a specialized object which implements the specialized APIs \n    // of the specified feature and version.\n\n    // `feature` name of the feature requested.\n    // `version` version number of the feature to test\n    getFeature(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\");\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Represents the error handler for DOM operations\n  var XMLDOMErrorHandler;\n\n  module.exports = XMLDOMErrorHandler = class XMLDOMErrorHandler {\n    // Initializes a new instance of `XMLDOMErrorHandler`\n\n    constructor() {}\n\n    // Called on the error handler when an error occurs.\n\n    // `error` the error message as a string\n    handleError(error) {\n      throw new Error(error);\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Represents a list of string entries\n  var XMLDOMStringList;\n\n  module.exports = XMLDOMStringList = (function() {\n    class XMLDOMStringList {\n      // Initializes a new instance of `XMLDOMStringList`\n      // This is just a wrapper around an ordinary\n      // JS array.\n\n      // `arr` the array of string values\n      constructor(arr) {\n        this.arr = arr || [];\n      }\n\n      // Returns the indexth item in the collection.\n\n      // `index` index into the collection\n      item(index) {\n        return this.arr[index] || null;\n      }\n\n      // Test if a string is part of this DOMStringList.\n\n      // `str` the string to look for\n      contains(str) {\n        return this.arr.indexOf(str) !== -1;\n      }\n\n    };\n\n    // Returns the number of strings in the list.\n    Object.defineProperty(XMLDOMStringList.prototype, 'length', {\n      get: function() {\n        return this.arr.length;\n      }\n    });\n\n    return XMLDOMStringList;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var XMLDOMConfiguration, XMLDOMErrorHandler, XMLDOMStringList;\n\n  XMLDOMErrorHandler = require('./XMLDOMErrorHandler');\n\n  XMLDOMStringList = require('./XMLDOMStringList');\n\n  // Implements the DOMConfiguration interface\n  module.exports = XMLDOMConfiguration = (function() {\n    class XMLDOMConfiguration {\n      constructor() {\n        var clonedSelf;\n        this.defaultParams = {\n          \"canonical-form\": false,\n          \"cdata-sections\": false,\n          \"comments\": false,\n          \"datatype-normalization\": false,\n          \"element-content-whitespace\": true,\n          \"entities\": true,\n          \"error-handler\": new XMLDOMErrorHandler(),\n          \"infoset\": true,\n          \"validate-if-schema\": false,\n          \"namespaces\": true,\n          \"namespace-declarations\": true,\n          \"normalize-characters\": false,\n          \"schema-location\": '',\n          \"schema-type\": '',\n          \"split-cdata-sections\": true,\n          \"validate\": false,\n          \"well-formed\": true\n        };\n        this.params = clonedSelf = Object.create(this.defaultParams);\n      }\n\n      // Gets the value of a parameter.\n\n      // `name` name of the parameter\n      getParameter(name) {\n        if (this.params.hasOwnProperty(name)) {\n          return this.params[name];\n        } else {\n          return null;\n        }\n      }\n\n      // Checks if setting a parameter to a specific value is supported.\n\n      // `name` name of the parameter\n      // `value` parameter value\n      canSetParameter(name, value) {\n        return true;\n      }\n\n      // Sets the value of a parameter.\n\n      // `name` name of the parameter\n      // `value` new value or null if the user wishes to unset the parameter\n      setParameter(name, value) {\n        if (value != null) {\n          return this.params[name] = value;\n        } else {\n          return delete this.params[name];\n        }\n      }\n\n    };\n\n    // Returns the list of parameter names\n    Object.defineProperty(XMLDOMConfiguration.prototype, 'parameterNames', {\n      get: function() {\n        return new XMLDOMStringList(Object.keys(this.defaultParams));\n      }\n    });\n\n    return XMLDOMConfiguration;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  module.exports = {\n    Element: 1,\n    Attribute: 2,\n    Text: 3,\n    CData: 4,\n    EntityReference: 5,\n    EntityDeclaration: 6,\n    ProcessingInstruction: 7,\n    Comment: 8,\n    Document: 9,\n    DocType: 10,\n    DocumentFragment: 11,\n    NotationDeclaration: 12,\n    // Numeric codes up to 200 are reserved to W3C for possible future use.\n    // Following are types internal to this library:\n    Declaration: 201,\n    Raw: 202,\n    AttributeDeclaration: 203,\n    ElementDeclaration: 204,\n    Dummy: 205\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLAttribute, XMLNode;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  // Represents an attribute\n  module.exports = XMLAttribute = (function() {\n    class XMLAttribute {\n      // Initializes a new instance of `XMLAttribute`\n\n      // `parent` the parent node\n      // `name` attribute target\n      // `value` attribute value\n      constructor(parent, name, value) {\n        this.parent = parent;\n        if (this.parent) {\n          this.options = this.parent.options;\n          this.stringify = this.parent.stringify;\n        }\n        if (name == null) {\n          throw new Error(\"Missing attribute name. \" + this.debugInfo(name));\n        }\n        this.name = this.stringify.name(name);\n        this.value = this.stringify.attValue(value);\n        this.type = NodeType.Attribute;\n        // DOM level 3\n        this.isId = false;\n        this.schemaTypeInfo = null;\n      }\n\n      // Creates and returns a deep clone of `this`\n      clone() {\n        return Object.create(this);\n      }\n\n      // Converts the XML fragment to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      toString(options) {\n        return this.options.writer.attribute(this, this.options.writer.filterOptions(options));\n      }\n\n      \n      // Returns debug string for this node\n      debugInfo(name) {\n        name = name || this.name;\n        if (name == null) {\n          return \"parent: <\" + this.parent.name + \">\";\n        } else {\n          return \"attribute: {\" + name + \"}, parent: <\" + this.parent.name + \">\";\n        }\n      }\n\n      isEqualNode(node) {\n        if (node.namespaceURI !== this.namespaceURI) {\n          return false;\n        }\n        if (node.prefix !== this.prefix) {\n          return false;\n        }\n        if (node.localName !== this.localName) {\n          return false;\n        }\n        if (node.value !== this.value) {\n          return false;\n        }\n        return true;\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLAttribute.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'ownerElement', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    // DOM level 3\n    Object.defineProperty(XMLAttribute.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    // DOM level 4\n    Object.defineProperty(XMLAttribute.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'specified', {\n      get: function() {\n        return true;\n      }\n    });\n\n    return XMLAttribute;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Represents a map of nodes accessed by a string key\n  var XMLNamedNodeMap;\n\n  module.exports = XMLNamedNodeMap = (function() {\n    class XMLNamedNodeMap {\n      // Initializes a new instance of `XMLNamedNodeMap`\n      // This is just a wrapper around an ordinary\n      // JS object.\n\n      // `nodes` the object containing nodes.\n      constructor(nodes) {\n        this.nodes = nodes;\n      }\n\n      // Creates and returns a deep clone of `this`\n\n      clone() {\n        // this class should not be cloned since it wraps\n        // around a given object. The calling function should check\n        // whether the wrapped object is null and supply a new object\n        // (from the clone).\n        return this.nodes = null;\n      }\n\n      // DOM Level 1\n      getNamedItem(name) {\n        return this.nodes[name];\n      }\n\n      setNamedItem(node) {\n        var oldNode;\n        oldNode = this.nodes[node.nodeName];\n        this.nodes[node.nodeName] = node;\n        return oldNode || null;\n      }\n\n      removeNamedItem(name) {\n        var oldNode;\n        oldNode = this.nodes[name];\n        delete this.nodes[name];\n        return oldNode || null;\n      }\n\n      item(index) {\n        return this.nodes[Object.keys(this.nodes)[index]] || null;\n      }\n\n      // DOM level 2 functions to be implemented later\n      getNamedItemNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\");\n      }\n\n      setNamedItemNS(node) {\n        throw new Error(\"This DOM method is not implemented.\");\n      }\n\n      removeNamedItemNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\");\n      }\n\n    };\n\n    \n    // DOM level 1\n    Object.defineProperty(XMLNamedNodeMap.prototype, 'length', {\n      get: function() {\n        return Object.keys(this.nodes).length || 0;\n      }\n    });\n\n    return XMLNamedNodeMap;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLAttribute, XMLElement, XMLNamedNodeMap, XMLNode, getValue, isFunction, isObject,\n    hasProp = {}.hasOwnProperty;\n\n  ({isObject, isFunction, getValue} = require('./Utility'));\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  // Represents an element of the XML document\n  module.exports = XMLElement = (function() {\n    class XMLElement extends XMLNode {\n      // Initializes a new instance of `XMLElement`\n\n      // `parent` the parent node\n      // `name` element name\n      // `attributes` an object containing name/value pairs of attributes\n      constructor(parent, name, attributes) {\n        var child, j, len, ref;\n        super(parent);\n        if (name == null) {\n          throw new Error(\"Missing element name. \" + this.debugInfo());\n        }\n        this.name = this.stringify.name(name);\n        this.type = NodeType.Element;\n        this.attribs = {};\n        this.schemaTypeInfo = null;\n        if (attributes != null) {\n          this.attribute(attributes);\n        }\n        // set properties if this is the root node\n        if (parent.type === NodeType.Document) {\n          this.isRoot = true;\n          this.documentObject = parent;\n          parent.rootObject = this;\n          // set dtd name\n          if (parent.children) {\n            ref = parent.children;\n            for (j = 0, len = ref.length; j < len; j++) {\n              child = ref[j];\n              if (child.type === NodeType.DocType) {\n                child.name = this.name;\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      // Creates and returns a deep clone of `this`\n\n      clone() {\n        var att, attName, clonedSelf, ref;\n        clonedSelf = Object.create(this);\n        // remove document element\n        if (clonedSelf.isRoot) {\n          clonedSelf.documentObject = null;\n        }\n        // clone attributes\n        clonedSelf.attribs = {};\n        ref = this.attribs;\n        for (attName in ref) {\n          if (!hasProp.call(ref, attName)) continue;\n          att = ref[attName];\n          clonedSelf.attribs[attName] = att.clone();\n        }\n        // clone child nodes\n        clonedSelf.children = [];\n        this.children.forEach(function(child) {\n          var clonedChild;\n          clonedChild = child.clone();\n          clonedChild.parent = clonedSelf;\n          return clonedSelf.children.push(clonedChild);\n        });\n        return clonedSelf;\n      }\n\n      // Adds or modifies an attribute\n\n      // `name` attribute name\n      // `value` attribute value\n      attribute(name, value) {\n        var attName, attValue;\n        if (name != null) {\n          name = getValue(name);\n        }\n        if (isObject(name)) { // expand if object\n          for (attName in name) {\n            if (!hasProp.call(name, attName)) continue;\n            attValue = name[attName];\n            this.attribute(attName, attValue);\n          }\n        } else {\n          if (isFunction(value)) {\n            value = value.apply();\n          }\n          if (this.options.keepNullAttributes && (value == null)) {\n            this.attribs[name] = new XMLAttribute(this, name, \"\");\n          } else if (value != null) {\n            this.attribs[name] = new XMLAttribute(this, name, value);\n          }\n        }\n        return this;\n      }\n\n      // Removes an attribute\n\n      // `name` attribute name\n      removeAttribute(name) {\n        var attName, j, len;\n        // Also defined in DOM level 1\n        // removeAttribute(name) removes an attribute by name.\n        if (name == null) {\n          throw new Error(\"Missing attribute name. \" + this.debugInfo());\n        }\n        name = getValue(name);\n        if (Array.isArray(name)) { // expand if array\n          for (j = 0, len = name.length; j < len; j++) {\n            attName = name[j];\n            delete this.attribs[attName];\n          }\n        } else {\n          delete this.attribs[name];\n        }\n        return this;\n      }\n\n      // Converts the XML fragment to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      // `options.allowEmpty` do not self close empty element tags\n      toString(options) {\n        return this.options.writer.element(this, this.options.writer.filterOptions(options));\n      }\n\n      // Aliases\n      att(name, value) {\n        return this.attribute(name, value);\n      }\n\n      a(name, value) {\n        return this.attribute(name, value);\n      }\n\n      // DOM Level 1\n      getAttribute(name) {\n        if (this.attribs.hasOwnProperty(name)) {\n          return this.attribs[name].value;\n        } else {\n          return null;\n        }\n      }\n\n      setAttribute(name, value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getAttributeNode(name) {\n        if (this.attribs.hasOwnProperty(name)) {\n          return this.attribs[name];\n        } else {\n          return null;\n        }\n      }\n\n      setAttributeNode(newAttr) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      removeAttributeNode(oldAttr) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementsByTagName(name) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM Level 2\n      getAttributeNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      setAttributeNS(namespaceURI, qualifiedName, value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      removeAttributeNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getAttributeNodeNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      setAttributeNodeNS(newAttr) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementsByTagNameNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      hasAttribute(name) {\n        return this.attribs.hasOwnProperty(name);\n      }\n\n      hasAttributeNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM Level 3\n      setIdAttribute(name, isId) {\n        if (this.attribs.hasOwnProperty(name)) {\n          return this.attribs[name].isId;\n        } else {\n          return isId;\n        }\n      }\n\n      setIdAttributeNS(namespaceURI, localName, isId) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      setIdAttributeNode(idAttr, isId) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM Level 4\n      getElementsByTagName(tagname) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementsByTagNameNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementsByClassName(classNames) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      isEqualNode(node) {\n        var i, j, ref;\n        if (!super.isEqualNode(node)) {\n          return false;\n        }\n        if (node.namespaceURI !== this.namespaceURI) {\n          return false;\n        }\n        if (node.prefix !== this.prefix) {\n          return false;\n        }\n        if (node.localName !== this.localName) {\n          return false;\n        }\n        if (node.attribs.length !== this.attribs.length) {\n          return false;\n        }\n        for (i = j = 0, ref = this.attribs.length - 1; (0 <= ref ? j <= ref : j >= ref); i = 0 <= ref ? ++j : --j) {\n          if (!this.attribs[i].isEqualNode(node.attribs[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLElement.prototype, 'tagName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    // DOM level 4\n    Object.defineProperty(XMLElement.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'id', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'className', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'classList', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'attributes', {\n      get: function() {\n        if (!this.attributeMap || !this.attributeMap.nodes) {\n          this.attributeMap = new XMLNamedNodeMap(this.attribs);\n        }\n        return this.attributeMap;\n      }\n    });\n\n    return XMLElement;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var XMLCharacterData, XMLNode;\n\n  XMLNode = require('./XMLNode');\n\n  // Represents a character data node\n  module.exports = XMLCharacterData = (function() {\n    class XMLCharacterData extends XMLNode {\n      // Initializes a new instance of `XMLCharacterData`\n\n      constructor(parent) {\n        super(parent);\n        this.value = '';\n      }\n\n      \n      // Creates and returns a deep clone of `this`\n      clone() {\n        return Object.create(this);\n      }\n\n      // DOM level 1 functions to be implemented later\n      substringData(offset, count) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      appendData(arg) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      insertData(offset, arg) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      deleteData(offset, count) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      replaceData(offset, count, arg) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      isEqualNode(node) {\n        if (!super.isEqualNode(node)) {\n          return false;\n        }\n        if (node.data !== this.data) {\n          return false;\n        }\n        return true;\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLCharacterData.prototype, 'data', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'length', {\n      get: function() {\n        return this.value.length;\n      }\n    });\n\n    // DOM level 3\n    Object.defineProperty(XMLCharacterData.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    return XMLCharacterData;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLCData, XMLCharacterData;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  // Represents a  CDATA node\n  module.exports = XMLCData = class XMLCData extends XMLCharacterData {\n    // Initializes a new instance of `XMLCData`\n\n    // `text` CDATA text\n    constructor(parent, text) {\n      super(parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text. \" + this.debugInfo());\n      }\n      this.name = \"#cdata-section\";\n      this.type = NodeType.CData;\n      this.value = this.stringify.cdata(text);\n    }\n\n    // Creates and returns a deep clone of `this`\n    clone() {\n      return Object.create(this);\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.cdata(this, this.options.writer.filterOptions(options));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLCharacterData, XMLComment;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  // Represents a comment node\n  module.exports = XMLComment = class XMLComment extends XMLCharacterData {\n    // Initializes a new instance of `XMLComment`\n\n    // `text` comment text\n    constructor(parent, text) {\n      super(parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text. \" + this.debugInfo());\n      }\n      this.name = \"#comment\";\n      this.type = NodeType.Comment;\n      this.value = this.stringify.comment(text);\n    }\n\n    // Creates and returns a deep clone of `this`\n    clone() {\n      return Object.create(this);\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.comment(this, this.options.writer.filterOptions(options));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDeclaration, XMLNode, isObject;\n\n  ({isObject} = require('./Utility'));\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  // Represents the XML declaration\n  module.exports = XMLDeclaration = class XMLDeclaration extends XMLNode {\n    // Initializes a new instance of `XMLDeclaration`\n\n    // `parent` the document object\n\n    // `version` A version number string, e.g. 1.0\n    // `encoding` Encoding declaration, e.g. UTF-8\n    // `standalone` standalone document declaration: true or false\n    constructor(parent, version, encoding, standalone) {\n      super(parent);\n      // arguments may also be passed as an object\n      if (isObject(version)) {\n        ({version, encoding, standalone} = version);\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.type = NodeType.Declaration;\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    // Converts to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.declaration(this, this.options.writer.filterOptions(options));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDTDAttList, XMLNode;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  // Represents an attribute list\n  module.exports = XMLDTDAttList = class XMLDTDAttList extends XMLNode {\n    // Initializes a new instance of `XMLDTDAttList`\n\n    // `parent` the parent `XMLDocType` element\n    // `elementName` the name of the element containing this attribute\n    // `attributeName` attribute name\n    // `attributeType` type of the attribute\n    // `defaultValueType` default value type (either #REQUIRED, #IMPLIED,\n    //                    #FIXED or #DEFAULT)\n    // `defaultValue` default value of the attribute\n    //                (only used for #FIXED or #DEFAULT)\n    constructor(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      super(parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name. \" + this.debugInfo(elementName));\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type. \" + this.debugInfo(elementName));\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default. \" + this.debugInfo(elementName));\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      this.elementName = this.stringify.name(elementName);\n      this.type = NodeType.AttributeDeclaration;\n      this.attributeName = this.stringify.name(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      if (defaultValue) {\n        this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      }\n      this.defaultValueType = defaultValueType;\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.dtdAttList(this, this.options.writer.filterOptions(options));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDTDEntity, XMLNode, isObject;\n\n  ({isObject} = require('./Utility'));\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  // Represents an entity declaration in the DTD\n  module.exports = XMLDTDEntity = (function() {\n    class XMLDTDEntity extends XMLNode {\n      // Initializes a new instance of `XMLDTDEntity`\n\n      // `parent` the parent `XMLDocType` element\n      // `pe` whether this is a parameter entity or a general entity\n      //      defaults to `false` (general entity)\n      // `name` the name of the entity\n      // `value` internal entity value or an object with external entity details\n      // `value.pubID` public identifier\n      // `value.sysID` system identifier\n      // `value.nData` notation declaration\n      constructor(parent, pe, name, value) {\n        super(parent);\n        if (name == null) {\n          throw new Error(\"Missing DTD entity name. \" + this.debugInfo(name));\n        }\n        if (value == null) {\n          throw new Error(\"Missing DTD entity value. \" + this.debugInfo(name));\n        }\n        this.pe = !!pe;\n        this.name = this.stringify.name(name);\n        this.type = NodeType.EntityDeclaration;\n        if (!isObject(value)) {\n          this.value = this.stringify.dtdEntityValue(value);\n          this.internal = true;\n        } else {\n          if (!value.pubID && !value.sysID) {\n            throw new Error(\"Public and/or system identifiers are required for an external entity. \" + this.debugInfo(name));\n          }\n          if (value.pubID && !value.sysID) {\n            throw new Error(\"System identifier is required for a public external entity. \" + this.debugInfo(name));\n          }\n          this.internal = false;\n          if (value.pubID != null) {\n            this.pubID = this.stringify.dtdPubID(value.pubID);\n          }\n          if (value.sysID != null) {\n            this.sysID = this.stringify.dtdSysID(value.sysID);\n          }\n          if (value.nData != null) {\n            this.nData = this.stringify.dtdNData(value.nData);\n          }\n          if (this.pe && this.nData) {\n            throw new Error(\"Notation declaration is not allowed in a parameter entity. \" + this.debugInfo(name));\n          }\n        }\n      }\n\n      // Converts the XML fragment to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      toString(options) {\n        return this.options.writer.dtdEntity(this, this.options.writer.filterOptions(options));\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLDTDEntity.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'notationName', {\n      get: function() {\n        return this.nData || null;\n      }\n    });\n\n    // DOM level 3\n    Object.defineProperty(XMLDTDEntity.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlVersion', {\n      get: function() {\n        return null;\n      }\n    });\n\n    return XMLDTDEntity;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDTDElement, XMLNode;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  // Represents an attribute\n  module.exports = XMLDTDElement = class XMLDTDElement extends XMLNode {\n    // Initializes a new instance of `XMLDTDElement`\n\n    // `parent` the parent `XMLDocType` element\n    // `name` element name\n    // `value` element content (defaults to #PCDATA)\n    constructor(parent, name, value) {\n      super(parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.ElementDeclaration;\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.dtdElement(this, this.options.writer.filterOptions(options));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDTDNotation, XMLNode;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  // Represents a NOTATION entry in the DTD\n  module.exports = XMLDTDNotation = (function() {\n    class XMLDTDNotation extends XMLNode {\n      // Initializes a new instance of `XMLDTDNotation`\n\n      // `parent` the parent `XMLDocType` element\n      // `name` the name of the notation\n      // `value` an object with external entity details\n      // `value.pubID` public identifier\n      // `value.sysID` system identifier\n      constructor(parent, name, value) {\n        super(parent);\n        if (name == null) {\n          throw new Error(\"Missing DTD notation name. \" + this.debugInfo(name));\n        }\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public or system identifiers are required for an external entity. \" + this.debugInfo(name));\n        }\n        this.name = this.stringify.name(name);\n        this.type = NodeType.NotationDeclaration;\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n      }\n\n      // Converts the XML fragment to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      toString(options) {\n        return this.options.writer.dtdNotation(this, this.options.writer.filterOptions(options));\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLDTDNotation.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    return XMLDTDNotation;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNamedNodeMap, XMLNode, isObject;\n\n  ({isObject} = require('./Utility'));\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  // Represents doctype declaration\n  module.exports = XMLDocType = (function() {\n    class XMLDocType extends XMLNode {\n      // Initializes a new instance of `XMLDocType`\n\n      // `parent` the document object\n\n      // `pubID` public identifier of the external subset\n      // `sysID` system identifier of the external subset\n      constructor(parent, pubID, sysID) {\n        var child, i, len, ref;\n        super(parent);\n        this.type = NodeType.DocType;\n        // set DTD name to the name of the root node\n        if (parent.children) {\n          ref = parent.children;\n          for (i = 0, len = ref.length; i < len; i++) {\n            child = ref[i];\n            if (child.type === NodeType.Element) {\n              this.name = child.name;\n              break;\n            }\n          }\n        }\n        this.documentObject = parent;\n        // arguments may also be passed as an object\n        if (isObject(pubID)) {\n          ({pubID, sysID} = pubID);\n        }\n        if (sysID == null) {\n          [sysID, pubID] = [pubID, sysID];\n        }\n        if (pubID != null) {\n          this.pubID = this.stringify.dtdPubID(pubID);\n        }\n        if (sysID != null) {\n          this.sysID = this.stringify.dtdSysID(sysID);\n        }\n      }\n\n      // Creates an element type declaration\n\n      // `name` element name\n      // `value` element content (defaults to #PCDATA)\n      element(name, value) {\n        var child;\n        child = new XMLDTDElement(this, name, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates an attribute declaration\n\n      // `elementName` the name of the element containing this attribute\n      // `attributeName` attribute name\n      // `attributeType` type of the attribute (defaults to CDATA)\n      // `defaultValueType` default value type (either #REQUIRED, #IMPLIED, #FIXED or\n      //                    #DEFAULT) (defaults to #IMPLIED)\n      // `defaultValue` default value of the attribute\n      //                (only used for #FIXED or #DEFAULT)\n      attList(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n        var child;\n        child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates a general entity declaration\n\n      // `name` the name of the entity\n      // `value` internal entity value or an object with external entity details\n      // `value.pubID` public identifier\n      // `value.sysID` system identifier\n      // `value.nData` notation declaration\n      entity(name, value) {\n        var child;\n        child = new XMLDTDEntity(this, false, name, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates a parameter entity declaration\n\n      // `name` the name of the entity\n      // `value` internal entity value or an object with external entity details\n      // `value.pubID` public identifier\n      // `value.sysID` system identifier\n      pEntity(name, value) {\n        var child;\n        child = new XMLDTDEntity(this, true, name, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates a NOTATION declaration\n\n      // `name` the name of the notation\n      // `value` an object with external entity details\n      // `value.pubID` public identifier\n      // `value.sysID` system identifier\n      notation(name, value) {\n        var child;\n        child = new XMLDTDNotation(this, name, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Converts to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      toString(options) {\n        return this.options.writer.docType(this, this.options.writer.filterOptions(options));\n      }\n\n      // Aliases\n      ele(name, value) {\n        return this.element(name, value);\n      }\n\n      att(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n        return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      }\n\n      ent(name, value) {\n        return this.entity(name, value);\n      }\n\n      pent(name, value) {\n        return this.pEntity(name, value);\n      }\n\n      not(name, value) {\n        return this.notation(name, value);\n      }\n\n      up() {\n        return this.root() || this.documentObject;\n      }\n\n      isEqualNode(node) {\n        if (!super.isEqualNode(node)) {\n          return false;\n        }\n        if (node.name !== this.name) {\n          return false;\n        }\n        if (node.publicId !== this.publicId) {\n          return false;\n        }\n        if (node.systemId !== this.systemId) {\n          return false;\n        }\n        return true;\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLDocType.prototype, 'entities', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if ((child.type === NodeType.EntityDeclaration) && !child.pe) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'notations', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.NotationDeclaration) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    // DOM level 2\n    Object.defineProperty(XMLDocType.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'internalSubset', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    return XMLDocType;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLNode, XMLRaw;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  // Represents a  raw node\n  module.exports = XMLRaw = class XMLRaw extends XMLNode {\n    // Initializes a new instance of `XMLRaw`\n\n    // `text` raw text\n    constructor(parent, text) {\n      super(parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text. \" + this.debugInfo());\n      }\n      this.type = NodeType.Raw;\n      this.value = this.stringify.raw(text);\n    }\n\n    // Creates and returns a deep clone of `this`\n    clone() {\n      return Object.create(this);\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.raw(this, this.options.writer.filterOptions(options));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLCharacterData, XMLText;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  // Represents a text node\n  module.exports = XMLText = (function() {\n    class XMLText extends XMLCharacterData {\n      // Initializes a new instance of `XMLText`\n\n      // `text` element text\n      constructor(parent, text) {\n        super(parent);\n        if (text == null) {\n          throw new Error(\"Missing element text. \" + this.debugInfo());\n        }\n        this.name = \"#text\";\n        this.type = NodeType.Text;\n        this.value = this.stringify.text(text);\n      }\n\n      // Creates and returns a deep clone of `this`\n      clone() {\n        return Object.create(this);\n      }\n\n      // Converts the XML fragment to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      toString(options) {\n        return this.options.writer.text(this, this.options.writer.filterOptions(options));\n      }\n\n      // DOM level 1 functions to be implemented later\n      splitText(offset) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM level 3 functions to be implemented later\n      replaceWholeText(content) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n    };\n\n    // DOM level 3\n    Object.defineProperty(XMLText.prototype, 'isElementContentWhitespace', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLText.prototype, 'wholeText', {\n      get: function() {\n        var next, prev, str;\n        str = '';\n        prev = this.previousSibling;\n        while (prev) {\n          str = prev.data + str;\n          prev = prev.previousSibling;\n        }\n        str += this.data;\n        next = this.nextSibling;\n        while (next) {\n          str = str + next.data;\n          next = next.nextSibling;\n        }\n        return str;\n      }\n    });\n\n    return XMLText;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLCharacterData, XMLProcessingInstruction;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  // Represents a processing instruction\n  module.exports = XMLProcessingInstruction = class XMLProcessingInstruction extends XMLCharacterData {\n    // Initializes a new instance of `XMLProcessingInstruction`\n\n    // `parent` the parent node\n    // `target` instruction target\n    // `value` instruction value\n    constructor(parent, target, value) {\n      super(parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target. \" + this.debugInfo());\n      }\n      this.type = NodeType.ProcessingInstruction;\n      this.target = this.stringify.insTarget(target);\n      this.name = this.target;\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    // Creates and returns a deep clone of `this`\n    clone() {\n      return Object.create(this);\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return this.options.writer.processingInstruction(this, this.options.writer.filterOptions(options));\n    }\n\n    isEqualNode(node) {\n      if (!super.isEqualNode(node)) {\n        return false;\n      }\n      if (node.target !== this.target) {\n        return false;\n      }\n      return true;\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDummy, XMLNode;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  // Represents a  raw node\n  module.exports = XMLDummy = class XMLDummy extends XMLNode {\n    // Initializes a new instance of `XMLDummy`\n\n    // `XMLDummy` is a special node representing a node with \n    // a null value. Dummy nodes are created while recursively\n    // building the XML tree. Simply skipping null values doesn't\n    // work because that would break the recursive chain.\n    constructor(parent) {\n      super(parent);\n      this.type = NodeType.Dummy;\n    }\n\n    // Creates and returns a deep clone of `this`\n    clone() {\n      return Object.create(this);\n    }\n\n    // Converts the XML fragment to string\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation for pretty print\n    // `options.offset` how many indentations to add to every line for pretty print\n    // `options.newline` newline sequence for pretty print\n    toString(options) {\n      return '';\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Represents a list of nodes\n  var XMLNodeList;\n\n  module.exports = XMLNodeList = (function() {\n    class XMLNodeList {\n      // Initializes a new instance of `XMLNodeList`\n      // This is just a wrapper around an ordinary\n      // JS array.\n\n      // `nodes` the array containing nodes.\n      constructor(nodes) {\n        this.nodes = nodes;\n      }\n\n      // Creates and returns a deep clone of `this`\n\n      clone() {\n        // this class should not be cloned since it wraps\n        // around a given array. The calling function should check\n        // whether the wrapped array is null and supply a new array\n        // (from the clone).\n        return this.nodes = null;\n      }\n\n      // DOM Level 1\n      item(index) {\n        return this.nodes[index] || null;\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLNodeList.prototype, 'length', {\n      get: function() {\n        return this.nodes.length || 0;\n      }\n    });\n\n    return XMLNodeList;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  module.exports = {\n    Disconnected: 1,\n    Preceding: 2,\n    Following: 4,\n    Contains: 8,\n    ContainedBy: 16,\n    ImplementationSpecific: 32\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var DocumentPosition, NodeType, XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLNamedNodeMap, XMLNode, XMLNodeList, XMLProcessingInstruction, XMLRaw, XMLText, getValue, isEmpty, isFunction, isObject,\n    hasProp = {}.hasOwnProperty,\n    splice = [].splice;\n\n  ({isObject, isFunction, isEmpty, getValue} = require('./Utility'));\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  XMLDummy = null;\n\n  NodeType = null;\n\n  XMLNodeList = null;\n\n  XMLNamedNodeMap = null;\n\n  DocumentPosition = null;\n\n  // Represents a generic XMl element\n  module.exports = XMLNode = (function() {\n    class XMLNode {\n      // Initializes a new instance of `XMLNode`\n\n      // `parent` the parent node\n      constructor(parent1) {\n        this.parent = parent1;\n        if (this.parent) {\n          this.options = this.parent.options;\n          this.stringify = this.parent.stringify;\n        }\n        this.value = null;\n        this.children = [];\n        this.baseURI = null;\n        // first execution, load dependencies that are otherwise\n        // circular (so we can't load them at the top)\n        if (!XMLElement) {\n          XMLElement = require('./XMLElement');\n          XMLCData = require('./XMLCData');\n          XMLComment = require('./XMLComment');\n          XMLDeclaration = require('./XMLDeclaration');\n          XMLDocType = require('./XMLDocType');\n          XMLRaw = require('./XMLRaw');\n          XMLText = require('./XMLText');\n          XMLProcessingInstruction = require('./XMLProcessingInstruction');\n          XMLDummy = require('./XMLDummy');\n          NodeType = require('./NodeType');\n          XMLNodeList = require('./XMLNodeList');\n          XMLNamedNodeMap = require('./XMLNamedNodeMap');\n          DocumentPosition = require('./DocumentPosition');\n        }\n      }\n\n      \n      // Sets the parent node of this node and its children recursively\n\n      // `parent` the parent node\n      setParent(parent) {\n        var child, j, len, ref1, results;\n        this.parent = parent;\n        if (parent) {\n          this.options = parent.options;\n          this.stringify = parent.stringify;\n        }\n        ref1 = this.children;\n        results = [];\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          results.push(child.setParent(this));\n        }\n        return results;\n      }\n\n      // Creates a child element node\n\n      // `name` node name or an object describing the XML tree\n      // `attributes` an object containing name/value pairs of attributes\n      // `text` element text\n      element(name, attributes, text) {\n        var childNode, item, j, k, key, lastChild, len, len1, val;\n        lastChild = null;\n        if (attributes === null && (text == null)) {\n          [attributes, text] = [{}, null];\n        }\n        if (attributes == null) {\n          attributes = {};\n        }\n        attributes = getValue(attributes);\n        // swap argument order: text <-> attributes\n        if (!isObject(attributes)) {\n          [text, attributes] = [attributes, text];\n        }\n        if (name != null) {\n          name = getValue(name);\n        }\n        // expand if array\n        if (Array.isArray(name)) {\n          for (j = 0, len = name.length; j < len; j++) {\n            item = name[j];\n            lastChild = this.element(item);\n          }\n        // evaluate if function\n        } else if (isFunction(name)) {\n          lastChild = this.element(name.apply());\n        // expand if object\n        } else if (isObject(name)) {\n          for (key in name) {\n            if (!hasProp.call(name, key)) continue;\n            val = name[key];\n            if (isFunction(val)) {\n              // evaluate if function\n              val = val.apply();\n            }\n            // assign attributes\n            if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n              lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n            // skip empty arrays\n            } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {\n              lastChild = this.dummy();\n            // empty objects produce one node\n            } else if (isObject(val) && isEmpty(val)) {\n              lastChild = this.element(key);\n            // skip null and undefined nodes\n            } else if (!this.options.keepNullNodes && (val == null)) {\n              lastChild = this.dummy();\n            \n            // expand list by creating child nodes\n            } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n              for (k = 0, len1 = val.length; k < len1; k++) {\n                item = val[k];\n                childNode = {};\n                childNode[key] = item;\n                lastChild = this.element(childNode);\n              }\n            \n            // expand child nodes under parent\n            } else if (isObject(val)) {\n              // if the key is #text expand child nodes under this node to support mixed content\n              if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {\n                lastChild = this.element(val);\n              } else {\n                lastChild = this.element(key);\n                lastChild.element(val);\n              }\n            } else {\n              \n              // text node\n              lastChild = this.element(key, val);\n            }\n          }\n        // skip null nodes\n        } else if (!this.options.keepNullNodes && text === null) {\n          lastChild = this.dummy();\n        } else {\n          // text node\n          if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n            lastChild = this.text(text);\n          // cdata node\n          } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n            lastChild = this.cdata(text);\n          // comment node\n          } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n            lastChild = this.comment(text);\n          // raw text node\n          } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n            lastChild = this.raw(text);\n          // processing instruction\n          } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n            lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n          } else {\n            // element node\n            lastChild = this.node(name, attributes, text);\n          }\n        }\n        if (lastChild == null) {\n          throw new Error(\"Could not create any elements with: \" + name + \". \" + this.debugInfo());\n        }\n        return lastChild;\n      }\n\n      // Creates a child element node before the current node\n\n      // `name` node name or an object describing the XML tree\n      // `attributes` an object containing name/value pairs of attributes\n      // `text` element text\n      insertBefore(name, attributes, text) {\n        var child, i, newChild, refChild, removed;\n        // DOM level 1\n        // insertBefore(newChild, refChild) inserts the child node newChild before refChild\n        if (name != null ? name.type : void 0) {\n          newChild = name;\n          refChild = attributes;\n          newChild.setParent(this);\n          if (refChild) {\n            // temporarily remove children starting *with* refChild\n            i = children.indexOf(refChild);\n            removed = children.splice(i);\n            \n            // add the new child\n            children.push(newChild);\n            \n            // add back removed children after new child\n            Array.prototype.push.apply(children, removed);\n          } else {\n            children.push(newChild);\n          }\n          return newChild;\n        } else {\n          if (this.isRoot) {\n            throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n          }\n          \n          // temporarily remove children starting *with* this\n          i = this.parent.children.indexOf(this);\n          removed = this.parent.children.splice(i);\n          \n          // add the new child\n          child = this.parent.element(name, attributes, text);\n          \n          // add back removed children after new child\n          Array.prototype.push.apply(this.parent.children, removed);\n          return child;\n        }\n      }\n\n      // Creates a child element node after the current node\n\n      // `name` node name or an object describing the XML tree\n      // `attributes` an object containing name/value pairs of attributes\n      // `text` element text\n      insertAfter(name, attributes, text) {\n        var child, i, removed;\n        if (this.isRoot) {\n          throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n        }\n        \n        // temporarily remove children starting *after* this\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i + 1);\n        \n        // add the new child\n        child = this.parent.element(name, attributes, text);\n        \n        // add back removed children after new child\n        Array.prototype.push.apply(this.parent.children, removed);\n        return child;\n      }\n\n      // Deletes a child element node\n\n      remove() {\n        var i, ref1;\n        if (this.isRoot) {\n          throw new Error(\"Cannot remove the root element. \" + this.debugInfo());\n        }\n        i = this.parent.children.indexOf(this);\n        splice.apply(this.parent.children, [i, i - i + 1].concat(ref1 = [])), ref1;\n        return this.parent;\n      }\n\n      // Creates a node\n\n      // `name` name of the node\n      // `attributes` an object containing name/value pairs of attributes\n      // `text` element text\n      node(name, attributes, text) {\n        var child;\n        if (name != null) {\n          name = getValue(name);\n        }\n        attributes || (attributes = {});\n        attributes = getValue(attributes);\n        // swap argument order: text <-> attributes\n        if (!isObject(attributes)) {\n          [text, attributes] = [attributes, text];\n        }\n        child = new XMLElement(this, name, attributes);\n        if (text != null) {\n          child.text(text);\n        }\n        this.children.push(child);\n        return child;\n      }\n\n      // Creates a text node\n\n      // `value` element text\n      text(value) {\n        var child;\n        if (isObject(value)) {\n          this.element(value);\n        }\n        child = new XMLText(this, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates a CDATA node\n\n      // `value` element text without CDATA delimiters\n      cdata(value) {\n        var child;\n        child = new XMLCData(this, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates a comment node\n\n      // `value` comment text\n      comment(value) {\n        var child;\n        child = new XMLComment(this, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Creates a comment node before the current node\n\n      // `value` comment text\n      commentBefore(value) {\n        var child, i, removed;\n        // temporarily remove children starting *with* this\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i);\n        // add the new child\n        child = this.parent.comment(value);\n        // add back removed children after new child\n        Array.prototype.push.apply(this.parent.children, removed);\n        return this;\n      }\n\n      // Creates a comment node after the current node\n\n      // `value` comment text\n      commentAfter(value) {\n        var child, i, removed;\n        // temporarily remove children starting *after* this\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i + 1);\n        // add the new child\n        child = this.parent.comment(value);\n        // add back removed children after new child\n        Array.prototype.push.apply(this.parent.children, removed);\n        return this;\n      }\n\n      // Adds unescaped raw text\n\n      // `value` text\n      raw(value) {\n        var child;\n        child = new XMLRaw(this, value);\n        this.children.push(child);\n        return this;\n      }\n\n      // Adds a dummy node\n      dummy() {\n        var child;\n        child = new XMLDummy(this);\n        // Normally when a new node is created it is added to the child node collection.\n        // However, dummy nodes are never added to the XML tree. They are created while\n        // converting JS objects to XML nodes in order not to break the recursive function\n        // chain. They can be thought of as invisible nodes. They can be traversed through\n        // by using prev(), next(), up(), etc. functions but they do not exists in the tree.\n\n        // @children.push child\n        return child;\n      }\n\n      // Adds a processing instruction\n\n      // `target` instruction target\n      // `value` instruction value\n      instruction(target, value) {\n        var insTarget, insValue, instruction, j, len;\n        if (target != null) {\n          target = getValue(target);\n        }\n        if (value != null) {\n          value = getValue(value);\n        }\n        if (Array.isArray(target)) { // expand if array\n          for (j = 0, len = target.length; j < len; j++) {\n            insTarget = target[j];\n            this.instruction(insTarget);\n          }\n        } else if (isObject(target)) { // expand if object\n          for (insTarget in target) {\n            if (!hasProp.call(target, insTarget)) continue;\n            insValue = target[insTarget];\n            this.instruction(insTarget, insValue);\n          }\n        } else {\n          if (isFunction(value)) {\n            value = value.apply();\n          }\n          instruction = new XMLProcessingInstruction(this, target, value);\n          this.children.push(instruction);\n        }\n        return this;\n      }\n\n      // Creates a processing instruction node before the current node\n\n      // `target` instruction target\n      // `value` instruction value\n      instructionBefore(target, value) {\n        var child, i, removed;\n        // temporarily remove children starting *with* this\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i);\n        // add the new child\n        child = this.parent.instruction(target, value);\n        // add back removed children after new child\n        Array.prototype.push.apply(this.parent.children, removed);\n        return this;\n      }\n\n      // Creates a processing instruction node after the current node\n\n      // `target` instruction target\n      // `value` instruction value\n      instructionAfter(target, value) {\n        var child, i, removed;\n        // temporarily remove children starting *after* this\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i + 1);\n        // add the new child\n        child = this.parent.instruction(target, value);\n        // add back removed children after new child\n        Array.prototype.push.apply(this.parent.children, removed);\n        return this;\n      }\n\n      // Creates the xml declaration\n\n      // `version` A version number string, e.g. 1.0\n      // `encoding` Encoding declaration, e.g. UTF-8\n      // `standalone` standalone document declaration: true or false\n      declaration(version, encoding, standalone) {\n        var doc, xmldec;\n        doc = this.document();\n        xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n        // Replace XML declaration if exists, otherwise insert at top\n        if (doc.children.length === 0) {\n          doc.children.unshift(xmldec);\n        } else if (doc.children[0].type === NodeType.Declaration) {\n          doc.children[0] = xmldec;\n        } else {\n          doc.children.unshift(xmldec);\n        }\n        return doc.root() || doc;\n      }\n\n      // Creates the document type declaration\n\n      // `pubID` the public identifier of the external subset\n      // `sysID` the system identifier of the external subset\n      dtd(pubID, sysID) {\n        var child, doc, doctype, i, j, k, len, len1, ref1, ref2;\n        doc = this.document();\n        doctype = new XMLDocType(doc, pubID, sysID);\n        ref1 = doc.children;\n        // Replace DTD if exists\n        for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n          child = ref1[i];\n          if (child.type === NodeType.DocType) {\n            doc.children[i] = doctype;\n            return doctype;\n          }\n        }\n        ref2 = doc.children;\n        // insert before root node if the root node exists\n        for (i = k = 0, len1 = ref2.length; k < len1; i = ++k) {\n          child = ref2[i];\n          if (child.isRoot) {\n            doc.children.splice(i, 0, doctype);\n            return doctype;\n          }\n        }\n        // otherwise append to end\n        doc.children.push(doctype);\n        return doctype;\n      }\n\n      // Gets the parent node\n      up() {\n        if (this.isRoot) {\n          throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n        }\n        return this.parent;\n      }\n\n      // Gets the root node\n      root() {\n        var node;\n        node = this;\n        while (node) {\n          if (node.type === NodeType.Document) {\n            return node.rootObject;\n          } else if (node.isRoot) {\n            return node;\n          } else {\n            node = node.parent;\n          }\n        }\n      }\n\n      // Gets the node representing the XML document\n      document() {\n        var node;\n        node = this;\n        while (node) {\n          if (node.type === NodeType.Document) {\n            return node;\n          } else {\n            node = node.parent;\n          }\n        }\n      }\n\n      // Ends the document and converts string\n      end(options) {\n        return this.document().end(options);\n      }\n\n      // Gets the previous node\n      prev() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        if (i < 1) {\n          throw new Error(\"Already at the first node. \" + this.debugInfo());\n        }\n        return this.parent.children[i - 1];\n      }\n\n      // Gets the next node\n      next() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        if (i === -1 || i === this.parent.children.length - 1) {\n          throw new Error(\"Already at the last node. \" + this.debugInfo());\n        }\n        return this.parent.children[i + 1];\n      }\n\n      // Imports cloned root from another XML document\n\n      // `doc` the XML document to insert nodes from\n      importDocument(doc) {\n        var child, clonedRoot, j, len, ref1;\n        clonedRoot = doc.root().clone();\n        clonedRoot.parent = this;\n        clonedRoot.isRoot = false;\n        this.children.push(clonedRoot);\n        // set properties if imported element becomes the root node\n        if (this.type === NodeType.Document) {\n          clonedRoot.isRoot = true;\n          clonedRoot.documentObject = this;\n          this.rootObject = clonedRoot;\n          // set dtd name\n          if (this.children) {\n            ref1 = this.children;\n            for (j = 0, len = ref1.length; j < len; j++) {\n              child = ref1[j];\n              if (child.type === NodeType.DocType) {\n                child.name = clonedRoot.name;\n                break;\n              }\n            }\n          }\n        }\n        return this;\n      }\n\n      \n      // Returns debug string for this node\n      debugInfo(name) {\n        var ref1, ref2;\n        name = name || this.name;\n        if ((name == null) && !((ref1 = this.parent) != null ? ref1.name : void 0)) {\n          return \"\";\n        } else if (name == null) {\n          return \"parent: <\" + this.parent.name + \">\";\n        } else if (!((ref2 = this.parent) != null ? ref2.name : void 0)) {\n          return \"node: <\" + name + \">\";\n        } else {\n          return \"node: <\" + name + \">, parent: <\" + this.parent.name + \">\";\n        }\n      }\n\n      // Aliases\n      ele(name, attributes, text) {\n        return this.element(name, attributes, text);\n      }\n\n      nod(name, attributes, text) {\n        return this.node(name, attributes, text);\n      }\n\n      txt(value) {\n        return this.text(value);\n      }\n\n      dat(value) {\n        return this.cdata(value);\n      }\n\n      com(value) {\n        return this.comment(value);\n      }\n\n      ins(target, value) {\n        return this.instruction(target, value);\n      }\n\n      doc() {\n        return this.document();\n      }\n\n      dec(version, encoding, standalone) {\n        return this.declaration(version, encoding, standalone);\n      }\n\n      e(name, attributes, text) {\n        return this.element(name, attributes, text);\n      }\n\n      n(name, attributes, text) {\n        return this.node(name, attributes, text);\n      }\n\n      t(value) {\n        return this.text(value);\n      }\n\n      d(value) {\n        return this.cdata(value);\n      }\n\n      c(value) {\n        return this.comment(value);\n      }\n\n      r(value) {\n        return this.raw(value);\n      }\n\n      i(target, value) {\n        return this.instruction(target, value);\n      }\n\n      u() {\n        return this.up();\n      }\n\n      // can be deprecated in a future release\n      importXMLBuilder(doc) {\n        return this.importDocument(doc);\n      }\n\n      // Adds or modifies an attribute.\n\n      // `name` attribute name\n      // `value` attribute value\n      attribute(name, value) {\n        throw new Error(\"attribute() applies to element nodes only.\");\n      }\n\n      att(name, value) {\n        return this.attribute(name, value);\n      }\n\n      a(name, value) {\n        return this.attribute(name, value);\n      }\n\n      // Removes an attribute\n\n      // `name` attribute name\n      removeAttribute(name) {\n        throw new Error(\"attribute() applies to element nodes only.\");\n      }\n\n      // DOM level 1 functions to be implemented later\n      replaceChild(newChild, oldChild) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      removeChild(oldChild) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      appendChild(newChild) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      hasChildNodes() {\n        return this.children.length !== 0;\n      }\n\n      cloneNode(deep) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      normalize() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM level 2\n      isSupported(feature, version) {\n        return true;\n      }\n\n      hasAttributes() {\n        return this.attribs.length !== 0;\n      }\n\n      // DOM level 3 functions to be implemented later\n      compareDocumentPosition(other) {\n        var ref, res;\n        ref = this;\n        if (ref === other) {\n          return 0;\n        } else if (this.document() !== other.document()) {\n          res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;\n          if (Math.random() < 0.5) {\n            res |= DocumentPosition.Preceding;\n          } else {\n            res |= DocumentPosition.Following;\n          }\n          return res;\n        } else if (ref.isAncestor(other)) {\n          return DocumentPosition.Contains | DocumentPosition.Preceding;\n        } else if (ref.isDescendant(other)) {\n          return DocumentPosition.Contains | DocumentPosition.Following;\n        } else if (ref.isPreceding(other)) {\n          return DocumentPosition.Preceding;\n        } else {\n          return DocumentPosition.Following;\n        }\n      }\n\n      isSameNode(other) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      lookupPrefix(namespaceURI) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      isDefaultNamespace(namespaceURI) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      lookupNamespaceURI(prefix) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      isEqualNode(node) {\n        var i, j, ref1;\n        if (node.nodeType !== this.nodeType) {\n          return false;\n        }\n        if (node.children.length !== this.children.length) {\n          return false;\n        }\n        for (i = j = 0, ref1 = this.children.length - 1; (0 <= ref1 ? j <= ref1 : j >= ref1); i = 0 <= ref1 ? ++j : --j) {\n          if (!this.children[i].isEqualNode(node.children[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n\n      getFeature(feature, version) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      setUserData(key, data, handler) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getUserData(key) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // Returns true if other is an inclusive descendant of node,\n      // and false otherwise.\n      contains(other) {\n        if (!other) {\n          return false;\n        }\n        return other === this || this.isDescendant(other);\n      }\n\n      // An object A is called a descendant of an object B, if either A is \n      // a child of B or A is a child of an object C that is a descendant of B.\n      isDescendant(node) {\n        var child, isDescendantChild, j, len, ref1;\n        ref1 = this.children;\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          if (node === child) {\n            return true;\n          }\n          isDescendantChild = child.isDescendant(node);\n          if (isDescendantChild) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      // An object A is called an ancestor of an object B if and only if\n      // B is a descendant of A.\n      isAncestor(node) {\n        return node.isDescendant(this);\n      }\n\n      // An object A is preceding an object B if A and B are in the \n      // same tree and A comes before B in tree order.\n      isPreceding(node) {\n        var nodePos, thisPos;\n        nodePos = this.treePosition(node);\n        thisPos = this.treePosition(this);\n        if (nodePos === -1 || thisPos === -1) {\n          return false;\n        } else {\n          return nodePos < thisPos;\n        }\n      }\n\n      // An object A is folllowing an object B if A and B are in the \n      // same tree and A comes after B in tree order.\n      isFollowing(node) {\n        var nodePos, thisPos;\n        nodePos = this.treePosition(node);\n        thisPos = this.treePosition(this);\n        if (nodePos === -1 || thisPos === -1) {\n          return false;\n        } else {\n          return nodePos > thisPos;\n        }\n      }\n\n      // Returns the preorder position of the given node in the tree, or -1\n      // if the node is not in the tree.\n      treePosition(node) {\n        var found, pos;\n        pos = 0;\n        found = false;\n        this.foreachTreeNode(this.document(), function(childNode) {\n          pos++;\n          if (!found && childNode === node) {\n            return found = true;\n          }\n        });\n        if (found) {\n          return pos;\n        } else {\n          return -1;\n        }\n      }\n\n      \n      // Depth-first preorder traversal through the XML tree\n      foreachTreeNode(node, func) {\n        var child, j, len, ref1, res;\n        node || (node = this.document());\n        ref1 = node.children;\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          if (res = func(child)) {\n            return res;\n          } else {\n            res = this.foreachTreeNode(child, func);\n            if (res) {\n              return res;\n            }\n          }\n        }\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLNode.prototype, 'nodeName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeValue', {\n      get: function() {\n        return this.value;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'parentNode', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'childNodes', {\n      get: function() {\n        if (!this.childNodeList || !this.childNodeList.nodes) {\n          this.childNodeList = new XMLNodeList(this.children);\n        }\n        return this.childNodeList;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'firstChild', {\n      get: function() {\n        return this.children[0] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'lastChild', {\n      get: function() {\n        return this.children[this.children.length - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'previousSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nextSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i + 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'ownerDocument', {\n      get: function() {\n        return this.document() || null;\n      }\n    });\n\n    // DOM level 3\n    Object.defineProperty(XMLNode.prototype, 'textContent', {\n      get: function() {\n        var child, j, len, ref1, str;\n        if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {\n          str = '';\n          ref1 = this.children;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            child = ref1[j];\n            if (child.textContent) {\n              str += child.textContent;\n            }\n          }\n          return str;\n        } else {\n          return null;\n        }\n      },\n      set: function(value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    return XMLNode;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  // Converts values to strings\n  var XMLStringifier,\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    class XMLStringifier {\n      // Initializes a new instance of `XMLStringifier`\n\n      // `options.version` The version number string of the XML spec to validate against, e.g. 1.0\n      // `options.noDoubleEncoding` whether existing html entities are encoded: true or false\n      // `options.stringify` a set of functions to use for converting values to strings\n      // `options.noValidation` whether values will be validated and escaped or returned as is\n      // `options.invalidCharReplacement` a character to replace invalid characters and disable character validation\n      constructor(options) {\n        var key, ref, value;\n        // Checks whether the given string contains legal characters\n        // Fails with an exception on error\n\n        // `str` the string to check\n        this.assertLegalChar = this.assertLegalChar.bind(this);\n        // Checks whether the given string contains legal characters for a name\n        // Fails with an exception on error\n\n        // `str` the string to check\n        this.assertLegalName = this.assertLegalName.bind(this);\n        options || (options = {});\n        this.options = options;\n        if (!this.options.version) {\n          this.options.version = '1.0';\n        }\n        ref = options.stringify || {};\n        for (key in ref) {\n          if (!hasProp.call(ref, key)) continue;\n          value = ref[key];\n          this[key] = value;\n        }\n      }\n\n      // Defaults\n      name(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalName('' + val || '');\n      }\n\n      text(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar(this.textEscape('' + val || ''));\n      }\n\n      cdata(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        val = '' + val || '';\n        val = val.replace(']]>', ']]]]><![CDATA[>');\n        return this.assertLegalChar(val);\n      }\n\n      comment(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        val = '' + val || '';\n        if (val.match(/--/)) {\n          throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n        }\n        return this.assertLegalChar(val);\n      }\n\n      raw(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return '' + val || '';\n      }\n\n      attValue(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar(this.attEscape(val = '' + val || ''));\n      }\n\n      insTarget(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      insValue(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        val = '' + val || '';\n        if (val.match(/\\?>/)) {\n          throw new Error(\"Invalid processing instruction value: \" + val);\n        }\n        return this.assertLegalChar(val);\n      }\n\n      xmlVersion(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        val = '' + val || '';\n        if (!val.match(/1\\.[0-9]+/)) {\n          throw new Error(\"Invalid version number: \" + val);\n        }\n        return val;\n      }\n\n      xmlEncoding(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        val = '' + val || '';\n        if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n          throw new Error(\"Invalid encoding: \" + val);\n        }\n        return this.assertLegalChar(val);\n      }\n\n      xmlStandalone(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        if (val) {\n          return \"yes\";\n        } else {\n          return \"no\";\n        }\n      }\n\n      dtdPubID(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      dtdSysID(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      dtdElementValue(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      dtdAttType(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      dtdAttDefault(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      dtdEntityValue(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      dtdNData(val) {\n        if (this.options.noValidation) {\n          return val;\n        }\n        return this.assertLegalChar('' + val || '');\n      }\n\n      assertLegalChar(str) {\n        var regex, res;\n        if (this.options.noValidation) {\n          return str;\n        }\n        if (this.options.version === '1.0') {\n          // Valid characters from https://www.w3.org/TR/xml/#charsets\n          // any Unicode character, excluding the surrogate blocks, FFFE, and FFFF.\n          // #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]\n          // This ES5 compatible Regexp has been generated using the \"regenerate\" NPM module:\n          //   let xml_10_InvalidChars = regenerate()\n          //     .addRange(0x0000, 0x0008)\n          //     .add(0x000B, 0x000C)\n          //     .addRange(0x000E, 0x001F)\n          //     .addRange(0xD800, 0xDFFF)\n          //     .addRange(0xFFFE, 0xFFFF)\n          regex = /[\\0-\\x08\\x0B\\f\\x0E-\\x1F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/g;\n          if (this.options.invalidCharReplacement !== void 0) {\n            str = str.replace(regex, this.options.invalidCharReplacement);\n          } else if (res = str.match(regex)) {\n            throw new Error(`Invalid character in string: ${str} at index ${res.index}`);\n          }\n        } else if (this.options.version === '1.1') {\n          // Valid characters from https://www.w3.org/TR/xml11/#charsets\n          // any Unicode character, excluding the surrogate blocks, FFFE, and FFFF.\n          // [#x1-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]\n          // This ES5 compatible Regexp has been generated using the \"regenerate\" NPM module:\n          //   let xml_11_InvalidChars = regenerate()\n          //     .add(0x0000)\n          //     .addRange(0xD800, 0xDFFF)\n          //     .addRange(0xFFFE, 0xFFFF)\n          regex = /[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/g;\n          if (this.options.invalidCharReplacement !== void 0) {\n            str = str.replace(regex, this.options.invalidCharReplacement);\n          } else if (res = str.match(regex)) {\n            throw new Error(`Invalid character in string: ${str} at index ${res.index}`);\n          }\n        }\n        return str;\n      }\n\n      assertLegalName(str) {\n        var regex;\n        if (this.options.noValidation) {\n          return str;\n        }\n        str = this.assertLegalChar(str);\n        regex = /^([:A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])([\\x2D\\.0-:A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*$/;\n        if (!str.match(regex)) {\n          throw new Error(`Invalid character in name: ${str}`);\n        }\n        return str;\n      }\n\n      // Escapes special characters in text\n\n      // See http://www.w3.org/TR/2000/WD-xml-c14n-20000119.html#charescaping\n\n      // `str` the string to escape\n      textEscape(str) {\n        var ampregex;\n        if (this.options.noValidation) {\n          return str;\n        }\n        ampregex = this.options.noDoubleEncoding ? /(?!&(lt|gt|amp|apos|quot);)&/g : /&/g;\n        return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n      }\n\n      // Escapes special characters in attribute values\n\n      // See http://www.w3.org/TR/2000/WD-xml-c14n-20000119.html#charescaping\n\n      // `str` the string to escape\n      attEscape(str) {\n        var ampregex;\n        if (this.options.noValidation) {\n          return str;\n        }\n        ampregex = this.options.noDoubleEncoding ? /(?!&(lt|gt|amp|apos|quot);)&/g : /&/g;\n        return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n      }\n\n    };\n\n    // strings to match while converting from JS objects\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    return XMLStringifier;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  module.exports = {\n    None: 0,\n    OpenTag: 1,\n    InsideTag: 2,\n    CloseTag: 3\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, WriterState, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLProcessingInstruction, XMLRaw, XMLText, XMLWriterBase, assign,\n    hasProp = {}.hasOwnProperty;\n\n  ({assign} = require('./Utility'));\n\n  NodeType = require('./NodeType');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDummy = require('./XMLDummy');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  WriterState = require('./WriterState');\n\n  // Base class for XML writers\n  module.exports = XMLWriterBase = class XMLWriterBase {\n    // Initializes a new instance of `XMLWriterBase`\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation string\n    // `options.newline` newline sequence\n    // `options.offset` a fixed number of indentations to add to every line\n    // `options.width` maximum column width\n    // `options.allowEmpty` do not self close empty element tags\n    // 'options.dontPrettyTextNodes' if any text is present in node, don't indent or LF\n    // `options.spaceBeforeSlash` add a space before the closing slash of empty elements\n    constructor(options) {\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[\"_\" + key] = this[key];\n        this[key] = value;\n      }\n    }\n\n    // Filters writer options and provides defaults\n\n    // `options` writer options\n    filterOptions(options) {\n      var filteredOptions, ref, ref1, ref2, ref3, ref4, ref5, ref6, ref7;\n      options || (options = {});\n      options = assign({}, this.options, options);\n      filteredOptions = {\n        writer: this\n      };\n      filteredOptions.pretty = options.pretty || false;\n      filteredOptions.allowEmpty = options.allowEmpty || false;\n      filteredOptions.indent = (ref = options.indent) != null ? ref : '  ';\n      filteredOptions.newline = (ref1 = options.newline) != null ? ref1 : '\\n';\n      filteredOptions.offset = (ref2 = options.offset) != null ? ref2 : 0;\n      filteredOptions.width = (ref3 = options.width) != null ? ref3 : 0;\n      filteredOptions.dontPrettyTextNodes = (ref4 = (ref5 = options.dontPrettyTextNodes) != null ? ref5 : options.dontprettytextnodes) != null ? ref4 : 0;\n      filteredOptions.spaceBeforeSlash = (ref6 = (ref7 = options.spaceBeforeSlash) != null ? ref7 : options.spacebeforeslash) != null ? ref6 : '';\n      if (filteredOptions.spaceBeforeSlash === true) {\n        filteredOptions.spaceBeforeSlash = ' ';\n      }\n      filteredOptions.suppressPrettyCount = 0;\n      filteredOptions.user = {};\n      filteredOptions.state = WriterState.None;\n      return filteredOptions;\n    }\n\n    // Returns the indentation string for the current level\n\n    // `node` current node\n    // `options` writer options\n    // `level` current indentation level\n    indent(node, options, level) {\n      var indentLevel;\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else if (options.pretty) {\n        indentLevel = (level || 0) + options.offset + 1;\n        if (indentLevel > 0) {\n          return new Array(indentLevel).join(options.indent);\n        }\n      }\n      return '';\n    }\n\n    // Returns the newline string\n\n    // `node` current node\n    // `options` writer options\n    // `level` current indentation level\n    endline(node, options, level) {\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else {\n        return options.newline;\n      }\n    }\n\n    attribute(att, options, level) {\n      var r;\n      this.openAttribute(att, options, level);\n      if (options.pretty && options.width > 0) {\n        r = att.name + '=\"' + att.value + '\"';\n      } else {\n        r = ' ' + att.name + '=\"' + att.value + '\"';\n      }\n      this.closeAttribute(att, options, level);\n      return r;\n    }\n\n    cdata(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<![CDATA[';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ']]>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    comment(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!-- ';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ' -->' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    declaration(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?xml';\n      options.state = WriterState.InsideTag;\n      r += ' version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    docType(node, options, level) {\n      var child, i, len1, r, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      r += '<!DOCTYPE ' + node.root().name;\n      // external identifier\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      // internal subset\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (i = 0, len1 = ref.length; i < len1; i++) {\n          child = ref[i];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += ']';\n      }\n      // close tag\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    element(node, options, level) {\n      var att, attLen, child, childNodeCount, firstChildNode, i, j, len, len1, len2, name, prettySuppressed, r, ratt, ref, ref1, ref2, ref3, rline;\n      level || (level = 0);\n      prettySuppressed = false;\n      // open tag\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<' + node.name;\n      // attributes\n      if (options.pretty && options.width > 0) {\n        len = r.length;\n        ref = node.attribs;\n        for (name in ref) {\n          if (!hasProp.call(ref, name)) continue;\n          att = ref[name];\n          ratt = this.attribute(att, options, level);\n          attLen = ratt.length;\n          if (len + attLen > options.width) {\n            rline = this.indent(node, options, level + 1) + ratt;\n            r += this.endline(node, options, level) + rline;\n            len = rline.length;\n          } else {\n            rline = ' ' + ratt;\n            r += rline;\n            len += rline.length;\n          }\n        }\n      } else {\n        ref1 = node.attribs;\n        for (name in ref1) {\n          if (!hasProp.call(ref1, name)) continue;\n          att = ref1[name];\n          r += this.attribute(att, options, level);\n        }\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw || e.type === NodeType.CData) && e.value === '';\n      })) {\n        // empty element\n        if (options.allowEmpty) {\n          r += '>';\n          options.state = WriterState.CloseTag;\n          r += '</' + node.name + '>' + this.endline(node, options, level);\n        } else {\n          options.state = WriterState.CloseTag;\n          r += options.spaceBeforeSlash + '/>' + this.endline(node, options, level);\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw || firstChildNode.type === NodeType.CData) && (firstChildNode.value != null)) {\n        // do not indent text-only nodes\n        r += '>';\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        r += this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        r += '</' + node.name + '>' + this.endline(node, options, level);\n      } else {\n        // if ANY are a text node, then suppress pretty now\n        if (options.dontPrettyTextNodes) {\n          ref2 = node.children;\n          for (i = 0, len1 = ref2.length; i < len1; i++) {\n            child = ref2[i];\n            if ((child.type === NodeType.Text || child.type === NodeType.Raw || child.type === NodeType.CData) && (child.value != null)) {\n              options.suppressPrettyCount++;\n              prettySuppressed = true;\n              break;\n            }\n          }\n        }\n        // close the opening tag, after dealing with newline\n        r += '>' + this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref3 = node.children;\n        // inner tags\n        for (j = 0, len2 = ref3.length; j < len2; j++) {\n          child = ref3[j];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        // close tag\n        options.state = WriterState.CloseTag;\n        r += this.indent(node, options, level) + '</' + node.name + '>';\n        if (prettySuppressed) {\n          options.suppressPrettyCount--;\n        }\n        r += this.endline(node, options, level);\n        options.state = WriterState.None;\n      }\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    writeChildNode(node, options, level) {\n      switch (node.type) {\n        case NodeType.CData:\n          return this.cdata(node, options, level);\n        case NodeType.Comment:\n          return this.comment(node, options, level);\n        case NodeType.Element:\n          return this.element(node, options, level);\n        case NodeType.Raw:\n          return this.raw(node, options, level);\n        case NodeType.Text:\n          return this.text(node, options, level);\n        case NodeType.ProcessingInstruction:\n          return this.processingInstruction(node, options, level);\n        case NodeType.Dummy:\n          return '';\n        case NodeType.Declaration:\n          return this.declaration(node, options, level);\n        case NodeType.DocType:\n          return this.docType(node, options, level);\n        case NodeType.AttributeDeclaration:\n          return this.dtdAttList(node, options, level);\n        case NodeType.ElementDeclaration:\n          return this.dtdElement(node, options, level);\n        case NodeType.EntityDeclaration:\n          return this.dtdEntity(node, options, level);\n        case NodeType.NotationDeclaration:\n          return this.dtdNotation(node, options, level);\n        default:\n          throw new Error(\"Unknown XML node type: \" + node.constructor.name);\n      }\n    }\n\n    processingInstruction(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?';\n      options.state = WriterState.InsideTag;\n      r += node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    raw(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    text(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    dtdAttList(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ATTLIST';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    dtdElement(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ELEMENT';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name + ' ' + node.value;\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    dtdEntity(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ENTITY';\n      options.state = WriterState.InsideTag;\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    dtdNotation(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!NOTATION';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    }\n\n    openNode(node, options, level) {}\n\n    closeNode(node, options, level) {}\n\n    openAttribute(att, options, level) {}\n\n    closeAttribute(att, options, level) {}\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var XMLStringWriter, XMLWriterBase;\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  // Prints XML nodes as plain text\n  module.exports = XMLStringWriter = class XMLStringWriter extends XMLWriterBase {\n    // Initializes a new instance of `XMLStringWriter`\n\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation string\n    // `options.newline` newline sequence\n    // `options.offset` a fixed number of indentations to add to every line\n    // `options.allowEmpty` do not self close empty element tags\n    // 'options.dontPrettyTextNodes' if any text is present in node, don't indent or LF\n    // `options.spaceBeforeSlash` add a space before the closing slash of empty elements\n    constructor(options) {\n      super(options);\n    }\n\n    document(doc, options) {\n      var child, i, len, r, ref;\n      options = this.filterOptions(options);\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += this.writeChildNode(child, options, 0);\n      }\n      // remove trailing newline\n      if (options.pretty && r.slice(-options.newline.length) === options.newline) {\n        r = r.slice(0, -options.newline.length);\n      }\n      return r;\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, XMLDOMConfiguration, XMLDOMImplementation, XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject;\n\n  ({isPlainObject} = require('./Utility'));\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDOMConfiguration = require('./XMLDOMConfiguration');\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  // Represents an XML builder\n  module.exports = XMLDocument = (function() {\n    class XMLDocument extends XMLNode {\n      // Initializes a new instance of `XMLDocument`\n\n      // `options.keepNullNodes` whether nodes with null values will be kept\n      //     or ignored: true or false\n      // `options.keepNullAttributes` whether attributes with null values will be\n      //     kept or ignored: true or false\n      // `options.ignoreDecorators` whether decorator strings will be ignored when\n      //     converting JS objects: true or false\n      // `options.separateArrayItems` whether array items are created as separate\n      //     nodes when passed as an object value: true or false\n      // `options.noDoubleEncoding` whether existing html entities are encoded:\n      //     true or false\n      // `options.stringify` a set of functions to use for converting values to\n      //     strings\n      // `options.writer` the default XML writer to use for converting nodes to\n      //     string. If the default writer is not set, the built-in XMLStringWriter\n      //     will be used instead.\n      constructor(options) {\n        super(null);\n        this.name = \"#document\";\n        this.type = NodeType.Document;\n        this.documentURI = null;\n        this.domConfig = new XMLDOMConfiguration();\n        options || (options = {});\n        if (!options.writer) {\n          options.writer = new XMLStringWriter();\n        }\n        this.options = options;\n        this.stringify = new XMLStringifier(options);\n      }\n\n      // Ends the document and passes it to the given XML writer\n\n      // `writer` is either an XML writer or a plain object to pass to the\n      // constructor of the default XML writer. The default writer is assigned when\n      // creating the XML document. Following flags are recognized by the\n      // built-in XMLStringWriter:\n      //   `writer.pretty` pretty prints the result\n      //   `writer.indent` indentation for pretty print\n      //   `writer.offset` how many indentations to add to every line for pretty print\n      //   `writer.newline` newline sequence for pretty print\n      end(writer) {\n        var writerOptions;\n        writerOptions = {};\n        if (!writer) {\n          writer = this.options.writer;\n        } else if (isPlainObject(writer)) {\n          writerOptions = writer;\n          writer = this.options.writer;\n        }\n        return writer.document(this, writer.filterOptions(writerOptions));\n      }\n\n      // Converts the XML document to string\n\n      // `options.pretty` pretty prints the result\n      // `options.indent` indentation for pretty print\n      // `options.offset` how many indentations to add to every line for pretty print\n      // `options.newline` newline sequence for pretty print\n      toString(options) {\n        return this.options.writer.document(this, this.options.writer.filterOptions(options));\n      }\n\n      // DOM level 1 functions to be implemented later\n      createElement(tagName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createDocumentFragment() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createTextNode(data) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createComment(data) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createCDATASection(data) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createProcessingInstruction(target, data) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createAttribute(name) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createEntityReference(name) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementsByTagName(tagname) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM level 2 functions to be implemented later\n      importNode(importedNode, deep) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createElementNS(namespaceURI, qualifiedName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createAttributeNS(namespaceURI, qualifiedName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementsByTagNameNS(namespaceURI, localName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      getElementById(elementId) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM level 3 functions to be implemented later\n      adoptNode(source) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      normalizeDocument() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      renameNode(node, namespaceURI, qualifiedName) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      // DOM level 4 functions to be implemented later\n      getElementsByClassName(classNames) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createEvent(eventInterface) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createRange() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createNodeIterator(root, whatToShow, filter) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n      createTreeWalker(root, whatToShow, filter) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n\n    };\n\n    // DOM level 1\n    Object.defineProperty(XMLDocument.prototype, 'implementation', {\n      value: new XMLDOMImplementation()\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'doctype', {\n      get: function() {\n        var child, i, len, ref;\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.DocType) {\n            return child;\n          }\n        }\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'documentElement', {\n      get: function() {\n        return this.rootObject || null;\n      }\n    });\n\n    // DOM level 3\n    Object.defineProperty(XMLDocument.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'strictErrorChecking', {\n      get: function() {\n        return false;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlEncoding', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].encoding;\n        } else {\n          return null;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlStandalone', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].standalone === 'yes';\n        } else {\n          return false;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlVersion', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].version;\n        } else {\n          return \"1.0\";\n        }\n      }\n    });\n\n    // DOM level 4\n    Object.defineProperty(XMLDocument.prototype, 'URL', {\n      get: function() {\n        return this.documentURI;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'origin', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'compatMode', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'characterSet', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'contentType', {\n      get: function() {\n        return null;\n      }\n    });\n\n    return XMLDocument;\n\n  }).call(this);\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, WriterState, XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocument, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject,\n    hasProp = {}.hasOwnProperty;\n\n  ({isObject, isFunction, isPlainObject, getValue} = require('./Utility'));\n\n  NodeType = require('./NodeType');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  WriterState = require('./WriterState');\n\n  // Represents an XML builder\n  module.exports = XMLDocumentCB = class XMLDocumentCB {\n    // Initializes a new instance of `XMLDocumentCB`\n\n    // `options.keepNullNodes` whether nodes with null values will be kept\n    //     or ignored: true or false\n    // `options.keepNullAttributes` whether attributes with null values will be\n    //     kept or ignored: true or false\n    // `options.ignoreDecorators` whether decorator strings will be ignored when\n    //     converting JS objects: true or false\n    // `options.separateArrayItems` whether array items are created as separate\n    //     nodes when passed as an object value: true or false\n    // `options.noDoubleEncoding` whether existing html entities are encoded:\n    //     true or false\n    // `options.stringify` a set of functions to use for converting values to\n    //     strings\n    // `options.writer` the default XML writer to use for converting nodes to\n    //     string. If the default writer is not set, the built-in XMLStringWriter\n    //     will be used instead.\n\n    // `onData` the function to be called when a new chunk of XML is output. The\n    //          string containing the XML chunk is passed to `onData` as its first\n    //          argument, and the current indentation level as its second argument.\n    // `onEnd`  the function to be called when the XML document is completed with\n    //          `end`. `onEnd` does not receive any arguments.\n    constructor(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      this.type = NodeType.Document;\n      options || (options = {});\n      writerOptions = {};\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.writerOptions = this.writer.filterOptions(writerOptions);\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    // Creates a child element node from the given XMLNode\n\n    // `node` the child node\n    createChildNode(node) {\n      var att, attName, attributes, child, i, len, ref, ref1;\n      switch (node.type) {\n        case NodeType.CData:\n          this.cdata(node.value);\n          break;\n        case NodeType.Comment:\n          this.comment(node.value);\n          break;\n        case NodeType.Element:\n          attributes = {};\n          ref = node.attribs;\n          for (attName in ref) {\n            if (!hasProp.call(ref, attName)) continue;\n            att = ref[attName];\n            attributes[attName] = att.value;\n          }\n          this.node(node.name, attributes);\n          break;\n        case NodeType.Dummy:\n          this.dummy();\n          break;\n        case NodeType.Raw:\n          this.raw(node.value);\n          break;\n        case NodeType.Text:\n          this.text(node.value);\n          break;\n        case NodeType.ProcessingInstruction:\n          this.instruction(node.target, node.value);\n          break;\n        default:\n          throw new Error(\"This XML node type is not supported in a JS object: \" + node.constructor.name);\n      }\n      ref1 = node.children;\n      // write child nodes recursively\n      for (i = 0, len = ref1.length; i < len; i++) {\n        child = ref1[i];\n        this.createChildNode(child);\n        if (child.type === NodeType.Element) {\n          this.up();\n        }\n      }\n      return this;\n    }\n\n    // Creates a dummy node\n\n    dummy() {\n      // no-op, just return this\n      return this;\n    }\n\n    // Creates a node\n\n    // `name` name of the node\n    // `attributes` an object containing name/value pairs of attributes\n    // `text` element text\n    node(name, attributes, text) {\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n      this.openCurrent();\n      name = getValue(name);\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      // swap argument order: text <-> attributes\n      if (!isObject(attributes)) {\n        [text, attributes] = [attributes, text];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    }\n\n    // Creates a child element node or an element type declaration when called\n    // inside the DTD\n\n    // `name` name of the node\n    // `attributes` an object containing name/value pairs of attributes\n    // `text` element text\n    element(name, attributes, text) {\n      var child, i, len, oldValidationFlag, ref, root;\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        this.dtdElement(...arguments);\n      } else {\n        if (Array.isArray(name) || isObject(name) || isFunction(name)) {\n          oldValidationFlag = this.options.noValidation;\n          this.options.noValidation = true;\n          root = new XMLDocument(this.options).element('TEMP_ROOT');\n          root.element(name);\n          this.options.noValidation = oldValidationFlag;\n          ref = root.children;\n          for (i = 0, len = ref.length; i < len; i++) {\n            child = ref[i];\n            this.createChildNode(child);\n            if (child.type === NodeType.Element) {\n              this.up();\n            }\n          }\n        } else {\n          this.node(name, attributes, text);\n        }\n      }\n      return this;\n    }\n\n    // Adds or modifies an attribute\n\n    // `name` attribute name\n    // `value` attribute value\n    attribute(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) { // expand if object\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    }\n\n    // Creates a text node\n\n    // `value` element text\n    text(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates a CDATA node\n\n    // `value` element text without CDATA delimiters\n    cdata(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates a comment node\n\n    // `value` comment text\n    comment(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Adds unescaped raw text\n\n    // `value` text\n    raw(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Adds a processing instruction\n\n    // `target` instruction target\n    // `value` instruction value\n    instruction(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) { // expand if array\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) { // expand if object\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      }\n      return this;\n    }\n\n    // Creates the xml declaration\n\n    // `version` A version number string, e.g. 1.0\n    // `encoding` Encoding declaration, e.g. UTF-8\n    // `standalone` standalone document declaration: true or false\n    declaration(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates the document type declaration\n\n    // `root`  the name of the root node\n    // `pubID` the public identifier of the external subset\n    // `sysID` the system identifier of the external subset\n    doctype(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    }\n\n    // Creates an element type declaration\n\n    // `name` element name\n    // `value` element content (defaults to #PCDATA)\n    dtdElement(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates an attribute declaration\n\n    // `elementName` the name of the element containing this attribute\n    // `attributeName` attribute name\n    // `attributeType` type of the attribute (defaults to CDATA)\n    // `defaultValueType` default value type (either #REQUIRED, #IMPLIED, #FIXED or\n    //                    #DEFAULT) (defaults to #IMPLIED)\n    // `defaultValue` default value of the attribute\n    //                (only used for #FIXED or #DEFAULT)\n    attList(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates a general entity declaration\n\n    // `name` the name of the entity\n    // `value` internal entity value or an object with external entity details\n    // `value.pubID` public identifier\n    // `value.sysID` system identifier\n    // `value.nData` notation declaration\n    entity(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates a parameter entity declaration\n\n    // `name` the name of the entity\n    // `value` internal entity value or an object with external entity details\n    // `value.pubID` public identifier\n    // `value.sysID` system identifier\n    pEntity(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Creates a NOTATION declaration\n\n    // `name` the name of the notation\n    // `value` an object with external entity details\n    // `value.pubID` public identifier\n    // `value.sysID` system identifier\n    notation(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    }\n\n    // Gets the parent node\n    up() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    }\n\n    // Ends the document\n    end() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    }\n\n    // Opens the current parent node\n    openCurrent() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    }\n\n    // Writes the opening tag of the current node or the entire node if it has\n    // no child nodes\n    openNode(node) {\n      var att, chunk, name, ref;\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {\n          this.root = node;\n        }\n        chunk = '';\n        if (node.type === NodeType.Element) {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<' + node.name;\n          ref = node.attribs;\n          for (name in ref) {\n            if (!hasProp.call(ref, name)) continue;\n            att = ref[name];\n            chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);\n          }\n          chunk += (node.children ? '>' : '/>') + this.writer.endline(node, this.writerOptions, this.currentLevel);\n          this.writerOptions.state = WriterState.InsideTag; // if node.type is NodeType.DocType\n        } else {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<!DOCTYPE ' + node.rootNodeName;\n          \n          // external identifier\n          if (node.pubID && node.sysID) {\n            chunk += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n          } else if (node.sysID) {\n            chunk += ' SYSTEM \"' + node.sysID + '\"';\n          }\n          \n          // internal subset\n          if (node.children) {\n            chunk += ' [';\n            this.writerOptions.state = WriterState.InsideTag;\n          } else {\n            this.writerOptions.state = WriterState.CloseTag;\n            chunk += '>';\n          }\n          chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.onData(chunk, this.currentLevel);\n        return node.isOpen = true;\n      }\n    }\n\n    // Writes the closing tag of the current node\n    closeNode(node) {\n      var chunk;\n      if (!node.isClosed) {\n        chunk = '';\n        this.writerOptions.state = WriterState.CloseTag;\n        if (node.type === NodeType.Element) {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '</' + node.name + '>' + this.writer.endline(node, this.writerOptions, this.currentLevel); // if node.type is NodeType.DocType\n        } else {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + ']>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.writerOptions.state = WriterState.None;\n        this.onData(chunk, this.currentLevel);\n        return node.isClosed = true;\n      }\n    }\n\n    // Called when a new chunk of XML is output\n\n    // `chunk` a string containing the XML chunk\n    // `level` current indentation level\n    onData(chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    }\n\n    // Called when the XML document is completed\n    onEnd() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    }\n\n    // Returns debug string\n    debugInfo(name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    }\n\n    // Node aliases\n    ele() {\n      return this.element(...arguments);\n    }\n\n    nod(name, attributes, text) {\n      return this.node(name, attributes, text);\n    }\n\n    txt(value) {\n      return this.text(value);\n    }\n\n    dat(value) {\n      return this.cdata(value);\n    }\n\n    com(value) {\n      return this.comment(value);\n    }\n\n    ins(target, value) {\n      return this.instruction(target, value);\n    }\n\n    dec(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    }\n\n    dtd(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    }\n\n    e(name, attributes, text) {\n      return this.element(name, attributes, text);\n    }\n\n    n(name, attributes, text) {\n      return this.node(name, attributes, text);\n    }\n\n    t(value) {\n      return this.text(value);\n    }\n\n    d(value) {\n      return this.cdata(value);\n    }\n\n    c(value) {\n      return this.comment(value);\n    }\n\n    r(value) {\n      return this.raw(value);\n    }\n\n    i(target, value) {\n      return this.instruction(target, value);\n    }\n\n    // Attribute aliases\n    att() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList(...arguments);\n      } else {\n        return this.attribute(...arguments);\n      }\n    }\n\n    a() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList(...arguments);\n      } else {\n        return this.attribute(...arguments);\n      }\n    }\n\n    // DTD aliases\n    // att() and ele() are defined above\n    ent(name, value) {\n      return this.entity(name, value);\n    }\n\n    pent(name, value) {\n      return this.pEntity(name, value);\n    }\n\n    not(name, value) {\n      return this.notation(name, value);\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, WriterState, XMLStreamWriter, XMLWriterBase,\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  WriterState = require('./WriterState');\n\n  // Prints XML nodes to a stream\n  module.exports = XMLStreamWriter = class XMLStreamWriter extends XMLWriterBase {\n    // Initializes a new instance of `XMLStreamWriter`\n\n    // `stream` output stream\n    // `options.pretty` pretty prints the result\n    // `options.indent` indentation string\n    // `options.newline` newline sequence\n    // `options.offset` a fixed number of indentations to add to every line\n    // `options.allowEmpty` do not self close empty element tags\n    // 'options.dontPrettyTextNodes' if any text is present in node, don't indent or LF\n    // `options.spaceBeforeSlash` add a space before the closing slash of empty elements\n    constructor(stream, options) {\n      super(options);\n      this.stream = stream;\n    }\n\n    endline(node, options, level) {\n      if (node.isLastRootNode && options.state === WriterState.CloseTag) {\n        return '';\n      } else {\n        return super.endline(node, options, level);\n      }\n    }\n\n    document(doc, options) {\n      var child, i, j, k, len1, len2, ref, ref1, results;\n      ref = doc.children;\n      // set a flag so that we don't insert a newline after the last root level node \n      for (i = j = 0, len1 = ref.length; j < len1; i = ++j) {\n        child = ref[i];\n        child.isLastRootNode = i === doc.children.length - 1;\n      }\n      options = this.filterOptions(options);\n      ref1 = doc.children;\n      results = [];\n      for (k = 0, len2 = ref1.length; k < len2; k++) {\n        child = ref1[k];\n        results.push(this.writeChildNode(child, options, 0));\n      }\n      return results;\n    }\n\n    cdata(node, options, level) {\n      return this.stream.write(super.cdata(node, options, level));\n    }\n\n    comment(node, options, level) {\n      return this.stream.write(super.comment(node, options, level));\n    }\n\n    declaration(node, options, level) {\n      return this.stream.write(super.declaration(node, options, level));\n    }\n\n    docType(node, options, level) {\n      var child, j, len1, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      // external identifier\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      // internal subset\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (j = 0, len1 = ref.length; j < len1; j++) {\n          child = ref[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(']');\n      }\n      // close tag\n      options.state = WriterState.CloseTag;\n      this.stream.write(options.spaceBeforeSlash + '>');\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    }\n\n    element(node, options, level) {\n      var att, attLen, child, childNodeCount, firstChildNode, j, len, len1, name, prettySuppressed, r, ratt, ref, ref1, ref2, rline;\n      level || (level = 0);\n      // open tag\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<' + node.name;\n      // attributes\n      if (options.pretty && options.width > 0) {\n        len = r.length;\n        ref = node.attribs;\n        for (name in ref) {\n          if (!hasProp.call(ref, name)) continue;\n          att = ref[name];\n          ratt = this.attribute(att, options, level);\n          attLen = ratt.length;\n          if (len + attLen > options.width) {\n            rline = this.indent(node, options, level + 1) + ratt;\n            r += this.endline(node, options, level) + rline;\n            len = rline.length;\n          } else {\n            rline = ' ' + ratt;\n            r += rline;\n            len += rline.length;\n          }\n        }\n      } else {\n        ref1 = node.attribs;\n        for (name in ref1) {\n          if (!hasProp.call(ref1, name)) continue;\n          att = ref1[name];\n          r += this.attribute(att, options, level);\n        }\n      }\n      this.stream.write(r);\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw || e.type === NodeType.CData) && e.value === '';\n      })) {\n        // empty element\n        if (options.allowEmpty) {\n          this.stream.write('>');\n          options.state = WriterState.CloseTag;\n          this.stream.write('</' + node.name + '>');\n        } else {\n          options.state = WriterState.CloseTag;\n          this.stream.write(options.spaceBeforeSlash + '/>');\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw || firstChildNode.type === NodeType.CData) && (firstChildNode.value != null)) {\n        // do not indent text-only nodes\n        this.stream.write('>');\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref2 = node.children;\n        // inner tags\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        // close tag\n        options.state = WriterState.CloseTag;\n        this.stream.write(this.indent(node, options, level) + '</' + node.name + '>');\n      }\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    }\n\n    processingInstruction(node, options, level) {\n      return this.stream.write(super.processingInstruction(node, options, level));\n    }\n\n    raw(node, options, level) {\n      return this.stream.write(super.raw(node, options, level));\n    }\n\n    text(node, options, level) {\n      return this.stream.write(super.text(node, options, level));\n    }\n\n    dtdAttList(node, options, level) {\n      return this.stream.write(super.dtdAttList(node, options, level));\n    }\n\n    dtdElement(node, options, level) {\n      return this.stream.write(super.dtdElement(node, options, level));\n    }\n\n    dtdEntity(node, options, level) {\n      return this.stream.write(super.dtdEntity(node, options, level));\n    }\n\n    dtdNotation(node, options, level) {\n      return this.stream.write(super.dtdNotation(node, options, level));\n    }\n\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 2.4.1\n(function() {\n  var NodeType, WriterState, XMLDOMImplementation, XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction;\n\n  ({assign, isFunction} = require('./Utility'));\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  NodeType = require('./NodeType');\n\n  WriterState = require('./WriterState');\n\n  // Creates a new document and returns the root node for\n  // chain-building the document tree\n\n  // `name` name of the root element\n\n  // `xmldec.version` A version number string, e.g. 1.0\n  // `xmldec.encoding` Encoding declaration, e.g. UTF-8\n  // `xmldec.standalone` standalone document declaration: true or false\n\n  // `doctype.pubID` public identifier of the external subset\n  // `doctype.sysID` system identifier of the external subset\n\n  // `options.headless` whether XML declaration and doctype will be included:\n  //     true or false\n  // `options.keepNullNodes` whether nodes with null values will be kept\n  //     or ignored: true or false\n  // `options.keepNullAttributes` whether attributes with null values will be\n  //     kept or ignored: true or false\n  // `options.ignoreDecorators` whether decorator strings will be ignored when\n  //     converting JS objects: true or false\n  // `options.separateArrayItems` whether array items are created as separate\n  //     nodes when passed as an object value: true or false\n  // `options.noDoubleEncoding` whether existing html entities are encoded:\n  //     true or false\n  // `options.stringify` a set of functions to use for converting values to\n  //     strings\n  // `options.writer` the default XML writer to use for converting nodes to\n  //     string. If the default writer is not set, the built-in XMLStringWriter\n  //     will be used instead.\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name.\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    // create the document node\n    doc = new XMLDocument(options);\n    // add the root node\n    root = doc.element(name);\n    // prolog\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.dtd(options);\n      }\n    }\n    return root;\n  };\n\n  // Creates a new document and returns the document node for\n  // chain-building the document tree\n\n  // `options.keepNullNodes` whether nodes with null values will be kept\n  //     or ignored: true or false\n  // `options.keepNullAttributes` whether attributes with null values will be\n  //     kept or ignored: true or false\n  // `options.ignoreDecorators` whether decorator strings will be ignored when\n  //     converting JS objects: true or false\n  // `options.separateArrayItems` whether array items are created as separate\n  //     nodes when passed as an object value: true or false\n  // `options.noDoubleEncoding` whether existing html entities are encoded:\n  //     true or false\n  // `options.stringify` a set of functions to use for converting values to\n  //     strings\n  // `options.writer` the default XML writer to use for converting nodes to\n  //     string. If the default writer is not set, the built-in XMLStringWriter\n  //     will be used instead.\n\n  // `onData` the function to be called when a new chunk of XML is output. The\n  //          string containing the XML chunk is passed to `onData` as its single\n  //          argument.\n  // `onEnd`  the function to be called when the XML document is completed with\n  //          `end`. `onEnd` does not receive any arguments.\n  module.exports.begin = function(options, onData, onEnd) {\n    if (isFunction(options)) {\n      [onData, onEnd] = [options, onData];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n  module.exports.implementation = new XMLDOMImplementation();\n\n  module.exports.nodeType = NodeType;\n\n  module.exports.writerState = WriterState;\n\n}).call(this);\n", "/**\n * Module dependencies.\n */\n\nvar base64 = require('base64-js');\nvar xmlbuilder = require('xmlbuilder');\n\n/**\n * Module exports.\n */\n\nexports.build = build;\n\n/**\n * Accepts a `Date` instance and returns an ISO date string.\n *\n * @param {Date} d - Date instance to serialize\n * @returns {String} ISO date string representation of `d`\n * @api private\n */\n\nfunction ISODateString(d){\n  function pad(n){\n    return n < 10 ? '0' + n : n;\n  }\n  return d.getUTCFullYear()+'-'\n    + pad(d.getUTCMonth()+1)+'-'\n    + pad(d.getUTCDate())+'T'\n    + pad(d.getUTCHours())+':'\n    + pad(d.getUTCMinutes())+':'\n    + pad(d.getUTCSeconds())+'Z';\n}\n\n/**\n * Returns the internal \"type\" of `obj` via the\n * `Object.prototype.toString()` trick.\n *\n * @param {Mixed} obj - any value\n * @returns {String} the internal \"type\" name\n * @api private\n */\n\nvar toString = Object.prototype.toString;\nfunction type (obj) {\n  var m = toString.call(obj).match(/\\[object (.*)\\]/);\n  return m ? m[1] : m;\n}\n\n/**\n * Generate an XML plist string from the input object `obj`.\n *\n * @param {Object} obj - the object to convert\n * @param {Object} [opts] - optional options object\n * @returns {String} converted plist XML string\n * @api public\n */\n\nfunction build (obj, opts) {\n  var XMLHDR = {\n    version: '1.0',\n    encoding: 'UTF-8'\n  };\n\n  var XMLDTD = {\n    pubid: '-//Apple//DTD PLIST 1.0//EN',\n    sysid: 'http://www.apple.com/DTDs/PropertyList-1.0.dtd'\n  };\n\n  var doc = xmlbuilder.create('plist');\n\n  doc.dec(XMLHDR.version, XMLHDR.encoding, XMLHDR.standalone);\n  doc.dtd(XMLDTD.pubid, XMLDTD.sysid);\n  doc.att('version', '1.0');\n\n  walk_obj(obj, doc);\n\n  if (!opts) opts = {};\n  // default `pretty` to `true`\n  opts.pretty = opts.pretty !== false;\n  return doc.end(opts);\n}\n\n/**\n * depth first, recursive traversal of a javascript object. when complete,\n * next_child contains a reference to the build XML object.\n *\n * @api private\n */\n\nfunction walk_obj(next, next_child) {\n  var tag_type, i, prop;\n  var name = type(next);\n\n  if ('Undefined' == name) {\n    return;\n  } else if (Array.isArray(next)) {\n    next_child = next_child.ele('array');\n    for (i = 0; i < next.length; i++) {\n      walk_obj(next[i], next_child);\n    }\n\n  } else if (Buffer.isBuffer(next)) {\n    next_child.ele('data').raw(next.toString('base64'));\n\n  } else if ('Object' == name) {\n    next_child = next_child.ele('dict');\n    for (prop in next) {\n      if (next.hasOwnProperty(prop)) {\n        next_child.ele('key').txt(prop);\n        walk_obj(next[prop], next_child);\n      }\n    }\n\n  } else if ('Number' == name) {\n    // detect if this is an integer or real\n    // TODO: add an ability to force one way or another via a \"cast\"\n    tag_type = (next % 1 === 0) ? 'integer' : 'real';\n    next_child.ele(tag_type).txt(next.toString());\n\n  } else if ('BigInt' == name) {\n    next_child.ele('integer').txt(next);\n\n  } else if ('Date' == name) {\n    next_child.ele('date').txt(ISODateString(new Date(next)));\n\n  } else if ('Boolean' == name) {\n    next_child.ele(next ? 'true' : 'false');\n\n  } else if ('String' == name) {\n    next_child.ele('string').txt(next);\n\n  } else if ('ArrayBuffer' == name) {\n    next_child.ele('data').raw(base64.fromByteArray(next));\n\n  } else if (next && next.buffer && 'ArrayBuffer' == type(next.buffer)) {\n    // a typed array\n    next_child.ele('data').raw(base64.fromByteArray(new Uint8Array(next.buffer), next_child));\n\n  } else if ('Null' === name) {\n    next_child.ele('null').txt('');\n\n  }\n}\n", "/**\n * Parser functions.\n */\n\nvar parserFunctions = require('./lib/parse');\nObject.keys(parserFunctions).forEach(function (k) { exports[k] = parserFunctions[k]; });\n\n/**\n * Builder functions.\n */\n\nvar builderFunctions = require('./lib/build');\nObject.keys(builderFunctions).forEach(function (k) { exports[k] = builderFunctions[k]; });\n", "'use strict';\n\nmodule.exports = ({onlyFirst = false} = {}) => {\n\tconst pattern = [\n\t\t'[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]+)*|[a-zA-Z\\\\d]+(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)',\n\t\t'(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-ntqry=><~]))'\n\t].join('|');\n\n\treturn new RegExp(pattern, onlyFirst ? undefined : 'g');\n};\n", "'use strict';\nconst ansiRegex = require('ansi-regex');\n\nmodule.exports = string => typeof string === 'string' ? string.replace(ansiRegex(), '') : string;\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var assign, getValue, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    slice = [].slice,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function() {\n    var i, key, len, source, sources, target;\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  getValue = function(obj) {\n    if (isFunction(obj.valueOf)) {\n      return obj.valueOf();\n    } else {\n      return obj;\n    }\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n  module.exports.getValue = getValue;\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMImplementation;\n\n  module.exports = XMLDOMImplementation = (function() {\n    function XMLDOMImplementation() {}\n\n    XMLDOMImplementation.prototype.hasFeature = function(feature, version) {\n      return true;\n    };\n\n    XMLDOMImplementation.prototype.createDocumentType = function(qualifiedName, publicId, systemId) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createDocument = function(namespaceURI, qualifiedName, doctype) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createHTMLDocument = function(title) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLDOMImplementation;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMErrorHandler;\n\n  module.exports = XMLDOMErrorHandler = (function() {\n    function XMLDOMErrorHandler() {}\n\n    XMLDOMErrorHandler.prototype.handleError = function(error) {\n      throw new Error(error);\n    };\n\n    return XMLDOMErrorHandler;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMStringList;\n\n  module.exports = XMLDOMStringList = (function() {\n    function XMLDOMStringList(arr) {\n      this.arr = arr || [];\n    }\n\n    Object.defineProperty(XMLDOMStringList.prototype, 'length', {\n      get: function() {\n        return this.arr.length;\n      }\n    });\n\n    XMLDOMStringList.prototype.item = function(index) {\n      return this.arr[index] || null;\n    };\n\n    XMLDOMStringList.prototype.contains = function(str) {\n      return this.arr.indexOf(str) !== -1;\n    };\n\n    return XMLDOMStringList;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMConfiguration, XMLDOMErrorHandler, XMLDOMStringList;\n\n  XMLDOMErrorHandler = require('./XMLDOMErrorHandler');\n\n  XMLDOMStringList = require('./XMLDOMStringList');\n\n  module.exports = XMLDOMConfiguration = (function() {\n    function XMLDOMConfiguration() {\n      var clonedSelf;\n      this.defaultParams = {\n        \"canonical-form\": false,\n        \"cdata-sections\": false,\n        \"comments\": false,\n        \"datatype-normalization\": false,\n        \"element-content-whitespace\": true,\n        \"entities\": true,\n        \"error-handler\": new XMLDOMErrorHandler(),\n        \"infoset\": true,\n        \"validate-if-schema\": false,\n        \"namespaces\": true,\n        \"namespace-declarations\": true,\n        \"normalize-characters\": false,\n        \"schema-location\": '',\n        \"schema-type\": '',\n        \"split-cdata-sections\": true,\n        \"validate\": false,\n        \"well-formed\": true\n      };\n      this.params = clonedSelf = Object.create(this.defaultParams);\n    }\n\n    Object.defineProperty(XMLDOMConfiguration.prototype, 'parameterNames', {\n      get: function() {\n        return new XMLDOMStringList(Object.keys(this.defaultParams));\n      }\n    });\n\n    XMLDOMConfiguration.prototype.getParameter = function(name) {\n      if (this.params.hasOwnProperty(name)) {\n        return this.params[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLDOMConfiguration.prototype.canSetParameter = function(name, value) {\n      return true;\n    };\n\n    XMLDOMConfiguration.prototype.setParameter = function(name, value) {\n      if (value != null) {\n        return this.params[name] = value;\n      } else {\n        return delete this.params[name];\n      }\n    };\n\n    return XMLDOMConfiguration;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Element: 1,\n    Attribute: 2,\n    Text: 3,\n    CData: 4,\n    EntityReference: 5,\n    EntityDeclaration: 6,\n    ProcessingInstruction: 7,\n    Comment: 8,\n    Document: 9,\n    DocType: 10,\n    DocumentFragment: 11,\n    NotationDeclaration: 12,\n    Declaration: 201,\n    Raw: 202,\n    AttributeDeclaration: 203,\n    ElementDeclaration: 204,\n    Dummy: 205\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLNode;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLAttribute = (function() {\n    function XMLAttribute(parent, name, value) {\n      this.parent = parent;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.value = this.stringify.attValue(value);\n      this.type = NodeType.Attribute;\n      this.isId = false;\n      this.schemaTypeInfo = null;\n    }\n\n    Object.defineProperty(XMLAttribute.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'ownerElement', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'specified', {\n      get: function() {\n        return true;\n      }\n    });\n\n    XMLAttribute.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLAttribute.prototype.toString = function(options) {\n      return this.options.writer.attribute(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLAttribute.prototype.debugInfo = function(name) {\n      name = name || this.name;\n      if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else {\n        return \"attribute: {\" + name + \"}, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLAttribute.prototype.isEqualNode = function(node) {\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.value !== this.value) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLAttribute;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNamedNodeMap;\n\n  module.exports = XMLNamedNodeMap = (function() {\n    function XMLNamedNodeMap(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNamedNodeMap.prototype, 'length', {\n      get: function() {\n        return Object.keys(this.nodes).length || 0;\n      }\n    });\n\n    XMLNamedNodeMap.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItem = function(name) {\n      return this.nodes[name];\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItem = function(node) {\n      var oldNode;\n      oldNode = this.nodes[node.nodeName];\n      this.nodes[node.nodeName] = node;\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItem = function(name) {\n      var oldNode;\n      oldNode = this.nodes[name];\n      delete this.nodes[name];\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.item = function(index) {\n      return this.nodes[Object.keys(this.nodes)[index]] || null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItemNS = function(node) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLNamedNodeMap;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLElement, XMLNamedNodeMap, XMLNode, getValue, isFunction, isObject, ref,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, getValue = ref.getValue;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLElement = (function(superClass) {\n    extend(XMLElement, superClass);\n\n    function XMLElement(parent, name, attributes) {\n      var child, j, len, ref1;\n      XMLElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing element name. \" + this.debugInfo());\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.Element;\n      this.attribs = {};\n      this.schemaTypeInfo = null;\n      if (attributes != null) {\n        this.attribute(attributes);\n      }\n      if (parent.type === NodeType.Document) {\n        this.isRoot = true;\n        this.documentObject = parent;\n        parent.rootObject = this;\n        if (parent.children) {\n          ref1 = parent.children;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            child = ref1[j];\n            if (child.type === NodeType.DocType) {\n              child.name = this.name;\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    Object.defineProperty(XMLElement.prototype, 'tagName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'id', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'className', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'classList', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'attributes', {\n      get: function() {\n        if (!this.attributeMap || !this.attributeMap.nodes) {\n          this.attributeMap = new XMLNamedNodeMap(this.attribs);\n        }\n        return this.attributeMap;\n      }\n    });\n\n    XMLElement.prototype.clone = function() {\n      var att, attName, clonedSelf, ref1;\n      clonedSelf = Object.create(this);\n      if (clonedSelf.isRoot) {\n        clonedSelf.documentObject = null;\n      }\n      clonedSelf.attribs = {};\n      ref1 = this.attribs;\n      for (attName in ref1) {\n        if (!hasProp.call(ref1, attName)) continue;\n        att = ref1[attName];\n        clonedSelf.attribs[attName] = att.clone();\n      }\n      clonedSelf.children = [];\n      this.children.forEach(function(child) {\n        var clonedChild;\n        clonedChild = child.clone();\n        clonedChild.parent = clonedSelf;\n        return clonedSelf.children.push(clonedChild);\n      });\n      return clonedSelf;\n    };\n\n    XMLElement.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLElement.prototype.removeAttribute = function(name) {\n      var attName, j, len;\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo());\n      }\n      name = getValue(name);\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          attName = name[j];\n          delete this.attribs[attName];\n        }\n      } else {\n        delete this.attribs[name];\n      }\n      return this;\n    };\n\n    XMLElement.prototype.toString = function(options) {\n      return this.options.writer.element(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLElement.prototype.att = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.a = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.getAttribute = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].value;\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttribute = function(name, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNode = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttributeNode = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNode = function(oldAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNS = function(namespaceURI, qualifiedName, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNodeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNodeNS = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.hasAttribute = function(name) {\n      return this.attribs.hasOwnProperty(name);\n    };\n\n    XMLElement.prototype.hasAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttribute = function(name, isId) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].isId;\n      } else {\n        return isId;\n      }\n    };\n\n    XMLElement.prototype.setIdAttributeNS = function(namespaceURI, localName, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttributeNode = function(idAttr, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.isEqualNode = function(node) {\n      var i, j, ref1;\n      if (!XMLElement.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.attribs.length !== this.attribs.length) {\n        return false;\n      }\n      for (i = j = 0, ref1 = this.attribs.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; i = 0 <= ref1 ? ++j : --j) {\n        if (!this.attribs[i].isEqualNode(node.attribs[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    return XMLElement;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCharacterData, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLCharacterData = (function(superClass) {\n    extend(XMLCharacterData, superClass);\n\n    function XMLCharacterData(parent) {\n      XMLCharacterData.__super__.constructor.call(this, parent);\n      this.value = '';\n    }\n\n    Object.defineProperty(XMLCharacterData.prototype, 'data', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'length', {\n      get: function() {\n        return this.value.length;\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    XMLCharacterData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCharacterData.prototype.substringData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.appendData = function(arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.insertData = function(offset, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.deleteData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.replaceData = function(offset, count, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.isEqualNode = function(node) {\n      if (!XMLCharacterData.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.data !== this.data) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLCharacterData;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCData, XMLCharacterData,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLCData = (function(superClass) {\n    extend(XMLCData, superClass);\n\n    function XMLCData(parent, text) {\n      XMLCData.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text. \" + this.debugInfo());\n      }\n      this.name = \"#cdata-section\";\n      this.type = NodeType.CData;\n      this.value = this.stringify.cdata(text);\n    }\n\n    XMLCData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCData.prototype.toString = function(options) {\n      return this.options.writer.cdata(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLCData;\n\n  })(XMLCharacterData);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLComment,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLComment = (function(superClass) {\n    extend(XMLComment, superClass);\n\n    function XMLComment(parent, text) {\n      XMLComment.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text. \" + this.debugInfo());\n      }\n      this.name = \"#comment\";\n      this.type = NodeType.Comment;\n      this.value = this.stringify.comment(text);\n    }\n\n    XMLComment.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLComment.prototype.toString = function(options) {\n      return this.options.writer.comment(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLComment;\n\n  })(XMLCharacterData);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDeclaration, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDeclaration = (function(superClass) {\n    extend(XMLDeclaration, superClass);\n\n    function XMLDeclaration(parent, version, encoding, standalone) {\n      var ref;\n      XMLDeclaration.__super__.constructor.call(this, parent);\n      if (isObject(version)) {\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.type = NodeType.Declaration;\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    XMLDeclaration.prototype.toString = function(options) {\n      return this.options.writer.declaration(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDeclaration;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDAttList = (function(superClass) {\n    extend(XMLDTDAttList, superClass);\n\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      XMLDTDAttList.__super__.constructor.call(this, parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name. \" + this.debugInfo(elementName));\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type. \" + this.debugInfo(elementName));\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default. \" + this.debugInfo(elementName));\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      this.elementName = this.stringify.name(elementName);\n      this.type = NodeType.AttributeDeclaration;\n      this.attributeName = this.stringify.name(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      if (defaultValue) {\n        this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      }\n      this.defaultValueType = defaultValueType;\n    }\n\n    XMLDTDAttList.prototype.toString = function(options) {\n      return this.options.writer.dtdAttList(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDAttList;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDEntity, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDEntity = (function(superClass) {\n    extend(XMLDTDEntity, superClass);\n\n    function XMLDTDEntity(parent, pe, name, value) {\n      XMLDTDEntity.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD entity name. \" + this.debugInfo(name));\n      }\n      if (value == null) {\n        throw new Error(\"Missing DTD entity value. \" + this.debugInfo(name));\n      }\n      this.pe = !!pe;\n      this.name = this.stringify.name(name);\n      this.type = NodeType.EntityDeclaration;\n      if (!isObject(value)) {\n        this.value = this.stringify.dtdEntityValue(value);\n        this.internal = true;\n      } else {\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public and/or system identifiers are required for an external entity. \" + this.debugInfo(name));\n        }\n        if (value.pubID && !value.sysID) {\n          throw new Error(\"System identifier is required for a public external entity. \" + this.debugInfo(name));\n        }\n        this.internal = false;\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n        if (value.nData != null) {\n          this.nData = this.stringify.dtdNData(value.nData);\n        }\n        if (this.pe && this.nData) {\n          throw new Error(\"Notation declaration is not allowed in a parameter entity. \" + this.debugInfo(name));\n        }\n      }\n    }\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'notationName', {\n      get: function() {\n        return this.nData || null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlVersion', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDTDEntity.prototype.toString = function(options) {\n      return this.options.writer.dtdEntity(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDEntity;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDElement, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDElement = (function(superClass) {\n    extend(XMLDTDElement, superClass);\n\n    function XMLDTDElement(parent, name, value) {\n      XMLDTDElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.ElementDeclaration;\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    XMLDTDElement.prototype.toString = function(options) {\n      return this.options.writer.dtdElement(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDElement;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDNotation, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDNotation = (function(superClass) {\n    extend(XMLDTDNotation, superClass);\n\n    function XMLDTDNotation(parent, name, value) {\n      XMLDTDNotation.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD notation name. \" + this.debugInfo(name));\n      }\n      if (!value.pubID && !value.sysID) {\n        throw new Error(\"Public or system identifiers are required for an external entity. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.NotationDeclaration;\n      if (value.pubID != null) {\n        this.pubID = this.stringify.dtdPubID(value.pubID);\n      }\n      if (value.sysID != null) {\n        this.sysID = this.stringify.dtdSysID(value.sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    XMLDTDNotation.prototype.toString = function(options) {\n      return this.options.writer.dtdNotation(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDNotation;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNamedNodeMap, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLDocType = (function(superClass) {\n    extend(XMLDocType, superClass);\n\n    function XMLDocType(parent, pubID, sysID) {\n      var child, i, len, ref, ref1, ref2;\n      XMLDocType.__super__.constructor.call(this, parent);\n      this.type = NodeType.DocType;\n      if (parent.children) {\n        ref = parent.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.Element) {\n            this.name = child.name;\n            break;\n          }\n        }\n      }\n      this.documentObject = parent;\n      if (isObject(pubID)) {\n        ref1 = pubID, pubID = ref1.pubID, sysID = ref1.sysID;\n      }\n      if (sysID == null) {\n        ref2 = [pubID, sysID], sysID = ref2[0], pubID = ref2[1];\n      }\n      if (pubID != null) {\n        this.pubID = this.stringify.dtdPubID(pubID);\n      }\n      if (sysID != null) {\n        this.sysID = this.stringify.dtdSysID(sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDocType.prototype, 'entities', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if ((child.type === NodeType.EntityDeclaration) && !child.pe) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'notations', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.NotationDeclaration) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'internalSubset', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLDocType.prototype.element = function(name, value) {\n      var child;\n      child = new XMLDTDElement(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var child;\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.entity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, false, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.pEntity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, true, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.notation = function(name, value) {\n      var child;\n      child = new XMLDTDNotation(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.toString = function(options) {\n      return this.options.writer.docType(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocType.prototype.ele = function(name, value) {\n      return this.element(name, value);\n    };\n\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n    };\n\n    XMLDocType.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocType.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocType.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    XMLDocType.prototype.up = function() {\n      return this.root() || this.documentObject;\n    };\n\n    XMLDocType.prototype.isEqualNode = function(node) {\n      if (!XMLDocType.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.name !== this.name) {\n        return false;\n      }\n      if (node.publicId !== this.publicId) {\n        return false;\n      }\n      if (node.systemId !== this.systemId) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLDocType;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLNode, XMLRaw,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLRaw = (function(superClass) {\n    extend(XMLRaw, superClass);\n\n    function XMLRaw(parent, text) {\n      XMLRaw.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text. \" + this.debugInfo());\n      }\n      this.type = NodeType.Raw;\n      this.value = this.stringify.raw(text);\n    }\n\n    XMLRaw.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLRaw.prototype.toString = function(options) {\n      return this.options.writer.raw(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLRaw;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLText = (function(superClass) {\n    extend(XMLText, superClass);\n\n    function XMLText(parent, text) {\n      XMLText.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing element text. \" + this.debugInfo());\n      }\n      this.name = \"#text\";\n      this.type = NodeType.Text;\n      this.value = this.stringify.text(text);\n    }\n\n    Object.defineProperty(XMLText.prototype, 'isElementContentWhitespace', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLText.prototype, 'wholeText', {\n      get: function() {\n        var next, prev, str;\n        str = '';\n        prev = this.previousSibling;\n        while (prev) {\n          str = prev.data + str;\n          prev = prev.previousSibling;\n        }\n        str += this.data;\n        next = this.nextSibling;\n        while (next) {\n          str = str + next.data;\n          next = next.nextSibling;\n        }\n        return str;\n      }\n    });\n\n    XMLText.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLText.prototype.toString = function(options) {\n      return this.options.writer.text(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLText.prototype.splitText = function(offset) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLText.prototype.replaceWholeText = function(content) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLText;\n\n  })(XMLCharacterData);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLProcessingInstruction,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLProcessingInstruction = (function(superClass) {\n    extend(XMLProcessingInstruction, superClass);\n\n    function XMLProcessingInstruction(parent, target, value) {\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target. \" + this.debugInfo());\n      }\n      this.type = NodeType.ProcessingInstruction;\n      this.target = this.stringify.insTarget(target);\n      this.name = this.target;\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    XMLProcessingInstruction.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLProcessingInstruction.prototype.toString = function(options) {\n      return this.options.writer.processingInstruction(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLProcessingInstruction.prototype.isEqualNode = function(node) {\n      if (!XMLProcessingInstruction.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.target !== this.target) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLProcessingInstruction;\n\n  })(XMLCharacterData);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDummy, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDummy = (function(superClass) {\n    extend(XMLDummy, superClass);\n\n    function XMLDummy(parent) {\n      XMLDummy.__super__.constructor.call(this, parent);\n      this.type = NodeType.Dummy;\n    }\n\n    XMLDummy.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLDummy.prototype.toString = function(options) {\n      return '';\n    };\n\n    return XMLDummy;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNodeList;\n\n  module.exports = XMLNodeList = (function() {\n    function XMLNodeList(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNodeList.prototype, 'length', {\n      get: function() {\n        return this.nodes.length || 0;\n      }\n    });\n\n    XMLNodeList.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNodeList.prototype.item = function(index) {\n      return this.nodes[index] || null;\n    };\n\n    return XMLNodeList;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Disconnected: 1,\n    Preceding: 2,\n    Following: 4,\n    Contains: 8,\n    ContainedBy: 16,\n    ImplementationSpecific: 32\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var DocumentPosition, NodeType, XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLNamedNodeMap, XMLNode, XMLNodeList, XMLProcessingInstruction, XMLRaw, XMLText, getValue, isEmpty, isFunction, isObject, ref1,\n    hasProp = {}.hasOwnProperty;\n\n  ref1 = require('./Utility'), isObject = ref1.isObject, isFunction = ref1.isFunction, isEmpty = ref1.isEmpty, getValue = ref1.getValue;\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  XMLDummy = null;\n\n  NodeType = null;\n\n  XMLNodeList = null;\n\n  XMLNamedNodeMap = null;\n\n  DocumentPosition = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent1) {\n      this.parent = parent1;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      this.value = null;\n      this.children = [];\n      this.baseURI = null;\n      if (!XMLElement) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\n        XMLDummy = require('./XMLDummy');\n        NodeType = require('./NodeType');\n        XMLNodeList = require('./XMLNodeList');\n        XMLNamedNodeMap = require('./XMLNamedNodeMap');\n        DocumentPosition = require('./DocumentPosition');\n      }\n    }\n\n    Object.defineProperty(XMLNode.prototype, 'nodeName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeValue', {\n      get: function() {\n        return this.value;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'parentNode', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'childNodes', {\n      get: function() {\n        if (!this.childNodeList || !this.childNodeList.nodes) {\n          this.childNodeList = new XMLNodeList(this.children);\n        }\n        return this.childNodeList;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'firstChild', {\n      get: function() {\n        return this.children[0] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'lastChild', {\n      get: function() {\n        return this.children[this.children.length - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'previousSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nextSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i + 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'ownerDocument', {\n      get: function() {\n        return this.document() || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'textContent', {\n      get: function() {\n        var child, j, len, ref2, str;\n        if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {\n          str = '';\n          ref2 = this.children;\n          for (j = 0, len = ref2.length; j < len; j++) {\n            child = ref2[j];\n            if (child.textContent) {\n              str += child.textContent;\n            }\n          }\n          return str;\n        } else {\n          return null;\n        }\n      },\n      set: function(value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLNode.prototype.setParent = function(parent) {\n      var child, j, len, ref2, results;\n      this.parent = parent;\n      if (parent) {\n        this.options = parent.options;\n        this.stringify = parent.stringify;\n      }\n      ref2 = this.children;\n      results = [];\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        results.push(child.setParent(this));\n      }\n      return results;\n    };\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref2, ref3, val;\n      lastChild = null;\n      if (attributes === null && (text == null)) {\n        ref2 = [{}, null], attributes = ref2[0], text = ref2[1];\n      }\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref3 = [attributes, text], text = ref3[0], attributes = ref3[1];\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {\n            lastChild = this.dummy();\n          } else if (isObject(val) && isEmpty(val)) {\n            lastChild = this.element(key);\n          } else if (!this.options.keepNullNodes && (val == null)) {\n            lastChild = this.dummy();\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {\n              lastChild = this.element(val);\n            } else {\n              lastChild = this.element(key);\n              lastChild.element(val);\n            }\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else if (!this.options.keepNullNodes && text === null) {\n        lastChild = this.dummy();\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name + \". \" + this.debugInfo());\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, newChild, refChild, removed;\n      if (name != null ? name.type : void 0) {\n        newChild = name;\n        refChild = attributes;\n        newChild.setParent(this);\n        if (refChild) {\n          i = children.indexOf(refChild);\n          removed = children.splice(i);\n          children.push(newChild);\n          Array.prototype.push.apply(children, removed);\n        } else {\n          children.push(newChild);\n        }\n        return newChild;\n      } else {\n        if (this.isRoot) {\n          throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n        }\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i);\n        child = this.parent.element(name, attributes, text);\n        Array.prototype.push.apply(this.parent.children, removed);\n        return child;\n      }\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref2;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element. \" + this.debugInfo());\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref2 = [])), ref2;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref2;\n      if (name != null) {\n        name = getValue(name);\n      }\n      attributes || (attributes = {});\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      if (isObject(value)) {\n        this.element(value);\n      }\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.commentBefore = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.commentAfter = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.dummy = function() {\n      var child;\n      child = new XMLDummy(this);\n      return child;\n    };\n\n    XMLNode.prototype.instruction = function(target, value) {\n      var insTarget, insValue, instruction, j, len;\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (j = 0, len = target.length; j < len; j++) {\n          insTarget = target[j];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        instruction = new XMLProcessingInstruction(this, target, value);\n        this.children.push(instruction);\n      }\n      return this;\n    };\n\n    XMLNode.prototype.instructionBefore = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.instructionAfter = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      if (doc.children.length === 0) {\n        doc.children.unshift(xmldec);\n      } else if (doc.children[0].type === NodeType.Declaration) {\n        doc.children[0] = xmldec;\n      } else {\n        doc.children.unshift(xmldec);\n      }\n      return doc.root() || doc;\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      var child, doc, doctype, i, j, k, len, len1, ref2, ref3;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      ref2 = doc.children;\n      for (i = j = 0, len = ref2.length; j < len; i = ++j) {\n        child = ref2[i];\n        if (child.type === NodeType.DocType) {\n          doc.children[i] = doctype;\n          return doctype;\n        }\n      }\n      ref3 = doc.children;\n      for (i = k = 0, len1 = ref3.length; k < len1; i = ++k) {\n        child = ref3[i];\n        if (child.isRoot) {\n          doc.children.splice(i, 0, doctype);\n          return doctype;\n        }\n      }\n      doc.children.push(doctype);\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node.rootObject;\n        } else if (node.isRoot) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.document = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().end(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node. \" + this.debugInfo());\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node. \" + this.debugInfo());\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importDocument = function(doc) {\n      var clonedRoot;\n      clonedRoot = doc.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.debugInfo = function(name) {\n      var ref2, ref3;\n      name = name || this.name;\n      if ((name == null) && !((ref2 = this.parent) != null ? ref2.name : void 0)) {\n        return \"\";\n      } else if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else if (!((ref3 = this.parent) != null ? ref3.name : void 0)) {\n        return \"node: <\" + name + \">\";\n      } else {\n        return \"node: <\" + name + \">, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(doc) {\n      return this.importDocument(doc);\n    };\n\n    XMLNode.prototype.replaceChild = function(newChild, oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.removeChild = function(oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.appendChild = function(newChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.hasChildNodes = function() {\n      return this.children.length !== 0;\n    };\n\n    XMLNode.prototype.cloneNode = function(deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.normalize = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isSupported = function(feature, version) {\n      return true;\n    };\n\n    XMLNode.prototype.hasAttributes = function() {\n      return this.attribs.length !== 0;\n    };\n\n    XMLNode.prototype.compareDocumentPosition = function(other) {\n      var ref, res;\n      ref = this;\n      if (ref === other) {\n        return 0;\n      } else if (this.document() !== other.document()) {\n        res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;\n        if (Math.random() < 0.5) {\n          res |= DocumentPosition.Preceding;\n        } else {\n          res |= DocumentPosition.Following;\n        }\n        return res;\n      } else if (ref.isAncestor(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Preceding;\n      } else if (ref.isDescendant(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Following;\n      } else if (ref.isPreceding(other)) {\n        return DocumentPosition.Preceding;\n      } else {\n        return DocumentPosition.Following;\n      }\n    };\n\n    XMLNode.prototype.isSameNode = function(other) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupPrefix = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isDefaultNamespace = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupNamespaceURI = function(prefix) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isEqualNode = function(node) {\n      var i, j, ref2;\n      if (node.nodeType !== this.nodeType) {\n        return false;\n      }\n      if (node.children.length !== this.children.length) {\n        return false;\n      }\n      for (i = j = 0, ref2 = this.children.length - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {\n        if (!this.children[i].isEqualNode(node.children[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    XMLNode.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.setUserData = function(key, data, handler) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.getUserData = function(key) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.contains = function(other) {\n      if (!other) {\n        return false;\n      }\n      return other === this || this.isDescendant(other);\n    };\n\n    XMLNode.prototype.isDescendant = function(node) {\n      var child, isDescendantChild, j, len, ref2;\n      ref2 = this.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (node === child) {\n          return true;\n        }\n        isDescendantChild = child.isDescendant(node);\n        if (isDescendantChild) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    XMLNode.prototype.isAncestor = function(node) {\n      return node.isDescendant(this);\n    };\n\n    XMLNode.prototype.isPreceding = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos < thisPos;\n      }\n    };\n\n    XMLNode.prototype.isFollowing = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos > thisPos;\n      }\n    };\n\n    XMLNode.prototype.treePosition = function(node) {\n      var found, pos;\n      pos = 0;\n      found = false;\n      this.foreachTreeNode(this.document(), function(childNode) {\n        pos++;\n        if (!found && childNode === node) {\n          return found = true;\n        }\n      });\n      if (found) {\n        return pos;\n      } else {\n        return -1;\n      }\n    };\n\n    XMLNode.prototype.foreachTreeNode = function(node, func) {\n      var child, j, len, ref2, res;\n      node || (node = this.document());\n      ref2 = node.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (res = func(child)) {\n          return res;\n        } else {\n          res = this.foreachTreeNode(child, func);\n          if (res) {\n            return res;\n          }\n        }\n      }\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringifier,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    function XMLStringifier(options) {\n      this.assertLegalName = bind(this.assertLegalName, this);\n      this.assertLegalChar = bind(this.assertLegalChar, this);\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      if (!this.options.version) {\n        this.options.version = '1.0';\n      }\n      ref = options.stringify || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n    }\n\n    XMLStringifier.prototype.name = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalName('' + val || '');\n    };\n\n    XMLStringifier.prototype.text = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.textEscape('' + val || ''));\n    };\n\n    XMLStringifier.prototype.cdata = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      val = val.replace(']]>', ']]]]><![CDATA[>');\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.comment = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/--/)) {\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.raw = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.attValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.attEscape(val = '' + val || ''));\n    };\n\n    XMLStringifier.prototype.insTarget = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.insValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/\\?>/)) {\n        throw new Error(\"Invalid processing instruction value: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlVersion = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/1\\.[0-9]+/)) {\n        throw new Error(\"Invalid version number: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlEncoding = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n        throw new Error(\"Invalid encoding: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlStandalone = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      if (val) {\n        return \"yes\";\n      } else {\n        return \"no\";\n      }\n    };\n\n    XMLStringifier.prototype.dtdPubID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdSysID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdElementValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttType = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdNData = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    XMLStringifier.prototype.assertLegalChar = function(str) {\n      var regex, res;\n      if (this.options.noValidation) {\n        return str;\n      }\n      regex = '';\n      if (this.options.version === '1.0') {\n        regex = /[\\0-\\x08\\x0B\\f\\x0E-\\x1F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      } else if (this.options.version === '1.1') {\n        regex = /[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.assertLegalName = function(str) {\n      var regex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      this.assertLegalChar(str);\n      regex = /^([:A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])([\\x2D\\.0-:A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*$/;\n      if (!str.match(regex)) {\n        throw new Error(\"Invalid character in name\");\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.textEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n    };\n\n    XMLStringifier.prototype.attEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n    };\n\n    return XMLStringifier;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    None: 0,\n    OpenTag: 1,\n    InsideTag: 2,\n    CloseTag: 3\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLProcessingInstruction, XMLRaw, XMLText, XMLWriterBase, assign,\n    hasProp = {}.hasOwnProperty;\n\n  assign = require('./Utility').assign;\n\n  NodeType = require('./NodeType');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDummy = require('./XMLDummy');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLWriterBase = (function() {\n    function XMLWriterBase(options) {\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[\"_\" + key] = this[key];\n        this[key] = value;\n      }\n    }\n\n    XMLWriterBase.prototype.filterOptions = function(options) {\n      var filteredOptions, ref, ref1, ref2, ref3, ref4, ref5, ref6;\n      options || (options = {});\n      options = assign({}, this.options, options);\n      filteredOptions = {\n        writer: this\n      };\n      filteredOptions.pretty = options.pretty || false;\n      filteredOptions.allowEmpty = options.allowEmpty || false;\n      filteredOptions.indent = (ref = options.indent) != null ? ref : '  ';\n      filteredOptions.newline = (ref1 = options.newline) != null ? ref1 : '\\n';\n      filteredOptions.offset = (ref2 = options.offset) != null ? ref2 : 0;\n      filteredOptions.dontPrettyTextNodes = (ref3 = (ref4 = options.dontPrettyTextNodes) != null ? ref4 : options.dontprettytextnodes) != null ? ref3 : 0;\n      filteredOptions.spaceBeforeSlash = (ref5 = (ref6 = options.spaceBeforeSlash) != null ? ref6 : options.spacebeforeslash) != null ? ref5 : '';\n      if (filteredOptions.spaceBeforeSlash === true) {\n        filteredOptions.spaceBeforeSlash = ' ';\n      }\n      filteredOptions.suppressPrettyCount = 0;\n      filteredOptions.user = {};\n      filteredOptions.state = WriterState.None;\n      return filteredOptions;\n    };\n\n    XMLWriterBase.prototype.indent = function(node, options, level) {\n      var indentLevel;\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else if (options.pretty) {\n        indentLevel = (level || 0) + options.offset + 1;\n        if (indentLevel > 0) {\n          return new Array(indentLevel).join(options.indent);\n        }\n      }\n      return '';\n    };\n\n    XMLWriterBase.prototype.endline = function(node, options, level) {\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else {\n        return options.newline;\n      }\n    };\n\n    XMLWriterBase.prototype.attribute = function(att, options, level) {\n      var r;\n      this.openAttribute(att, options, level);\n      r = ' ' + att.name + '=\"' + att.value + '\"';\n      this.closeAttribute(att, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.cdata = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<![CDATA[';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ']]>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.comment = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!-- ';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ' -->' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.declaration = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?xml';\n      options.state = WriterState.InsideTag;\n      r += ' version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.docType = function(node, options, level) {\n      var child, i, len, r, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      r += '<!DOCTYPE ' + node.root().name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += ']';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, i, j, len, len1, name, prettySuppressed, r, ref, ref1, ref2;\n      level || (level = 0);\n      prettySuppressed = false;\n      r = '';\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r += this.indent(node, options, level) + '<' + node.name;\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        r += this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          r += '>';\n          options.state = WriterState.CloseTag;\n          r += '</' + node.name + '>' + this.endline(node, options, level);\n        } else {\n          options.state = WriterState.CloseTag;\n          r += options.spaceBeforeSlash + '/>' + this.endline(node, options, level);\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        r += '>';\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        r += this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        r += '</' + node.name + '>' + this.endline(node, options, level);\n      } else {\n        if (options.dontPrettyTextNodes) {\n          ref1 = node.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            if ((child.type === NodeType.Text || child.type === NodeType.Raw) && (child.value != null)) {\n              options.suppressPrettyCount++;\n              prettySuppressed = true;\n              break;\n            }\n          }\n        }\n        r += '>' + this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref2 = node.children;\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += this.indent(node, options, level) + '</' + node.name + '>';\n        if (prettySuppressed) {\n          options.suppressPrettyCount--;\n        }\n        r += this.endline(node, options, level);\n        options.state = WriterState.None;\n      }\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.writeChildNode = function(node, options, level) {\n      switch (node.type) {\n        case NodeType.CData:\n          return this.cdata(node, options, level);\n        case NodeType.Comment:\n          return this.comment(node, options, level);\n        case NodeType.Element:\n          return this.element(node, options, level);\n        case NodeType.Raw:\n          return this.raw(node, options, level);\n        case NodeType.Text:\n          return this.text(node, options, level);\n        case NodeType.ProcessingInstruction:\n          return this.processingInstruction(node, options, level);\n        case NodeType.Dummy:\n          return '';\n        case NodeType.Declaration:\n          return this.declaration(node, options, level);\n        case NodeType.DocType:\n          return this.docType(node, options, level);\n        case NodeType.AttributeDeclaration:\n          return this.dtdAttList(node, options, level);\n        case NodeType.ElementDeclaration:\n          return this.dtdElement(node, options, level);\n        case NodeType.EntityDeclaration:\n          return this.dtdEntity(node, options, level);\n        case NodeType.NotationDeclaration:\n          return this.dtdNotation(node, options, level);\n        default:\n          throw new Error(\"Unknown XML node type: \" + node.constructor.name);\n      }\n    };\n\n    XMLWriterBase.prototype.processingInstruction = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?';\n      options.state = WriterState.InsideTag;\n      r += node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.raw = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.text = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdAttList = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ATTLIST';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdElement = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ELEMENT';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name + ' ' + node.value;\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdEntity = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ENTITY';\n      options.state = WriterState.InsideTag;\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdNotation = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!NOTATION';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.openNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.closeNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.openAttribute = function(att, options, level) {};\n\n    XMLWriterBase.prototype.closeAttribute = function(att, options, level) {};\n\n    return XMLWriterBase;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStringWriter = (function(superClass) {\n    extend(XMLStringWriter, superClass);\n\n    function XMLStringWriter(options) {\n      XMLStringWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStringWriter.prototype.document = function(doc, options) {\n      var child, i, len, r, ref;\n      options = this.filterOptions(options);\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += this.writeChildNode(child, options, 0);\n      }\n      if (options.pretty && r.slice(-options.newline.length) === options.newline) {\n        r = r.slice(0, -options.newline.length);\n      }\n      return r;\n    };\n\n    return XMLStringWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDOMConfiguration, XMLDOMImplementation, XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isPlainObject = require('./Utility').isPlainObject;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDOMConfiguration = require('./XMLDOMConfiguration');\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocument = (function(superClass) {\n    extend(XMLDocument, superClass);\n\n    function XMLDocument(options) {\n      XMLDocument.__super__.constructor.call(this, null);\n      this.name = \"#document\";\n      this.type = NodeType.Document;\n      this.documentURI = null;\n      this.domConfig = new XMLDOMConfiguration();\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.stringify = new XMLStringifier(options);\n    }\n\n    Object.defineProperty(XMLDocument.prototype, 'implementation', {\n      value: new XMLDOMImplementation()\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'doctype', {\n      get: function() {\n        var child, i, len, ref;\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.DocType) {\n            return child;\n          }\n        }\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'documentElement', {\n      get: function() {\n        return this.rootObject || null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'strictErrorChecking', {\n      get: function() {\n        return false;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlEncoding', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].encoding;\n        } else {\n          return null;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlStandalone', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].standalone === 'yes';\n        } else {\n          return false;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlVersion', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].version;\n        } else {\n          return \"1.0\";\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'URL', {\n      get: function() {\n        return this.documentURI;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'origin', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'compatMode', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'characterSet', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'contentType', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDocument.prototype.end = function(writer) {\n      var writerOptions;\n      writerOptions = {};\n      if (!writer) {\n        writer = this.options.writer;\n      } else if (isPlainObject(writer)) {\n        writerOptions = writer;\n        writer = this.options.writer;\n      }\n      return writer.document(this, writer.filterOptions(writerOptions));\n    };\n\n    XMLDocument.prototype.toString = function(options) {\n      return this.options.writer.document(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocument.prototype.createElement = function(tagName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createDocumentFragment = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTextNode = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createComment = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createCDATASection = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createProcessingInstruction = function(target, data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttribute = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEntityReference = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.importNode = function(importedNode, deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createElementNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttributeNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementById = function(elementId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.adoptNode = function(source) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.normalizeDocument = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.renameNode = function(node, namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEvent = function(eventInterface) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createRange = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createNodeIterator = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTreeWalker = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLDocument;\n\n  })(XMLNode);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocument, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;\n\n  NodeType = require('./NodeType');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      this.type = NodeType.Document;\n      options || (options = {});\n      writerOptions = {};\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.writerOptions = this.writer.filterOptions(writerOptions);\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.createChildNode = function(node) {\n      var att, attName, attributes, child, i, len, ref1, ref2;\n      switch (node.type) {\n        case NodeType.CData:\n          this.cdata(node.value);\n          break;\n        case NodeType.Comment:\n          this.comment(node.value);\n          break;\n        case NodeType.Element:\n          attributes = {};\n          ref1 = node.attribs;\n          for (attName in ref1) {\n            if (!hasProp.call(ref1, attName)) continue;\n            att = ref1[attName];\n            attributes[attName] = att.value;\n          }\n          this.node(node.name, attributes);\n          break;\n        case NodeType.Dummy:\n          this.dummy();\n          break;\n        case NodeType.Raw:\n          this.raw(node.value);\n          break;\n        case NodeType.Text:\n          this.text(node.value);\n          break;\n        case NodeType.ProcessingInstruction:\n          this.instruction(node.target, node.value);\n          break;\n        default:\n          throw new Error(\"This XML node type is not supported in a JS object: \" + node.constructor.name);\n      }\n      ref2 = node.children;\n      for (i = 0, len = ref2.length; i < len; i++) {\n        child = ref2[i];\n        this.createChildNode(child);\n        if (child.type === NodeType.Element) {\n          this.up();\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dummy = function() {\n      return this;\n    };\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1;\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n      this.openCurrent();\n      name = getValue(name);\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      var child, i, len, oldValidationFlag, ref1, root;\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        this.dtdElement.apply(this, arguments);\n      } else {\n        if (Array.isArray(name) || isObject(name) || isFunction(name)) {\n          oldValidationFlag = this.options.noValidation;\n          this.options.noValidation = true;\n          root = new XMLDocument(this.options).element('TEMP_ROOT');\n          root.element(name);\n          this.options.noValidation = oldValidationFlag;\n          ref1 = root.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            this.createChildNode(child);\n            if (child.type === NodeType.Element) {\n              this.up();\n            }\n          }\n        } else {\n          this.node(name, attributes, text);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      var att, chunk, name, ref1;\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {\n          this.root = node;\n        }\n        chunk = '';\n        if (node.type === NodeType.Element) {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<' + node.name;\n          ref1 = node.attribs;\n          for (name in ref1) {\n            if (!hasProp.call(ref1, name)) continue;\n            att = ref1[name];\n            chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);\n          }\n          chunk += (node.children ? '>' : '/>') + this.writer.endline(node, this.writerOptions, this.currentLevel);\n          this.writerOptions.state = WriterState.InsideTag;\n        } else {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<!DOCTYPE ' + node.rootNodeName;\n          if (node.pubID && node.sysID) {\n            chunk += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n          } else if (node.sysID) {\n            chunk += ' SYSTEM \"' + node.sysID + '\"';\n          }\n          if (node.children) {\n            chunk += ' [';\n            this.writerOptions.state = WriterState.InsideTag;\n          } else {\n            this.writerOptions.state = WriterState.CloseTag;\n            chunk += '>';\n          }\n          chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.onData(chunk, this.currentLevel);\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      var chunk;\n      if (!node.isClosed) {\n        chunk = '';\n        this.writerOptions.state = WriterState.CloseTag;\n        if (node.type === NodeType.Element) {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '</' + node.name + '>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        } else {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + ']>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.writerOptions.state = WriterState.None;\n        this.onData(chunk, this.currentLevel);\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.debugInfo = function(name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLStreamWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLStreamWriter = (function(superClass) {\n    extend(XMLStreamWriter, superClass);\n\n    function XMLStreamWriter(stream, options) {\n      this.stream = stream;\n      XMLStreamWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStreamWriter.prototype.endline = function(node, options, level) {\n      if (node.isLastRootNode && options.state === WriterState.CloseTag) {\n        return '';\n      } else {\n        return XMLStreamWriter.__super__.endline.call(this, node, options, level);\n      }\n    };\n\n    XMLStreamWriter.prototype.document = function(doc, options) {\n      var child, i, j, k, len, len1, ref, ref1, results;\n      ref = doc.children;\n      for (i = j = 0, len = ref.length; j < len; i = ++j) {\n        child = ref[i];\n        child.isLastRootNode = i === doc.children.length - 1;\n      }\n      options = this.filterOptions(options);\n      ref1 = doc.children;\n      results = [];\n      for (k = 0, len1 = ref1.length; k < len1; k++) {\n        child = ref1[k];\n        results.push(this.writeChildNode(child, options, 0));\n      }\n      return results;\n    };\n\n    XMLStreamWriter.prototype.attribute = function(att, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.attribute.call(this, att, options, level));\n    };\n\n    XMLStreamWriter.prototype.cdata = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.cdata.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.comment = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.comment.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.declaration = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.declaration.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.docType = function(node, options, level) {\n      var child, j, len, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (j = 0, len = ref.length; j < len; j++) {\n          child = ref[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(']');\n      }\n      options.state = WriterState.CloseTag;\n      this.stream.write(options.spaceBeforeSlash + '>');\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, j, len, name, prettySuppressed, ref, ref1;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level) + '<' + node.name);\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          this.stream.write('>');\n          options.state = WriterState.CloseTag;\n          this.stream.write('</' + node.name + '>');\n        } else {\n          options.state = WriterState.CloseTag;\n          this.stream.write(options.spaceBeforeSlash + '/>');\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        this.stream.write('>');\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref1 = node.children;\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(this.indent(node, options, level) + '</' + node.name + '>');\n      }\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.processingInstruction = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.raw = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.raw.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.text = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.text.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdAttList = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdElement = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdEntity = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdNotation = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this, node, options, level));\n    };\n\n    return XMLStreamWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLDOMImplementation, XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\n\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  NodeType = require('./NodeType');\n\n  WriterState = require('./WriterState');\n\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name.\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    doc = new XMLDocument(options);\n    root = doc.element(name);\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.dtd(options);\n      }\n    }\n    return root;\n  };\n\n  module.exports.begin = function(options, onData, onEnd) {\n    var ref1;\n    if (isFunction(options)) {\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n  module.exports.implementation = new XMLDOMImplementation();\n\n  module.exports.nodeType = NodeType;\n\n  module.exports.writerState = WriterState;\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n", ";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (isWhitespace(c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var bom, defaults, defineProperty, events, isEmpty, processItem, processors, sax, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax = require('sax');\n\n  events = require('events');\n\n  bom = require('./bom');\n\n  processors = require('./processors');\n\n  setImmediate = require('timers').setImmediate;\n\n  defaults = require('./defaults').defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  defineProperty = function(obj, key, value) {\n    var descriptor;\n    descriptor = Object.create(null);\n    descriptor.value = value;\n    descriptor.writable = true;\n    descriptor.enumerable = true;\n    descriptor.configurable = true;\n    return Object.defineProperty(obj, key, descriptor);\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseStringPromise = bind(this.parseStringPromise, this);\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return defineProperty(obj, key, newValue);\n        } else {\n          return defineProperty(obj, key, [newValue]);\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          defineProperty(obj, key, [obj[key]]);\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = {};\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = {};\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                defineProperty(obj[attrkey], processedKey, newValue);\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            if (typeof _this.options.emptyTag === 'function') {\n              obj = _this.options.emptyTag();\n            } else {\n              obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n            }\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = {};\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = {};\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                defineProperty(objClone, key, obj[key]);\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = {};\n              defineProperty(obj, nodeName, old);\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })(this);\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    Parser.prototype.parseStringPromise = function(str) {\n      return new Promise((function(_this) {\n        return function(resolve, reject) {\n          return _this.parseString(str, function(err, value) {\n            if (err) {\n              return reject(err);\n            } else {\n              return resolve(value);\n            }\n          });\n        };\n      })(this));\n    };\n\n    return Parser;\n\n  })(events);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n  exports.parseStringPromise = function(str, a) {\n    var options, parser;\n    if (typeof a === 'object') {\n      options = a;\n    }\n    parser = new exports.Parser(options);\n    return parser.parseStringPromise(str);\n  };\n\n}).call(this);\n", "// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, parser, processors,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults = require('./defaults');\n\n  builder = require('./builder');\n\n  parser = require('./parser');\n\n  processors = require('./processors');\n\n  exports.defaults = defaults.defaults;\n\n  exports.processors = processors;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder.Builder;\n\n  exports.Parser = parser.Parser;\n\n  exports.parseString = parser.parseString;\n\n  exports.parseStringPromise = parser.parseStringPromise;\n\n}).call(this);\n", "/*\nCopyright (c) 2012, Yahoo! Inc. All rights reserved.\nCode licensed under the BSD License:\nhttp://yuilibrary.com/license/\n*/\n\nvar fs = require('fs'),\n    path = require('path');\n\n/* istanbul ignore next */\nvar exists = fs.exists || path.exists;\n\nvar walkFile = function(str, cb) {\n    var data = [], item;\n\n    [ 'end_of_record' ].concat(str.split('\\n')).forEach(function(line) {\n        line = line.trim();\n        var allparts = line.split(':'),\n            parts = [allparts.shift(), allparts.join(':')],\n            lines, fn;\n\n        switch (parts[0].toUpperCase()) {\n            case 'TN':\n                item.title = parts[1].trim();\n                break;\n            case 'SF':\n                item.file = parts.slice(1).join(':').trim();\n                break;\n            case 'FNF':\n                item.functions.found = Number(parts[1].trim());\n                break;\n            case 'FNH':\n                item.functions.hit = Number(parts[1].trim());\n                break;\n            case 'LF':\n                item.lines.found = Number(parts[1].trim());\n                break;\n            case 'LH':\n                item.lines.hit = Number(parts[1].trim());\n                break;\n            case 'DA':\n                lines = parts[1].split(',');\n                item.lines.details.push({\n                    line: Number(lines[0]),\n                    hit: Number(lines[1])\n                });\n                break;\n            case 'FN':\n                fn = parts[1].split(',');\n                item.functions.details.push({\n                    name: fn[1],\n                    line: Number(fn[0])\n                });\n                break;\n            case 'FNDA':\n                fn = parts[1].split(',');\n                item.functions.details.some(function(i, k) {\n                    if (i.name === fn[1] && i.hit === undefined) {\n                        item.functions.details[k].hit = Number(fn[0]);\n                        return true;\n                    }\n                });\n                break;\n            case 'BRDA':\n                fn = parts[1].split(',');\n                item.branches.details.push({\n                    line: Number(fn[0]),\n                    block: Number(fn[1]),\n                    branch: Number(fn[2]),\n                    taken: ((fn[3] === '-') ? 0 : Number(fn[3]))\n                });\n                break;\n            case 'BRF':\n                item.branches.found = Number(parts[1]);\n                break;\n            case 'BRH':\n                item.branches.hit = Number(parts[1]);\n                break;\n        }\n\n        if (line.indexOf('end_of_record') > -1) {\n            data.push(item);\n            item = {\n              lines: {\n                  found: 0,\n                  hit: 0,\n                  details: []\n              },\n              functions: {\n                  hit: 0,\n                  found: 0,\n                  details: []\n              },\n              branches: {\n                hit: 0,\n                found: 0,\n                details: []\n              }\n            };\n        }\n    });\n\n    data.shift();\n\n    if (data.length) {\n        cb(null, data);\n    } else {\n        cb('Failed to parse string');\n    }\n};\n\nvar parse = function(file, cb) {\n    exists(file, function(x) {\n        if (!x) {\n            return walkFile(file, cb);\n        }\n        fs.readFile(file, 'utf8', function(err, str) {\n            walkFile(str, cb);\n        });\n    });\n\n};\n\n\nmodule.exports = parse;\nmodule.exports.source = walkFile;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asPromise = exports.thenable = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\nfunction asPromise(value) {\n    if (value instanceof Promise) {\n        return value;\n    }\n    else if (thenable(value)) {\n        return new Promise((resolve, reject) => {\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\n        });\n    }\n    else {\n        return Promise.resolve(value);\n    }\n}\nexports.asPromise = asPromise;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues || (exports.TraceValues = TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"util\");\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, encoding) {\n        return Buffer.from(value, encoding);\n    }\n    toString(value, encoding) {\n        if (value instanceof Buffer) {\n            return value.toString(encoding);\n        }\n        else {\n            return new util_1.TextDecoder(encoding).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer instanceof Buffer ? buffer : Buffer.from(buffer);\n        }\n        else {\n            return buffer instanceof Buffer ? buffer.slice(0, length) : Buffer.from(buffer, 0, length);\n        }\n    }\n    allocNative(length) {\n        return Buffer.allocUnsafe(length);\n    }\n}\nMessageBuffer.emptyBuffer = Buffer.allocUnsafe(0);\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return api_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (stream) => new ReadableStreamWrapper(stream),\n        asWritableStream: (stream) => new WritableStreamWrapper(stream)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setImmediate(callback, ...args);\n            return { dispose: () => clearImmediate(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.createServerSocketTransport = exports.createClientSocketTransport = exports.createServerPipeTransport = exports.createClientPipeTransport = exports.generateRandomPipeName = exports.StreamMessageWriter = exports.StreamMessageReader = exports.SocketMessageWriter = exports.SocketMessageReader = exports.PortMessageWriter = exports.PortMessageReader = exports.IPCMessageWriter = exports.IPCMessageReader = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        const eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass PortMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this.onData = new api_1.Emitter;\n        port.on('close', () => this.fireClose);\n        port.on('error', (error) => this.fireError(error));\n        port.on('message', (message) => {\n            this.onData.fire(message);\n        });\n    }\n    listen(callback) {\n        return this.onData.event(callback);\n    }\n}\nexports.PortMessageReader = PortMessageReader;\nclass PortMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.on('close', () => this.fireClose());\n        port.on('error', (error) => this.fireError(error));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.PortMessageWriter = PortMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super((0, ril_1.default)().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super((0, ril_1.default)().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readable, encoding) {\n        super((0, ril_1.default)().stream.asReadableStream(readable), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super((0, ril_1.default)().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nconst XDG_RUNTIME_DIR = process.env['XDG_RUNTIME_DIR'];\nconst safeIpcPathLengths = new Map([\n    ['linux', 107],\n    ['darwin', 103]\n]);\nfunction generateRandomPipeName() {\n    const randomSuffix = (0, crypto_1.randomBytes)(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    let result;\n    if (XDG_RUNTIME_DIR) {\n        result = path.join(XDG_RUNTIME_DIR, `vscode-ipc-${randomSuffix}.sock`);\n    }\n    else {\n        result = path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n    const limit = safeIpcPathLengths.get(process.platform);\n    if (limit !== undefined && result.length > limit) {\n        (0, ril_1.default)().console.warn(`WARNING: IPC handle \"${result}\" is longer than ${limit} characters.`);\n    }\n    return result;\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isReadableStream(value) {\n    const candidate = value;\n    return candidate.read !== undefined && candidate.addListener !== undefined;\n}\nfunction isWritableStream(value) {\n    const candidate = value;\n    return candidate.write !== undefined && candidate.addListener !== undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isReadableStream(input) ? new StreamMessageReader(input) : input;\n    const writer = isWritableStream(output) ? new StreamMessageWriter(output) : output;\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');", "(function (factory) {\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        var v = factory(require, exports);\n        if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === \"function\" && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    /* --------------------------------------------------------------------------------------------\n     * Copyright (c) Microsoft Corporation. All rights reserved.\n     * Licensed under the MIT License. See License.txt in the project root for license information.\n     * ------------------------------------------------------------------------------------------ */\n    'use strict';\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.TextDocument = exports.EOL = exports.WorkspaceFolder = exports.InlineCompletionContext = exports.SelectedCompletionInfo = exports.InlineCompletionTriggerKind = exports.InlineCompletionList = exports.InlineCompletionItem = exports.StringValue = exports.InlayHint = exports.InlayHintLabelPart = exports.InlayHintKind = exports.InlineValueContext = exports.InlineValueEvaluatableExpression = exports.InlineValueVariableLookup = exports.InlineValueText = exports.SemanticTokens = exports.SemanticTokenModifiers = exports.SemanticTokenTypes = exports.SelectionRange = exports.DocumentLink = exports.FormattingOptions = exports.CodeLens = exports.CodeAction = exports.CodeActionContext = exports.CodeActionTriggerKind = exports.CodeActionKind = exports.DocumentSymbol = exports.WorkspaceSymbol = exports.SymbolInformation = exports.SymbolTag = exports.SymbolKind = exports.DocumentHighlight = exports.DocumentHighlightKind = exports.SignatureInformation = exports.ParameterInformation = exports.Hover = exports.MarkedString = exports.CompletionList = exports.CompletionItem = exports.CompletionItemLabelDetails = exports.InsertTextMode = exports.InsertReplaceEdit = exports.CompletionItemTag = exports.InsertTextFormat = exports.CompletionItemKind = exports.MarkupContent = exports.MarkupKind = exports.TextDocumentItem = exports.OptionalVersionedTextDocumentIdentifier = exports.VersionedTextDocumentIdentifier = exports.TextDocumentIdentifier = exports.WorkspaceChange = exports.WorkspaceEdit = exports.DeleteFile = exports.RenameFile = exports.CreateFile = exports.TextDocumentEdit = exports.AnnotatedTextEdit = exports.ChangeAnnotationIdentifier = exports.ChangeAnnotation = exports.TextEdit = exports.Command = exports.Diagnostic = exports.CodeDescription = exports.DiagnosticTag = exports.DiagnosticSeverity = exports.DiagnosticRelatedInformation = exports.FoldingRange = exports.FoldingRangeKind = exports.ColorPresentation = exports.ColorInformation = exports.Color = exports.LocationLink = exports.Location = exports.Range = exports.Position = exports.uinteger = exports.integer = exports.URI = exports.DocumentUri = void 0;\n    var DocumentUri;\n    (function (DocumentUri) {\n        function is(value) {\n            return typeof value === 'string';\n        }\n        DocumentUri.is = is;\n    })(DocumentUri || (exports.DocumentUri = DocumentUri = {}));\n    var URI;\n    (function (URI) {\n        function is(value) {\n            return typeof value === 'string';\n        }\n        URI.is = is;\n    })(URI || (exports.URI = URI = {}));\n    var integer;\n    (function (integer) {\n        integer.MIN_VALUE = -2147483648;\n        integer.MAX_VALUE = 2147483647;\n        function is(value) {\n            return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n        }\n        integer.is = is;\n    })(integer || (exports.integer = integer = {}));\n    var uinteger;\n    (function (uinteger) {\n        uinteger.MIN_VALUE = 0;\n        uinteger.MAX_VALUE = 2147483647;\n        function is(value) {\n            return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n        }\n        uinteger.is = is;\n    })(uinteger || (exports.uinteger = uinteger = {}));\n    /**\n     * The Position namespace provides helper functions to work with\n     * {@link Position} literals.\n     */\n    var Position;\n    (function (Position) {\n        /**\n         * Creates a new Position literal from the given line and character.\n         * @param line The position's line.\n         * @param character The position's character.\n         */\n        function create(line, character) {\n            if (line === Number.MAX_VALUE) {\n                line = uinteger.MAX_VALUE;\n            }\n            if (character === Number.MAX_VALUE) {\n                character = uinteger.MAX_VALUE;\n            }\n            return { line: line, character: character };\n        }\n        Position.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Position} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n        }\n        Position.is = is;\n    })(Position || (exports.Position = Position = {}));\n    /**\n     * The Range namespace provides helper functions to work with\n     * {@link Range} literals.\n     */\n    var Range;\n    (function (Range) {\n        function create(one, two, three, four) {\n            if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n                return { start: Position.create(one, two), end: Position.create(three, four) };\n            }\n            else if (Position.is(one) && Position.is(two)) {\n                return { start: one, end: two };\n            }\n            else {\n                throw new Error(\"Range#create called with invalid arguments[\".concat(one, \", \").concat(two, \", \").concat(three, \", \").concat(four, \"]\"));\n            }\n        }\n        Range.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Range} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n        }\n        Range.is = is;\n    })(Range || (exports.Range = Range = {}));\n    /**\n     * The Location namespace provides helper functions to work with\n     * {@link Location} literals.\n     */\n    var Location;\n    (function (Location) {\n        /**\n         * Creates a Location literal.\n         * @param uri The location's uri.\n         * @param range The location's range.\n         */\n        function create(uri, range) {\n            return { uri: uri, range: range };\n        }\n        Location.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Location} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n        }\n        Location.is = is;\n    })(Location || (exports.Location = Location = {}));\n    /**\n     * The LocationLink namespace provides helper functions to work with\n     * {@link LocationLink} literals.\n     */\n    var LocationLink;\n    (function (LocationLink) {\n        /**\n         * Creates a LocationLink literal.\n         * @param targetUri The definition's uri.\n         * @param targetRange The full range of the definition.\n         * @param targetSelectionRange The span of the symbol definition at the target.\n         * @param originSelectionRange The span of the symbol being defined in the originating source file.\n         */\n        function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n            return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n        }\n        LocationLink.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link LocationLink} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n                && Range.is(candidate.targetSelectionRange)\n                && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n        }\n        LocationLink.is = is;\n    })(LocationLink || (exports.LocationLink = LocationLink = {}));\n    /**\n     * The Color namespace provides helper functions to work with\n     * {@link Color} literals.\n     */\n    var Color;\n    (function (Color) {\n        /**\n         * Creates a new Color literal.\n         */\n        function create(red, green, blue, alpha) {\n            return {\n                red: red,\n                green: green,\n                blue: blue,\n                alpha: alpha,\n            };\n        }\n        Color.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Color} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n                && Is.numberRange(candidate.green, 0, 1)\n                && Is.numberRange(candidate.blue, 0, 1)\n                && Is.numberRange(candidate.alpha, 0, 1);\n        }\n        Color.is = is;\n    })(Color || (exports.Color = Color = {}));\n    /**\n     * The ColorInformation namespace provides helper functions to work with\n     * {@link ColorInformation} literals.\n     */\n    var ColorInformation;\n    (function (ColorInformation) {\n        /**\n         * Creates a new ColorInformation literal.\n         */\n        function create(range, color) {\n            return {\n                range: range,\n                color: color,\n            };\n        }\n        ColorInformation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n        }\n        ColorInformation.is = is;\n    })(ColorInformation || (exports.ColorInformation = ColorInformation = {}));\n    /**\n     * The Color namespace provides helper functions to work with\n     * {@link ColorPresentation} literals.\n     */\n    var ColorPresentation;\n    (function (ColorPresentation) {\n        /**\n         * Creates a new ColorInformation literal.\n         */\n        function create(label, textEdit, additionalTextEdits) {\n            return {\n                label: label,\n                textEdit: textEdit,\n                additionalTextEdits: additionalTextEdits,\n            };\n        }\n        ColorPresentation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.label)\n                && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n                && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n        }\n        ColorPresentation.is = is;\n    })(ColorPresentation || (exports.ColorPresentation = ColorPresentation = {}));\n    /**\n     * A set of predefined range kinds.\n     */\n    var FoldingRangeKind;\n    (function (FoldingRangeKind) {\n        /**\n         * Folding range for a comment\n         */\n        FoldingRangeKind.Comment = 'comment';\n        /**\n         * Folding range for an import or include\n         */\n        FoldingRangeKind.Imports = 'imports';\n        /**\n         * Folding range for a region (e.g. `#region`)\n         */\n        FoldingRangeKind.Region = 'region';\n    })(FoldingRangeKind || (exports.FoldingRangeKind = FoldingRangeKind = {}));\n    /**\n     * The folding range namespace provides helper functions to work with\n     * {@link FoldingRange} literals.\n     */\n    var FoldingRange;\n    (function (FoldingRange) {\n        /**\n         * Creates a new FoldingRange literal.\n         */\n        function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n            var result = {\n                startLine: startLine,\n                endLine: endLine\n            };\n            if (Is.defined(startCharacter)) {\n                result.startCharacter = startCharacter;\n            }\n            if (Is.defined(endCharacter)) {\n                result.endCharacter = endCharacter;\n            }\n            if (Is.defined(kind)) {\n                result.kind = kind;\n            }\n            if (Is.defined(collapsedText)) {\n                result.collapsedText = collapsedText;\n            }\n            return result;\n        }\n        FoldingRange.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n                && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n                && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n                && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n        }\n        FoldingRange.is = is;\n    })(FoldingRange || (exports.FoldingRange = FoldingRange = {}));\n    /**\n     * The DiagnosticRelatedInformation namespace provides helper functions to work with\n     * {@link DiagnosticRelatedInformation} literals.\n     */\n    var DiagnosticRelatedInformation;\n    (function (DiagnosticRelatedInformation) {\n        /**\n         * Creates a new DiagnosticRelatedInformation literal.\n         */\n        function create(location, message) {\n            return {\n                location: location,\n                message: message\n            };\n        }\n        DiagnosticRelatedInformation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n        }\n        DiagnosticRelatedInformation.is = is;\n    })(DiagnosticRelatedInformation || (exports.DiagnosticRelatedInformation = DiagnosticRelatedInformation = {}));\n    /**\n     * The diagnostic's severity.\n     */\n    var DiagnosticSeverity;\n    (function (DiagnosticSeverity) {\n        /**\n         * Reports an error.\n         */\n        DiagnosticSeverity.Error = 1;\n        /**\n         * Reports a warning.\n         */\n        DiagnosticSeverity.Warning = 2;\n        /**\n         * Reports an information.\n         */\n        DiagnosticSeverity.Information = 3;\n        /**\n         * Reports a hint.\n         */\n        DiagnosticSeverity.Hint = 4;\n    })(DiagnosticSeverity || (exports.DiagnosticSeverity = DiagnosticSeverity = {}));\n    /**\n     * The diagnostic tags.\n     *\n     * @since 3.15.0\n     */\n    var DiagnosticTag;\n    (function (DiagnosticTag) {\n        /**\n         * Unused or unnecessary code.\n         *\n         * Clients are allowed to render diagnostics with this tag faded out instead of having\n         * an error squiggle.\n         */\n        DiagnosticTag.Unnecessary = 1;\n        /**\n         * Deprecated or obsolete code.\n         *\n         * Clients are allowed to rendered diagnostics with this tag strike through.\n         */\n        DiagnosticTag.Deprecated = 2;\n    })(DiagnosticTag || (exports.DiagnosticTag = DiagnosticTag = {}));\n    /**\n     * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n     *\n     * @since 3.16.0\n     */\n    var CodeDescription;\n    (function (CodeDescription) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.href);\n        }\n        CodeDescription.is = is;\n    })(CodeDescription || (exports.CodeDescription = CodeDescription = {}));\n    /**\n     * The Diagnostic namespace provides helper functions to work with\n     * {@link Diagnostic} literals.\n     */\n    var Diagnostic;\n    (function (Diagnostic) {\n        /**\n         * Creates a new Diagnostic literal.\n         */\n        function create(range, message, severity, code, source, relatedInformation) {\n            var result = { range: range, message: message };\n            if (Is.defined(severity)) {\n                result.severity = severity;\n            }\n            if (Is.defined(code)) {\n                result.code = code;\n            }\n            if (Is.defined(source)) {\n                result.source = source;\n            }\n            if (Is.defined(relatedInformation)) {\n                result.relatedInformation = relatedInformation;\n            }\n            return result;\n        }\n        Diagnostic.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n         */\n        function is(value) {\n            var _a;\n            var candidate = value;\n            return Is.defined(candidate)\n                && Range.is(candidate.range)\n                && Is.string(candidate.message)\n                && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n                && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n                && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n                && (Is.string(candidate.source) || Is.undefined(candidate.source))\n                && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n        }\n        Diagnostic.is = is;\n    })(Diagnostic || (exports.Diagnostic = Diagnostic = {}));\n    /**\n     * The Command namespace provides helper functions to work with\n     * {@link Command} literals.\n     */\n    var Command;\n    (function (Command) {\n        /**\n         * Creates a new Command literal.\n         */\n        function create(title, command) {\n            var args = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                args[_i - 2] = arguments[_i];\n            }\n            var result = { title: title, command: command };\n            if (Is.defined(args) && args.length > 0) {\n                result.arguments = args;\n            }\n            return result;\n        }\n        Command.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Command} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n        }\n        Command.is = is;\n    })(Command || (exports.Command = Command = {}));\n    /**\n     * The TextEdit namespace provides helper function to create replace,\n     * insert and delete edits more easily.\n     */\n    var TextEdit;\n    (function (TextEdit) {\n        /**\n         * Creates a replace text edit.\n         * @param range The range of text to be replaced.\n         * @param newText The new text.\n         */\n        function replace(range, newText) {\n            return { range: range, newText: newText };\n        }\n        TextEdit.replace = replace;\n        /**\n         * Creates an insert text edit.\n         * @param position The position to insert the text at.\n         * @param newText The text to be inserted.\n         */\n        function insert(position, newText) {\n            return { range: { start: position, end: position }, newText: newText };\n        }\n        TextEdit.insert = insert;\n        /**\n         * Creates a delete text edit.\n         * @param range The range of text to be deleted.\n         */\n        function del(range) {\n            return { range: range, newText: '' };\n        }\n        TextEdit.del = del;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate)\n                && Is.string(candidate.newText)\n                && Range.is(candidate.range);\n        }\n        TextEdit.is = is;\n    })(TextEdit || (exports.TextEdit = TextEdit = {}));\n    var ChangeAnnotation;\n    (function (ChangeAnnotation) {\n        function create(label, needsConfirmation, description) {\n            var result = { label: label };\n            if (needsConfirmation !== undefined) {\n                result.needsConfirmation = needsConfirmation;\n            }\n            if (description !== undefined) {\n                result.description = description;\n            }\n            return result;\n        }\n        ChangeAnnotation.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n                (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n                (Is.string(candidate.description) || candidate.description === undefined);\n        }\n        ChangeAnnotation.is = is;\n    })(ChangeAnnotation || (exports.ChangeAnnotation = ChangeAnnotation = {}));\n    var ChangeAnnotationIdentifier;\n    (function (ChangeAnnotationIdentifier) {\n        function is(value) {\n            var candidate = value;\n            return Is.string(candidate);\n        }\n        ChangeAnnotationIdentifier.is = is;\n    })(ChangeAnnotationIdentifier || (exports.ChangeAnnotationIdentifier = ChangeAnnotationIdentifier = {}));\n    var AnnotatedTextEdit;\n    (function (AnnotatedTextEdit) {\n        /**\n         * Creates an annotated replace text edit.\n         *\n         * @param range The range of text to be replaced.\n         * @param newText The new text.\n         * @param annotation The annotation.\n         */\n        function replace(range, newText, annotation) {\n            return { range: range, newText: newText, annotationId: annotation };\n        }\n        AnnotatedTextEdit.replace = replace;\n        /**\n         * Creates an annotated insert text edit.\n         *\n         * @param position The position to insert the text at.\n         * @param newText The text to be inserted.\n         * @param annotation The annotation.\n         */\n        function insert(position, newText, annotation) {\n            return { range: { start: position, end: position }, newText: newText, annotationId: annotation };\n        }\n        AnnotatedTextEdit.insert = insert;\n        /**\n         * Creates an annotated delete text edit.\n         *\n         * @param range The range of text to be deleted.\n         * @param annotation The annotation.\n         */\n        function del(range, annotation) {\n            return { range: range, newText: '', annotationId: annotation };\n        }\n        AnnotatedTextEdit.del = del;\n        function is(value) {\n            var candidate = value;\n            return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        AnnotatedTextEdit.is = is;\n    })(AnnotatedTextEdit || (exports.AnnotatedTextEdit = AnnotatedTextEdit = {}));\n    /**\n     * The TextDocumentEdit namespace provides helper function to create\n     * an edit that manipulates a text document.\n     */\n    var TextDocumentEdit;\n    (function (TextDocumentEdit) {\n        /**\n         * Creates a new `TextDocumentEdit`\n         */\n        function create(textDocument, edits) {\n            return { textDocument: textDocument, edits: edits };\n        }\n        TextDocumentEdit.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate)\n                && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n                && Array.isArray(candidate.edits);\n        }\n        TextDocumentEdit.is = is;\n    })(TextDocumentEdit || (exports.TextDocumentEdit = TextDocumentEdit = {}));\n    var CreateFile;\n    (function (CreateFile) {\n        function create(uri, options, annotation) {\n            var result = {\n                kind: 'create',\n                uri: uri\n            };\n            if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        CreateFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n                ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        CreateFile.is = is;\n    })(CreateFile || (exports.CreateFile = CreateFile = {}));\n    var RenameFile;\n    (function (RenameFile) {\n        function create(oldUri, newUri, options, annotation) {\n            var result = {\n                kind: 'rename',\n                oldUri: oldUri,\n                newUri: newUri\n            };\n            if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        RenameFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n                ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        RenameFile.is = is;\n    })(RenameFile || (exports.RenameFile = RenameFile = {}));\n    var DeleteFile;\n    (function (DeleteFile) {\n        function create(uri, options, annotation) {\n            var result = {\n                kind: 'delete',\n                uri: uri\n            };\n            if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        DeleteFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n                ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        DeleteFile.is = is;\n    })(DeleteFile || (exports.DeleteFile = DeleteFile = {}));\n    var WorkspaceEdit;\n    (function (WorkspaceEdit) {\n        function is(value) {\n            var candidate = value;\n            return candidate &&\n                (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n                (candidate.documentChanges === undefined || candidate.documentChanges.every(function (change) {\n                    if (Is.string(change.kind)) {\n                        return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                    }\n                    else {\n                        return TextDocumentEdit.is(change);\n                    }\n                }));\n        }\n        WorkspaceEdit.is = is;\n    })(WorkspaceEdit || (exports.WorkspaceEdit = WorkspaceEdit = {}));\n    var TextEditChangeImpl = /** @class */ (function () {\n        function TextEditChangeImpl(edits, changeAnnotations) {\n            this.edits = edits;\n            this.changeAnnotations = changeAnnotations;\n        }\n        TextEditChangeImpl.prototype.insert = function (position, newText, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.insert(position, newText);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.insert(position, newText, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.insert(position, newText, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.replace = function (range, newText, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.replace(range, newText);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.replace(range, newText, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.replace(range, newText, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.delete = function (range, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.del(range);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.del(range, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.del(range, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.add = function (edit) {\n            this.edits.push(edit);\n        };\n        TextEditChangeImpl.prototype.all = function () {\n            return this.edits;\n        };\n        TextEditChangeImpl.prototype.clear = function () {\n            this.edits.splice(0, this.edits.length);\n        };\n        TextEditChangeImpl.prototype.assertChangeAnnotations = function (value) {\n            if (value === undefined) {\n                throw new Error(\"Text edit change is not configured to manage change annotations.\");\n            }\n        };\n        return TextEditChangeImpl;\n    }());\n    /**\n     * A helper class\n     */\n    var ChangeAnnotations = /** @class */ (function () {\n        function ChangeAnnotations(annotations) {\n            this._annotations = annotations === undefined ? Object.create(null) : annotations;\n            this._counter = 0;\n            this._size = 0;\n        }\n        ChangeAnnotations.prototype.all = function () {\n            return this._annotations;\n        };\n        Object.defineProperty(ChangeAnnotations.prototype, \"size\", {\n            get: function () {\n                return this._size;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ChangeAnnotations.prototype.manage = function (idOrAnnotation, annotation) {\n            var id;\n            if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n                id = idOrAnnotation;\n            }\n            else {\n                id = this.nextId();\n                annotation = idOrAnnotation;\n            }\n            if (this._annotations[id] !== undefined) {\n                throw new Error(\"Id \".concat(id, \" is already in use.\"));\n            }\n            if (annotation === undefined) {\n                throw new Error(\"No annotation provided for id \".concat(id));\n            }\n            this._annotations[id] = annotation;\n            this._size++;\n            return id;\n        };\n        ChangeAnnotations.prototype.nextId = function () {\n            this._counter++;\n            return this._counter.toString();\n        };\n        return ChangeAnnotations;\n    }());\n    /**\n     * A workspace change helps constructing changes to a workspace.\n     */\n    var WorkspaceChange = /** @class */ (function () {\n        function WorkspaceChange(workspaceEdit) {\n            var _this = this;\n            this._textEditChanges = Object.create(null);\n            if (workspaceEdit !== undefined) {\n                this._workspaceEdit = workspaceEdit;\n                if (workspaceEdit.documentChanges) {\n                    this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                    workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                    workspaceEdit.documentChanges.forEach(function (change) {\n                        if (TextDocumentEdit.is(change)) {\n                            var textEditChange = new TextEditChangeImpl(change.edits, _this._changeAnnotations);\n                            _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                        }\n                    });\n                }\n                else if (workspaceEdit.changes) {\n                    Object.keys(workspaceEdit.changes).forEach(function (key) {\n                        var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                        _this._textEditChanges[key] = textEditChange;\n                    });\n                }\n            }\n            else {\n                this._workspaceEdit = {};\n            }\n        }\n        Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n            /**\n             * Returns the underlying {@link WorkspaceEdit} literal\n             * use to be returned from a workspace edit operation like rename.\n             */\n            get: function () {\n                this.initDocumentChanges();\n                if (this._changeAnnotations !== undefined) {\n                    if (this._changeAnnotations.size === 0) {\n                        this._workspaceEdit.changeAnnotations = undefined;\n                    }\n                    else {\n                        this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                    }\n                }\n                return this._workspaceEdit;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WorkspaceChange.prototype.getTextEditChange = function (key) {\n            if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n                this.initDocumentChanges();\n                if (this._workspaceEdit.documentChanges === undefined) {\n                    throw new Error('Workspace edit is not configured for document changes.');\n                }\n                var textDocument = { uri: key.uri, version: key.version };\n                var result = this._textEditChanges[textDocument.uri];\n                if (!result) {\n                    var edits = [];\n                    var textDocumentEdit = {\n                        textDocument: textDocument,\n                        edits: edits\n                    };\n                    this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                    result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                    this._textEditChanges[textDocument.uri] = result;\n                }\n                return result;\n            }\n            else {\n                this.initChanges();\n                if (this._workspaceEdit.changes === undefined) {\n                    throw new Error('Workspace edit is not configured for normal text edit changes.');\n                }\n                var result = this._textEditChanges[key];\n                if (!result) {\n                    var edits = [];\n                    this._workspaceEdit.changes[key] = edits;\n                    result = new TextEditChangeImpl(edits);\n                    this._textEditChanges[key] = result;\n                }\n                return result;\n            }\n        };\n        WorkspaceChange.prototype.initDocumentChanges = function () {\n            if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n                this._changeAnnotations = new ChangeAnnotations();\n                this._workspaceEdit.documentChanges = [];\n                this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n            }\n        };\n        WorkspaceChange.prototype.initChanges = function () {\n            if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n                this._workspaceEdit.changes = Object.create(null);\n            }\n        };\n        WorkspaceChange.prototype.createFile = function (uri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = CreateFile.create(uri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = CreateFile.create(uri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        WorkspaceChange.prototype.renameFile = function (oldUri, newUri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = RenameFile.create(oldUri, newUri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = RenameFile.create(oldUri, newUri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        WorkspaceChange.prototype.deleteFile = function (uri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = DeleteFile.create(uri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = DeleteFile.create(uri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        return WorkspaceChange;\n    }());\n    exports.WorkspaceChange = WorkspaceChange;\n    /**\n     * The TextDocumentIdentifier namespace provides helper functions to work with\n     * {@link TextDocumentIdentifier} literals.\n     */\n    var TextDocumentIdentifier;\n    (function (TextDocumentIdentifier) {\n        /**\n         * Creates a new TextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         */\n        function create(uri) {\n            return { uri: uri };\n        }\n        TextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri);\n        }\n        TextDocumentIdentifier.is = is;\n    })(TextDocumentIdentifier || (exports.TextDocumentIdentifier = TextDocumentIdentifier = {}));\n    /**\n     * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n     * {@link VersionedTextDocumentIdentifier} literals.\n     */\n    var VersionedTextDocumentIdentifier;\n    (function (VersionedTextDocumentIdentifier) {\n        /**\n         * Creates a new VersionedTextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         * @param version The document's version.\n         */\n        function create(uri, version) {\n            return { uri: uri, version: version };\n        }\n        VersionedTextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n        }\n        VersionedTextDocumentIdentifier.is = is;\n    })(VersionedTextDocumentIdentifier || (exports.VersionedTextDocumentIdentifier = VersionedTextDocumentIdentifier = {}));\n    /**\n     * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n     * {@link OptionalVersionedTextDocumentIdentifier} literals.\n     */\n    var OptionalVersionedTextDocumentIdentifier;\n    (function (OptionalVersionedTextDocumentIdentifier) {\n        /**\n         * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         * @param version The document's version.\n         */\n        function create(uri, version) {\n            return { uri: uri, version: version };\n        }\n        OptionalVersionedTextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n        }\n        OptionalVersionedTextDocumentIdentifier.is = is;\n    })(OptionalVersionedTextDocumentIdentifier || (exports.OptionalVersionedTextDocumentIdentifier = OptionalVersionedTextDocumentIdentifier = {}));\n    /**\n     * The TextDocumentItem namespace provides helper functions to work with\n     * {@link TextDocumentItem} literals.\n     */\n    var TextDocumentItem;\n    (function (TextDocumentItem) {\n        /**\n         * Creates a new TextDocumentItem literal.\n         * @param uri The document's uri.\n         * @param languageId The document's language identifier.\n         * @param version The document's version number.\n         * @param text The document's text.\n         */\n        function create(uri, languageId, version, text) {\n            return { uri: uri, languageId: languageId, version: version, text: text };\n        }\n        TextDocumentItem.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n        }\n        TextDocumentItem.is = is;\n    })(TextDocumentItem || (exports.TextDocumentItem = TextDocumentItem = {}));\n    /**\n     * Describes the content type that a client supports in various\n     * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n     *\n     * Please note that `MarkupKinds` must not start with a `$`. This kinds\n     * are reserved for internal usage.\n     */\n    var MarkupKind;\n    (function (MarkupKind) {\n        /**\n         * Plain text is supported as a content format\n         */\n        MarkupKind.PlainText = 'plaintext';\n        /**\n         * Markdown is supported as a content format\n         */\n        MarkupKind.Markdown = 'markdown';\n        /**\n         * Checks whether the given value is a value of the {@link MarkupKind} type.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n        }\n        MarkupKind.is = is;\n    })(MarkupKind || (exports.MarkupKind = MarkupKind = {}));\n    var MarkupContent;\n    (function (MarkupContent) {\n        /**\n         * Checks whether the given value conforms to the {@link MarkupContent} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n        }\n        MarkupContent.is = is;\n    })(MarkupContent || (exports.MarkupContent = MarkupContent = {}));\n    /**\n     * The kind of a completion entry.\n     */\n    var CompletionItemKind;\n    (function (CompletionItemKind) {\n        CompletionItemKind.Text = 1;\n        CompletionItemKind.Method = 2;\n        CompletionItemKind.Function = 3;\n        CompletionItemKind.Constructor = 4;\n        CompletionItemKind.Field = 5;\n        CompletionItemKind.Variable = 6;\n        CompletionItemKind.Class = 7;\n        CompletionItemKind.Interface = 8;\n        CompletionItemKind.Module = 9;\n        CompletionItemKind.Property = 10;\n        CompletionItemKind.Unit = 11;\n        CompletionItemKind.Value = 12;\n        CompletionItemKind.Enum = 13;\n        CompletionItemKind.Keyword = 14;\n        CompletionItemKind.Snippet = 15;\n        CompletionItemKind.Color = 16;\n        CompletionItemKind.File = 17;\n        CompletionItemKind.Reference = 18;\n        CompletionItemKind.Folder = 19;\n        CompletionItemKind.EnumMember = 20;\n        CompletionItemKind.Constant = 21;\n        CompletionItemKind.Struct = 22;\n        CompletionItemKind.Event = 23;\n        CompletionItemKind.Operator = 24;\n        CompletionItemKind.TypeParameter = 25;\n    })(CompletionItemKind || (exports.CompletionItemKind = CompletionItemKind = {}));\n    /**\n     * Defines whether the insert text in a completion item should be interpreted as\n     * plain text or a snippet.\n     */\n    var InsertTextFormat;\n    (function (InsertTextFormat) {\n        /**\n         * The primary text to be inserted is treated as a plain string.\n         */\n        InsertTextFormat.PlainText = 1;\n        /**\n         * The primary text to be inserted is treated as a snippet.\n         *\n         * A snippet can define tab stops and placeholders with `$1`, `$2`\n         * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n         * the end of the snippet. Placeholders with equal identifiers are linked,\n         * that is typing in one will update others too.\n         *\n         * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n         */\n        InsertTextFormat.Snippet = 2;\n    })(InsertTextFormat || (exports.InsertTextFormat = InsertTextFormat = {}));\n    /**\n     * Completion item tags are extra annotations that tweak the rendering of a completion\n     * item.\n     *\n     * @since 3.15.0\n     */\n    var CompletionItemTag;\n    (function (CompletionItemTag) {\n        /**\n         * Render a completion as obsolete, usually using a strike-out.\n         */\n        CompletionItemTag.Deprecated = 1;\n    })(CompletionItemTag || (exports.CompletionItemTag = CompletionItemTag = {}));\n    /**\n     * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n     *\n     * @since 3.16.0\n     */\n    var InsertReplaceEdit;\n    (function (InsertReplaceEdit) {\n        /**\n         * Creates a new insert / replace edit\n         */\n        function create(newText, insert, replace) {\n            return { newText: newText, insert: insert, replace: replace };\n        }\n        InsertReplaceEdit.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n        }\n        InsertReplaceEdit.is = is;\n    })(InsertReplaceEdit || (exports.InsertReplaceEdit = InsertReplaceEdit = {}));\n    /**\n     * How whitespace and indentation is handled during completion\n     * item insertion.\n     *\n     * @since 3.16.0\n     */\n    var InsertTextMode;\n    (function (InsertTextMode) {\n        /**\n         * The insertion or replace strings is taken as it is. If the\n         * value is multi line the lines below the cursor will be\n         * inserted using the indentation defined in the string value.\n         * The client will not apply any kind of adjustments to the\n         * string.\n         */\n        InsertTextMode.asIs = 1;\n        /**\n         * The editor adjusts leading whitespace of new lines so that\n         * they match the indentation up to the cursor of the line for\n         * which the item is accepted.\n         *\n         * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n         * multi line completion item is indented using 2 tabs and all\n         * following lines inserted will be indented using 2 tabs as well.\n         */\n        InsertTextMode.adjustIndentation = 2;\n    })(InsertTextMode || (exports.InsertTextMode = InsertTextMode = {}));\n    var CompletionItemLabelDetails;\n    (function (CompletionItemLabelDetails) {\n        function is(value) {\n            var candidate = value;\n            return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n                (Is.string(candidate.description) || candidate.description === undefined);\n        }\n        CompletionItemLabelDetails.is = is;\n    })(CompletionItemLabelDetails || (exports.CompletionItemLabelDetails = CompletionItemLabelDetails = {}));\n    /**\n     * The CompletionItem namespace provides functions to deal with\n     * completion items.\n     */\n    var CompletionItem;\n    (function (CompletionItem) {\n        /**\n         * Create a completion item and seed it with a label.\n         * @param label The completion item's label\n         */\n        function create(label) {\n            return { label: label };\n        }\n        CompletionItem.create = create;\n    })(CompletionItem || (exports.CompletionItem = CompletionItem = {}));\n    /**\n     * The CompletionList namespace provides functions to deal with\n     * completion lists.\n     */\n    var CompletionList;\n    (function (CompletionList) {\n        /**\n         * Creates a new completion list.\n         *\n         * @param items The completion items.\n         * @param isIncomplete The list is not complete.\n         */\n        function create(items, isIncomplete) {\n            return { items: items ? items : [], isIncomplete: !!isIncomplete };\n        }\n        CompletionList.create = create;\n    })(CompletionList || (exports.CompletionList = CompletionList = {}));\n    var MarkedString;\n    (function (MarkedString) {\n        /**\n         * Creates a marked string from plain text.\n         *\n         * @param plainText The plain text.\n         */\n        function fromPlainText(plainText) {\n            return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        }\n        MarkedString.fromPlainText = fromPlainText;\n        /**\n         * Checks whether the given value conforms to the {@link MarkedString} type.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n        }\n        MarkedString.is = is;\n    })(MarkedString || (exports.MarkedString = MarkedString = {}));\n    var Hover;\n    (function (Hover) {\n        /**\n         * Checks whether the given value conforms to the {@link Hover} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n                MarkedString.is(candidate.contents) ||\n                Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n        }\n        Hover.is = is;\n    })(Hover || (exports.Hover = Hover = {}));\n    /**\n     * The ParameterInformation namespace provides helper functions to work with\n     * {@link ParameterInformation} literals.\n     */\n    var ParameterInformation;\n    (function (ParameterInformation) {\n        /**\n         * Creates a new parameter information literal.\n         *\n         * @param label A label string.\n         * @param documentation A doc string.\n         */\n        function create(label, documentation) {\n            return documentation ? { label: label, documentation: documentation } : { label: label };\n        }\n        ParameterInformation.create = create;\n    })(ParameterInformation || (exports.ParameterInformation = ParameterInformation = {}));\n    /**\n     * The SignatureInformation namespace provides helper functions to work with\n     * {@link SignatureInformation} literals.\n     */\n    var SignatureInformation;\n    (function (SignatureInformation) {\n        function create(label, documentation) {\n            var parameters = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                parameters[_i - 2] = arguments[_i];\n            }\n            var result = { label: label };\n            if (Is.defined(documentation)) {\n                result.documentation = documentation;\n            }\n            if (Is.defined(parameters)) {\n                result.parameters = parameters;\n            }\n            else {\n                result.parameters = [];\n            }\n            return result;\n        }\n        SignatureInformation.create = create;\n    })(SignatureInformation || (exports.SignatureInformation = SignatureInformation = {}));\n    /**\n     * A document highlight kind.\n     */\n    var DocumentHighlightKind;\n    (function (DocumentHighlightKind) {\n        /**\n         * A textual occurrence.\n         */\n        DocumentHighlightKind.Text = 1;\n        /**\n         * Read-access of a symbol, like reading a variable.\n         */\n        DocumentHighlightKind.Read = 2;\n        /**\n         * Write-access of a symbol, like writing to a variable.\n         */\n        DocumentHighlightKind.Write = 3;\n    })(DocumentHighlightKind || (exports.DocumentHighlightKind = DocumentHighlightKind = {}));\n    /**\n     * DocumentHighlight namespace to provide helper functions to work with\n     * {@link DocumentHighlight} literals.\n     */\n    var DocumentHighlight;\n    (function (DocumentHighlight) {\n        /**\n         * Create a DocumentHighlight object.\n         * @param range The range the highlight applies to.\n         * @param kind The highlight kind\n         */\n        function create(range, kind) {\n            var result = { range: range };\n            if (Is.number(kind)) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        DocumentHighlight.create = create;\n    })(DocumentHighlight || (exports.DocumentHighlight = DocumentHighlight = {}));\n    /**\n     * A symbol kind.\n     */\n    var SymbolKind;\n    (function (SymbolKind) {\n        SymbolKind.File = 1;\n        SymbolKind.Module = 2;\n        SymbolKind.Namespace = 3;\n        SymbolKind.Package = 4;\n        SymbolKind.Class = 5;\n        SymbolKind.Method = 6;\n        SymbolKind.Property = 7;\n        SymbolKind.Field = 8;\n        SymbolKind.Constructor = 9;\n        SymbolKind.Enum = 10;\n        SymbolKind.Interface = 11;\n        SymbolKind.Function = 12;\n        SymbolKind.Variable = 13;\n        SymbolKind.Constant = 14;\n        SymbolKind.String = 15;\n        SymbolKind.Number = 16;\n        SymbolKind.Boolean = 17;\n        SymbolKind.Array = 18;\n        SymbolKind.Object = 19;\n        SymbolKind.Key = 20;\n        SymbolKind.Null = 21;\n        SymbolKind.EnumMember = 22;\n        SymbolKind.Struct = 23;\n        SymbolKind.Event = 24;\n        SymbolKind.Operator = 25;\n        SymbolKind.TypeParameter = 26;\n    })(SymbolKind || (exports.SymbolKind = SymbolKind = {}));\n    /**\n     * Symbol tags are extra annotations that tweak the rendering of a symbol.\n     *\n     * @since 3.16\n     */\n    var SymbolTag;\n    (function (SymbolTag) {\n        /**\n         * Render a symbol as obsolete, usually using a strike-out.\n         */\n        SymbolTag.Deprecated = 1;\n    })(SymbolTag || (exports.SymbolTag = SymbolTag = {}));\n    var SymbolInformation;\n    (function (SymbolInformation) {\n        /**\n         * Creates a new symbol information literal.\n         *\n         * @param name The name of the symbol.\n         * @param kind The kind of the symbol.\n         * @param range The range of the location of the symbol.\n         * @param uri The resource of the location of symbol.\n         * @param containerName The name of the symbol containing the symbol.\n         */\n        function create(name, kind, range, uri, containerName) {\n            var result = {\n                name: name,\n                kind: kind,\n                location: { uri: uri, range: range }\n            };\n            if (containerName) {\n                result.containerName = containerName;\n            }\n            return result;\n        }\n        SymbolInformation.create = create;\n    })(SymbolInformation || (exports.SymbolInformation = SymbolInformation = {}));\n    var WorkspaceSymbol;\n    (function (WorkspaceSymbol) {\n        /**\n         * Create a new workspace symbol.\n         *\n         * @param name The name of the symbol.\n         * @param kind The kind of the symbol.\n         * @param uri The resource of the location of the symbol.\n         * @param range An options range of the location.\n         * @returns A WorkspaceSymbol.\n         */\n        function create(name, kind, uri, range) {\n            return range !== undefined\n                ? { name: name, kind: kind, location: { uri: uri, range: range } }\n                : { name: name, kind: kind, location: { uri: uri } };\n        }\n        WorkspaceSymbol.create = create;\n    })(WorkspaceSymbol || (exports.WorkspaceSymbol = WorkspaceSymbol = {}));\n    var DocumentSymbol;\n    (function (DocumentSymbol) {\n        /**\n         * Creates a new symbol information literal.\n         *\n         * @param name The name of the symbol.\n         * @param detail The detail of the symbol.\n         * @param kind The kind of the symbol.\n         * @param range The range of the symbol.\n         * @param selectionRange The selectionRange of the symbol.\n         * @param children Children of the symbol.\n         */\n        function create(name, detail, kind, range, selectionRange, children) {\n            var result = {\n                name: name,\n                detail: detail,\n                kind: kind,\n                range: range,\n                selectionRange: selectionRange\n            };\n            if (children !== undefined) {\n                result.children = children;\n            }\n            return result;\n        }\n        DocumentSymbol.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate &&\n                Is.string(candidate.name) && Is.number(candidate.kind) &&\n                Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n                (candidate.detail === undefined || Is.string(candidate.detail)) &&\n                (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n                (candidate.children === undefined || Array.isArray(candidate.children)) &&\n                (candidate.tags === undefined || Array.isArray(candidate.tags));\n        }\n        DocumentSymbol.is = is;\n    })(DocumentSymbol || (exports.DocumentSymbol = DocumentSymbol = {}));\n    /**\n     * A set of predefined code action kinds\n     */\n    var CodeActionKind;\n    (function (CodeActionKind) {\n        /**\n         * Empty kind.\n         */\n        CodeActionKind.Empty = '';\n        /**\n         * Base kind for quickfix actions: 'quickfix'\n         */\n        CodeActionKind.QuickFix = 'quickfix';\n        /**\n         * Base kind for refactoring actions: 'refactor'\n         */\n        CodeActionKind.Refactor = 'refactor';\n        /**\n         * Base kind for refactoring extraction actions: 'refactor.extract'\n         *\n         * Example extract actions:\n         *\n         * - Extract method\n         * - Extract function\n         * - Extract variable\n         * - Extract interface from class\n         * - ...\n         */\n        CodeActionKind.RefactorExtract = 'refactor.extract';\n        /**\n         * Base kind for refactoring inline actions: 'refactor.inline'\n         *\n         * Example inline actions:\n         *\n         * - Inline function\n         * - Inline variable\n         * - Inline constant\n         * - ...\n         */\n        CodeActionKind.RefactorInline = 'refactor.inline';\n        /**\n         * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n         *\n         * Example rewrite actions:\n         *\n         * - Convert JavaScript function to class\n         * - Add or remove parameter\n         * - Encapsulate field\n         * - Make method static\n         * - Move method to base class\n         * - ...\n         */\n        CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n        /**\n         * Base kind for source actions: `source`\n         *\n         * Source code actions apply to the entire file.\n         */\n        CodeActionKind.Source = 'source';\n        /**\n         * Base kind for an organize imports source action: `source.organizeImports`\n         */\n        CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n        /**\n         * Base kind for auto-fix source actions: `source.fixAll`.\n         *\n         * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n         * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n         *\n         * @since 3.15.0\n         */\n        CodeActionKind.SourceFixAll = 'source.fixAll';\n    })(CodeActionKind || (exports.CodeActionKind = CodeActionKind = {}));\n    /**\n     * The reason why code actions were requested.\n     *\n     * @since 3.17.0\n     */\n    var CodeActionTriggerKind;\n    (function (CodeActionTriggerKind) {\n        /**\n         * Code actions were explicitly requested by the user or by an extension.\n         */\n        CodeActionTriggerKind.Invoked = 1;\n        /**\n         * Code actions were requested automatically.\n         *\n         * This typically happens when current selection in a file changes, but can\n         * also be triggered when file content changes.\n         */\n        CodeActionTriggerKind.Automatic = 2;\n    })(CodeActionTriggerKind || (exports.CodeActionTriggerKind = CodeActionTriggerKind = {}));\n    /**\n     * The CodeActionContext namespace provides helper functions to work with\n     * {@link CodeActionContext} literals.\n     */\n    var CodeActionContext;\n    (function (CodeActionContext) {\n        /**\n         * Creates a new CodeActionContext literal.\n         */\n        function create(diagnostics, only, triggerKind) {\n            var result = { diagnostics: diagnostics };\n            if (only !== undefined && only !== null) {\n                result.only = only;\n            }\n            if (triggerKind !== undefined && triggerKind !== null) {\n                result.triggerKind = triggerKind;\n            }\n            return result;\n        }\n        CodeActionContext.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n                && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n                && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n        }\n        CodeActionContext.is = is;\n    })(CodeActionContext || (exports.CodeActionContext = CodeActionContext = {}));\n    var CodeAction;\n    (function (CodeAction) {\n        function create(title, kindOrCommandOrEdit, kind) {\n            var result = { title: title };\n            var checkKind = true;\n            if (typeof kindOrCommandOrEdit === 'string') {\n                checkKind = false;\n                result.kind = kindOrCommandOrEdit;\n            }\n            else if (Command.is(kindOrCommandOrEdit)) {\n                result.command = kindOrCommandOrEdit;\n            }\n            else {\n                result.edit = kindOrCommandOrEdit;\n            }\n            if (checkKind && kind !== undefined) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        CodeAction.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && Is.string(candidate.title) &&\n                (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n                (candidate.kind === undefined || Is.string(candidate.kind)) &&\n                (candidate.edit !== undefined || candidate.command !== undefined) &&\n                (candidate.command === undefined || Command.is(candidate.command)) &&\n                (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n                (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit));\n        }\n        CodeAction.is = is;\n    })(CodeAction || (exports.CodeAction = CodeAction = {}));\n    /**\n     * The CodeLens namespace provides helper functions to work with\n     * {@link CodeLens} literals.\n     */\n    var CodeLens;\n    (function (CodeLens) {\n        /**\n         * Creates a new CodeLens literal.\n         */\n        function create(range, data) {\n            var result = { range: range };\n            if (Is.defined(data)) {\n                result.data = data;\n            }\n            return result;\n        }\n        CodeLens.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link CodeLens} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n        }\n        CodeLens.is = is;\n    })(CodeLens || (exports.CodeLens = CodeLens = {}));\n    /**\n     * The FormattingOptions namespace provides helper functions to work with\n     * {@link FormattingOptions} literals.\n     */\n    var FormattingOptions;\n    (function (FormattingOptions) {\n        /**\n         * Creates a new FormattingOptions literal.\n         */\n        function create(tabSize, insertSpaces) {\n            return { tabSize: tabSize, insertSpaces: insertSpaces };\n        }\n        FormattingOptions.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n        }\n        FormattingOptions.is = is;\n    })(FormattingOptions || (exports.FormattingOptions = FormattingOptions = {}));\n    /**\n     * The DocumentLink namespace provides helper functions to work with\n     * {@link DocumentLink} literals.\n     */\n    var DocumentLink;\n    (function (DocumentLink) {\n        /**\n         * Creates a new DocumentLink literal.\n         */\n        function create(range, target, data) {\n            return { range: range, target: target, data: data };\n        }\n        DocumentLink.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n        }\n        DocumentLink.is = is;\n    })(DocumentLink || (exports.DocumentLink = DocumentLink = {}));\n    /**\n     * The SelectionRange namespace provides helper function to work with\n     * SelectionRange literals.\n     */\n    var SelectionRange;\n    (function (SelectionRange) {\n        /**\n         * Creates a new SelectionRange\n         * @param range the range.\n         * @param parent an optional parent.\n         */\n        function create(range, parent) {\n            return { range: range, parent: parent };\n        }\n        SelectionRange.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n        }\n        SelectionRange.is = is;\n    })(SelectionRange || (exports.SelectionRange = SelectionRange = {}));\n    /**\n     * A set of predefined token types. This set is not fixed\n     * an clients can specify additional token types via the\n     * corresponding client capabilities.\n     *\n     * @since 3.16.0\n     */\n    var SemanticTokenTypes;\n    (function (SemanticTokenTypes) {\n        SemanticTokenTypes[\"namespace\"] = \"namespace\";\n        /**\n         * Represents a generic type. Acts as a fallback for types which can't be mapped to\n         * a specific type like class or enum.\n         */\n        SemanticTokenTypes[\"type\"] = \"type\";\n        SemanticTokenTypes[\"class\"] = \"class\";\n        SemanticTokenTypes[\"enum\"] = \"enum\";\n        SemanticTokenTypes[\"interface\"] = \"interface\";\n        SemanticTokenTypes[\"struct\"] = \"struct\";\n        SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n        SemanticTokenTypes[\"parameter\"] = \"parameter\";\n        SemanticTokenTypes[\"variable\"] = \"variable\";\n        SemanticTokenTypes[\"property\"] = \"property\";\n        SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n        SemanticTokenTypes[\"event\"] = \"event\";\n        SemanticTokenTypes[\"function\"] = \"function\";\n        SemanticTokenTypes[\"method\"] = \"method\";\n        SemanticTokenTypes[\"macro\"] = \"macro\";\n        SemanticTokenTypes[\"keyword\"] = \"keyword\";\n        SemanticTokenTypes[\"modifier\"] = \"modifier\";\n        SemanticTokenTypes[\"comment\"] = \"comment\";\n        SemanticTokenTypes[\"string\"] = \"string\";\n        SemanticTokenTypes[\"number\"] = \"number\";\n        SemanticTokenTypes[\"regexp\"] = \"regexp\";\n        SemanticTokenTypes[\"operator\"] = \"operator\";\n        /**\n         * @since 3.17.0\n         */\n        SemanticTokenTypes[\"decorator\"] = \"decorator\";\n    })(SemanticTokenTypes || (exports.SemanticTokenTypes = SemanticTokenTypes = {}));\n    /**\n     * A set of predefined token modifiers. This set is not fixed\n     * an clients can specify additional token types via the\n     * corresponding client capabilities.\n     *\n     * @since 3.16.0\n     */\n    var SemanticTokenModifiers;\n    (function (SemanticTokenModifiers) {\n        SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n        SemanticTokenModifiers[\"definition\"] = \"definition\";\n        SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n        SemanticTokenModifiers[\"static\"] = \"static\";\n        SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n        SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n        SemanticTokenModifiers[\"async\"] = \"async\";\n        SemanticTokenModifiers[\"modification\"] = \"modification\";\n        SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n        SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n    })(SemanticTokenModifiers || (exports.SemanticTokenModifiers = SemanticTokenModifiers = {}));\n    /**\n     * @since 3.16.0\n     */\n    var SemanticTokens;\n    (function (SemanticTokens) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n                Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n        }\n        SemanticTokens.is = is;\n    })(SemanticTokens || (exports.SemanticTokens = SemanticTokens = {}));\n    /**\n     * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueText;\n    (function (InlineValueText) {\n        /**\n         * Creates a new InlineValueText literal.\n         */\n        function create(range, text) {\n            return { range: range, text: text };\n        }\n        InlineValueText.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n        }\n        InlineValueText.is = is;\n    })(InlineValueText || (exports.InlineValueText = InlineValueText = {}));\n    /**\n     * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueVariableLookup;\n    (function (InlineValueVariableLookup) {\n        /**\n         * Creates a new InlineValueText literal.\n         */\n        function create(range, variableName, caseSensitiveLookup) {\n            return { range: range, variableName: variableName, caseSensitiveLookup: caseSensitiveLookup };\n        }\n        InlineValueVariableLookup.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n                && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n        }\n        InlineValueVariableLookup.is = is;\n    })(InlineValueVariableLookup || (exports.InlineValueVariableLookup = InlineValueVariableLookup = {}));\n    /**\n     * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueEvaluatableExpression;\n    (function (InlineValueEvaluatableExpression) {\n        /**\n         * Creates a new InlineValueEvaluatableExpression literal.\n         */\n        function create(range, expression) {\n            return { range: range, expression: expression };\n        }\n        InlineValueEvaluatableExpression.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n                && (Is.string(candidate.expression) || candidate.expression === undefined);\n        }\n        InlineValueEvaluatableExpression.is = is;\n    })(InlineValueEvaluatableExpression || (exports.InlineValueEvaluatableExpression = InlineValueEvaluatableExpression = {}));\n    /**\n     * The InlineValueContext namespace provides helper functions to work with\n     * {@link InlineValueContext} literals.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueContext;\n    (function (InlineValueContext) {\n        /**\n         * Creates a new InlineValueContext literal.\n         */\n        function create(frameId, stoppedLocation) {\n            return { frameId: frameId, stoppedLocation: stoppedLocation };\n        }\n        InlineValueContext.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(value.stoppedLocation);\n        }\n        InlineValueContext.is = is;\n    })(InlineValueContext || (exports.InlineValueContext = InlineValueContext = {}));\n    /**\n     * Inlay hint kinds.\n     *\n     * @since 3.17.0\n     */\n    var InlayHintKind;\n    (function (InlayHintKind) {\n        /**\n         * An inlay hint that for a type annotation.\n         */\n        InlayHintKind.Type = 1;\n        /**\n         * An inlay hint that is for a parameter.\n         */\n        InlayHintKind.Parameter = 2;\n        function is(value) {\n            return value === 1 || value === 2;\n        }\n        InlayHintKind.is = is;\n    })(InlayHintKind || (exports.InlayHintKind = InlayHintKind = {}));\n    var InlayHintLabelPart;\n    (function (InlayHintLabelPart) {\n        function create(value) {\n            return { value: value };\n        }\n        InlayHintLabelPart.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate)\n                && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n                && (candidate.location === undefined || Location.is(candidate.location))\n                && (candidate.command === undefined || Command.is(candidate.command));\n        }\n        InlayHintLabelPart.is = is;\n    })(InlayHintLabelPart || (exports.InlayHintLabelPart = InlayHintLabelPart = {}));\n    var InlayHint;\n    (function (InlayHint) {\n        function create(position, label, kind) {\n            var result = { position: position, label: label };\n            if (kind !== undefined) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        InlayHint.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Position.is(candidate.position)\n                && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n                && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n                && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n                && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n                && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n                && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n        }\n        InlayHint.is = is;\n    })(InlayHint || (exports.InlayHint = InlayHint = {}));\n    var StringValue;\n    (function (StringValue) {\n        function createSnippet(value) {\n            return { kind: 'snippet', value: value };\n        }\n        StringValue.createSnippet = createSnippet;\n    })(StringValue || (exports.StringValue = StringValue = {}));\n    var InlineCompletionItem;\n    (function (InlineCompletionItem) {\n        function create(insertText, filterText, range, command) {\n            return { insertText: insertText, filterText: filterText, range: range, command: command };\n        }\n        InlineCompletionItem.create = create;\n    })(InlineCompletionItem || (exports.InlineCompletionItem = InlineCompletionItem = {}));\n    var InlineCompletionList;\n    (function (InlineCompletionList) {\n        function create(items) {\n            return { items: items };\n        }\n        InlineCompletionList.create = create;\n    })(InlineCompletionList || (exports.InlineCompletionList = InlineCompletionList = {}));\n    /**\n     * Describes how an {@link InlineCompletionItemProvider inline completion provider} was triggered.\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    var InlineCompletionTriggerKind;\n    (function (InlineCompletionTriggerKind) {\n        /**\n         * Completion was triggered explicitly by a user gesture.\n         */\n        InlineCompletionTriggerKind.Invoked = 0;\n        /**\n         * Completion was triggered automatically while editing.\n         */\n        InlineCompletionTriggerKind.Automatic = 1;\n    })(InlineCompletionTriggerKind || (exports.InlineCompletionTriggerKind = InlineCompletionTriggerKind = {}));\n    var SelectedCompletionInfo;\n    (function (SelectedCompletionInfo) {\n        function create(range, text) {\n            return { range: range, text: text };\n        }\n        SelectedCompletionInfo.create = create;\n    })(SelectedCompletionInfo || (exports.SelectedCompletionInfo = SelectedCompletionInfo = {}));\n    var InlineCompletionContext;\n    (function (InlineCompletionContext) {\n        function create(triggerKind, selectedCompletionInfo) {\n            return { triggerKind: triggerKind, selectedCompletionInfo: selectedCompletionInfo };\n        }\n        InlineCompletionContext.create = create;\n    })(InlineCompletionContext || (exports.InlineCompletionContext = InlineCompletionContext = {}));\n    var WorkspaceFolder;\n    (function (WorkspaceFolder) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n        }\n        WorkspaceFolder.is = is;\n    })(WorkspaceFolder || (exports.WorkspaceFolder = WorkspaceFolder = {}));\n    exports.EOL = ['\\n', '\\r\\n', '\\r'];\n    /**\n     * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n     */\n    var TextDocument;\n    (function (TextDocument) {\n        /**\n         * Creates a new ITextDocument literal from the given uri and content.\n         * @param uri The document's uri.\n         * @param languageId The document's language Id.\n         * @param version The document's version.\n         * @param content The document's content.\n         */\n        function create(uri, languageId, version, content) {\n            return new FullTextDocument(uri, languageId, version, content);\n        }\n        TextDocument.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n                && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n        }\n        TextDocument.is = is;\n        function applyEdits(document, edits) {\n            var text = document.getText();\n            var sortedEdits = mergeSort(edits, function (a, b) {\n                var diff = a.range.start.line - b.range.start.line;\n                if (diff === 0) {\n                    return a.range.start.character - b.range.start.character;\n                }\n                return diff;\n            });\n            var lastModifiedOffset = text.length;\n            for (var i = sortedEdits.length - 1; i >= 0; i--) {\n                var e = sortedEdits[i];\n                var startOffset = document.offsetAt(e.range.start);\n                var endOffset = document.offsetAt(e.range.end);\n                if (endOffset <= lastModifiedOffset) {\n                    text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n                }\n                else {\n                    throw new Error('Overlapping edit');\n                }\n                lastModifiedOffset = startOffset;\n            }\n            return text;\n        }\n        TextDocument.applyEdits = applyEdits;\n        function mergeSort(data, compare) {\n            if (data.length <= 1) {\n                // sorted\n                return data;\n            }\n            var p = (data.length / 2) | 0;\n            var left = data.slice(0, p);\n            var right = data.slice(p);\n            mergeSort(left, compare);\n            mergeSort(right, compare);\n            var leftIdx = 0;\n            var rightIdx = 0;\n            var i = 0;\n            while (leftIdx < left.length && rightIdx < right.length) {\n                var ret = compare(left[leftIdx], right[rightIdx]);\n                if (ret <= 0) {\n                    // smaller_equal -> take left to preserve order\n                    data[i++] = left[leftIdx++];\n                }\n                else {\n                    // greater -> take right\n                    data[i++] = right[rightIdx++];\n                }\n            }\n            while (leftIdx < left.length) {\n                data[i++] = left[leftIdx++];\n            }\n            while (rightIdx < right.length) {\n                data[i++] = right[rightIdx++];\n            }\n            return data;\n        }\n    })(TextDocument || (exports.TextDocument = TextDocument = {}));\n    /**\n     * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n     */\n    var FullTextDocument = /** @class */ (function () {\n        function FullTextDocument(uri, languageId, version, content) {\n            this._uri = uri;\n            this._languageId = languageId;\n            this._version = version;\n            this._content = content;\n            this._lineOffsets = undefined;\n        }\n        Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n            get: function () {\n                return this._uri;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n            get: function () {\n                return this._languageId;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FullTextDocument.prototype, \"version\", {\n            get: function () {\n                return this._version;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FullTextDocument.prototype.getText = function (range) {\n            if (range) {\n                var start = this.offsetAt(range.start);\n                var end = this.offsetAt(range.end);\n                return this._content.substring(start, end);\n            }\n            return this._content;\n        };\n        FullTextDocument.prototype.update = function (event, version) {\n            this._content = event.text;\n            this._version = version;\n            this._lineOffsets = undefined;\n        };\n        FullTextDocument.prototype.getLineOffsets = function () {\n            if (this._lineOffsets === undefined) {\n                var lineOffsets = [];\n                var text = this._content;\n                var isLineStart = true;\n                for (var i = 0; i < text.length; i++) {\n                    if (isLineStart) {\n                        lineOffsets.push(i);\n                        isLineStart = false;\n                    }\n                    var ch = text.charAt(i);\n                    isLineStart = (ch === '\\r' || ch === '\\n');\n                    if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                        i++;\n                    }\n                }\n                if (isLineStart && text.length > 0) {\n                    lineOffsets.push(text.length);\n                }\n                this._lineOffsets = lineOffsets;\n            }\n            return this._lineOffsets;\n        };\n        FullTextDocument.prototype.positionAt = function (offset) {\n            offset = Math.max(Math.min(offset, this._content.length), 0);\n            var lineOffsets = this.getLineOffsets();\n            var low = 0, high = lineOffsets.length;\n            if (high === 0) {\n                return Position.create(0, offset);\n            }\n            while (low < high) {\n                var mid = Math.floor((low + high) / 2);\n                if (lineOffsets[mid] > offset) {\n                    high = mid;\n                }\n                else {\n                    low = mid + 1;\n                }\n            }\n            // low is the least x for which the line offset is larger than the current offset\n            // or array.length if no line offset is larger than the current offset\n            var line = low - 1;\n            return Position.create(line, offset - lineOffsets[line]);\n        };\n        FullTextDocument.prototype.offsetAt = function (position) {\n            var lineOffsets = this.getLineOffsets();\n            if (position.line >= lineOffsets.length) {\n                return this._content.length;\n            }\n            else if (position.line < 0) {\n                return 0;\n            }\n            var lineOffset = lineOffsets[position.line];\n            var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n            return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n        };\n        Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n            get: function () {\n                return this.getLineOffsets().length;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return FullTextDocument;\n    }());\n    var Is;\n    (function (Is) {\n        var toString = Object.prototype.toString;\n        function defined(value) {\n            return typeof value !== 'undefined';\n        }\n        Is.defined = defined;\n        function undefined(value) {\n            return typeof value === 'undefined';\n        }\n        Is.undefined = undefined;\n        function boolean(value) {\n            return value === true || value === false;\n        }\n        Is.boolean = boolean;\n        function string(value) {\n            return toString.call(value) === '[object String]';\n        }\n        Is.string = string;\n        function number(value) {\n            return toString.call(value) === '[object Number]';\n        }\n        Is.number = number;\n        function numberRange(value, min, max) {\n            return toString.call(value) === '[object Number]' && min <= value && value <= max;\n        }\n        Is.numberRange = numberRange;\n        function integer(value) {\n            return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n        }\n        Is.integer = integer;\n        function uinteger(value) {\n            return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n        }\n        Is.uinteger = uinteger;\n        function func(value) {\n            return toString.call(value) === '[object Function]';\n        }\n        Is.func = func;\n        function objectLiteral(value) {\n            // Strictly speaking class instances pass this check as well. Since the LSP\n            // doesn't use classes we ignore this for now. If we do we need to add something\n            // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n            return value !== null && typeof value === 'object';\n        }\n        Is.objectLiteral = objectLiteral;\n        function typedArray(value, check) {\n            return Array.isArray(value) && value.every(check);\n        }\n        Is.typedArray = typedArray;\n    })(Is || (Is = {}));\n});\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection || (exports.MessageDirection = MessageDirection = {}));\nclass RegistrationType {\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectLiteral = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n})(ImplementationRequest || (exports.ImplementationRequest = ImplementationRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n})(TypeDefinitionRequest || (exports.TypeDefinitionRequest = TypeDefinitionRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n})(WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n})(DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = DidChangeWorkspaceFoldersNotification = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n})(ConfigurationRequest || (exports.ConfigurationRequest = ConfigurationRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n})(DocumentColorRequest || (exports.DocumentColorRequest = DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n})(ColorPresentationRequest || (exports.ColorPresentationRequest = ColorPresentationRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n})(FoldingRangeRequest || (exports.FoldingRangeRequest = FoldingRangeRequest = {}));\n/**\n * @since 3.18.0\n * @proposed\n */\nvar FoldingRangeRefreshRequest;\n(function (FoldingRangeRefreshRequest) {\n    FoldingRangeRefreshRequest.method = `workspace/foldingRange/refresh`;\n    FoldingRangeRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    FoldingRangeRefreshRequest.type = new messages_1.ProtocolRequestType0(FoldingRangeRefreshRequest.method);\n})(FoldingRangeRefreshRequest || (exports.FoldingRangeRefreshRequest = FoldingRangeRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Declaration} or a typed array of {@link DeclarationLink}\n * or a Thenable that resolves to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n})(DeclarationRequest || (exports.DeclarationRequest = DeclarationRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n})(SelectionRangeRequest || (exports.SelectionRangeRequest = SelectionRangeRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress || (exports.WorkDoneProgress = WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n})(WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = WorkDoneProgressCancelNotification = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = CallHierarchyOutgoingCallsRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat || (exports.TokenFormat = TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRequest || (exports.SemanticTokensRequest = SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n})(SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = SemanticTokensRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n})(ShowDocumentRequest || (exports.ShowDocumentRequest = ShowDocumentRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n})(LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = LinkedEditingRangeRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind || (exports.FileOperationPatternKind = FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n})(WillCreateFilesRequest || (exports.WillCreateFilesRequest = WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n})(DidCreateFilesNotification || (exports.DidCreateFilesNotification = DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n})(WillRenameFilesRequest || (exports.WillRenameFilesRequest = WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n})(DidRenameFilesNotification || (exports.DidRenameFilesNotification = DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n})(DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n})(WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = WillDeleteFilesRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel || (exports.UniquenessLevel = UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind || (exports.MonikerKind = MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n})(MonikerRequest || (exports.MonikerRequest = MonikerRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n})(TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = TypeHierarchySubtypesRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n})(InlineValueRequest || (exports.InlineValueRequest = InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n})(InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = InlineValueRefreshRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n})(InlayHintRequest || (exports.InlayHintRequest = InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n})(InlayHintResolveRequest || (exports.InlayHintResolveRequest = InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n})(InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = InlayHintRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n})(DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = DiagnosticRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind || (exports.NotebookCellKind = NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary || (exports.ExecutionSummary = ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell || (exports.NotebookCell = NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument || (exports.NotebookDocument = NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange || (exports.NotebookCellArrayChange = NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = DidCloseNotebookDocumentNotification = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline completions in a document. The request's parameter is of\n * type {@link InlineCompletionParams}, the response is of type\n * {@link InlineCompletion InlineCompletion[]} or a Thenable that resolves to such.\n *\n * @since 3.18.0\n * @proposed\n */\nvar InlineCompletionRequest;\n(function (InlineCompletionRequest) {\n    InlineCompletionRequest.method = 'textDocument/inlineCompletion';\n    InlineCompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineCompletionRequest.type = new messages_1.ProtocolRequestType(InlineCompletionRequest.method);\n})(InlineCompletionRequest || (exports.InlineCompletionRequest = InlineCompletionRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = exports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangesFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = void 0;\nexports.InlineCompletionRequest = exports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nObject.defineProperty(exports, \"FoldingRangeRefreshRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRefreshRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\nconst protocol_inlineCompletion_1 = require(\"./protocol.inlineCompletion\");\nObject.defineProperty(exports, \"InlineCompletionRequest\", { enumerable: true, get: function () { return protocol_inlineCompletion_1.InlineCompletionRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter || (exports.TextDocumentFilter = TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter || (exports.NotebookDocumentFilter = NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector || (exports.DocumentSelector = DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest || (exports.RegistrationRequest = RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest || (exports.UnregistrationRequest = UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind || (exports.ResourceOperationKind = ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind || (exports.FailureHandlingKind = FailureHandlingKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind || (exports.PositionEncodingKind = PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions || (exports.StaticRegistrationOptions = StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest || (exports.InitializeRequest = InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes || (exports.InitializeErrorCodes = InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification || (exports.InitializedNotification = InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest || (exports.ShutdownRequest = ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification || (exports.ExitNotification = ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n})(DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n    /**\n     * A debug message.\n     *\n     * @since 3.18.0\n     */\n    MessageType.Debug = 5;\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n})(ShowMessageNotification || (exports.ShowMessageNotification = ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n})(ShowMessageRequest || (exports.ShowMessageRequest = ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification || (exports.LogMessageNotification = LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification || (exports.TelemetryEventNotification = TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind || (exports.TextDocumentSyncKind = TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (exports.TextDocumentSaveReason = TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n})(DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType || (exports.FileChangeType = FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern || (exports.RelativePattern = RelativePattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind || (exports.WatchKind = WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n})(PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind || (exports.CompletionTriggerKind = CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n})(CompletionRequest || (exports.CompletionRequest = CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest || (exports.CompletionResolveRequest = CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest || (exports.HoverRequest = HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest || (exports.SignatureHelpRequest = SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPosition}\n * the response is of either type {@link Definition} or a typed array of\n * {@link DefinitionLink} or a Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n})(DefinitionRequest || (exports.DefinitionRequest = DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n})(ReferencesRequest || (exports.ReferencesRequest = ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type {@link TextDocumentPosition}\n * the request response is an array of type {@link DocumentHighlight}\n * or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n})(DocumentHighlightRequest || (exports.DocumentHighlightRequest = DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n})(DocumentSymbolRequest || (exports.DocumentSymbolRequest = DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n})(CodeActionRequest || (exports.CodeActionRequest = CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n})(CodeActionResolveRequest || (exports.CodeActionResolveRequest = CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n})(WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n})(WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n})(CodeLensRequest || (exports.CodeLensRequest = CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n})(CodeLensResolveRequest || (exports.CodeLensResolveRequest = CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n})(CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n})(DocumentLinkRequest || (exports.DocumentLinkRequest = DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n})(DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = DocumentLinkResolveRequest = {}));\n/**\n * A request to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest || (exports.DocumentFormattingRequest = DocumentFormattingRequest = {}));\n/**\n * A request to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = DocumentRangeFormattingRequest = {}));\n/**\n * A request to format ranges in a document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar DocumentRangesFormattingRequest;\n(function (DocumentRangesFormattingRequest) {\n    DocumentRangesFormattingRequest.method = 'textDocument/rangesFormatting';\n    DocumentRangesFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangesFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangesFormattingRequest.method);\n})(DocumentRangesFormattingRequest || (exports.DocumentRangesFormattingRequest = DocumentRangesFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest || (exports.RenameRequest = RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest || (exports.PrepareRenameRequest = PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n})(ExecuteCommandRequest || (exports.ExecuteCommandRequest = ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = ApplyWorkspaceEditRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server as detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes || (exports.LSPErrorCodes = LSPErrorCodes = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__exportStar(require(\"vscode-jsonrpc/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(input, output, logger, options) {\n    return (0, node_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.forEach = exports.mapAsync = exports.map = exports.clearTestMode = exports.setTestMode = exports.Semaphore = exports.Delayer = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                var result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        let result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== undefined;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== undefined) {\n            this.timeout.dispose();\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\nlet $test = false;\nfunction setTestMode() {\n    $test = true;\n}\nexports.setTestMode = setTestMode;\nfunction clearTestMode() {\n    $test = false;\n}\nexports.clearTestMode = clearTestMode;\nconst defaultYieldTimeout = 15 /*ms*/;\nclass Timer {\n    constructor(yieldAfter = defaultYieldTimeout) {\n        this.yieldAfter = $test === true ? Math.max(yieldAfter, 2) : Math.max(yieldAfter, defaultYieldTimeout);\n        this.startTime = Date.now();\n        this.counter = 0;\n        this.total = 0;\n        // start with a counter interval of 1.\n        this.counterInterval = 1;\n    }\n    start() {\n        this.counter = 0;\n        this.total = 0;\n        this.counterInterval = 1;\n        this.startTime = Date.now();\n    }\n    shouldYield() {\n        if (++this.counter >= this.counterInterval) {\n            const timeTaken = Date.now() - this.startTime;\n            const timeLeft = Math.max(0, this.yieldAfter - timeTaken);\n            this.total += this.counter;\n            this.counter = 0;\n            if (timeTaken >= this.yieldAfter || timeLeft <= 1) {\n                // Yield also if time left <= 1 since we compute the counter\n                // for max < 2 ms.\n                // Start with interval 1 again. We could do some calculation\n                // with using 80% of the last counter however other things (GC)\n                // affect the timing heavily since we have small timings (1 - 15ms).\n                this.counterInterval = 1;\n                this.total = 0;\n                return true;\n            }\n            else {\n                // Only increase the counter until we have spent <= 2 ms. Increasing\n                // the counter further is very fragile since timing is influenced\n                // by other things and can increase the counter too much. This will result\n                // that we yield in average after [14 - 16]ms.\n                switch (timeTaken) {\n                    case 0:\n                    case 1:\n                        this.counterInterval = this.total * 2;\n                        break;\n                }\n            }\n        }\n        return false;\n    }\n}\nasync function map(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                resolve(convertBatch(index));\n            });\n        });\n    }\n    return result;\n}\nexports.map = map;\nasync function mapAsync(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    async function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = await func(items[i], token);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    let index = await convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                resolve(convertBatch(index));\n            });\n        });\n    }\n    return result;\n}\nexports.mapAsync = mapAsync;\nasync function forEach(items, func, token, options) {\n    if (items.length === 0) {\n        return;\n    }\n    const timer = new Timer(options?.yieldAfter);\n    function runBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = runBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                resolve(runBatch(index));\n            });\n        });\n    }\n}\nexports.forEach = forEach;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCompletionItem extends code.CompletionItem {\n    constructor(label) {\n        super(label);\n    }\n}\nexports.default = ProtocolCompletionItem;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCodeLens extends code.CodeLens {\n    constructor(range) {\n        super(range);\n    }\n}\nexports.default = ProtocolCodeLens;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolDocumentLink extends code.DocumentLink {\n    constructor(range, target) {\n        super(range, target);\n    }\n}\nexports.default = ProtocolDocumentLink;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode = require(\"vscode\");\nclass ProtocolCodeAction extends vscode.CodeAction {\n    constructor(title, data) {\n        super(title);\n        this.data = data;\n    }\n}\nexports.default = ProtocolCodeAction;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolDiagnostic = exports.DiagnosticCode = void 0;\nconst vscode = require(\"vscode\");\nconst Is = require(\"./utils/is\");\nvar DiagnosticCode;\n(function (DiagnosticCode) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (exports.DiagnosticCode = DiagnosticCode = {}));\nclass ProtocolDiagnostic extends vscode.Diagnostic {\n    constructor(range, message, severity, data) {\n        super(range, message, severity);\n        this.data = data;\n        this.hasDiagnosticCode = false;\n    }\n}\nexports.ProtocolDiagnostic = ProtocolDiagnostic;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCallHierarchyItem extends code.CallHierarchyItem {\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolCallHierarchyItem;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolTypeHierarchyItem extends code.TypeHierarchyItem {\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolTypeHierarchyItem;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass WorkspaceSymbol extends code.SymbolInformation {\n    constructor(name, kind, containerName, locationOrUri, data) {\n        const hasRange = !(locationOrUri instanceof code.Uri);\n        super(name, kind, containerName, hasRange ? locationOrUri : new code.Location(locationOrUri, new code.Range(0, 0, 0, 0)));\n        this.hasRange = hasRange;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = WorkspaceSymbol;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolInlayHint extends code.InlayHint {\n    constructor(position, label, kind) {\n        super(position, label, kind);\n    }\n}\nexports.default = ProtocolInlayHint;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = void 0;\nconst code = require(\"vscode\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst async = require(\"./utils/async\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nconst protocolCodeAction_1 = require(\"./protocolCodeAction\");\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = require(\"./protocolCallHierarchyItem\");\nconst protocolTypeHierarchyItem_1 = require(\"./protocolTypeHierarchyItem\");\nconst protocolWorkspaceSymbol_1 = require(\"./protocolWorkspaceSymbol\");\nconst protocolInlayHint_1 = require(\"./protocolInlayHint\");\nvar InsertReplaceRange;\n(function (InsertReplaceRange) {\n    function is(value) {\n        const candidate = value;\n        return candidate && !!candidate.inserting && !!candidate.replacing;\n    }\n    InsertReplaceRange.is = is;\n})(InsertReplaceRange || (InsertReplaceRange = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => value.toString();\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri)\n        };\n    }\n    function asTextDocumentItem(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            languageId: textDocument.languageId,\n            version: textDocument.version,\n            text: textDocument.getText()\n        };\n    }\n    function asVersionedTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            version: textDocument.version\n        };\n    }\n    function asOpenTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentItem(textDocument)\n        };\n    }\n    function isTextDocumentChangeEvent(value) {\n        const candidate = value;\n        return !!candidate.document && !!candidate.contentChanges;\n    }\n    function isTextDocument(value) {\n        const candidate = value;\n        return !!candidate.uri && !!candidate.version;\n    }\n    function asChangeTextDocumentParams(arg0, arg1, arg2) {\n        if (isTextDocument(arg0)) {\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(arg0.uri),\n                    version: arg0.version\n                },\n                contentChanges: [{ text: arg0.getText() }]\n            };\n            return result;\n        }\n        else if (isTextDocumentChangeEvent(arg0)) {\n            const uri = arg1;\n            const version = arg2;\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(uri),\n                    version: version\n                },\n                contentChanges: arg0.contentChanges.map((change) => {\n                    const range = change.range;\n                    return {\n                        range: {\n                            start: { line: range.start.line, character: range.start.character },\n                            end: { line: range.end.line, character: range.end.character }\n                        },\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    };\n                })\n            };\n            return result;\n        }\n        else {\n            throw Error('Unsupported text document change parameter');\n        }\n    }\n    function asCloseTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\n        let result = {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n        if (includeContent) {\n            result.text = textDocument.getText();\n        }\n        return result;\n    }\n    function asTextDocumentSaveReason(reason) {\n        switch (reason) {\n            case code.TextDocumentSaveReason.Manual:\n                return proto.TextDocumentSaveReason.Manual;\n            case code.TextDocumentSaveReason.AfterDelay:\n                return proto.TextDocumentSaveReason.AfterDelay;\n            case code.TextDocumentSaveReason.FocusOut:\n                return proto.TextDocumentSaveReason.FocusOut;\n        }\n        return proto.TextDocumentSaveReason.Manual;\n    }\n    function asWillSaveTextDocumentParams(event) {\n        return {\n            textDocument: asTextDocumentIdentifier(event.document),\n            reason: asTextDocumentSaveReason(event.reason)\n        };\n    }\n    function asDidCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asDidRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asDidDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asWillDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asTextDocumentPositionParams(textDocument, position) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position)\n        };\n    }\n    function asCompletionTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.CompletionTriggerKind.TriggerCharacter:\n                return proto.CompletionTriggerKind.TriggerCharacter;\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return proto.CompletionTriggerKind.Invoked;\n        }\n    }\n    function asCompletionParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\n                triggerCharacter: context.triggerCharacter\n            }\n        };\n    }\n    function asSignatureHelpTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.SignatureHelpTriggerKind.Invoke:\n                return proto.SignatureHelpTriggerKind.Invoked;\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\n            case code.SignatureHelpTriggerKind.ContentChange:\n                return proto.SignatureHelpTriggerKind.ContentChange;\n        }\n    }\n    function asParameterInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label\n        };\n    }\n    function asParameterInformations(values) {\n        return values.map(asParameterInformation);\n    }\n    function asSignatureInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label,\n            parameters: asParameterInformations(value.parameters)\n        };\n    }\n    function asSignatureInformations(values) {\n        return values.map(asSignatureInformation);\n    }\n    function asSignatureHelp(value) {\n        if (value === undefined) {\n            return value;\n        }\n        return {\n            signatures: asSignatureInformations(value.signatures),\n            activeSignature: value.activeSignature,\n            activeParameter: value.activeParameter\n        };\n    }\n    function asSignatureHelpParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                isRetrigger: context.isRetrigger,\n                triggerCharacter: context.triggerCharacter,\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\n            }\n        };\n    }\n    function asWorkerPosition(position) {\n        return { line: position.line, character: position.character };\n    }\n    function asPosition(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { line: value.line > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.line, character: value.character > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.character };\n    }\n    function asPositions(values, token) {\n        return async.map(values, asPosition, token);\n    }\n    function asPositionsSync(values) {\n        return values.map(asPosition);\n    }\n    function asRange(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { start: asPosition(value.start), end: asPosition(value.end) };\n    }\n    function asRanges(values) {\n        return values.map(asRange);\n    }\n    function asLocation(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\n    }\n    function asDiagnosticSeverity(value) {\n        switch (value) {\n            case code.DiagnosticSeverity.Error:\n                return proto.DiagnosticSeverity.Error;\n            case code.DiagnosticSeverity.Warning:\n                return proto.DiagnosticSeverity.Warning;\n            case code.DiagnosticSeverity.Information:\n                return proto.DiagnosticSeverity.Information;\n            case code.DiagnosticSeverity.Hint:\n                return proto.DiagnosticSeverity.Hint;\n        }\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case code.DiagnosticTag.Unnecessary:\n                return proto.DiagnosticTag.Unnecessary;\n            case code.DiagnosticTag.Deprecated:\n                return proto.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asRelatedInformation(item) {\n        return {\n            message: item.message,\n            location: asLocation(item.location)\n        };\n    }\n    function asRelatedInformations(items) {\n        return items.map(asRelatedInformation);\n    }\n    function asDiagnosticCode(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        if (Is.number(value) || Is.string(value)) {\n            return value;\n        }\n        return { value: value.value, target: asUri(value.target) };\n    }\n    function asDiagnostic(item) {\n        const result = proto.Diagnostic.create(asRange(item.range), item.message);\n        const protocolDiagnostic = item instanceof protocolDiagnostic_1.ProtocolDiagnostic ? item : undefined;\n        if (protocolDiagnostic !== undefined && protocolDiagnostic.data !== undefined) {\n            result.data = protocolDiagnostic.data;\n        }\n        const code = asDiagnosticCode(item.code);\n        if (protocolDiagnostic_1.DiagnosticCode.is(code)) {\n            if (protocolDiagnostic !== undefined && protocolDiagnostic.hasDiagnosticCode) {\n                result.code = code;\n            }\n            else {\n                result.code = code.value;\n                result.codeDescription = { href: code.target };\n            }\n        }\n        else {\n            result.code = code;\n        }\n        if (Is.number(item.severity)) {\n            result.severity = asDiagnosticSeverity(item.severity);\n        }\n        if (Array.isArray(item.tags)) {\n            result.tags = asDiagnosticTags(item.tags);\n        }\n        if (item.relatedInformation) {\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\n        }\n        if (item.source) {\n            result.source = item.source;\n        }\n        return result;\n    }\n    function asDiagnostics(items, token) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return async.map(items, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(items) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return items.map(asDiagnostic);\n    }\n    function asDocumentation(format, documentation) {\n        switch (format) {\n            case '$string':\n                return documentation;\n            case proto.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case proto.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case code.CompletionItemTag.Deprecated:\n                return proto.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined) {\n            return tags;\n        }\n        const result = [];\n        for (let tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItemKind(value, original) {\n        if (original !== undefined) {\n            return original;\n        }\n        return value + 1;\n    }\n    function asCompletionItem(item, labelDetailsSupport = false) {\n        let label;\n        let labelDetails;\n        if (Is.string(item.label)) {\n            label = item.label;\n        }\n        else {\n            label = item.label.label;\n            if (labelDetailsSupport && (item.label.detail !== undefined || item.label.description !== undefined)) {\n                labelDetails = { detail: item.label.detail, description: item.label.description };\n            }\n        }\n        let result = { label: label };\n        if (labelDetails !== undefined) {\n            result.labelDetails = labelDetails;\n        }\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const tags = asCompletionItemTags(item.tags);\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\n                    if (index !== -1) {\n                        tags.splice(index, 1);\n                    }\n                }\n                result.deprecated = protocolItem.deprecated;\n            }\n            if (protocolItem.insertTextMode !== undefined) {\n                result.insertTextMode = protocolItem.insertTextMode;\n            }\n        }\n        if (tags !== undefined && tags.length > 0) {\n            result.tags = tags;\n        }\n        if (result.insertTextMode === undefined && item.keepWhitespace === true) {\n            result.insertTextMode = proto.InsertTextMode.adjustIndentation;\n        }\n        return result;\n    }\n    function fillPrimaryInsertText(target, source) {\n        let format = proto.InsertTextFormat.PlainText;\n        let text = undefined;\n        let range = undefined;\n        if (source.textEdit) {\n            text = source.textEdit.newText;\n            range = source.textEdit.range;\n        }\n        else if (source.insertText instanceof code.SnippetString) {\n            format = proto.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        else {\n            text = source.insertText;\n        }\n        if (source.range) {\n            range = source.range;\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text !== undefined && range !== undefined) {\n            target.textEdit = asCompletionTextEdit(text, range);\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    function asCompletionTextEdit(newText, range) {\n        if (InsertReplaceRange.is(range)) {\n            return proto.InsertReplaceEdit.create(newText, asRange(range.inserting), asRange(range.replacing));\n        }\n        else {\n            return { newText, range: asRange(range) };\n        }\n    }\n    function asTextEdit(edit) {\n        return { range: asRange(edit.range), newText: edit.newText };\n    }\n    function asTextEdits(edits) {\n        if (edits === undefined || edits === null) {\n            return edits;\n        }\n        return edits.map(asTextEdit);\n    }\n    function asSymbolKind(item) {\n        if (item <= code.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return (item + 1);\n        }\n        return proto.SymbolKind.Property;\n    }\n    function asSymbolTag(item) {\n        return item;\n    }\n    function asSymbolTags(items) {\n        return items.map(asSymbolTag);\n    }\n    function asReferenceParams(textDocument, position, options) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    async function asCodeAction(item, token) {\n        let result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = await asDiagnostics(item.diagnostics, token);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        return result;\n    }\n    function asCodeActionSync(item) {\n        let result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        return result;\n    }\n    async function asCodeActionContext(context, token) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(await asDiagnostics(context.diagnostics, token), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionContextSync(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(asDiagnosticsSync(context.diagnostics), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionTriggerKind(kind) {\n        switch (kind) {\n            case code.CodeActionTriggerKind.Invoke:\n                return proto.CodeActionTriggerKind.Invoked;\n            case code.CodeActionTriggerKind.Automatic:\n                return proto.CodeActionTriggerKind.Automatic;\n            default:\n                return undefined;\n        }\n    }\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        return item.value;\n    }\n    function asInlineValueContext(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        return proto.InlineValueContext.create(context.frameId, asRange(context.stoppedLocation));\n    }\n    function asInlineCompletionParams(document, position, context) {\n        return { context: proto.InlineCompletionContext.create(context.triggerKind, context.selectedCompletionInfo),\n            textDocument: asTextDocumentIdentifier(document), position: asPosition(position) };\n    }\n    function asCommand(item) {\n        let result = proto.Command.create(item.title, item.command);\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        let result = proto.CodeLens.create(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item instanceof protocolCodeLens_1.default) {\n            if (item.data) {\n                result.data = item.data;\n            }\n        }\n        return result;\n    }\n    function asFormattingOptions(options, fileOptions) {\n        const result = { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n        if (fileOptions.trimTrailingWhitespace) {\n            result.trimTrailingWhitespace = true;\n        }\n        if (fileOptions.trimFinalNewlines) {\n            result.trimFinalNewlines = true;\n        }\n        if (fileOptions.insertFinalNewline) {\n            result.insertFinalNewline = true;\n        }\n        return result;\n    }\n    function asDocumentSymbolParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCodeLensParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asDocumentLink(item) {\n        let result = proto.DocumentLink.create(asRange(item.range));\n        if (item.target) {\n            result.target = asUri(item.target);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = item.tooltip;\n        }\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\n        if (protocolItem && protocolItem.data) {\n            result.data = protocolItem.data;\n        }\n        return result;\n    }\n    function asDocumentLinkParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCallHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange)\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolCallHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asTypeHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange),\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolTypeHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asWorkspaceSymbol(item) {\n        const result = item instanceof protocolWorkspaceSymbol_1.default\n            ? { name: item.name, kind: asSymbolKind(item.kind), location: item.hasRange ? asLocation(item.location) : { uri: _uriConverter(item.location.uri) }, data: item.data }\n            : { name: item.name, kind: asSymbolKind(item.kind), location: asLocation(item.location) };\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        if (item.containerName !== '') {\n            result.containerName = item.containerName;\n        }\n        return result;\n    }\n    function asInlayHint(item) {\n        const label = typeof item.label === 'string'\n            ? item.label\n            : item.label.map(asInlayHintLabelPart);\n        const result = proto.InlayHint.create(asPosition(item.position), label);\n        if (item.kind !== undefined) {\n            result.kind = item.kind;\n        }\n        if (item.textEdits !== undefined) {\n            result.textEdits = asTextEdits(item.textEdits);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        if (item.paddingLeft !== undefined) {\n            result.paddingLeft = item.paddingLeft;\n        }\n        if (item.paddingRight !== undefined) {\n            result.paddingRight = item.paddingRight;\n        }\n        if (item instanceof protocolInlayHint_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(item) {\n        const result = proto.InlayHintLabelPart.create(item.value);\n        if (item.location !== undefined) {\n            result.location = asLocation(item.location);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        const result = {\n            kind: proto.MarkupKind.Markdown,\n            value: value.value\n        };\n        return result;\n    }\n    return {\n        asUri,\n        asTextDocumentIdentifier,\n        asTextDocumentItem,\n        asVersionedTextDocumentIdentifier,\n        asOpenTextDocumentParams,\n        asChangeTextDocumentParams,\n        asCloseTextDocumentParams,\n        asSaveTextDocumentParams,\n        asWillSaveTextDocumentParams,\n        asDidCreateFilesParams,\n        asDidRenameFilesParams,\n        asDidDeleteFilesParams,\n        asWillCreateFilesParams,\n        asWillRenameFilesParams,\n        asWillDeleteFilesParams,\n        asTextDocumentPositionParams,\n        asCompletionParams,\n        asSignatureHelpParams,\n        asWorkerPosition,\n        asRange,\n        asRanges,\n        asPosition,\n        asPositions,\n        asPositionsSync,\n        asLocation,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asDiagnostic,\n        asDiagnostics,\n        asDiagnosticsSync,\n        asCompletionItem,\n        asTextEdit,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asReferenceParams,\n        asCodeAction,\n        asCodeActionSync,\n        asCodeActionContext,\n        asCodeActionContextSync,\n        asInlineValueContext,\n        asCommand,\n        asCodeLens,\n        asFormattingOptions,\n        asDocumentSymbolParams,\n        asCodeLensParams,\n        asDocumentLink,\n        asDocumentLinkParams,\n        asCallHierarchyItem,\n        asTypeHierarchyItem,\n        asInlayHint,\n        asWorkspaceSymbol,\n        asInlineCompletionParams\n    };\n}\nexports.createConverter = createConverter;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = void 0;\nconst code = require(\"vscode\");\nconst ls = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst async = require(\"./utils/async\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nconst protocolCodeAction_1 = require(\"./protocolCodeAction\");\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = require(\"./protocolCallHierarchyItem\");\nconst protocolTypeHierarchyItem_1 = require(\"./protocolTypeHierarchyItem\");\nconst protocolWorkspaceSymbol_1 = require(\"./protocolWorkspaceSymbol\");\nconst protocolInlayHint_1 = require(\"./protocolInlayHint\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nvar CodeBlock;\n(function (CodeBlock) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\n    }\n    CodeBlock.is = is;\n})(CodeBlock || (CodeBlock = {}));\nfunction createConverter(uriConverter, trustMarkdown, supportHtml) {\n    const nullConverter = (value) => code.Uri.parse(value);\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asDocumentSelector(selector) {\n        const result = [];\n        for (const filter of selector) {\n            if (typeof filter === 'string') {\n                result.push(filter);\n            }\n            else if (vscode_languageserver_protocol_1.NotebookCellTextDocumentFilter.is(filter)) {\n                // We first need to check for the notebook cell filter since a TextDocumentFilter would\n                // match both (e.g. the notebook is optional).\n                if (typeof filter.notebook === 'string') {\n                    result.push({ notebookType: filter.notebook, language: filter.language });\n                }\n                else {\n                    const notebookType = filter.notebook.notebookType ?? '*';\n                    result.push({ notebookType: notebookType, scheme: filter.notebook.scheme, pattern: filter.notebook.pattern, language: filter.language });\n                }\n            }\n            else if (vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                result.push({ language: filter.language, scheme: filter.scheme, pattern: filter.pattern });\n            }\n        }\n        return result;\n    }\n    async function asDiagnostics(diagnostics, token) {\n        return async.map(diagnostics, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(diagnostics) {\n        const result = new Array(diagnostics.length);\n        for (let i = 0; i < diagnostics.length; i++) {\n            result[i] = asDiagnostic(diagnostics[i]);\n        }\n        return result;\n    }\n    function asDiagnostic(diagnostic) {\n        let result = new protocolDiagnostic_1.ProtocolDiagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity), diagnostic.data);\n        if (diagnostic.code !== undefined) {\n            if (typeof diagnostic.code === 'string' || typeof diagnostic.code === 'number') {\n                if (ls.CodeDescription.is(diagnostic.codeDescription)) {\n                    result.code = {\n                        value: diagnostic.code,\n                        target: asUri(diagnostic.codeDescription.href)\n                    };\n                }\n                else {\n                    result.code = diagnostic.code;\n                }\n            }\n            else if (protocolDiagnostic_1.DiagnosticCode.is(diagnostic.code)) {\n                // This is for backwards compatibility of a proposed API.\n                // We should remove this at some point.\n                result.hasDiagnosticCode = true;\n                const diagnosticCode = diagnostic.code;\n                result.code = {\n                    value: diagnosticCode.value,\n                    target: asUri(diagnosticCode.target)\n                };\n            }\n        }\n        if (diagnostic.source) {\n            result.source = diagnostic.source;\n        }\n        if (diagnostic.relatedInformation) {\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\n        }\n        if (Array.isArray(diagnostic.tags)) {\n            result.tags = asDiagnosticTags(diagnostic.tags);\n        }\n        return result;\n    }\n    function asRelatedInformation(relatedInformation) {\n        const result = new Array(relatedInformation.length);\n        for (let i = 0; i < relatedInformation.length; i++) {\n            const info = relatedInformation[i];\n            result[i] = new code.DiagnosticRelatedInformation(asLocation(info.location), info.message);\n        }\n        return result;\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case ls.DiagnosticTag.Unnecessary:\n                return code.DiagnosticTag.Unnecessary;\n            case ls.DiagnosticTag.Deprecated:\n                return code.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asPosition(value) {\n        return value ? new code.Position(value.line, value.character) : undefined;\n    }\n    function asRange(value) {\n        return value ? new code.Range(value.start.line, value.start.character, value.end.line, value.end.character) : undefined;\n    }\n    async function asRanges(items, token) {\n        return async.map(items, (range) => {\n            return new code.Range(range.start.line, range.start.character, range.end.line, range.end.character);\n        }, token);\n    }\n    function asDiagnosticSeverity(value) {\n        if (value === undefined || value === null) {\n            return code.DiagnosticSeverity.Error;\n        }\n        switch (value) {\n            case ls.DiagnosticSeverity.Error:\n                return code.DiagnosticSeverity.Error;\n            case ls.DiagnosticSeverity.Warning:\n                return code.DiagnosticSeverity.Warning;\n            case ls.DiagnosticSeverity.Information:\n                return code.DiagnosticSeverity.Information;\n            case ls.DiagnosticSeverity.Hint:\n                return code.DiagnosticSeverity.Hint;\n        }\n        return code.DiagnosticSeverity.Error;\n    }\n    function asHoverContent(value) {\n        if (Is.string(value)) {\n            return asMarkdownString(value);\n        }\n        else if (CodeBlock.is(value)) {\n            let result = asMarkdownString();\n            return result.appendCodeblock(value.value, value.language);\n        }\n        else if (Array.isArray(value)) {\n            let result = [];\n            for (let element of value) {\n                let item = asMarkdownString();\n                if (CodeBlock.is(element)) {\n                    item.appendCodeblock(element.value, element.language);\n                }\n                else {\n                    item.appendMarkdown(element);\n                }\n                result.push(item);\n            }\n            return result;\n        }\n        else {\n            return asMarkdownString(value);\n        }\n    }\n    function asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return asMarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    return value.value;\n                default:\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\n            }\n        }\n    }\n    function asMarkdownString(value) {\n        let result;\n        if (value === undefined || typeof value === 'string') {\n            result = new code.MarkdownString(value);\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    result = new code.MarkdownString(value.value);\n                    break;\n                case ls.MarkupKind.PlainText:\n                    result = new code.MarkdownString();\n                    result.appendText(value.value);\n                    break;\n                default:\n                    result = new code.MarkdownString();\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\n                    break;\n            }\n        }\n        result.isTrusted = trustMarkdown;\n        result.supportHtml = supportHtml;\n        return result;\n    }\n    function asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\n    }\n    async function asCompletionResult(value, allCommitCharacters, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asCompletionItem(item, allCommitCharacters), token);\n        }\n        const list = value;\n        const { defaultRange, commitCharacters } = getCompletionItemDefaults(list, allCommitCharacters);\n        const converted = await async.map(list.items, (item) => {\n            return asCompletionItem(item, commitCharacters, defaultRange, list.itemDefaults?.insertTextMode, list.itemDefaults?.insertTextFormat, list.itemDefaults?.data);\n        }, token);\n        return new code.CompletionList(converted, list.isIncomplete);\n    }\n    function getCompletionItemDefaults(list, allCommitCharacters) {\n        const rangeDefaults = list.itemDefaults?.editRange;\n        const commitCharacters = list.itemDefaults?.commitCharacters ?? allCommitCharacters;\n        return ls.Range.is(rangeDefaults)\n            ? { defaultRange: asRange(rangeDefaults), commitCharacters }\n            : rangeDefaults !== undefined\n                ? { defaultRange: { inserting: asRange(rangeDefaults.insert), replacing: asRange(rangeDefaults.replace) }, commitCharacters }\n                : { defaultRange: undefined, commitCharacters };\n    }\n    function asCompletionItemKind(value) {\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\n            return [value - 1, undefined];\n        }\n        return [code.CompletionItemKind.Text, value];\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case ls.CompletionItemTag.Deprecated:\n                return code.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined || tags === null) {\n            return [];\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItem(item, defaultCommitCharacters, defaultRange, defaultInsertTextMode, defaultInsertTextFormat, defaultData) {\n        const tags = asCompletionItemTags(item.tags);\n        const label = asCompletionItemLabel(item);\n        const result = new protocolCompletionItem_1.default(label);\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        const insertText = asCompletionInsertText(item, defaultRange, defaultInsertTextFormat);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEditsSync(item.additionalTextEdits);\n        }\n        const commitCharacters = item.commitCharacters !== undefined\n            ? Is.stringArray(item.commitCharacters) ? item.commitCharacters : undefined\n            : defaultCommitCharacters;\n        if (commitCharacters) {\n            result.commitCharacters = commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n            if (item.deprecated === true) {\n                tags.push(code.CompletionItemTag.Deprecated);\n            }\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const data = item.data ?? defaultData;\n        if (data !== undefined) {\n            result.data = data;\n        }\n        if (tags.length > 0) {\n            result.tags = tags;\n        }\n        const insertTextMode = item.insertTextMode ?? defaultInsertTextMode;\n        if (insertTextMode !== undefined) {\n            result.insertTextMode = insertTextMode;\n            if (insertTextMode === ls.InsertTextMode.asIs) {\n                result.keepWhitespace = true;\n            }\n        }\n        return result;\n    }\n    function asCompletionItemLabel(item) {\n        if (ls.CompletionItemLabelDetails.is(item.labelDetails)) {\n            return {\n                label: item.label,\n                detail: item.labelDetails.detail,\n                description: item.labelDetails.description\n            };\n        }\n        else {\n            return item.label;\n        }\n    }\n    function asCompletionInsertText(item, defaultRange, defaultInsertTextFormat) {\n        const insertTextFormat = item.insertTextFormat ?? defaultInsertTextFormat;\n        if (item.textEdit !== undefined || defaultRange !== undefined) {\n            const [range, newText] = item.textEdit !== undefined\n                ? getCompletionRangeAndText(item.textEdit)\n                : [defaultRange, item.textEditText ?? item.label];\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(newText), range: range, fromEdit: true };\n            }\n            else {\n                return { text: newText, range: range, fromEdit: true };\n            }\n        }\n        else if (item.insertText) {\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\n            }\n            else {\n                return { text: item.insertText, fromEdit: false };\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    function getCompletionRangeAndText(value) {\n        if (ls.InsertReplaceEdit.is(value)) {\n            return [{ inserting: asRange(value.insert), replacing: asRange(value.replace) }, value.newText];\n        }\n        else {\n            return [asRange(value.range), value.newText];\n        }\n    }\n    function asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        return new code.TextEdit(asRange(edit.range), edit.newText);\n    }\n    async function asTextEdits(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asTextEdit, token);\n    }\n    function asTextEditsSync(items) {\n        if (!items) {\n            return undefined;\n        }\n        const result = new Array(items.length);\n        for (let i = 0; i < items.length; i++) {\n            result[i] = asTextEdit(items[i]);\n        }\n        return result;\n    }\n    async function asSignatureHelp(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new code.SignatureHelp();\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = await asSignatureInformations(item.signatures, token);\n        }\n        return result;\n    }\n    async function asSignatureInformations(items, token) {\n        return async.mapAsync(items, asSignatureInformation, token);\n    }\n    async function asSignatureInformation(item, token) {\n        let result = new code.SignatureInformation(item.label);\n        if (item.documentation !== undefined) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        if (item.parameters !== undefined) {\n            result.parameters = await asParameterInformations(item.parameters, token);\n        }\n        if (item.activeParameter !== undefined) {\n            result.activeParameter = item.activeParameter;\n        }\n        {\n            return result;\n        }\n    }\n    function asParameterInformations(items, token) {\n        return async.map(items, asParameterInformation, token);\n    }\n    function asParameterInformation(item) {\n        let result = new code.ParameterInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        return result;\n    }\n    function asLocation(item) {\n        return item ? new code.Location(_uriConverter(item.uri), asRange(item.range)) : undefined;\n    }\n    async function asDeclarationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    async function asDefinitionResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    function asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = {\n            targetUri: _uriConverter(item.targetUri),\n            targetRange: asRange(item.targetRange),\n            originSelectionRange: asRange(item.originSelectionRange),\n            targetSelectionRange: asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    async function asLocationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length === 0) {\n                return [];\n            }\n            else if (ls.LocationLink.is(item[0])) {\n                const links = item;\n                return async.map(links, asLocationLink, token);\n            }\n            else {\n                const locations = item;\n                return async.map(locations, asLocation, token);\n            }\n        }\n        else if (ls.LocationLink.is(item)) {\n            return [asLocationLink(item)];\n        }\n        else {\n            return asLocation(item);\n        }\n    }\n    async function asReferences(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asLocation, token);\n    }\n    async function asDocumentHighlights(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asDocumentHighlight, token);\n    }\n    function asDocumentHighlight(item) {\n        let result = new code.DocumentHighlight(asRange(item.range));\n        if (Is.number(item.kind)) {\n            result.kind = asDocumentHighlightKind(item.kind);\n        }\n        return result;\n    }\n    function asDocumentHighlightKind(item) {\n        switch (item) {\n            case ls.DocumentHighlightKind.Text:\n                return code.DocumentHighlightKind.Text;\n            case ls.DocumentHighlightKind.Read:\n                return code.DocumentHighlightKind.Read;\n            case ls.DocumentHighlightKind.Write:\n                return code.DocumentHighlightKind.Write;\n        }\n        return code.DocumentHighlightKind.Text;\n    }\n    async function asSymbolInformations(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asSymbolInformation, token);\n    }\n    function asSymbolKind(item) {\n        if (item <= ls.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return code.SymbolKind.Property;\n    }\n    function asSymbolTag(value) {\n        switch (value) {\n            case ls.SymbolTag.Deprecated:\n                return code.SymbolTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asSymbolTags(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        const result = [];\n        for (const item of items) {\n            const converted = asSymbolTag(item);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length === 0 ? undefined : result;\n    }\n    function asSymbolInformation(item) {\n        const data = item.data;\n        const location = item.location;\n        const result = location.range === undefined || data !== undefined\n            ? new protocolWorkspaceSymbol_1.default(item.name, asSymbolKind(item.kind), item.containerName ?? '', location.range === undefined ? _uriConverter(location.uri) : new code.Location(_uriConverter(item.location.uri), asRange(location.range)), data)\n            : new code.SymbolInformation(item.name, asSymbolKind(item.kind), item.containerName ?? '', new code.Location(_uriConverter(item.location.uri), asRange(location.range)));\n        fillTags(result, item);\n        return result;\n    }\n    async function asDocumentSymbols(values, token) {\n        if (values === undefined || values === null) {\n            return undefined;\n        }\n        return async.map(values, asDocumentSymbol, token);\n    }\n    function asDocumentSymbol(value) {\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\n        fillTags(result, value);\n        if (value.children !== undefined && value.children.length > 0) {\n            let children = [];\n            for (let child of value.children) {\n                children.push(asDocumentSymbol(child));\n            }\n            result.children = children;\n        }\n        return result;\n    }\n    function fillTags(result, value) {\n        result.tags = asSymbolTags(value.tags);\n        if (value.deprecated) {\n            if (!result.tags) {\n                result.tags = [code.SymbolTag.Deprecated];\n            }\n            else {\n                if (!result.tags.includes(code.SymbolTag.Deprecated)) {\n                    result.tags = result.tags.concat(code.SymbolTag.Deprecated);\n                }\n            }\n        }\n    }\n    function asCommand(item) {\n        let result = { title: item.title, command: item.command };\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    async function asCommands(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCommand, token);\n    }\n    const kindMapping = new Map();\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = kindMapping.get(item);\n        if (result) {\n            return result;\n        }\n        let parts = item.split('.');\n        result = code.CodeActionKind.Empty;\n        for (let part of parts) {\n            result = result.append(part);\n        }\n        return result;\n    }\n    function asCodeActionKinds(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(kind => asCodeActionKind(kind));\n    }\n    async function asCodeAction(item, token) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = new protocolCodeAction_1.default(item.title, item.data);\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            result.edit = await asWorkspaceEdit(item.edit, token);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        return result;\n    }\n    function asCodeActionResult(items, token) {\n        return async.mapAsync(items, async (item) => {\n            if (ls.Command.is(item)) {\n                return asCommand(item);\n            }\n            else {\n                return asCodeAction(item, token);\n            }\n        }, token);\n    }\n    function asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new protocolCodeLens_1.default(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.data !== undefined && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    async function asCodeLenses(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCodeLens, token);\n    }\n    async function asWorkspaceEdit(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        const sharedMetadata = new Map();\n        if (item.changeAnnotations !== undefined) {\n            const changeAnnotations = item.changeAnnotations;\n            await async.forEach(Object.keys(changeAnnotations), (key) => {\n                const metaData = asWorkspaceEditEntryMetadata(changeAnnotations[key]);\n                sharedMetadata.set(key, metaData);\n            }, token);\n        }\n        const asMetadata = (annotation) => {\n            if (annotation === undefined) {\n                return undefined;\n            }\n            else {\n                return sharedMetadata.get(annotation);\n            }\n        };\n        const result = new code.WorkspaceEdit();\n        if (item.documentChanges) {\n            const documentChanges = item.documentChanges;\n            await async.forEach(documentChanges, (change) => {\n                if (ls.CreateFile.is(change)) {\n                    result.createFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.RenameFile.is(change)) {\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    result.deleteFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    const uri = _uriConverter(change.textDocument.uri);\n                    for (const edit of change.edits) {\n                        if (ls.AnnotatedTextEdit.is(edit)) {\n                            result.replace(uri, asRange(edit.range), edit.newText, asMetadata(edit.annotationId));\n                        }\n                        else {\n                            result.replace(uri, asRange(edit.range), edit.newText);\n                        }\n                    }\n                }\n                else {\n                    throw new Error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            }, token);\n        }\n        else if (item.changes) {\n            const changes = item.changes;\n            await async.forEach(Object.keys(changes), (key) => {\n                result.set(_uriConverter(key), asTextEditsSync(changes[key]));\n            }, token);\n        }\n        return result;\n    }\n    function asWorkspaceEditEntryMetadata(annotation) {\n        if (annotation === undefined) {\n            return undefined;\n        }\n        return { label: annotation.label, needsConfirmation: !!annotation.needsConfirmation, description: annotation.description };\n    }\n    function asDocumentLink(item) {\n        let range = asRange(item.range);\n        let target = item.target ? asUri(item.target) : undefined;\n        // target must be optional in DocumentLink\n        let link = new protocolDocumentLink_1.default(range, target);\n        if (item.tooltip !== undefined) {\n            link.tooltip = item.tooltip;\n        }\n        if (item.data !== undefined && item.data !== null) {\n            link.data = item.data;\n        }\n        return link;\n    }\n    async function asDocumentLinks(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asDocumentLink, token);\n    }\n    function asColor(color) {\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    function asColorInformation(ci) {\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\n    }\n    async function asColorInformations(colorInformation, token) {\n        if (!colorInformation) {\n            return undefined;\n        }\n        return async.map(colorInformation, asColorInformation, token);\n    }\n    function asColorPresentation(cp) {\n        let presentation = new code.ColorPresentation(cp.label);\n        presentation.additionalTextEdits = asTextEditsSync(cp.additionalTextEdits);\n        if (cp.textEdit) {\n            presentation.textEdit = asTextEdit(cp.textEdit);\n        }\n        return presentation;\n    }\n    async function asColorPresentations(colorPresentations, token) {\n        if (!colorPresentations) {\n            return undefined;\n        }\n        return async.map(colorPresentations, asColorPresentation, token);\n    }\n    function asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case ls.FoldingRangeKind.Comment:\n                    return code.FoldingRangeKind.Comment;\n                case ls.FoldingRangeKind.Imports:\n                    return code.FoldingRangeKind.Imports;\n                case ls.FoldingRangeKind.Region:\n                    return code.FoldingRangeKind.Region;\n            }\n        }\n        return undefined;\n    }\n    function asFoldingRange(r) {\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\n    }\n    async function asFoldingRanges(foldingRanges, token) {\n        if (!foldingRanges) {\n            return undefined;\n        }\n        return async.map(foldingRanges, asFoldingRange, token);\n    }\n    function asSelectionRange(selectionRange) {\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\n    }\n    async function asSelectionRanges(selectionRanges, token) {\n        if (!Array.isArray(selectionRanges)) {\n            return [];\n        }\n        return async.map(selectionRanges, asSelectionRange, token);\n    }\n    function asInlineValue(inlineValue) {\n        if (ls.InlineValueText.is(inlineValue)) {\n            return new code.InlineValueText(asRange(inlineValue.range), inlineValue.text);\n        }\n        else if (ls.InlineValueVariableLookup.is(inlineValue)) {\n            return new code.InlineValueVariableLookup(asRange(inlineValue.range), inlineValue.variableName, inlineValue.caseSensitiveLookup);\n        }\n        else {\n            return new code.InlineValueEvaluatableExpression(asRange(inlineValue.range), inlineValue.expression);\n        }\n    }\n    async function asInlineValues(inlineValues, token) {\n        if (!Array.isArray(inlineValues)) {\n            return [];\n        }\n        return async.map(inlineValues, asInlineValue, token);\n    }\n    async function asInlayHint(value, token) {\n        const label = typeof value.label === 'string'\n            ? value.label\n            : await async.map(value.label, asInlayHintLabelPart, token);\n        const result = new protocolInlayHint_1.default(asPosition(value.position), label);\n        if (value.kind !== undefined) {\n            result.kind = value.kind;\n        }\n        if (value.textEdits !== undefined) {\n            result.textEdits = await asTextEdits(value.textEdits, token);\n        }\n        if (value.tooltip !== undefined) {\n            result.tooltip = asTooltip(value.tooltip);\n        }\n        if (value.paddingLeft !== undefined) {\n            result.paddingLeft = value.paddingLeft;\n        }\n        if (value.paddingRight !== undefined) {\n            result.paddingRight = value.paddingRight;\n        }\n        if (value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(part) {\n        const result = new code.InlayHintLabelPart(part.value);\n        if (part.location !== undefined) {\n            result.location = asLocation(part.location);\n        }\n        if (part.tooltip !== undefined) {\n            result.tooltip = asTooltip(part.tooltip);\n        }\n        if (part.command !== undefined) {\n            result.command = asCommand(part.command);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        return asMarkdownString(value);\n    }\n    async function asInlayHints(values, token) {\n        if (!Array.isArray(values)) {\n            return undefined;\n        }\n        return async.mapAsync(values, asInlayHint, token);\n    }\n    function asCallHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        const result = new protocolCallHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asCallHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asCallHierarchyItem, token);\n    }\n    async function asCallHierarchyIncomingCall(item, token) {\n        return new code.CallHierarchyIncomingCall(asCallHierarchyItem(item.from), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyIncomingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyIncomingCall, token);\n    }\n    async function asCallHierarchyOutgoingCall(item, token) {\n        return new code.CallHierarchyOutgoingCall(asCallHierarchyItem(item.to), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyOutgoingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyOutgoingCall, token);\n    }\n    async function asSemanticTokens(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokens(new Uint32Array(value.data), value.resultId);\n    }\n    function asSemanticTokensEdit(value) {\n        return new code.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\n    }\n    async function asSemanticTokensEdits(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\n    }\n    function asSemanticTokensLegend(value) {\n        return value;\n    }\n    async function asLinkedEditingRanges(value, token) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new code.LinkedEditingRanges(await asRanges(value.ranges, token), asRegularExpression(value.wordPattern));\n    }\n    function asRegularExpression(value) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new RegExp(value);\n    }\n    function asTypeHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        let result = new protocolTypeHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asTypeHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asTypeHierarchyItem, token);\n    }\n    function asGlobPattern(pattern) {\n        if (Is.string(pattern)) {\n            return pattern;\n        }\n        if (ls.RelativePattern.is(pattern)) {\n            if (ls.URI.is(pattern.baseUri)) {\n                return new code.RelativePattern(asUri(pattern.baseUri), pattern.pattern);\n            }\n            else if (ls.WorkspaceFolder.is(pattern.baseUri)) {\n                const workspaceFolder = code.workspace.getWorkspaceFolder(asUri(pattern.baseUri.uri));\n                return workspaceFolder !== undefined ? new code.RelativePattern(workspaceFolder, pattern.pattern) : undefined;\n            }\n        }\n        return undefined;\n    }\n    async function asInlineCompletionResult(value, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asInlineCompletionItem(item), token);\n        }\n        const list = value;\n        const converted = await async.map(list.items, (item) => {\n            return asInlineCompletionItem(item);\n        }, token);\n        return new code.InlineCompletionList(converted);\n    }\n    function asInlineCompletionItem(item) {\n        let insertText;\n        if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        }\n        else {\n            insertText = new code.SnippetString(item.insertText.value);\n        }\n        let command = undefined;\n        if (item.command) {\n            command = asCommand(item.command);\n        }\n        const inlineCompletionItem = new code.InlineCompletionItem(insertText, asRange(item.range), command);\n        if (item.filterText) {\n            inlineCompletionItem.filterText = item.filterText;\n        }\n        return inlineCompletionItem;\n    }\n    return {\n        asUri,\n        asDocumentSelector,\n        asDiagnostics,\n        asDiagnostic,\n        asRange,\n        asRanges,\n        asPosition,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asHover,\n        asCompletionResult,\n        asCompletionItem,\n        asTextEdit,\n        asTextEdits,\n        asSignatureHelp,\n        asSignatureInformations,\n        asSignatureInformation,\n        asParameterInformations,\n        asParameterInformation,\n        asDeclarationResult,\n        asDefinitionResult,\n        asLocation,\n        asReferences,\n        asDocumentHighlights,\n        asDocumentHighlight,\n        asDocumentHighlightKind,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asSymbolInformations,\n        asSymbolInformation,\n        asDocumentSymbols,\n        asDocumentSymbol,\n        asCommand,\n        asCommands,\n        asCodeAction,\n        asCodeActionKind,\n        asCodeActionKinds,\n        asCodeActionResult,\n        asCodeLens,\n        asCodeLenses,\n        asWorkspaceEdit,\n        asDocumentLink,\n        asDocumentLinks,\n        asFoldingRangeKind,\n        asFoldingRange,\n        asFoldingRanges,\n        asColor,\n        asColorInformation,\n        asColorInformations,\n        asColorPresentation,\n        asColorPresentations,\n        asSelectionRange,\n        asSelectionRanges,\n        asInlineValue,\n        asInlineValues,\n        asInlayHint,\n        asInlayHints,\n        asSemanticTokensLegend,\n        asSemanticTokens,\n        asSemanticTokensEdit,\n        asSemanticTokensEdits,\n        asCallHierarchyItem,\n        asCallHierarchyItems,\n        asCallHierarchyIncomingCall,\n        asCallHierarchyIncomingCalls,\n        asCallHierarchyOutgoingCall,\n        asCallHierarchyOutgoingCalls,\n        asLinkedEditingRanges: asLinkedEditingRanges,\n        asTypeHierarchyItem,\n        asTypeHierarchyItems,\n        asGlobPattern,\n        asInlineCompletionResult,\n        asInlineCompletionItem\n    };\n}\nexports.createConverter = createConverter;\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateUuid = exports.parse = exports.isUUID = exports.v4 = exports.empty = void 0;\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressPart = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nclass ProgressPart {\n    constructor(_client, _token, done) {\n        this._client = _client;\n        this._token = _token;\n        this._reported = 0;\n        this._infinite = false;\n        this._lspProgressDisposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\n            switch (value.kind) {\n                case 'begin':\n                    this.begin(value);\n                    break;\n                case 'report':\n                    this.report(value);\n                    break;\n                case 'end':\n                    this.done();\n                    done && done(this);\n                    break;\n            }\n        });\n    }\n    begin(params) {\n        this._infinite = params.percentage === undefined;\n        // the progress as already been marked as done / canceled. Ignore begin call\n        if (this._lspProgressDisposable === undefined) {\n            return;\n        }\n        // Since we don't use commands this will be a silent window progress with a hidden notification.\n        void vscode_1.window.withProgress({ location: vscode_1.ProgressLocation.Window, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\n            // the progress as already been marked as done / canceled. Ignore begin call\n            if (this._lspProgressDisposable === undefined) {\n                return;\n            }\n            this._progress = progress;\n            this._cancellationToken = cancellationToken;\n            this._tokenDisposable = this._cancellationToken.onCancellationRequested(() => {\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\n            });\n            this.report(params);\n            return new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n            });\n        });\n    }\n    report(params) {\n        if (this._infinite && Is.string(params.message)) {\n            this._progress !== undefined && this._progress.report({ message: params.message });\n        }\n        else if (Is.number(params.percentage)) {\n            const percentage = Math.max(0, Math.min(params.percentage, 100));\n            const delta = Math.max(0, percentage - this._reported);\n            this._reported += delta;\n            this._progress !== undefined && this._progress.report({ message: params.message, increment: delta });\n        }\n    }\n    cancel() {\n        this.cleanup();\n        if (this._reject !== undefined) {\n            this._reject();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    done() {\n        this.cleanup();\n        if (this._resolve !== undefined) {\n            this._resolve();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    cleanup() {\n        if (this._lspProgressDisposable !== undefined) {\n            this._lspProgressDisposable.dispose();\n            this._lspProgressDisposable = undefined;\n        }\n        if (this._tokenDisposable !== undefined) {\n            this._tokenDisposable.dispose();\n            this._tokenDisposable = undefined;\n        }\n        this._progress = undefined;\n        this._cancellationToken = undefined;\n    }\n}\nexports.ProgressPart = ProgressPart;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFeature = exports.TextDocumentLanguageFeature = exports.TextDocumentEventFeature = exports.DynamicDocumentFeature = exports.DynamicFeature = exports.StaticFeature = exports.ensure = exports.LSPCancellationError = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nclass LSPCancellationError extends vscode_1.CancellationError {\n    constructor(data) {\n        super();\n        this.data = data;\n    }\n}\nexports.LSPCancellationError = LSPCancellationError;\nfunction ensure(target, key) {\n    if (target[key] === undefined) {\n        target[key] = {};\n    }\n    return target[key];\n}\nexports.ensure = ensure;\nvar StaticFeature;\n(function (StaticFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams));\n    }\n    StaticFeature.is = is;\n})(StaticFeature || (exports.StaticFeature = StaticFeature = {}));\nvar DynamicFeature;\n(function (DynamicFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams)) && Is.func(candidate.register) &&\n            Is.func(candidate.unregister) && candidate.registrationType !== undefined;\n    }\n    DynamicFeature.is = is;\n})(DynamicFeature || (exports.DynamicFeature = DynamicFeature = {}));\n/**\n * An abstract dynamic feature implementation that operates on documents (e.g. text\n * documents or notebooks).\n */\nclass DynamicDocumentFeature {\n    constructor(client) {\n        this._client = client;\n    }\n    /**\n     * Returns the state the feature is in.\n     */\n    getState() {\n        const selectors = this.getDocumentSelectors();\n        let count = 0;\n        for (const selector of selectors) {\n            count++;\n            for (const document of vscode_1.workspace.textDocuments) {\n                if (vscode_1.languages.match(selector, document) > 0) {\n                    return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n                }\n            }\n        }\n        const registrations = count > 0;\n        return { kind: 'document', id: this.registrationType.method, registrations, matches: false };\n    }\n}\nexports.DynamicDocumentFeature = DynamicDocumentFeature;\n/**\n * An abstract base class to implement features that react to events\n * emitted from text documents.\n */\nclass TextDocumentEventFeature extends DynamicDocumentFeature {\n    static textDocumentFilter(selectors, textDocument) {\n        for (const selector of selectors) {\n            if (vscode_1.languages.match(selector, textDocument) > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    constructor(client, event, type, middleware, createParams, textDocument, selectorFilter) {\n        super(client);\n        this._event = event;\n        this._type = type;\n        this._middleware = middleware;\n        this._createParams = createParams;\n        this._textDocument = textDocument;\n        this._selectorFilter = selectorFilter;\n        this._selectors = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n    }\n    getStateInfo() {\n        return [this._selectors.values(), false];\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event((data) => {\n                this.callback(data).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed.`, error);\n                });\n            });\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    async callback(data) {\n        const doSend = async (data) => {\n            const params = this._createParams(data);\n            await this._client.sendNotification(this._type, params);\n            this.notificationSent(this.getTextDocument(data), this._type, params);\n        };\n        if (this.matches(data)) {\n            const middleware = this._middleware();\n            return middleware ? middleware(data, (data) => doSend(data)) : doSend(data);\n        }\n    }\n    matches(data) {\n        if (this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(data))) {\n            return false;\n        }\n        return !this._selectorFilter || this._selectorFilter(this._selectors.values(), data);\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        this._onNotificationSent.dispose();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getProvider(document) {\n        for (const selector of this._selectors.values()) {\n            if (vscode_1.languages.match(selector, document) > 0) {\n                return {\n                    send: (data) => {\n                        return this.callback(data);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n}\nexports.TextDocumentEventFeature = TextDocumentEventFeature;\n/**\n * A abstract feature implementation that registers language providers\n * for text documents using a given document selector.\n */\nclass TextDocumentLanguageFeature extends DynamicDocumentFeature {\n    constructor(client, registrationType) {\n        super(client);\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    *getDocumentSelectors() {\n        for (const registration of this._registrations.values()) {\n            const selector = registration.data.registerOptions.documentSelector;\n            if (selector === null) {\n                continue;\n            }\n            yield this._client.protocol2CodeConverter.asDocumentSelector(selector);\n        }\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let registration = this.registerLanguageProvider(data.registerOptions, data.id);\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\n    }\n    unregister(id) {\n        let registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((value) => {\n            value.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getRegistration(documentSelector, capability) {\n        if (!capability) {\n            return [undefined, undefined];\n        }\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n            const selector = capability.documentSelector ?? documentSelector;\n            if (selector) {\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\n            }\n        }\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\n            if (!documentSelector) {\n                return [undefined, undefined];\n            }\n            const options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n            return [UUID.generateUuid(), options];\n        }\n        return [undefined, undefined];\n    }\n    getRegistrationOptions(documentSelector, capability) {\n        if (!documentSelector || !capability) {\n            return undefined;\n        }\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n    }\n    getProvider(textDocument) {\n        for (const registration of this._registrations.values()) {\n            let selector = registration.data.registerOptions.documentSelector;\n            if (selector !== null && vscode_1.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(selector), textDocument) > 0) {\n                return registration.provider;\n            }\n        }\n        return undefined;\n    }\n    getAllProviders() {\n        const result = [];\n        for (const item of this._registrations.values()) {\n            result.push(item.provider);\n        }\n        return result;\n    }\n}\nexports.TextDocumentLanguageFeature = TextDocumentLanguageFeature;\nclass WorkspaceFeature {\n    constructor(client, registrationType) {\n        this._client = client;\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    getState() {\n        const registrations = this._registrations.size > 0;\n        return { kind: 'workspace', id: this._registrationType.method, registrations };\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        const registration = this.registerLanguageProvider(data.registerOptions);\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\n    }\n    unregister(id) {\n        let registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(registration.provider);\n        }\n        return result;\n    }\n}\nexports.WorkspaceFeature = WorkspaceFeature;\n", "const isWindows = typeof process === 'object' &&\n  process &&\n  process.platform === 'win32'\nmodule.exports = isWindows ? { sep: '\\\\' } : { sep: '/' }\n", "'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n", "var balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m) return [str];\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  if (/\\$$/.test(m.pre)) {    \n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre+ '{' + m.body + '}' + post[k];\n      expansions.push(expansion);\n    }\n  } else {\n    var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isSequence = isNumericSequence || isAlphaSequence;\n    var isOptions = m.body.indexOf(',') >= 0;\n    if (!isSequence && !isOptions) {\n      // {a},b}\n      if (m.post.match(/,.*\\}/)) {\n        str = m.pre + '{' + m.body + escClose + m.post;\n        return expand(str);\n      }\n      return [str];\n    }\n\n    var n;\n    if (isSequence) {\n      n = m.body.split(/\\.\\./);\n    } else {\n      n = parseCommaParts(m.body);\n      if (n.length === 1) {\n        // x{{a,b}}y ==> x{a}y x{b}y\n        n = expand(n[0], false).map(embrace);\n        if (n.length === 1) {\n          return post.map(function(p) {\n            return m.pre + n[0] + p;\n          });\n        }\n      }\n    }\n\n    // at this point, n is the parts, and we know it's not a comma set\n    // with a single entry.\n    var N;\n\n    if (isSequence) {\n      var x = numeric(n[0]);\n      var y = numeric(n[1]);\n      var width = Math.max(n[0].length, n[1].length)\n      var incr = n.length == 3\n        ? Math.abs(numeric(n[2]))\n        : 1;\n      var test = lte;\n      var reverse = y < x;\n      if (reverse) {\n        incr *= -1;\n        test = gte;\n      }\n      var pad = n.some(isPadded);\n\n      N = [];\n\n      for (var i = x; test(i, y); i += incr) {\n        var c;\n        if (isAlphaSequence) {\n          c = String.fromCharCode(i);\n          if (c === '\\\\')\n            c = '';\n        } else {\n          c = String(i);\n          if (pad) {\n            var need = width - c.length;\n            if (need > 0) {\n              var z = new Array(need + 1).join('0');\n              if (i < 0)\n                c = '-' + z + c.slice(1);\n              else\n                c = z + c;\n            }\n          }\n        }\n        N.push(c);\n      }\n    } else {\n      N = [];\n\n      for (var j = 0; j < n.length; j++) {\n        N.push.apply(N, expand(n[j], false));\n      }\n    }\n\n    for (var j = 0; j < N.length; j++) {\n      for (var k = 0; k < post.length; k++) {\n        var expansion = pre + N[j] + post[k];\n        if (!isTop || isSequence || expansion)\n          expansions.push(expansion);\n      }\n    }\n  }\n\n  return expansions;\n}\n\n", "const minimatch = module.exports = (p, pattern, options = {}) => {\n  assertValidPattern(pattern)\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nmodule.exports = minimatch\n\nconst path = require('./lib/path.js')\nminimatch.sep = path.sep\n\nconst GLOBSTAR = Symbol('globstar **')\nminimatch.GLOBSTAR = GLOBSTAR\nconst expand = require('brace-expansion')\n\nconst plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]'\n\n// * => any number of characters\nconst star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// \"abc\" -> { a:true, b:true, c:true }\nconst charSet = s => s.split('').reduce((set, c) => {\n  set[c] = true\n  return set\n}, {})\n\n// characters that need to be escaped in RegExp.\nconst reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// characters that indicate we have to add the pattern start\nconst addPatternStartSet = charSet('[.(')\n\n// normalizes slashes.\nconst slashSplit = /\\/+/\n\nminimatch.filter = (pattern, options = {}) =>\n  (p, i, list) => minimatch(p, pattern, options)\n\nconst ext = (a, b = {}) => {\n  const t = {}\n  Object.keys(a).forEach(k => t[k] = a[k])\n  Object.keys(b).forEach(k => t[k] = b[k])\n  return t\n}\n\nminimatch.defaults = def => {\n  if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n    return minimatch\n  }\n\n  const orig = minimatch\n\n  const m = (p, pattern, options) => orig(p, pattern, ext(def, options))\n  m.Minimatch = class Minimatch extends orig.Minimatch {\n    constructor (pattern, options) {\n      super(pattern, ext(def, options))\n    }\n  }\n  m.Minimatch.defaults = options => orig.defaults(ext(def, options)).Minimatch\n  m.filter = (pattern, options) => orig.filter(pattern, ext(def, options))\n  m.defaults = options => orig.defaults(ext(def, options))\n  m.makeRe = (pattern, options) => orig.makeRe(pattern, ext(def, options))\n  m.braceExpand = (pattern, options) => orig.braceExpand(pattern, ext(def, options))\n  m.match = (list, pattern, options) => orig.match(list, pattern, ext(def, options))\n\n  return m\n}\n\n\n\n\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = (pattern, options) => braceExpand(pattern, options)\n\nconst braceExpand = (pattern, options = {}) => {\n  assertValidPattern(pattern)\n\n  // Thanks to Yeting Li <https://github.com/yetingli> for\n  // improving this regexp to avoid a ReDOS vulnerability.\n  if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\nconst MAX_PATTERN_LENGTH = 1024 * 64\nconst assertValidPattern = pattern => {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('invalid pattern')\n  }\n\n  if (pattern.length > MAX_PATTERN_LENGTH) {\n    throw new TypeError('pattern is too long')\n  }\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nconst SUBPARSE = Symbol('subparse')\n\nminimatch.makeRe = (pattern, options) =>\n  new Minimatch(pattern, options || {}).makeRe()\n\nminimatch.match = (list, pattern, options = {}) => {\n  const mm = new Minimatch(pattern, options)\n  list = list.filter(f => mm.match(f))\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\n// replace stuff like \\* with *\nconst globUnescape = s => s.replace(/\\\\(.)/g, '$1')\nconst charUnescape = s => s.replace(/\\\\([^-\\]])/g, '$1')\nconst regExpEscape = s => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\nconst braExpEscape = s => s.replace(/[[\\]\\\\]/g, '\\\\$&')\n\nclass Minimatch {\n  constructor (pattern, options) {\n    assertValidPattern(pattern)\n\n    if (!options) options = {}\n\n    this.options = options\n    this.set = []\n    this.pattern = pattern\n    this.windowsPathsNoEscape = !!options.windowsPathsNoEscape ||\n      options.allowWindowsEscape === false\n    if (this.windowsPathsNoEscape) {\n      this.pattern = this.pattern.replace(/\\\\/g, '/')\n    }\n    this.regexp = null\n    this.negate = false\n    this.comment = false\n    this.empty = false\n    this.partial = !!options.partial\n\n    // make the set of regexps etc.\n    this.make()\n  }\n\n  debug () {}\n\n  make () {\n    const pattern = this.pattern\n    const options = this.options\n\n    // empty patterns and comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n      this.comment = true\n      return\n    }\n    if (!pattern) {\n      this.empty = true\n      return\n    }\n\n    // step 1: figure out negation, etc.\n    this.parseNegate()\n\n    // step 2: expand braces\n    let set = this.globSet = this.braceExpand()\n\n    if (options.debug) this.debug = (...args) => console.error(...args)\n\n    this.debug(this.pattern, set)\n\n    // step 3: now we have a set, so turn each one into a series of path-portion\n    // matching patterns.\n    // These will be regexps, except in the case of \"**\", which is\n    // set to the GLOBSTAR object for globstar behavior,\n    // and will not contain any / characters\n    set = this.globParts = set.map(s => s.split(slashSplit))\n\n    this.debug(this.pattern, set)\n\n    // glob --> regexps\n    set = set.map((s, si, set) => s.map(this.parse, this))\n\n    this.debug(this.pattern, set)\n\n    // filter out everything that didn't compile properly.\n    set = set.filter(s => s.indexOf(false) === -1)\n\n    this.debug(this.pattern, set)\n\n    this.set = set\n  }\n\n  parseNegate () {\n    if (this.options.nonegate) return\n\n    const pattern = this.pattern\n    let negate = false\n    let negateOffset = 0\n\n    for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n      negate = !negate\n      negateOffset++\n    }\n\n    if (negateOffset) this.pattern = pattern.slice(negateOffset)\n    this.negate = negate\n  }\n\n  // set partial to true to test if, for example,\n  // \"/a/b\" matches the start of \"/*/b/*/d\"\n  // Partial means, if you run out of file before you run\n  // out of pattern, then that's fine, as long as all\n  // the parts match.\n  matchOne (file, pattern, partial) {\n    var options = this.options\n\n    this.debug('matchOne',\n      { 'this': this, file: file, pattern: pattern })\n\n    this.debug('matchOne', file.length, pattern.length)\n\n    for (var fi = 0,\n        pi = 0,\n        fl = file.length,\n        pl = pattern.length\n        ; (fi < fl) && (pi < pl)\n        ; fi++, pi++) {\n      this.debug('matchOne loop')\n      var p = pattern[pi]\n      var f = file[fi]\n\n      this.debug(pattern, p, f)\n\n      // should be impossible.\n      // some invalid regexp stuff in the set.\n      /* istanbul ignore if */\n      if (p === false) return false\n\n      if (p === GLOBSTAR) {\n        this.debug('GLOBSTAR', [pattern, p, f])\n\n        // \"**\"\n        // a/**/b/**/c would match the following:\n        // a/b/x/y/z/c\n        // a/x/y/z/b/c\n        // a/b/x/b/x/c\n        // a/b/c\n        // To do this, take the rest of the pattern after\n        // the **, and see if it would match the file remainder.\n        // If so, return success.\n        // If not, the ** \"swallows\" a segment, and try again.\n        // This is recursively awful.\n        //\n        // a/**/b/**/c matching a/b/x/y/z/c\n        // - a matches a\n        // - doublestar\n        //   - matchOne(b/x/y/z/c, b/**/c)\n        //     - b matches b\n        //     - doublestar\n        //       - matchOne(x/y/z/c, c) -> no\n        //       - matchOne(y/z/c, c) -> no\n        //       - matchOne(z/c, c) -> no\n        //       - matchOne(c, c) yes, hit\n        var fr = fi\n        var pr = pi + 1\n        if (pr === pl) {\n          this.debug('** at the end')\n          // a ** at the end will just swallow the rest.\n          // We have found a match.\n          // however, it will not swallow /.x, unless\n          // options.dot is set.\n          // . and .. are *never* matched by **, for explosively\n          // exponential reasons.\n          for (; fi < fl; fi++) {\n            if (file[fi] === '.' || file[fi] === '..' ||\n              (!options.dot && file[fi].charAt(0) === '.')) return false\n          }\n          return true\n        }\n\n        // ok, let's see if we can swallow whatever we can.\n        while (fr < fl) {\n          var swallowee = file[fr]\n\n          this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n          // XXX remove this slice.  Just pass the start index.\n          if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n            this.debug('globstar found match!', fr, fl, swallowee)\n            // found a match.\n            return true\n          } else {\n            // can't swallow \".\" or \"..\" ever.\n            // can only swallow \".foo\" when explicitly asked.\n            if (swallowee === '.' || swallowee === '..' ||\n              (!options.dot && swallowee.charAt(0) === '.')) {\n              this.debug('dot detected!', file, fr, pattern, pr)\n              break\n            }\n\n            // ** swallows a segment, and continue.\n            this.debug('globstar swallow a segment, and continue')\n            fr++\n          }\n        }\n\n        // no match was found.\n        // However, in partial mode, we can't say this is necessarily over.\n        // If there's more *pattern* left, then\n        /* istanbul ignore if */\n        if (partial) {\n          // ran out of file\n          this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n          if (fr === fl) return true\n        }\n        return false\n      }\n\n      // something other than **\n      // non-magic patterns just have to match exactly\n      // patterns with magic have been turned into regexps.\n      var hit\n      if (typeof p === 'string') {\n        hit = f === p\n        this.debug('string match', p, f, hit)\n      } else {\n        hit = f.match(p)\n        this.debug('pattern match', p, f, hit)\n      }\n\n      if (!hit) return false\n    }\n\n    // Note: ending in / means that we'll get a final \"\"\n    // at the end of the pattern.  This can only match a\n    // corresponding \"\" at the end of the file.\n    // If the file ends in /, then it can only match a\n    // a pattern that ends in /, unless the pattern just\n    // doesn't have any more for it. But, a/b/ should *not*\n    // match \"a/b/*\", even though \"\" matches against the\n    // [^/]*? pattern, except in partial mode, where it might\n    // simply not be reached yet.\n    // However, a/b/ should still satisfy a/*\n\n    // now either we fell off the end of the pattern, or we're done.\n    if (fi === fl && pi === pl) {\n      // ran out of pattern and filename at the same time.\n      // an exact hit!\n      return true\n    } else if (fi === fl) {\n      // ran out of file, but still had pattern left.\n      // this is ok if we're doing the match as part of\n      // a glob fs traversal.\n      return partial\n    } else /* istanbul ignore else */ if (pi === pl) {\n      // ran out of pattern, still have file left.\n      // this is only acceptable if we're on the very last\n      // empty segment of a file with a trailing slash.\n      // a/* should match a/b/\n      return (fi === fl - 1) && (file[fi] === '')\n    }\n\n    // should be unreachable.\n    /* istanbul ignore next */\n    throw new Error('wtf?')\n  }\n\n  braceExpand () {\n    return braceExpand(this.pattern, this.options)\n  }\n\n  parse (pattern, isSub) {\n    assertValidPattern(pattern)\n\n    const options = this.options\n\n    // shortcuts\n    if (pattern === '**') {\n      if (!options.noglobstar)\n        return GLOBSTAR\n      else\n        pattern = '*'\n    }\n    if (pattern === '') return ''\n\n    let re = ''\n    let hasMagic = !!options.nocase\n    let escaping = false\n    // ? => one single character\n    const patternListStack = []\n    const negativeLists = []\n    let stateChar\n    let inClass = false\n    let reClassStart = -1\n    let classStart = -1\n    let cs\n    let pl\n    let sp\n    // . and .. never match anything that doesn't start with .,\n    // even when options.dot is set.\n    const patternStart = pattern.charAt(0) === '.' ? '' // anything\n    // not (start or / followed by . or .. followed by / or end)\n    : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n    : '(?!\\\\.)'\n\n    const clearStateChar = () => {\n      if (stateChar) {\n        // we had some state-tracking character\n        // that wasn't consumed by this pass.\n        switch (stateChar) {\n          case '*':\n            re += star\n            hasMagic = true\n          break\n          case '?':\n            re += qmark\n            hasMagic = true\n          break\n          default:\n            re += '\\\\' + stateChar\n          break\n        }\n        this.debug('clearStateChar %j %j', stateChar, re)\n        stateChar = false\n      }\n    }\n\n    for (let i = 0, c; (i < pattern.length) && (c = pattern.charAt(i)); i++) {\n      this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n      // skip over any that are escaped.\n      if (escaping) {\n        /* istanbul ignore next - completely not allowed, even escaped. */\n        if (c === '/') {\n          return false\n        }\n\n        if (reSpecials[c]) {\n          re += '\\\\'\n        }\n        re += c\n        escaping = false\n        continue\n      }\n\n      switch (c) {\n        /* istanbul ignore next */\n        case '/': {\n          // Should already be path-split by now.\n          return false\n        }\n\n        case '\\\\':\n          if (inClass && pattern.charAt(i + 1) === '-') {\n            re += c\n            continue\n          }\n\n          clearStateChar()\n          escaping = true\n        continue\n\n        // the various stateChar values\n        // for the \"extglob\" stuff.\n        case '?':\n        case '*':\n        case '+':\n        case '@':\n        case '!':\n          this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n          // all of those are literals inside a class, except that\n          // the glob [!a] means [^a] in regexp\n          if (inClass) {\n            this.debug('  in class')\n            if (c === '!' && i === classStart + 1) c = '^'\n            re += c\n            continue\n          }\n\n          // if we already have a stateChar, then it means\n          // that there was something like ** or +? in there.\n          // Handle the stateChar, then proceed with this one.\n          this.debug('call clearStateChar %j', stateChar)\n          clearStateChar()\n          stateChar = c\n          // if extglob is disabled, then +(asdf|foo) isn't a thing.\n          // just clear the statechar *now*, rather than even diving into\n          // the patternList stuff.\n          if (options.noext) clearStateChar()\n        continue\n\n        case '(':\n          if (inClass) {\n            re += '('\n            continue\n          }\n\n          if (!stateChar) {\n            re += '\\\\('\n            continue\n          }\n\n          patternListStack.push({\n            type: stateChar,\n            start: i - 1,\n            reStart: re.length,\n            open: plTypes[stateChar].open,\n            close: plTypes[stateChar].close\n          })\n          // negation is (?:(?!js)[^/]*)\n          re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n          this.debug('plType %j %j', stateChar, re)\n          stateChar = false\n        continue\n\n        case ')':\n          if (inClass || !patternListStack.length) {\n            re += '\\\\)'\n            continue\n          }\n\n          clearStateChar()\n          hasMagic = true\n          pl = patternListStack.pop()\n          // negation is (?:(?!js)[^/]*)\n          // The others are (?:<pattern>)<type>\n          re += pl.close\n          if (pl.type === '!') {\n            negativeLists.push(pl)\n          }\n          pl.reEnd = re.length\n        continue\n\n        case '|':\n          if (inClass || !patternListStack.length) {\n            re += '\\\\|'\n            continue\n          }\n\n          clearStateChar()\n          re += '|'\n        continue\n\n        // these are mostly the same in regexp and glob\n        case '[':\n          // swallow any state-tracking char before the [\n          clearStateChar()\n\n          if (inClass) {\n            re += '\\\\' + c\n            continue\n          }\n\n          inClass = true\n          classStart = i\n          reClassStart = re.length\n          re += c\n        continue\n\n        case ']':\n          //  a right bracket shall lose its special\n          //  meaning and represent itself in\n          //  a bracket expression if it occurs\n          //  first in the list.  -- POSIX.2 2.8.3.2\n          if (i === classStart + 1 || !inClass) {\n            re += '\\\\' + c\n            continue\n          }\n\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + braExpEscape(charUnescape(cs)) + ']')\n            // looks good, finish up the class.\n            re += c\n          } catch (er) {\n            // out of order ranges in JS are errors, but in glob syntax,\n            // they're just a range that matches nothing.\n            re = re.substring(0, reClassStart) + '(?:$.)' // match nothing ever\n          }\n          hasMagic = true\n          inClass = false\n        continue\n\n        default:\n          // swallow any state char that wasn't consumed\n          clearStateChar()\n\n          if (reSpecials[c] && !(c === '^' && inClass)) {\n            re += '\\\\'\n          }\n\n          re += c\n          break\n\n      } // switch\n    } // for\n\n    // handle the case where we left a class open.\n    // \"[abc\" is valid, equivalent to \"\\[abc\"\n    if (inClass) {\n      // split where the last [ was, and escape it\n      // this is a huge pita.  We now have to re-walk\n      // the contents of the would-be class to re-translate\n      // any characters that were passed through as-is\n      cs = pattern.slice(classStart + 1)\n      sp = this.parse(cs, SUBPARSE)\n      re = re.substring(0, reClassStart) + '\\\\[' + sp[0]\n      hasMagic = hasMagic || sp[1]\n    }\n\n    // handle the case where we had a +( thing at the *end*\n    // of the pattern.\n    // each pattern list stack adds 3 chars, and we need to go through\n    // and escape any | chars that were passed through as-is for the regexp.\n    // Go through and escape them, taking care not to double-escape any\n    // | chars that were already escaped.\n    for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n      let tail\n      tail = re.slice(pl.reStart + pl.open.length)\n      this.debug('setting tail', re, pl)\n      // maybe some even number of \\, then maybe 1 \\, followed by a |\n      tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, (_, $1, $2) => {\n        /* istanbul ignore else - should already be done */\n        if (!$2) {\n          // the | isn't already escaped, so escape it.\n          $2 = '\\\\'\n        }\n\n        // need to escape all those slashes *again*, without escaping the\n        // one that we need for escaping the | character.  As it works out,\n        // escaping an even number of slashes can be done by simply repeating\n        // it exactly after itself.  That's why this trick works.\n        //\n        // I am sorry that you have to see this.\n        return $1 + $1 + $2 + '|'\n      })\n\n      this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n      const t = pl.type === '*' ? star\n        : pl.type === '?' ? qmark\n        : '\\\\' + pl.type\n\n      hasMagic = true\n      re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n    }\n\n    // handle trailing things that only matter at the very end.\n    clearStateChar()\n    if (escaping) {\n      // trailing \\\\\n      re += '\\\\\\\\'\n    }\n\n    // only need to apply the nodot start if the re starts with\n    // something that could conceivably capture a dot\n    const addPatternStart = addPatternStartSet[re.charAt(0)]\n\n    // Hack to work around lack of negative lookbehind in JS\n    // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n    // like 'a.xyz.yz' doesn't match.  So, the first negative\n    // lookahead, has to look ALL the way ahead, to the end of\n    // the pattern.\n    for (let n = negativeLists.length - 1; n > -1; n--) {\n      const nl = negativeLists[n]\n\n      const nlBefore = re.slice(0, nl.reStart)\n      const nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n      let nlAfter = re.slice(nl.reEnd)\n      const nlLast = re.slice(nl.reEnd - 8, nl.reEnd) + nlAfter\n\n      // Handle nested stuff like *(*.js|!(*.json)), where open parens\n      // mean that we should *not* include the ) in the bit that is considered\n      // \"after\" the negated section.\n      const openParensBefore = nlBefore.split('(').length - 1\n      let cleanAfter = nlAfter\n      for (let i = 0; i < openParensBefore; i++) {\n        cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n      }\n      nlAfter = cleanAfter\n\n      const dollar = nlAfter === '' && isSub !== SUBPARSE ? '$' : ''\n      re = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    }\n\n    // if the re is not \"\" at this point, then we need to make sure\n    // it doesn't match against an empty path part.\n    // Otherwise a/* will match a/, which it should not.\n    if (re !== '' && hasMagic) {\n      re = '(?=.)' + re\n    }\n\n    if (addPatternStart) {\n      re = patternStart + re\n    }\n\n    // parsing just a piece of a larger pattern.\n    if (isSub === SUBPARSE) {\n      return [re, hasMagic]\n    }\n\n    // skip the regexp for non-magical patterns\n    // unescape anything in it, though, so that it'll be\n    // an exact match against a file etc.\n    if (!hasMagic) {\n      return globUnescape(pattern)\n    }\n\n    const flags = options.nocase ? 'i' : ''\n    try {\n      return Object.assign(new RegExp('^' + re + '$', flags), {\n        _glob: pattern,\n        _src: re,\n      })\n    } catch (er) /* istanbul ignore next - should be impossible */ {\n      // If it was an invalid regular expression, then it can't match\n      // anything.  This trick looks for a character after the end of\n      // the string, which is of course impossible, except in multi-line\n      // mode, but it's not a /m regex.\n      return new RegExp('$.')\n    }\n  }\n\n  makeRe () {\n    if (this.regexp || this.regexp === false) return this.regexp\n\n    // at this point, this.set is a 2d array of partial\n    // pattern strings, or \"**\".\n    //\n    // It's better to use .match().  This function shouldn't\n    // be used, really, but it's pretty convenient sometimes,\n    // when you just want to work with a regex.\n    const set = this.set\n\n    if (!set.length) {\n      this.regexp = false\n      return this.regexp\n    }\n    const options = this.options\n\n    const twoStar = options.noglobstar ? star\n      : options.dot ? twoStarDot\n      : twoStarNoDot\n    const flags = options.nocase ? 'i' : ''\n\n    // coalesce globstars and regexpify non-globstar patterns\n    // if it's the only item, then we just do one twoStar\n    // if it's the first, and there are more, prepend (\\/|twoStar\\/)? to next\n    // if it's the last, append (\\/twoStar|) to previous\n    // if it's in the middle, append (\\/|\\/twoStar\\/) to previous\n    // then filter out GLOBSTAR symbols\n    let re = set.map(pattern => {\n      pattern = pattern.map(p =>\n        typeof p === 'string' ? regExpEscape(p)\n        : p === GLOBSTAR ? GLOBSTAR\n        : p._src\n      ).reduce((set, p) => {\n        if (!(set[set.length - 1] === GLOBSTAR && p === GLOBSTAR)) {\n          set.push(p)\n        }\n        return set\n      }, [])\n      pattern.forEach((p, i) => {\n        if (p !== GLOBSTAR || pattern[i-1] === GLOBSTAR) {\n          return\n        }\n        if (i === 0) {\n          if (pattern.length > 1) {\n            pattern[i+1] = '(?:\\\\\\/|' + twoStar + '\\\\\\/)?' + pattern[i+1]\n          } else {\n            pattern[i] = twoStar\n          }\n        } else if (i === pattern.length - 1) {\n          pattern[i-1] += '(?:\\\\\\/|' + twoStar + ')?'\n        } else {\n          pattern[i-1] += '(?:\\\\\\/|\\\\\\/' + twoStar + '\\\\\\/)' + pattern[i+1]\n          pattern[i+1] = GLOBSTAR\n        }\n      })\n      return pattern.filter(p => p !== GLOBSTAR).join('/')\n    }).join('|')\n\n    // must match entire pattern\n    // ending in a * or ** will make it less strict.\n    re = '^(?:' + re + ')$'\n\n    // can match anything, as long as it's not this.\n    if (this.negate) re = '^(?!' + re + ').*$'\n\n    try {\n      this.regexp = new RegExp(re, flags)\n    } catch (ex) /* istanbul ignore next - should be impossible */ {\n      this.regexp = false\n    }\n    return this.regexp\n  }\n\n  match (f, partial = this.partial) {\n    this.debug('match', f, this.pattern)\n    // short-circuit in the case of busted things.\n    // comments, etc.\n    if (this.comment) return false\n    if (this.empty) return f === ''\n\n    if (f === '/' && partial) return true\n\n    const options = this.options\n\n    // windows: need to use /, not \\\n    if (path.sep !== '/') {\n      f = f.split(path.sep).join('/')\n    }\n\n    // treat the test path as a set of pathparts.\n    f = f.split(slashSplit)\n    this.debug(this.pattern, 'split', f)\n\n    // just ONE of the pattern sets in this.set needs to match\n    // in order for it to be valid.  If negating, then just one\n    // match means that we have failed.\n    // Either way, return on the first hit.\n\n    const set = this.set\n    this.debug(this.pattern, 'set', set)\n\n    // Find the basename of the path by looking for the last non-empty segment\n    let filename\n    for (let i = f.length - 1; i >= 0; i--) {\n      filename = f[i]\n      if (filename) break\n    }\n\n    for (let i = 0; i < set.length; i++) {\n      const pattern = set[i]\n      let file = f\n      if (options.matchBase && pattern.length === 1) {\n        file = [filename]\n      }\n      const hit = this.matchOne(file, pattern, partial)\n      if (hit) {\n        if (options.flipNegate) return true\n        return !this.negate\n      }\n    }\n\n    // didn't get any hits.  this is success if it's a negative\n    // pattern, failure otherwise.\n    if (options.flipNegate) return false\n    return this.negate\n  }\n\n  static defaults (def) {\n    return minimatch.defaults(def).Minimatch\n  }\n}\n\nminimatch.Minimatch = Minimatch\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticFeature = exports.DiagnosticPullMode = exports.vsdiag = void 0;\nconst minimatch = require(\"minimatch\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar vsdiag;\n(function (vsdiag) {\n    let DocumentDiagnosticReportKind;\n    (function (DocumentDiagnosticReportKind) {\n        DocumentDiagnosticReportKind[\"full\"] = \"full\";\n        DocumentDiagnosticReportKind[\"unChanged\"] = \"unChanged\";\n    })(DocumentDiagnosticReportKind = vsdiag.DocumentDiagnosticReportKind || (vsdiag.DocumentDiagnosticReportKind = {}));\n})(vsdiag || (exports.vsdiag = vsdiag = {}));\nvar DiagnosticPullMode;\n(function (DiagnosticPullMode) {\n    DiagnosticPullMode[\"onType\"] = \"onType\";\n    DiagnosticPullMode[\"onSave\"] = \"onSave\";\n})(DiagnosticPullMode || (exports.DiagnosticPullMode = DiagnosticPullMode = {}));\nvar RequestStateKind;\n(function (RequestStateKind) {\n    RequestStateKind[\"active\"] = \"open\";\n    RequestStateKind[\"reschedule\"] = \"reschedule\";\n    RequestStateKind[\"outDated\"] = \"drop\";\n})(RequestStateKind || (RequestStateKind = {}));\n/**\n * Manages the open tabs. We don't directly use the tab API since for\n * diagnostics we need to de-dupe tabs that show the same resources since\n * we pull on the model not the UI.\n */\nclass Tabs {\n    constructor() {\n        this.open = new Set();\n        this._onOpen = new vscode_1.EventEmitter();\n        this._onClose = new vscode_1.EventEmitter();\n        Tabs.fillTabResources(this.open);\n        const openTabsHandler = (event) => {\n            if (event.closed.length === 0 && event.opened.length === 0) {\n                return;\n            }\n            const oldTabs = this.open;\n            const currentTabs = new Set();\n            Tabs.fillTabResources(currentTabs);\n            const closed = new Set();\n            const opened = new Set(currentTabs);\n            for (const tab of oldTabs.values()) {\n                if (currentTabs.has(tab)) {\n                    opened.delete(tab);\n                }\n                else {\n                    closed.add(tab);\n                }\n            }\n            this.open = currentTabs;\n            if (closed.size > 0) {\n                const toFire = new Set();\n                for (const item of closed) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onClose.fire(toFire);\n            }\n            if (opened.size > 0) {\n                const toFire = new Set();\n                for (const item of opened) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onOpen.fire(toFire);\n            }\n        };\n        if (vscode_1.window.tabGroups.onDidChangeTabs !== undefined) {\n            this.disposable = vscode_1.window.tabGroups.onDidChangeTabs(openTabsHandler);\n        }\n        else {\n            this.disposable = { dispose: () => { } };\n        }\n    }\n    get onClose() {\n        return this._onClose.event;\n    }\n    get onOpen() {\n        return this._onOpen.event;\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n    isActive(document) {\n        return document instanceof vscode_1.Uri\n            ? vscode_1.window.activeTextEditor?.document.uri === document\n            : vscode_1.window.activeTextEditor?.document === document;\n    }\n    isVisible(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        return this.open.has(uri.toString());\n    }\n    getTabResources() {\n        const result = new Set();\n        Tabs.fillTabResources(new Set(), result);\n        return result;\n    }\n    static fillTabResources(strings, uris) {\n        const seen = strings ?? new Set();\n        for (const group of vscode_1.window.tabGroups.all) {\n            for (const tab of group.tabs) {\n                const input = tab.input;\n                let uri;\n                if (input instanceof vscode_1.TabInputText) {\n                    uri = input.uri;\n                }\n                else if (input instanceof vscode_1.TabInputTextDiff) {\n                    uri = input.modified;\n                }\n                else if (input instanceof vscode_1.TabInputCustom) {\n                    uri = input.uri;\n                }\n                if (uri !== undefined && !seen.has(uri.toString())) {\n                    seen.add(uri.toString());\n                    uris !== undefined && uris.add(uri);\n                }\n            }\n        }\n    }\n}\nvar PullState;\n(function (PullState) {\n    PullState[PullState[\"document\"] = 1] = \"document\";\n    PullState[PullState[\"workspace\"] = 2] = \"workspace\";\n})(PullState || (PullState = {}));\nvar DocumentOrUri;\n(function (DocumentOrUri) {\n    function asKey(document) {\n        return document instanceof vscode_1.Uri ? document.toString() : document.uri.toString();\n    }\n    DocumentOrUri.asKey = asKey;\n})(DocumentOrUri || (DocumentOrUri = {}));\nclass DocumentPullStateTracker {\n    constructor() {\n        this.documentPullStates = new Map();\n        this.workspacePullStates = new Map();\n    }\n    track(kind, document, arg1) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1]\n            : [document.uri.toString(), document.uri, document.version];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId: undefined };\n            states.set(key, state);\n        }\n        return state;\n    }\n    update(kind, document, arg1, arg2) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version, resultId] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1, arg2]\n            : [document.uri.toString(), document.uri, document.version, arg1];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId };\n            states.set(key, state);\n        }\n        else {\n            state.pulledVersion = version;\n            state.resultId = resultId;\n        }\n    }\n    unTrack(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        states.delete(key);\n    }\n    tracks(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.has(key);\n    }\n    getResultId(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.get(key)?.resultId;\n    }\n    getAllResultIds() {\n        const result = [];\n        for (let [uri, value] of this.workspacePullStates) {\n            if (this.documentPullStates.has(uri)) {\n                value = this.documentPullStates.get(uri);\n            }\n            if (value.resultId !== undefined) {\n                result.push({ uri, value: value.resultId });\n            }\n        }\n        return result;\n    }\n}\nclass DiagnosticRequestor {\n    constructor(client, tabs, options) {\n        this.client = client;\n        this.tabs = tabs;\n        this.options = options;\n        this.isDisposed = false;\n        this.onDidChangeDiagnosticsEmitter = new vscode_1.EventEmitter();\n        this.provider = this.createProvider();\n        this.diagnostics = vscode_1.languages.createDiagnosticCollection(options.identifier);\n        this.openRequests = new Map();\n        this.documentStates = new DocumentPullStateTracker();\n        this.workspaceErrorCounter = 0;\n    }\n    knows(kind, document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        return this.documentStates.tracks(kind, document) || this.openRequests.has(uri.toString());\n    }\n    forget(kind, document) {\n        this.documentStates.unTrack(kind, document);\n    }\n    pull(document, cb) {\n        if (this.isDisposed) {\n            return;\n        }\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        this.pullAsync(document).then(() => {\n            if (cb) {\n                cb();\n            }\n        }, (error) => {\n            this.client.error(`Document pull failed for text document ${uri.toString()}`, error, false);\n        });\n    }\n    async pullAsync(document, version) {\n        if (this.isDisposed) {\n            return;\n        }\n        const isUri = document instanceof vscode_1.Uri;\n        const uri = isUri ? document : document.uri;\n        const key = uri.toString();\n        version = isUri ? version : document.version;\n        const currentRequestState = this.openRequests.get(key);\n        const documentState = isUri\n            ? this.documentStates.track(PullState.document, document, version)\n            : this.documentStates.track(PullState.document, document);\n        if (currentRequestState === undefined) {\n            const tokenSource = new vscode_1.CancellationTokenSource();\n            this.openRequests.set(key, { state: RequestStateKind.active, document: document, version: version, tokenSource });\n            let report;\n            let afterState;\n            try {\n                report = await this.provider.provideDiagnostics(document, documentState.resultId, tokenSource.token) ?? { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n            }\n            catch (error) {\n                if (error instanceof features_1.LSPCancellationError && vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data) && error.data.retriggerRequest === false) {\n                    afterState = { state: RequestStateKind.outDated, document };\n                }\n                if (afterState === undefined && error instanceof vscode_1.CancellationError) {\n                    afterState = { state: RequestStateKind.reschedule, document };\n                }\n                else {\n                    throw error;\n                }\n            }\n            afterState = afterState ?? this.openRequests.get(key);\n            if (afterState === undefined) {\n                // This shouldn't happen. Log it\n                this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${key}`);\n                this.diagnostics.delete(uri);\n                return;\n            }\n            this.openRequests.delete(key);\n            if (!this.tabs.isVisible(document)) {\n                this.documentStates.unTrack(PullState.document, document);\n                return;\n            }\n            if (afterState.state === RequestStateKind.outDated) {\n                return;\n            }\n            // report is only undefined if the request has thrown.\n            if (report !== undefined) {\n                if (report.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    this.diagnostics.set(uri, report.items);\n                }\n                documentState.pulledVersion = version;\n                documentState.resultId = report.resultId;\n            }\n            if (afterState.state === RequestStateKind.reschedule) {\n                this.pull(document);\n            }\n        }\n        else {\n            if (currentRequestState.state === RequestStateKind.active) {\n                // Cancel the current request and reschedule a new one when the old one returned.\n                currentRequestState.tokenSource.cancel();\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n            else if (currentRequestState.state === RequestStateKind.outDated) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n        }\n    }\n    forgetDocument(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        const key = uri.toString();\n        const request = this.openRequests.get(key);\n        if (this.options.workspaceDiagnostics) {\n            // If we run workspace diagnostic pull a last time for the diagnostics\n            // and the rely on getting them from the workspace result.\n            if (request !== undefined) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: document });\n            }\n            else {\n                this.pull(document, () => {\n                    this.forget(PullState.document, document);\n                });\n            }\n        }\n        else {\n            // We have normal pull or inter file dependencies. In this case we\n            // clear the diagnostics (to have the same start as after startup).\n            // We also cancel outstanding requests.\n            if (request !== undefined) {\n                if (request.state === RequestStateKind.active) {\n                    request.tokenSource.cancel();\n                }\n                this.openRequests.set(key, { state: RequestStateKind.outDated, document: document });\n            }\n            this.diagnostics.delete(uri);\n            this.forget(PullState.document, document);\n        }\n    }\n    pullWorkspace() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.pullWorkspaceAsync().then(() => {\n            this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.pullWorkspace();\n            }, 2000);\n        }, (error) => {\n            if (!(error instanceof features_1.LSPCancellationError) && !vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data)) {\n                this.client.error(`Workspace diagnostic pull failed.`, error, false);\n                this.workspaceErrorCounter++;\n            }\n            if (this.workspaceErrorCounter <= 5) {\n                this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                    this.pullWorkspace();\n                }, 2000);\n            }\n        });\n    }\n    async pullWorkspaceAsync() {\n        if (!this.provider.provideWorkspaceDiagnostics || this.isDisposed) {\n            return;\n        }\n        if (this.workspaceCancellation !== undefined) {\n            this.workspaceCancellation.cancel();\n            this.workspaceCancellation = undefined;\n        }\n        this.workspaceCancellation = new vscode_1.CancellationTokenSource();\n        const previousResultIds = this.documentStates.getAllResultIds().map((item) => {\n            return {\n                uri: this.client.protocol2CodeConverter.asUri(item.uri),\n                value: item.value\n            };\n        });\n        await this.provider.provideWorkspaceDiagnostics(previousResultIds, this.workspaceCancellation.token, (chunk) => {\n            if (!chunk || this.isDisposed) {\n                return;\n            }\n            for (const item of chunk.items) {\n                if (item.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    // Favour document pull result over workspace results. So skip if it is tracked\n                    // as a document result.\n                    if (!this.documentStates.tracks(PullState.document, item.uri)) {\n                        this.diagnostics.set(item.uri, item.items);\n                    }\n                }\n                this.documentStates.update(PullState.workspace, item.uri, item.version ?? undefined, item.resultId);\n            }\n        });\n    }\n    createProvider() {\n        const result = {\n            onDidChangeDiagnostics: this.onDidChangeDiagnosticsEmitter.event,\n            provideDiagnostics: (document, previousResultId, token) => {\n                const provideDiagnostics = (document, previousResultId, token) => {\n                    const params = {\n                        identifier: this.options.identifier,\n                        textDocument: { uri: this.client.code2ProtocolConverter.asUri(document instanceof vscode_1.Uri ? document : document.uri) },\n                        previousResultId: previousResultId\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (result === undefined || result === null || this.isDisposed || token.isCancellationRequested) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                        }\n                        if (result.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, resultId: result.resultId, items: await this.client.protocol2CodeConverter.asDiagnostics(result.items, token) };\n                        }\n                        else {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.unChanged, resultId: result.resultId };\n                        }\n                    }, (error) => {\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] });\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideDiagnostics\n                    ? middleware.provideDiagnostics(document, previousResultId, token, provideDiagnostics)\n                    : provideDiagnostics(document, previousResultId, token);\n            }\n        };\n        if (this.options.workspaceDiagnostics) {\n            result.provideWorkspaceDiagnostics = (resultIds, token, resultReporter) => {\n                const convertReport = async (report) => {\n                    if (report.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.full,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version,\n                            items: await this.client.protocol2CodeConverter.asDiagnostics(report.items, token)\n                        };\n                    }\n                    else {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.unChanged,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version\n                        };\n                    }\n                };\n                const convertPreviousResultIds = (resultIds) => {\n                    const converted = [];\n                    for (const item of resultIds) {\n                        converted.push({ uri: this.client.code2ProtocolConverter.asUri(item.uri), value: item.value });\n                    }\n                    return converted;\n                };\n                const provideDiagnostics = (resultIds, token) => {\n                    const partialResultToken = (0, uuid_1.generateUuid)();\n                    const disposable = this.client.onProgress(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.partialResult, partialResultToken, async (partialResult) => {\n                        if (partialResult === undefined || partialResult === null) {\n                            resultReporter(null);\n                            return;\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of partialResult.items) {\n                            try {\n                                converted.items.push(await convertReport(item));\n                            }\n                            catch (error) {\n                                this.client.error(`Converting workspace diagnostics failed.`, error);\n                            }\n                        }\n                        resultReporter(converted);\n                    });\n                    const params = {\n                        identifier: this.options.identifier,\n                        previousResultIds: convertPreviousResultIds(resultIds),\n                        partialResultToken: partialResultToken\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (token.isCancellationRequested) {\n                            return { items: [] };\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of result.items) {\n                            converted.items.push(await convertReport(item));\n                        }\n                        disposable.dispose();\n                        resultReporter(converted);\n                        return { items: [] };\n                    }, (error) => {\n                        disposable.dispose();\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { items: [] });\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideWorkspaceDiagnostics\n                    ? middleware.provideWorkspaceDiagnostics(resultIds, token, resultReporter, provideDiagnostics)\n                    : provideDiagnostics(resultIds, token, resultReporter);\n            };\n        }\n        return result;\n    }\n    dispose() {\n        this.isDisposed = true;\n        // Cancel and clear workspace pull if present.\n        this.workspaceCancellation?.cancel();\n        this.workspaceTimeout?.dispose();\n        // Cancel all request and mark open requests as outdated.\n        for (const [key, request] of this.openRequests) {\n            if (request.state === RequestStateKind.active) {\n                request.tokenSource.cancel();\n            }\n            this.openRequests.set(key, { state: RequestStateKind.outDated, document: request.document });\n        }\n        // cleanup old diagnostics\n        this.diagnostics.dispose();\n    }\n}\nclass BackgroundScheduler {\n    constructor(diagnosticRequestor) {\n        this.diagnosticRequestor = diagnosticRequestor;\n        this.documents = new vscode_languageserver_protocol_1.LinkedMap();\n        this.isDisposed = false;\n    }\n    add(document) {\n        if (this.isDisposed === true) {\n            return;\n        }\n        const key = DocumentOrUri.asKey(document);\n        if (this.documents.has(key)) {\n            return;\n        }\n        this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n        this.trigger();\n    }\n    remove(document) {\n        const key = DocumentOrUri.asKey(document);\n        this.documents.delete(key);\n        // No more documents. Stop background activity.\n        if (this.documents.size === 0) {\n            this.stop();\n        }\n        else if (key === this.endDocumentKey()) {\n            // Make sure we have a correct last document. It could have\n            this.endDocument = this.documents.last;\n        }\n    }\n    trigger() {\n        if (this.isDisposed === true) {\n            return;\n        }\n        // We have a round running. So simply make sure we run up to the\n        // last document\n        if (this.intervalHandle !== undefined) {\n            this.endDocument = this.documents.last;\n            return;\n        }\n        this.endDocument = this.documents.last;\n        this.intervalHandle = (0, vscode_languageserver_protocol_1.RAL)().timer.setInterval(() => {\n            const document = this.documents.first;\n            if (document !== undefined) {\n                const key = DocumentOrUri.asKey(document);\n                this.diagnosticRequestor.pull(document);\n                this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n                if (key === this.endDocumentKey()) {\n                    this.stop();\n                }\n            }\n        }, 200);\n    }\n    dispose() {\n        this.isDisposed = true;\n        this.stop();\n        this.documents.clear();\n    }\n    stop() {\n        this.intervalHandle?.dispose();\n        this.intervalHandle = undefined;\n        this.endDocument = undefined;\n    }\n    endDocumentKey() {\n        return this.endDocument !== undefined ? DocumentOrUri.asKey(this.endDocument) : undefined;\n    }\n}\nclass DiagnosticFeatureProviderImpl {\n    constructor(client, tabs, options) {\n        const diagnosticPullOptions = client.clientOptions.diagnosticPullOptions ?? { onChange: true, onSave: false };\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        const disposables = [];\n        const matchResource = (resource) => {\n            const selector = options.documentSelector;\n            if (diagnosticPullOptions.match !== undefined) {\n                return diagnosticPullOptions.match(selector, resource);\n            }\n            for (const filter of selector) {\n                if (!vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                    continue;\n                }\n                // The filter is a language id. We can't determine if it matches\n                // so we return false.\n                if (typeof filter === 'string') {\n                    return false;\n                }\n                if (filter.language !== undefined && filter.language !== '*') {\n                    return false;\n                }\n                if (filter.scheme !== undefined && filter.scheme !== '*' && filter.scheme !== resource.scheme) {\n                    return false;\n                }\n                if (filter.pattern !== undefined) {\n                    const matcher = new minimatch.Minimatch(filter.pattern, { noext: true });\n                    if (!matcher.makeRe()) {\n                        return false;\n                    }\n                    if (!matcher.match(resource.fsPath)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n        const matches = (document) => {\n            return document instanceof vscode_1.Uri\n                ? matchResource(document)\n                : vscode_1.languages.match(documentSelector, document) > 0 && tabs.isVisible(document);\n        };\n        const isActiveDocument = (document) => {\n            return document instanceof vscode_1.Uri\n                ? this.activeTextDocument?.uri.toString() === document.toString()\n                : this.activeTextDocument === document;\n        };\n        this.diagnosticRequestor = new DiagnosticRequestor(client, tabs, options);\n        this.backgroundScheduler = new BackgroundScheduler(this.diagnosticRequestor);\n        const addToBackgroundIfNeeded = (document) => {\n            if (!matches(document) || !options.interFileDependencies || isActiveDocument(document)) {\n                return;\n            }\n            this.backgroundScheduler.add(document);\n        };\n        this.activeTextDocument = vscode_1.window.activeTextEditor?.document;\n        vscode_1.window.onDidChangeActiveTextEditor((editor) => {\n            const oldActive = this.activeTextDocument;\n            this.activeTextDocument = editor?.document;\n            if (oldActive !== undefined) {\n                addToBackgroundIfNeeded(oldActive);\n            }\n            if (this.activeTextDocument !== undefined) {\n                this.backgroundScheduler.remove(this.activeTextDocument);\n            }\n        });\n        // For pull model diagnostics we pull for documents visible in the UI.\n        // From an eventing point of view we still rely on open document events\n        // and filter the documents that are not visible in the UI instead of\n        // listening to Tab events. Major reason is event timing since we need\n        // to ensure that the pull is send after the document open has reached\n        // the server.\n        // We always pull on open.\n        const openFeature = client.getFeature(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method);\n        disposables.push(openFeature.onNotificationSent((event) => {\n            const textDocument = event.textDocument;\n            // We already know about this document. This can happen via a tab open.\n            if (this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                return;\n            }\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n            }\n        }));\n        disposables.push(tabs.onOpen((opened) => {\n            for (const resource of opened) {\n                // We already know about this document. This can happen via a document open.\n                if (this.diagnosticRequestor.knows(PullState.document, resource)) {\n                    continue;\n                }\n                const uriStr = resource.toString();\n                let textDocument;\n                for (const item of vscode_1.workspace.textDocuments) {\n                    if (uriStr === item.uri.toString()) {\n                        textDocument = item;\n                        break;\n                    }\n                }\n                // In VS Code the event timing is as follows:\n                // 1. tab events are fired.\n                // 2. open document events are fired and internal data structures like\n                //    workspace.textDocuments and Window.activeTextEditor are updated.\n                //\n                // This means: for newly created tab/editors we don't find the underlying\n                // document yet. So we do nothing an rely on the underlying open document event\n                // to be fired.\n                if (textDocument !== undefined && matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                }\n            }\n        }));\n        // Pull all diagnostics for documents that are already open\n        const pulledTextDocuments = new Set();\n        for (const textDocument of vscode_1.workspace.textDocuments) {\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                pulledTextDocuments.add(textDocument.uri.toString());\n            }\n        }\n        // Pull all tabs if not already pulled as text document\n        if (diagnosticPullOptions.onTabs === true) {\n            for (const resource of tabs.getTabResources()) {\n                if (!pulledTextDocuments.has(resource.toString()) && matches(resource)) {\n                    this.diagnosticRequestor.pull(resource, () => { addToBackgroundIfNeeded(resource); });\n                }\n            }\n        }\n        // We don't need to pull on tab open since we will receive a document open as well later on\n        // and that event allows us to use a document for a match check which will have a set\n        // language id.\n        if (diagnosticPullOptions.onChange === true) {\n            const changeFeature = client.getFeature(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.method);\n            disposables.push(changeFeature.onNotificationSent(async (event) => {\n                const textDocument = event.textDocument;\n                if ((diagnosticPullOptions.filter === undefined || !diagnosticPullOptions.filter(textDocument, DiagnosticPullMode.onType)) && this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { this.backgroundScheduler.trigger(); });\n                }\n            }));\n        }\n        if (diagnosticPullOptions.onSave === true) {\n            const saveFeature = client.getFeature(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.method);\n            disposables.push(saveFeature.onNotificationSent((event) => {\n                const textDocument = event.textDocument;\n                if ((diagnosticPullOptions.filter === undefined || !diagnosticPullOptions.filter(textDocument, DiagnosticPullMode.onSave)) && this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                    this.diagnosticRequestor.pull(event.textDocument, () => { this.backgroundScheduler.trigger(); });\n                }\n            }));\n        }\n        // When the document closes clear things up\n        const closeFeature = client.getFeature(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method);\n        disposables.push(closeFeature.onNotificationSent((event) => {\n            this.cleanUpDocument(event.textDocument);\n        }));\n        // Same when a tabs closes.\n        tabs.onClose((closed) => {\n            for (const document of closed) {\n                this.cleanUpDocument(document);\n            }\n        });\n        // We received a did change from the server.\n        this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(() => {\n            for (const textDocument of vscode_1.workspace.textDocuments) {\n                if (matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument);\n                }\n            }\n        });\n        // da348dc5-c30a-4515-9d98-31ff3be38d14 is the test UUID to test the middle ware. So don't auto trigger pulls.\n        if (options.workspaceDiagnostics === true && options.identifier !== 'da348dc5-c30a-4515-9d98-31ff3be38d14') {\n            this.diagnosticRequestor.pullWorkspace();\n        }\n        this.disposable = vscode_1.Disposable.from(...disposables, this.backgroundScheduler, this.diagnosticRequestor);\n    }\n    get onDidChangeDiagnosticsEmitter() {\n        return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter;\n    }\n    get diagnostics() {\n        return this.diagnosticRequestor.provider;\n    }\n    cleanUpDocument(document) {\n        if (this.diagnosticRequestor.knows(PullState.document, document)) {\n            this.diagnosticRequestor.forgetDocument(document);\n            this.backgroundScheduler.remove(document);\n        }\n    }\n}\nclass DiagnosticFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let capability = ensure(ensure(capabilities, 'textDocument'), 'diagnostic');\n        capability.dynamicRegistration = true;\n        // We first need to decide how a UI will look with related documents.\n        // An easy implementation would be to only show related diagnostics for\n        // the active editor.\n        capability.relatedDocumentSupport = false;\n        ensure(ensure(capabilities, 'workspace'), 'diagnostics').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.DiagnosticRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeDiagnosticsEmitter.fire();\n            }\n        });\n        let [id, options] = this.getRegistration(documentSelector, capabilities.diagnosticProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    clear() {\n        if (this.tabs !== undefined) {\n            this.tabs.dispose();\n            this.tabs = undefined;\n        }\n        super.clear();\n    }\n    registerLanguageProvider(options) {\n        if (this.tabs === undefined) {\n            this.tabs = new Tabs();\n        }\n        const provider = new DiagnosticFeatureProviderImpl(this._client, this.tabs, options);\n        return [provider.disposable, provider];\n    }\n}\nexports.DiagnosticFeature = DiagnosticFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotebookDocumentSyncFeature = void 0;\nconst vscode = require(\"vscode\");\nconst minimatch = require(\"minimatch\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar Converter;\n(function (Converter) {\n    let c2p;\n    (function (c2p) {\n        function asVersionedNotebookDocumentIdentifier(notebookDocument, base) {\n            return {\n                version: notebookDocument.version,\n                uri: base.asUri(notebookDocument.uri)\n            };\n        }\n        c2p.asVersionedNotebookDocumentIdentifier = asVersionedNotebookDocumentIdentifier;\n        function asNotebookDocument(notebookDocument, cells, base) {\n            const result = proto.NotebookDocument.create(base.asUri(notebookDocument.uri), notebookDocument.notebookType, notebookDocument.version, asNotebookCells(cells, base));\n            if (Object.keys(notebookDocument.metadata).length > 0) {\n                result.metadata = asMetadata(notebookDocument.metadata);\n            }\n            return result;\n        }\n        c2p.asNotebookDocument = asNotebookDocument;\n        function asNotebookCells(cells, base) {\n            return cells.map(cell => asNotebookCell(cell, base));\n        }\n        c2p.asNotebookCells = asNotebookCells;\n        function asMetadata(metadata) {\n            const seen = new Set();\n            return deepCopy(seen, metadata);\n        }\n        c2p.asMetadata = asMetadata;\n        function asNotebookCell(cell, base) {\n            const result = proto.NotebookCell.create(asNotebookCellKind(cell.kind), base.asUri(cell.document.uri));\n            if (Object.keys(cell.metadata).length > 0) {\n                result.metadata = asMetadata(cell.metadata);\n            }\n            if (cell.executionSummary !== undefined && (Is.number(cell.executionSummary.executionOrder) && Is.boolean(cell.executionSummary.success))) {\n                result.executionSummary = {\n                    executionOrder: cell.executionSummary.executionOrder,\n                    success: cell.executionSummary.success\n                };\n            }\n            return result;\n        }\n        c2p.asNotebookCell = asNotebookCell;\n        function asNotebookCellKind(kind) {\n            switch (kind) {\n                case vscode.NotebookCellKind.Markup:\n                    return proto.NotebookCellKind.Markup;\n                case vscode.NotebookCellKind.Code:\n                    return proto.NotebookCellKind.Code;\n            }\n        }\n        function deepCopy(seen, value) {\n            if (seen.has(value)) {\n                throw new Error(`Can't deep copy cyclic structures.`);\n            }\n            if (Array.isArray(value)) {\n                const result = [];\n                for (const elem of value) {\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result.push(deepCopy(seen, elem));\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result.push(elem);\n                    }\n                }\n                return result;\n            }\n            else {\n                const props = Object.keys(value);\n                const result = Object.create(null);\n                for (const prop of props) {\n                    const elem = value[prop];\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result[prop] = deepCopy(seen, elem);\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result[prop] = elem;\n                    }\n                }\n                return result;\n            }\n        }\n        function asTextContentChange(event, base) {\n            const params = base.asChangeTextDocumentParams(event, event.document.uri, event.document.version);\n            return { document: params.textDocument, changes: params.contentChanges };\n        }\n        c2p.asTextContentChange = asTextContentChange;\n        function asNotebookDocumentChangeEvent(event, base) {\n            const result = Object.create(null);\n            if (event.metadata) {\n                result.metadata = Converter.c2p.asMetadata(event.metadata);\n            }\n            if (event.cells !== undefined) {\n                const cells = Object.create(null);\n                const changedCells = event.cells;\n                if (changedCells.structure) {\n                    cells.structure = {\n                        array: {\n                            start: changedCells.structure.array.start,\n                            deleteCount: changedCells.structure.array.deleteCount,\n                            cells: changedCells.structure.array.cells !== undefined ? changedCells.structure.array.cells.map(cell => Converter.c2p.asNotebookCell(cell, base)) : undefined\n                        },\n                        didOpen: changedCells.structure.didOpen !== undefined\n                            ? changedCells.structure.didOpen.map(cell => base.asOpenTextDocumentParams(cell.document).textDocument)\n                            : undefined,\n                        didClose: changedCells.structure.didClose !== undefined\n                            ? changedCells.structure.didClose.map(cell => base.asCloseTextDocumentParams(cell.document).textDocument)\n                            : undefined\n                    };\n                }\n                if (changedCells.data !== undefined) {\n                    cells.data = changedCells.data.map(cell => Converter.c2p.asNotebookCell(cell, base));\n                }\n                if (changedCells.textContent !== undefined) {\n                    cells.textContent = changedCells.textContent.map(event => Converter.c2p.asTextContentChange(event, base));\n                }\n                if (Object.keys(cells).length > 0) {\n                    result.cells = cells;\n                }\n            }\n            return result;\n        }\n        c2p.asNotebookDocumentChangeEvent = asNotebookDocumentChangeEvent;\n    })(c2p = Converter.c2p || (Converter.c2p = {}));\n})(Converter || (Converter = {}));\nvar $NotebookCell;\n(function ($NotebookCell) {\n    function computeDiff(originalCells, modifiedCells, compareMetadata) {\n        const originalLength = originalCells.length;\n        const modifiedLength = modifiedCells.length;\n        let startIndex = 0;\n        while (startIndex < modifiedLength && startIndex < originalLength && equals(originalCells[startIndex], modifiedCells[startIndex], compareMetadata)) {\n            startIndex++;\n        }\n        if (startIndex < modifiedLength && startIndex < originalLength) {\n            let originalEndIndex = originalLength - 1;\n            let modifiedEndIndex = modifiedLength - 1;\n            while (originalEndIndex >= 0 && modifiedEndIndex >= 0 && equals(originalCells[originalEndIndex], modifiedCells[modifiedEndIndex], compareMetadata)) {\n                originalEndIndex--;\n                modifiedEndIndex--;\n            }\n            const deleteCount = (originalEndIndex + 1) - startIndex;\n            const newCells = startIndex === modifiedEndIndex + 1 ? undefined : modifiedCells.slice(startIndex, modifiedEndIndex + 1);\n            return newCells !== undefined ? { start: startIndex, deleteCount, cells: newCells } : { start: startIndex, deleteCount };\n        }\n        else if (startIndex < modifiedLength) {\n            return { start: startIndex, deleteCount: 0, cells: modifiedCells.slice(startIndex) };\n        }\n        else if (startIndex < originalLength) {\n            return { start: startIndex, deleteCount: originalLength - startIndex };\n        }\n        else {\n            // The two arrays are the same.\n            return undefined;\n        }\n    }\n    $NotebookCell.computeDiff = computeDiff;\n    /**\n     * We only sync kind, document, execution and metadata to the server. So we only need to compare those.\n     */\n    function equals(one, other, compareMetaData = true) {\n        if (one.kind !== other.kind || one.document.uri.toString() !== other.document.uri.toString() || one.document.languageId !== other.document.languageId ||\n            !equalsExecution(one.executionSummary, other.executionSummary)) {\n            return false;\n        }\n        return !compareMetaData || (compareMetaData && equalsMetadata(one.metadata, other.metadata));\n    }\n    function equalsExecution(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success && equalsTiming(one.timing, other.timing);\n    }\n    function equalsTiming(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.startTime === other.startTime && one.endTime === other.endTime;\n    }\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (isObjectLiteral(one) && isObjectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    function isObjectLiteral(value) {\n        return value !== null && typeof value === 'object';\n    }\n    $NotebookCell.isObjectLiteral = isObjectLiteral;\n})($NotebookCell || ($NotebookCell = {}));\nvar $NotebookDocumentFilter;\n(function ($NotebookDocumentFilter) {\n    function matchNotebook(filter, notebookDocument) {\n        if (typeof filter === 'string') {\n            return filter === '*' || notebookDocument.notebookType === filter;\n        }\n        if (filter.notebookType !== undefined && filter.notebookType !== '*' && notebookDocument.notebookType !== filter.notebookType) {\n            return false;\n        }\n        const uri = notebookDocument.uri;\n        if (filter.scheme !== undefined && filter.scheme !== '*' && uri.scheme !== filter.scheme) {\n            return false;\n        }\n        if (filter.pattern !== undefined) {\n            const matcher = new minimatch.Minimatch(filter.pattern, { noext: true });\n            if (!matcher.makeRe()) {\n                return false;\n            }\n            if (!matcher.match(uri.fsPath)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    $NotebookDocumentFilter.matchNotebook = matchNotebook;\n})($NotebookDocumentFilter || ($NotebookDocumentFilter = {}));\nvar $NotebookDocumentSyncOptions;\n(function ($NotebookDocumentSyncOptions) {\n    function asDocumentSelector(options) {\n        const selector = options.notebookSelector;\n        const result = [];\n        for (const element of selector) {\n            const notebookType = (typeof element.notebook === 'string' ? element.notebook : element.notebook?.notebookType) ?? '*';\n            const scheme = (typeof element.notebook === 'string') ? undefined : element.notebook?.scheme;\n            const pattern = (typeof element.notebook === 'string') ? undefined : element.notebook?.pattern;\n            if (element.cells !== undefined) {\n                for (const cell of element.cells) {\n                    result.push(asDocumentFilter(notebookType, scheme, pattern, cell.language));\n                }\n            }\n            else {\n                result.push(asDocumentFilter(notebookType, scheme, pattern, undefined));\n            }\n        }\n        return result;\n    }\n    $NotebookDocumentSyncOptions.asDocumentSelector = asDocumentSelector;\n    function asDocumentFilter(notebookType, scheme, pattern, language) {\n        return scheme === undefined && pattern === undefined\n            ? { notebook: notebookType, language }\n            : { notebook: { notebookType, scheme, pattern }, language };\n    }\n})($NotebookDocumentSyncOptions || ($NotebookDocumentSyncOptions = {}));\nvar SyncInfo;\n(function (SyncInfo) {\n    function create(cells) {\n        return {\n            cells,\n            uris: new Set(cells.map(cell => cell.document.uri.toString()))\n        };\n    }\n    SyncInfo.create = create;\n})(SyncInfo || (SyncInfo = {}));\nclass NotebookDocumentSyncFeatureProvider {\n    constructor(client, options) {\n        this.client = client;\n        this.options = options;\n        this.notebookSyncInfo = new Map();\n        this.notebookDidOpen = new Set();\n        this.disposables = [];\n        this.selector = client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n        // open\n        vscode.workspace.onDidOpenNotebookDocument((notebookDocument) => {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }, undefined, this.disposables);\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }\n        // Notebook document changed.\n        vscode.workspace.onDidChangeNotebookDocument(event => this.didChangeNotebookDocument(event), undefined, this.disposables);\n        //save\n        if (this.options.save === true) {\n            vscode.workspace.onDidSaveNotebookDocument(notebookDocument => this.didSave(notebookDocument), undefined, this.disposables);\n        }\n        // close\n        vscode.workspace.onDidCloseNotebookDocument((notebookDocument) => {\n            this.didClose(notebookDocument);\n            this.notebookDidOpen.delete(notebookDocument.uri.toString());\n        }, undefined, this.disposables);\n    }\n    getState() {\n        for (const notebook of vscode.workspace.notebookDocuments) {\n            const matchingCells = this.getMatchingCells(notebook);\n            if (matchingCells !== undefined) {\n                return { kind: 'document', id: '$internal', registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: '$internal', registrations: true, matches: false };\n    }\n    get mode() {\n        return 'notebook';\n    }\n    handles(textDocument) {\n        return vscode.languages.match(this.selector, textDocument) > 0;\n    }\n    didOpenNotebookCellTextDocument(notebookDocument, cell) {\n        if (vscode.languages.match(this.selector, cell.document) === 0) {\n            return;\n        }\n        if (!this.notebookDidOpen.has(notebookDocument.uri.toString())) {\n            // We have never received an open notification for the notebook document.\n            // VS Code guarantees that we first get cell document open and then\n            // notebook open. So simply wait for the notebook open.\n            return;\n        }\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        // In VS Code we receive a notebook open before a cell document open.\n        // The document and the cell is synced.\n        const cellMatches = this.cellMatches(notebookDocument, cell);\n        if (syncInfo !== undefined) {\n            const cellIsSynced = syncInfo.uris.has(cell.document.uri.toString());\n            if ((cellMatches && cellIsSynced) || (!cellMatches && !cellIsSynced)) {\n                // The cell doesn't match and was not synced or it matches and is synced.\n                // In both cases nothing to do.\n                //\n                // Note that if the language mode of a document changes we remove the\n                // cell and add it back to update the language mode on the server side.\n                return;\n            }\n            if (cellMatches) {\n                // don't use cells from above since there might be more matching cells in the notebook\n                // Since we had a matching cell above we will have matching cells now.\n                const matchingCells = this.getMatchingCells(notebookDocument);\n                if (matchingCells !== undefined) {\n                    const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                    if (event !== undefined) {\n                        this.doSendChange(event, matchingCells).catch(() => { });\n                    }\n                }\n            }\n        }\n        else {\n            // No sync info. But we have a open event for the notebook document\n            // itself. If the cell matches then we need to send an open with\n            // exactly that cell.\n            if (cellMatches) {\n                this.doSendOpen(notebookDocument, [cell]).catch(() => { });\n            }\n        }\n    }\n    didChangeNotebookCellTextDocument(notebookDocument, event) {\n        // No match with the selector\n        if (vscode.languages.match(this.selector, event.document) === 0) {\n            return;\n        }\n        this.doSendChange({\n            notebook: notebookDocument,\n            cells: { textContent: [event] }\n        }, undefined).catch(() => { });\n    }\n    didCloseNotebookCellTextDocument(notebookDocument, cell) {\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        if (syncInfo === undefined) {\n            // The notebook document got never synced. So it doesn't matter if a cell\n            // document closes.\n            return;\n        }\n        const cellUri = cell.document.uri;\n        const index = syncInfo.cells.findIndex((item) => item.document.uri.toString() === cellUri.toString());\n        if (index === -1) {\n            // The cell never got synced or it got deleted and we now received the document\n            // close event.\n            return;\n        }\n        if (index === 0 && syncInfo.cells.length === 1) {\n            // The last cell. Close the notebook document in the server.\n            this.doSendClose(notebookDocument, syncInfo.cells).catch(() => { });\n        }\n        else {\n            const newCells = syncInfo.cells.slice();\n            const deleted = newCells.splice(index, 1);\n            this.doSendChange({\n                notebook: notebookDocument,\n                cells: {\n                    structure: {\n                        array: { start: index, deleteCount: 1 },\n                        didClose: deleted\n                    }\n                }\n            }, newCells).catch(() => { });\n        }\n    }\n    dispose() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n    }\n    didOpen(notebookDocument, matchingCells = this.getMatchingCells(notebookDocument), syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString())) {\n        if (syncInfo !== undefined) {\n            if (matchingCells !== undefined) {\n                const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                if (event !== undefined) {\n                    this.doSendChange(event, matchingCells).catch(() => { });\n                }\n            }\n            else {\n                this.doSendClose(notebookDocument, []).catch(() => { });\n            }\n        }\n        else {\n            // Check if we need to sync the notebook document.\n            if (matchingCells === undefined) {\n                return;\n            }\n            this.doSendOpen(notebookDocument, matchingCells).catch(() => { });\n        }\n    }\n    didChangeNotebookDocument(event) {\n        const notebookDocument = event.notebook;\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        if (syncInfo === undefined) {\n            // We have no changes to the cells. Since the notebook wasn't synced\n            // it will not be synced now.\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            // Check if we have new matching cells.\n            const cells = this.getMatchingCells(notebookDocument);\n            // No matching cells and the notebook never synced. So still no need\n            // to sync it.\n            if (cells === undefined) {\n                return;\n            }\n            // Open the notebook document and ignore the rest of the changes\n            // this the notebooks will be synced with the correct settings.\n            this.didOpen(notebookDocument, cells, syncInfo);\n        }\n        else {\n            // The notebook is synced. First check if we have no matching\n            // cells anymore and if so close the notebook\n            const cells = this.getMatchingCells(notebookDocument);\n            if (cells === undefined) {\n                this.didClose(notebookDocument, syncInfo);\n                return;\n            }\n            const newEvent = this.asNotebookDocumentChangeEvent(event.notebook, event, syncInfo, cells);\n            if (newEvent !== undefined) {\n                this.doSendChange(newEvent, cells).catch(() => { });\n            }\n        }\n    }\n    didSave(notebookDocument) {\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        if (syncInfo === undefined) {\n            return;\n        }\n        this.doSendSave(notebookDocument).catch(() => { });\n    }\n    didClose(notebookDocument, syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString())) {\n        if (syncInfo === undefined) {\n            return;\n        }\n        const syncedCells = notebookDocument.getCells().filter(cell => syncInfo.uris.has(cell.document.uri.toString()));\n        this.doSendClose(notebookDocument, syncedCells).catch(() => { });\n    }\n    async sendDidOpenNotebookDocument(notebookDocument) {\n        const cells = this.getMatchingCells(notebookDocument);\n        if (cells === undefined) {\n            return;\n        }\n        return this.doSendOpen(notebookDocument, cells);\n    }\n    async doSendOpen(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            const nb = Converter.c2p.asNotebookDocument(notebookDocument, cells, this.client.code2ProtocolConverter);\n            const cellDocuments = cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentItem(cell.document));\n            try {\n                await this.client.sendNotification(proto.DidOpenNotebookDocumentNotification.type, {\n                    notebookDocument: nb,\n                    cellTextDocuments: cellDocuments\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidOpenNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.set(notebookDocument.uri.toString(), SyncInfo.create(cells));\n        return middleware?.didOpen !== undefined ? middleware.didOpen(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    async sendDidChangeNotebookDocument(event) {\n        return this.doSendChange(event, undefined);\n    }\n    async doSendChange(event, cells = this.getMatchingCells(event.notebook)) {\n        const send = async (event) => {\n            try {\n                await this.client.sendNotification(proto.DidChangeNotebookDocumentNotification.type, {\n                    notebookDocument: Converter.c2p.asVersionedNotebookDocumentIdentifier(event.notebook, this.client.code2ProtocolConverter),\n                    change: Converter.c2p.asNotebookDocumentChangeEvent(event, this.client.code2ProtocolConverter)\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidChangeNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        if (event.cells?.structure !== undefined) {\n            this.notebookSyncInfo.set(event.notebook.uri.toString(), SyncInfo.create(cells ?? []));\n        }\n        return middleware?.didChange !== undefined ? middleware?.didChange(event, send) : send(event);\n    }\n    async sendDidSaveNotebookDocument(notebookDocument) {\n        return this.doSendSave(notebookDocument);\n    }\n    async doSendSave(notebookDocument) {\n        const send = async (notebookDocument) => {\n            try {\n                await this.client.sendNotification(proto.DidSaveNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) }\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidSaveNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        return middleware?.didSave !== undefined ? middleware.didSave(notebookDocument, send) : send(notebookDocument);\n    }\n    async sendDidCloseNotebookDocument(notebookDocument) {\n        return this.doSendClose(notebookDocument, this.getMatchingCells(notebookDocument) ?? []);\n    }\n    async doSendClose(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            try {\n                await this.client.sendNotification(proto.DidCloseNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) },\n                    cellTextDocuments: cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentIdentifier(cell.document))\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidCloseNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.delete(notebookDocument.uri.toString());\n        return middleware?.didClose !== undefined ? middleware.didClose(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    asNotebookDocumentChangeEvent(notebook, event, syncInfo, matchingCells) {\n        if (event !== undefined && event.notebook !== notebook) {\n            throw new Error('Notebook must be identical');\n        }\n        const result = {\n            notebook: notebook\n        };\n        if (event?.metadata !== undefined) {\n            result.metadata = Converter.c2p.asMetadata(event.metadata);\n        }\n        let matchingCellsSet;\n        if (event?.cellChanges !== undefined && event.cellChanges.length > 0) {\n            const data = [];\n            // Only consider the new matching cells.\n            matchingCellsSet = new Set(matchingCells.map(cell => cell.document.uri.toString()));\n            for (const cellChange of event.cellChanges) {\n                if (matchingCellsSet.has(cellChange.cell.document.uri.toString()) && (cellChange.executionSummary !== undefined || cellChange.metadata !== undefined)) {\n                    data.push(cellChange.cell);\n                }\n            }\n            if (data.length > 0) {\n                result.cells = result.cells ?? {};\n                result.cells.data = data;\n            }\n        }\n        if (((event?.contentChanges !== undefined && event.contentChanges.length > 0) || event === undefined) && syncInfo !== undefined && matchingCells !== undefined) {\n            // We still have matching cells. Check if the cell changes\n            // affect the notebook on the server side.\n            const oldCells = syncInfo.cells;\n            const newCells = matchingCells;\n            // meta data changes are reported using on the cell itself. So we can ignore comparing\n            // it which has a positive effect on performance.\n            const diff = $NotebookCell.computeDiff(oldCells, newCells, false);\n            let addedCells;\n            let removedCells;\n            if (diff !== undefined) {\n                addedCells = diff.cells === undefined\n                    ? new Map()\n                    : new Map(diff.cells.map(cell => [cell.document.uri.toString(), cell]));\n                removedCells = diff.deleteCount === 0\n                    ? new Map()\n                    : new Map(oldCells.slice(diff.start, diff.start + diff.deleteCount).map(cell => [cell.document.uri.toString(), cell]));\n                // Remove the onces that got deleted and inserted again.\n                for (const key of Array.from(removedCells.keys())) {\n                    if (addedCells.has(key)) {\n                        removedCells.delete(key);\n                        addedCells.delete(key);\n                    }\n                }\n                result.cells = result.cells ?? {};\n                const didOpen = [];\n                const didClose = [];\n                if (addedCells.size > 0 || removedCells.size > 0) {\n                    for (const cell of addedCells.values()) {\n                        didOpen.push(cell);\n                    }\n                    for (const cell of removedCells.values()) {\n                        didClose.push(cell);\n                    }\n                }\n                result.cells.structure = {\n                    array: diff,\n                    didOpen,\n                    didClose\n                };\n            }\n        }\n        // The notebook is a property as well.\n        return Object.keys(result).length > 1 ? result : undefined;\n    }\n    getMatchingCells(notebookDocument, cells = notebookDocument.getCells()) {\n        if (this.options.notebookSelector === undefined) {\n            return undefined;\n        }\n        for (const item of this.options.notebookSelector) {\n            if (item.notebook === undefined || $NotebookDocumentFilter.matchNotebook(item.notebook, notebookDocument)) {\n                const filtered = this.filterCells(notebookDocument, cells, item.cells);\n                return filtered.length === 0 ? undefined : filtered;\n            }\n        }\n        return undefined;\n    }\n    cellMatches(notebookDocument, cell) {\n        const cells = this.getMatchingCells(notebookDocument, [cell]);\n        return cells !== undefined && cells[0] === cell;\n    }\n    filterCells(notebookDocument, cells, cellSelector) {\n        const filtered = cellSelector !== undefined ? cells.filter((cell) => {\n            const cellLanguage = cell.document.languageId;\n            return cellSelector.some((filter => (filter.language === '*' || cellLanguage === filter.language)));\n        }) : cells;\n        return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells === 'function'\n            ? this.client.clientOptions.notebookDocumentOptions.filterCells(notebookDocument, filtered)\n            : filtered;\n    }\n}\nclass NotebookDocumentSyncFeature {\n    constructor(client) {\n        this.client = client;\n        this.registrations = new Map();\n        this.registrationType = proto.NotebookDocumentSyncRegistrationType.type;\n        // We don't receive an event for cells where the document changes its language mode\n        // Since we allow servers to filter on the language mode we fire such an event ourselves.\n        vscode.workspace.onDidOpenTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didOpenNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n        vscode.workspace.onDidChangeTextDocument((event) => {\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            const textDocument = event.document;\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument,] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didChangeNotebookCellTextDocument(notebookDocument, event);\n                }\n            }\n        });\n        vscode.workspace.onDidCloseTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            // There are two cases when we receive a close for a text document\n            // 1: the cell got removed. This is handled in `onDidChangeNotebookCells`\n            // 2: the language mode of a cell changed. This keeps the URI stable so\n            //    we will still find the cell and the notebook document.\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didCloseNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n    }\n    getState() {\n        if (this.registrations.size === 0) {\n            return { kind: 'document', id: this.registrationType.method, registrations: false, matches: false };\n        }\n        for (const provider of this.registrations.values()) {\n            const state = provider.getState();\n            if (state.kind === 'document' && state.registrations === true && state.matches === true) {\n                return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: this.registrationType.method, registrations: true, matches: false };\n    }\n    fillClientCapabilities(capabilities) {\n        const synchronization = ensure(ensure(capabilities, 'notebookDocument'), 'synchronization');\n        synchronization.dynamicRegistration = true;\n        synchronization.executionSummarySupport = true;\n    }\n    preInitialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        this.dedicatedChannel = this.client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n    }\n    initialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        const id = options.id ?? UUID.generateUuid();\n        this.register({ id, registerOptions: options });\n    }\n    register(data) {\n        const provider = new NotebookDocumentSyncFeatureProvider(this.client, data.registerOptions);\n        this.registrations.set(data.id, provider);\n    }\n    unregister(id) {\n        const provider = this.registrations.get(id);\n        provider && provider.dispose();\n    }\n    clear() {\n        for (const provider of this.registrations.values()) {\n            provider.dispose();\n        }\n        this.registrations.clear();\n    }\n    handles(textDocument) {\n        if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n            return false;\n        }\n        if (this.dedicatedChannel !== undefined && vscode.languages.match(this.dedicatedChannel, textDocument) > 0) {\n            return true;\n        }\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getProvider(notebookCell) {\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(notebookCell.document)) {\n                return provider;\n            }\n        }\n        return undefined;\n    }\n    findNotebookDocumentAndCell(textDocument) {\n        const uri = textDocument.uri.toString();\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            for (const cell of notebookDocument.getCells()) {\n                if (cell.document.uri.toString() === uri) {\n                    return [notebookDocument, cell];\n                }\n            }\n        }\n        return [undefined, undefined];\n    }\n}\nexports.NotebookDocumentSyncFeature = NotebookDocumentSyncFeature;\nNotebookDocumentSyncFeature.CellScheme = 'vscode-notebook-cell';\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SyncConfigurationFeature = exports.toJSONObject = exports.ConfigurationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\n/**\n * Configuration pull model. From server to client.\n */\nclass ConfigurationFeature {\n    constructor(client) {\n        this._client = client;\n    }\n    getState() {\n        return { kind: 'static' };\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.configuration = true;\n    }\n    initialize() {\n        let client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\n            let configuration = (params) => {\n                let result = [];\n                for (let item of params.items) {\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\n                }\n                return result;\n            };\n            let middleware = client.middleware.workspace;\n            return middleware && middleware.configuration\n                ? middleware.configuration(params, token, configuration)\n                : configuration(params, token);\n        });\n    }\n    getConfiguration(resource, section) {\n        let result = null;\n        if (section) {\n            let index = section.lastIndexOf('.');\n            if (index === -1) {\n                result = toJSONObject(vscode_1.workspace.getConfiguration(undefined, resource).get(section));\n            }\n            else {\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\n                if (config) {\n                    result = toJSONObject(config.get(section.substr(index + 1)));\n                }\n            }\n        }\n        else {\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\n            result = {};\n            for (let key of Object.keys(config)) {\n                if (config.has(key)) {\n                    result[key] = toJSONObject(config.get(key));\n                }\n            }\n        }\n        if (result === undefined) {\n            result = null;\n        }\n        return result;\n    }\n    clear() {\n    }\n}\nexports.ConfigurationFeature = ConfigurationFeature;\nfunction toJSONObject(obj) {\n    if (obj) {\n        if (Array.isArray(obj)) {\n            return obj.map(toJSONObject);\n        }\n        else if (typeof obj === 'object') {\n            const res = Object.create(null);\n            for (const key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    res[key] = toJSONObject(obj[key]);\n                }\n            }\n            return res;\n        }\n    }\n    return obj;\n}\nexports.toJSONObject = toJSONObject;\nclass SyncConfigurationFeature {\n    constructor(_client) {\n        this._client = _client;\n        this.isCleared = false;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\n    }\n    initialize() {\n        this.isCleared = false;\n        let section = this._client.clientOptions.synchronize?.configurationSection;\n        if (section !== undefined) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: {\n                    section: section\n                }\n            });\n        }\n    }\n    register(data) {\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\n        });\n        this._listeners.set(data.id, disposable);\n        if (data.registerOptions.section !== undefined) {\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\n        }\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable) {\n            this._listeners.delete(id);\n            disposable.dispose();\n        }\n    }\n    clear() {\n        for (const disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n        this.isCleared = true;\n    }\n    onDidChangeConfiguration(configurationSection, event) {\n        if (this.isCleared) {\n            return;\n        }\n        let sections;\n        if (Is.string(configurationSection)) {\n            sections = [configurationSection];\n        }\n        else {\n            sections = configurationSection;\n        }\n        if (sections !== undefined && event !== undefined) {\n            let affected = sections.some((section) => event.affectsConfiguration(section));\n            if (!affected) {\n                return;\n            }\n        }\n        const didChangeConfiguration = async (sections) => {\n            if (sections === undefined) {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\n            }\n            else {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\n            }\n        };\n        let middleware = this._client.middleware.workspace?.didChangeConfiguration;\n        (middleware ? middleware(sections, didChangeConfiguration) : didChangeConfiguration(sections)).catch((error) => {\n            this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type.method} failed`, error);\n        });\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        let resource = this._client.clientOptions.workspaceFolder\n            ? this._client.clientOptions.workspaceFolder.uri\n            : undefined;\n        let result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            let key = keys[i];\n            let index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\n            }\n            else {\n                config = vscode_1.workspace.getConfiguration(undefined, resource).get(key);\n            }\n            if (config) {\n                let path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = toJSONObject(config);\n            }\n        }\n        return result;\n    }\n}\nexports.SyncConfigurationFeature = SyncConfigurationFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidSaveTextDocumentFeature = exports.WillSaveWaitUntilFeature = exports.WillSaveFeature = exports.DidChangeTextDocumentFeature = exports.DidCloseTextDocumentFeature = exports.DidOpenTextDocumentFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DidOpenTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    constructor(client, syncedDocuments) {\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, () => client.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n    }\n    get openDocuments() {\n        return this._syncedDocuments.values();\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\n    }\n    register(data) {\n        super.register(data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        const documentSelector = this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector);\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\n            const uri = textDocument.uri.toString();\n            if (this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (vscode_1.languages.match(documentSelector, textDocument) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                const middleware = this._client.middleware;\n                const didOpen = (textDocument) => {\n                    return this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                (middleware.didOpen ? middleware.didOpen(textDocument, didOpen) : didOpen(textDocument)).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                });\n                this._syncedDocuments.set(uri, textDocument);\n            }\n        });\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\n        super.notificationSent(textDocument, type, params);\n    }\n}\nexports.DidOpenTextDocumentFeature = DidOpenTextDocumentFeature;\nclass DidCloseTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    constructor(client, syncedDocuments, pendingTextDocumentChanges) {\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, () => client.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    async callback(data) {\n        await super.callback(data);\n        this._pendingTextDocumentChanges.delete(data.uri.toString());\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.delete(textDocument.uri.toString());\n        super.notificationSent(textDocument, type, params);\n    }\n    unregister(id) {\n        const selector = this._selectors.get(id);\n        // The super call removed the selector from the map\n        // of selectors.\n        super.unregister(id);\n        const selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (vscode_1.languages.match(selector, textDocument) > 0 && !this._selectorFilter(selectors, textDocument) && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                let middleware = this._client.middleware;\n                let didClose = (textDocument) => {\n                    return this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                this._syncedDocuments.delete(textDocument.uri.toString());\n                (middleware.didClose ? middleware.didClose(textDocument, didClose) : didClose(textDocument)).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                });\n            }\n        });\n    }\n}\nexports.DidCloseTextDocumentFeature = DidCloseTextDocumentFeature;\nclass DidChangeTextDocumentFeature extends features_1.DynamicDocumentFeature {\n    constructor(client, pendingTextDocumentChanges) {\n        super(client);\n        this._changeData = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n        this._onPendingChangeAdded = new vscode_1.EventEmitter();\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    get onPendingChangeAdded() {\n        return this._onPendingChangeAdded.event;\n    }\n    get syncKind() {\n        return this._syncKind;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== undefined && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            syncKind: data.registerOptions.syncKind,\n            documentSelector: this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector),\n        });\n        this.updateSyncKind(data.registerOptions.syncKind);\n    }\n    *getDocumentSelectors() {\n        for (const data of this._changeData.values()) {\n            yield data.documentSelector;\n        }\n    }\n    async callback(event) {\n        // Text document changes are send for dirty changes as well. We don't\n        // have dirty / un-dirty events in the LSP so we ignore content changes\n        // with length zero.\n        if (event.contentChanges.length === 0) {\n            return;\n        }\n        // We need to capture the URI and version here since they might change on the text document\n        // until we reach did `didChange` call since the middleware support async execution.\n        const uri = event.document.uri;\n        const version = event.document.version;\n        const promises = [];\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, event.document) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n                const middleware = this._client.middleware;\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\n                    const didChange = async (event) => {\n                        const params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event, uri, version);\n                        await this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                        this.notificationSent(event.document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    const didChange = async (event) => {\n                        const eventUri = event.document.uri.toString();\n                        this._pendingTextDocumentChanges.set(eventUri, event.document);\n                        this._onPendingChangeAdded.fire();\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n            }\n        }\n        return Promise.all(promises).then(undefined, (error) => {\n            this._client.error(`Sending document notification ${vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method} failed`, error);\n            throw error;\n        });\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0) {\n            if (this._listener) {\n                this._listener.dispose();\n                this._listener = undefined;\n            }\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        }\n        else {\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n            for (const changeData of this._changeData.values()) {\n                this.updateSyncKind(changeData.syncKind);\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    break;\n                }\n            }\n        }\n    }\n    clear() {\n        this._pendingTextDocumentChanges.clear();\n        this._changeData.clear();\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getPendingDocumentChanges(excludes) {\n        if (this._pendingTextDocumentChanges.size === 0) {\n            return [];\n        }\n        let result;\n        if (excludes.size === 0) {\n            result = Array.from(this._pendingTextDocumentChanges.values());\n            this._pendingTextDocumentChanges.clear();\n        }\n        else {\n            result = [];\n            for (const entry of this._pendingTextDocumentChanges) {\n                if (!excludes.has(entry[0])) {\n                    result.push(entry[1]);\n                    this._pendingTextDocumentChanges.delete(entry[0]);\n                }\n            }\n        }\n        return result;\n    }\n    getProvider(document) {\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, document) > 0) {\n                return {\n                    send: (event) => {\n                        return this.callback(event);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n    updateSyncKind(syncKind) {\n        if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            return;\n        }\n        switch (syncKind) {\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Full:\n                this._syncKind = syncKind;\n                break;\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental:\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental;\n                }\n                break;\n        }\n    }\n}\nexports.DidChangeTextDocumentFeature = DidChangeTextDocumentFeature;\nclass WillSaveFeature extends features_1.TextDocumentEventFeature {\n    constructor(client) {\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, () => client.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (event) => event.document, (selectors, willSaveEvent) => features_1.TextDocumentEventFeature.textDocumentFilter(selectors, willSaveEvent.document));\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    getTextDocument(data) {\n        return data.document;\n    }\n}\nexports.WillSaveFeature = WillSaveFeature;\nclass WillSaveWaitUntilFeature extends features_1.DynamicDocumentFeature {\n    constructor(client) {\n        super(client);\n        this._selectors = new Map();\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSaveWaitUntil = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    callback(event) {\n        if (features_1.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(), event.document) && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n            let middleware = this._client.middleware;\n            let willSaveWaitUntil = (event) => {\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then(async (edits) => {\n                    let vEdits = await this._client.protocol2CodeConverter.asTextEdits(edits);\n                    return vEdits === undefined ? [] : vEdits;\n                });\n            };\n            event.waitUntil(middleware.willSaveWaitUntil\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\n                : willSaveWaitUntil(event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nexports.WillSaveWaitUntilFeature = WillSaveWaitUntilFeature;\nclass DidSaveTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    constructor(client) {\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, () => client.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._includeText = false;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').didSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\n            const saveOptions = typeof textDocumentSyncOptions.save === 'boolean'\n                ? { includeText: false }\n                : { includeText: !!textDocumentSyncOptions.save.includeText };\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, saveOptions)\n            });\n        }\n    }\n    register(data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(data);\n    }\n    getTextDocument(data) {\n        return data;\n    }\n}\nexports.DidSaveTextDocumentFeature = DidSaveTextDocumentFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nconst SupportedCompletionItemKinds = [\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\n];\nclass CompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\n        this.labelDetailsSupport = new Map();\n    }\n    fillClientCapabilities(capabilities) {\n        let completion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'completion');\n        completion.dynamicRegistration = true;\n        completion.contextSupport = true;\n        completion.completionItem = {\n            snippetSupport: true,\n            commitCharactersSupport: true,\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\n            deprecatedSupport: true,\n            preselectSupport: true,\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] },\n            insertReplaceSupport: true,\n            resolveSupport: {\n                properties: ['documentation', 'detail', 'additionalTextEdits']\n            },\n            insertTextModeSupport: { valueSet: [vscode_languageserver_protocol_1.InsertTextMode.asIs, vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation] },\n            labelDetailsSupport: true\n        };\n        completion.insertTextMode = vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation;\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\n        completion.completionList = {\n            itemDefaults: [\n                'commitCharacters', 'editRange', 'insertTextFormat', 'insertTextMode', 'data'\n            ]\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options, id) {\n        this.labelDetailsSupport.set(id, !!options.completionItem?.labelDetailsSupport);\n        const triggerCharacters = options.triggerCharacters ?? [];\n        const defaultCommitCharacters = options.allCommitCharacters;\n        const selector = options.documentSelector;\n        const provider = {\n            provideCompletionItems: (document, position, token, context) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCompletionResult(result, defaultCommitCharacters, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideCompletionItem\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\n                    : provideCompletionItems(document, position, context, token);\n            },\n            resolveCompletionItem: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCompletionItem = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item, !!this.labelDetailsSupport.get(id)), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asCompletionItem(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCompletionItem\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\n                        : resolveCompletionItem(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, ...triggerCharacters), provider];\n    }\n}\nexports.CompletionItemFeature = CompletionItemFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HoverFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass HoverFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const hoverCapability = ((0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'hover'));\n        hoverCapability.dynamicRegistration = true;\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideHover: (document, position, token) => {\n                const client = this._client;\n                const provideHover = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asHover(result);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideHover\n                    ? middleware.provideHover(document, position, token, provideHover)\n                    : provideHover(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.HoverFeature = HoverFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let definitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'definition');\n        definitionSupport.dynamicRegistration = true;\n        definitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDefinition\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\n                    : provideDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DefinitionFeature = DefinitionFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignatureHelpFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass SignatureHelpFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let config = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'signatureHelp');\n        config.dynamicRegistration = true;\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\n        config.signatureInformation.activeParameterSupport = true;\n        config.contextSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideSignatureHelp: (document, position, token, context) => {\n                const client = this._client;\n                const providerSignatureHelp = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSignatureHelp(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSignatureHelp\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\n                    : providerSignatureHelp(document, position, context, token);\n            }\n        };\n        return [this.registerProvider(options, provider), provider];\n    }\n    registerProvider(options, provider) {\n        const selector = this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        if (options.retriggerCharacters === undefined) {\n            const triggerCharacters = options.triggerCharacters || [];\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        }\n        else {\n            const metaData = {\n                triggerCharacters: options.triggerCharacters || [],\n                retriggerCharacters: options.retriggerCharacters || []\n            };\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, metaData);\n        }\n    }\n}\nexports.SignatureHelpFeature = SignatureHelpFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentHighlightFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DocumentHighlightFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentHighlights: (document, position, token) => {\n                const client = this._client;\n                const _provideDocumentHighlights = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentHighlights(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentHighlights\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\n                    : _provideDocumentHighlights(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentHighlightFeature = DocumentHighlightFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentSymbolFeature = exports.SupportedSymbolTags = exports.SupportedSymbolKinds = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nexports.SupportedSymbolKinds = [\n    vscode_languageserver_protocol_1.SymbolKind.File,\n    vscode_languageserver_protocol_1.SymbolKind.Module,\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\n    vscode_languageserver_protocol_1.SymbolKind.Package,\n    vscode_languageserver_protocol_1.SymbolKind.Class,\n    vscode_languageserver_protocol_1.SymbolKind.Method,\n    vscode_languageserver_protocol_1.SymbolKind.Property,\n    vscode_languageserver_protocol_1.SymbolKind.Field,\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\n    vscode_languageserver_protocol_1.SymbolKind.Function,\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\n    vscode_languageserver_protocol_1.SymbolKind.String,\n    vscode_languageserver_protocol_1.SymbolKind.Number,\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\n    vscode_languageserver_protocol_1.SymbolKind.Array,\n    vscode_languageserver_protocol_1.SymbolKind.Object,\n    vscode_languageserver_protocol_1.SymbolKind.Key,\n    vscode_languageserver_protocol_1.SymbolKind.Null,\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\n    vscode_languageserver_protocol_1.SymbolKind.Event,\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\n];\nexports.SupportedSymbolTags = [\n    vscode_languageserver_protocol_1.SymbolTag.Deprecated\n];\nclass DocumentSymbolFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentSymbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: exports.SupportedSymbolKinds\n        };\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\n        symbolCapabilities.tagSupport = {\n            valueSet: exports.SupportedSymbolTags\n        };\n        symbolCapabilities.labelSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentSymbols: (document, token) => {\n                const client = this._client;\n                const _provideDocumentSymbols = async (document, token) => {\n                    try {\n                        const data = await client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token);\n                        if (token.isCancellationRequested || data === undefined || data === null) {\n                            return null;\n                        }\n                        if (data.length === 0) {\n                            return [];\n                        }\n                        else {\n                            const first = data[0];\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(first)) {\n                                return await client.protocol2CodeConverter.asDocumentSymbols(data, token);\n                            }\n                            else {\n                                return await client.protocol2CodeConverter.asSymbolInformations(data, token);\n                            }\n                        }\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentSymbols\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\n                    : _provideDocumentSymbols(document, token);\n            }\n        };\n        const metaData = options.label !== undefined ? { label: options.label } : undefined;\n        return [vscode_1.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, metaData), provider];\n    }\n}\nexports.DocumentSymbolFeature = DocumentSymbolFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst UUID = require(\"./utils/uuid\");\nclass WorkspaceSymbolFeature extends features_1.WorkspaceFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'symbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: documentSymbol_1.SupportedSymbolKinds\n        };\n        symbolCapabilities.tagSupport = {\n            valueSet: documentSymbol_1.SupportedSymbolTags\n        };\n        symbolCapabilities.resolveSupport = { properties: ['location.range'] };\n    }\n    initialize(capabilities) {\n        if (!capabilities.workspaceSymbolProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideWorkspaceSymbols: (query, token) => {\n                const client = this._client;\n                const provideWorkspaceSymbols = (query, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSymbolInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideWorkspaceSymbols\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\n                    : provideWorkspaceSymbols(query, token);\n            },\n            resolveWorkspaceSymbol: options.resolveProvider === true\n                ? (item, token) => {\n                    const client = this._client;\n                    const resolveWorkspaceSymbol = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, client.code2ProtocolConverter.asWorkspaceSymbol(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSymbolInformation(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, token, error, null);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveWorkspaceSymbol\n                        ? middleware.resolveWorkspaceSymbol(item, token, resolveWorkspaceSymbol)\n                        : resolveWorkspaceSymbol(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\n    }\n}\nexports.WorkspaceSymbolFeature = WorkspaceSymbolFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReferencesFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass ReferencesFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'references').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideReferences: (document, position, options, token) => {\n                const client = this._client;\n                const _providerReferences = (document, position, options, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asReferences(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideReferences\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\n                    : _providerReferences(document, position, options, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ReferencesFeature = ReferencesFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeActionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nclass CodeActionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const cap = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeAction');\n        cap.dynamicRegistration = true;\n        cap.isPreferredSupport = true;\n        cap.disabledSupport = true;\n        cap.dataSupport = true;\n        // We can only resolve the edit property.\n        cap.resolveSupport = {\n            properties: ['edit']\n        };\n        cap.codeActionLiteralSupport = {\n            codeActionKind: {\n                valueSet: [\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\n                ]\n            }\n        };\n        cap.honorsChangeAnnotations = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideCodeActions: (document, range, context, token) => {\n                const client = this._client;\n                const _provideCodeActions = async (document, range, context, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        context: client.code2ProtocolConverter.asCodeActionContextSync(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\n                        if (token.isCancellationRequested || values === null || values === undefined) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeActionResult(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeActions\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\n                    : _provideCodeActions(document, range, context, token);\n            },\n            resolveCodeAction: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCodeAction = async (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, client.code2ProtocolConverter.asCodeActionSync(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return item;\n                            }\n                            return client.protocol2CodeConverter.asCodeAction(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCodeAction\n                        ? middleware.resolveCodeAction(item, token, resolveCodeAction)\n                        : resolveCodeAction(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, (options.codeActionKinds\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\n                : undefined)), provider];\n    }\n}\nexports.CodeActionFeature = CodeActionFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeLensFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nclass CodeLensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeLens').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'codeLens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.CodeLensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeCodeLensEmitter.fire();\n            }\n        });\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeCodeLenses: eventEmitter.event,\n            provideCodeLenses: (document, token) => {\n                const client = this._client;\n                const provideCodeLenses = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeLenses(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeLenses\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\n                    : provideCodeLenses(document, token);\n            },\n            resolveCodeLens: (options.resolveProvider)\n                ? (codeLens, token) => {\n                    const client = this._client;\n                    const resolveCodeLens = (codeLens, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return codeLens;\n                            }\n                            return client.protocol2CodeConverter.asCodeLens(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, token, error, codeLens);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveCodeLens\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\n                        : resolveCodeLens(codeLens, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider, onDidChangeCodeLensEmitter: eventEmitter }];\n    }\n}\nexports.CodeLensFeature = CodeLensFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentOnTypeFormattingFeature = exports.DocumentRangeFormattingFeature = exports.DocumentFormattingFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nvar FileFormattingOptions;\n(function (FileFormattingOptions) {\n    function fromConfiguration(document) {\n        const filesConfig = vscode_1.workspace.getConfiguration('files', document);\n        return {\n            trimTrailingWhitespace: filesConfig.get('trimTrailingWhitespace'),\n            trimFinalNewlines: filesConfig.get('trimFinalNewlines'),\n            insertFinalNewline: filesConfig.get('insertFinalNewline'),\n        };\n    }\n    FileFormattingOptions.fromConfiguration = fromConfiguration;\n})(FileFormattingOptions || (FileFormattingOptions = {}));\nclass DocumentFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'formatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentFormattingEdits: (document, options, token) => {\n                const client = this._client;\n                const provideDocumentFormattingEdits = (document, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentFormattingEdits\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\n                    : provideDocumentFormattingEdits(document, options, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentFormattingFeature = DocumentFormattingFeature;\nclass DocumentRangeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rangeFormatting');\n        capability.dynamicRegistration = true;\n        capability.rangesSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\n                const client = this._client;\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangeFormattingEdits\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\n            }\n        };\n        if (options.rangesSupport) {\n            provider.provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                const client = this._client;\n                const provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        ranges: client.code2ProtocolConverter.asRanges(ranges),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangesFormattingEdits\n                    ? middleware.provideDocumentRangesFormattingEdits(document, ranges, options, token, provideDocumentRangesFormattingEdits)\n                    : provideDocumentRangesFormattingEdits(document, ranges, options, token);\n            };\n        }\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentRangeFormattingFeature = DocumentRangeFormattingFeature;\nclass DocumentOnTypeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\n                const client = this._client;\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        ch: ch,\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideOnTypeFormattingEdits\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\n            }\n        };\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\n    }\n}\nexports.DocumentOnTypeFormattingFeature = DocumentOnTypeFormattingFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RenameFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst features_1 = require(\"./features\");\nclass RenameFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let rename = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rename');\n        rename.dynamicRegistration = true;\n        rename.prepareSupport = true;\n        rename.prepareSupportDefaultBehavior = vscode_languageserver_protocol_1.PrepareSupportDefaultBehavior.Identifier;\n        rename.honorsChangeAnnotations = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\n        if (!options) {\n            return;\n        }\n        if (Is.boolean(capabilities.renameProvider)) {\n            options.prepareProvider = false;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideRenameEdits: (document, position, newName, token) => {\n                const client = this._client;\n                const provideRenameEdits = (document, position, newName, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        newName: newName\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asWorkspaceEdit(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, token, error, null, false);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideRenameEdits\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\n                    : provideRenameEdits(document, position, newName, token);\n            },\n            prepareRename: options.prepareProvider\n                ? (document, position, token) => {\n                    const client = this._client;\n                    const prepareRename = (document, position, token) => {\n                        let params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            position: client.code2ProtocolConverter.asPosition(position),\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\n                                return client.protocol2CodeConverter.asRange(result);\n                            }\n                            else if (this.isDefaultBehavior(result)) {\n                                return result.defaultBehavior === true\n                                    ? null\n                                    : Promise.reject(new Error(`The element can't be renamed.`));\n                            }\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\n                                return {\n                                    range: client.protocol2CodeConverter.asRange(result.range),\n                                    placeholder: result.placeholder\n                                };\n                            }\n                            // To cancel the rename vscode API expects a rejected promise.\n                            return Promise.reject(new Error(`The element can't be renamed.`));\n                        }, (error) => {\n                            if (typeof error.message === 'string') {\n                                throw new Error(error.message);\n                            }\n                            else {\n                                throw new Error(`The element can't be renamed.`);\n                            }\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.prepareRename\n                        ? middleware.prepareRename(document, position, token, prepareRename)\n                        : prepareRename(document, position, token);\n                }\n                : undefined\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n    isDefaultBehavior(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.defaultBehavior);\n    }\n}\nexports.RenameFeature = RenameFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentLinkFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DocumentLinkFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const documentLinkCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentLink');\n        documentLinkCapabilities.dynamicRegistration = true;\n        documentLinkCapabilities.tooltipSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentLinks: (document, token) => {\n                const client = this._client;\n                const provideDocumentLinks = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentLinks(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentLinks\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\n                    : provideDocumentLinks(document, token);\n            },\n            resolveDocumentLink: options.resolveProvider\n                ? (link, token) => {\n                    const client = this._client;\n                    let resolveDocumentLink = (link, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return link;\n                            }\n                            return client.protocol2CodeConverter.asDocumentLink(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, token, error, link);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveDocumentLink\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\n                        : resolveDocumentLink(link, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentLinkFeature = DocumentLinkFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecuteCommandFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nclass ExecuteCommandFeature {\n    constructor(client) {\n        this._client = client;\n        this._commands = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._commands.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        if (!capabilities.executeCommandProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\n        });\n    }\n    register(data) {\n        const client = this._client;\n        const middleware = client.middleware;\n        const executeCommand = (command, args) => {\n            let params = {\n                command,\n                arguments: args\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, undefined, error, undefined);\n            });\n        };\n        if (data.registerOptions.commands) {\n            const disposables = [];\n            for (const command of data.registerOptions.commands) {\n                disposables.push(vscode_1.commands.registerCommand(command, (...args) => {\n                    return middleware.executeCommand\n                        ? middleware.executeCommand(command, args, executeCommand)\n                        : executeCommand(command, args);\n                }));\n            }\n            this._commands.set(data.id, disposables);\n        }\n    }\n    unregister(id) {\n        let disposables = this._commands.get(id);\n        if (disposables) {\n            disposables.forEach(disposable => disposable.dispose());\n        }\n    }\n    clear() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n        this._commands.clear();\n    }\n}\nexports.ExecuteCommandFeature = ExecuteCommandFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileSystemWatcherFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FileSystemWatcherFeature {\n    constructor(client, notifyFileEvent) {\n        this._client = client;\n        this._notifyFileEvent = notifyFileEvent;\n        this._watchers = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._watchers.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').relativePatternSupport = true;\n    }\n    initialize(_capabilities, _documentSelector) {\n    }\n    register(data) {\n        if (!Array.isArray(data.registerOptions.watchers)) {\n            return;\n        }\n        const disposables = [];\n        for (const watcher of data.registerOptions.watchers) {\n            const globPattern = this._client.protocol2CodeConverter.asGlobPattern(watcher.globPattern);\n            if (globPattern === undefined) {\n                continue;\n            }\n            let watchCreate = true, watchChange = true, watchDelete = true;\n            if (watcher.kind !== undefined && watcher.kind !== null) {\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\n            }\n            const fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(globPattern, !watchCreate, !watchChange, !watchDelete);\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, disposables);\n            disposables.push(fileSystemWatcher);\n        }\n        this._watchers.set(data.id, disposables);\n    }\n    registerRaw(id, fileSystemWatchers) {\n        let disposables = [];\n        for (let fileSystemWatcher of fileSystemWatchers) {\n            this.hookListeners(fileSystemWatcher, true, true, true, disposables);\n        }\n        this._watchers.set(id, disposables);\n    }\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\n        if (watchCreate) {\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\n            }), null, listeners);\n        }\n        if (watchChange) {\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\n            }), null, listeners);\n        }\n        if (watchDelete) {\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\n            }), null, listeners);\n        }\n    }\n    unregister(id) {\n        let disposables = this._watchers.get(id);\n        if (disposables) {\n            for (let disposable of disposables) {\n                disposable.dispose();\n            }\n        }\n    }\n    clear() {\n        this._watchers.forEach((disposables) => {\n            for (let disposable of disposables) {\n                disposable.dispose();\n            }\n        });\n        this._watchers.clear();\n    }\n}\nexports.FileSystemWatcherFeature = FileSystemWatcherFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorProviderFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ColorProviderFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'colorProvider').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideColorPresentations: (color, context, token) => {\n                const client = this._client;\n                const provideColorPresentations = (color, context, token) => {\n                    const requestParams = {\n                        color,\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\n                        range: client.code2ProtocolConverter.asRange(context.range)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorPresentations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideColorPresentations\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\n                    : provideColorPresentations(color, context, token);\n            },\n            provideDocumentColors: (document, token) => {\n                const client = this._client;\n                const provideDocumentColors = (document, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentColors\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\n                    : provideDocumentColors(document, token);\n            }\n        };\n        return [vscode_1.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.ColorProviderFeature = ColorProviderFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ImplementationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let implementationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'implementation');\n        implementationSupport.dynamicRegistration = true;\n        implementationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideImplementation: (document, position, token) => {\n                const client = this._client;\n                const provideImplementation = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideImplementation\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\n                    : provideImplementation(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ImplementationFeature = ImplementationFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeDefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\n        let typeDefinitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition');\n        typeDefinitionSupport.dynamicRegistration = true;\n        typeDefinitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideTypeDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideTypeDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideTypeDefinition\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\n                    : provideTypeDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = exports.arrayDiff = void 0;\nconst UUID = require(\"./utils/uuid\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction access(target, key) {\n    if (target === undefined || target === null) {\n        return undefined;\n    }\n    return target[key];\n}\nfunction arrayDiff(left, right) {\n    return left.filter(element => right.indexOf(element) < 0);\n}\nexports.arrayDiff = arrayDiff;\nclass WorkspaceFoldersFeature {\n    constructor(client) {\n        this._client = client;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\n    }\n    fillInitializeParams(params) {\n        const folders = vscode_1.workspace.workspaceFolders;\n        this.initializeWithFolders(folders);\n        if (folders === void 0) {\n            params.workspaceFolders = null;\n        }\n        else {\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\n        }\n    }\n    initializeWithFolders(currentWorkspaceFolders) {\n        this._initialFolders = currentWorkspaceFolders;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.workspaceFolders = true;\n    }\n    initialize(capabilities) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\n            const workspaceFolders = () => {\n                const folders = vscode_1.workspace.workspaceFolders;\n                if (folders === undefined) {\n                    return null;\n                }\n                const result = folders.map((folder) => {\n                    return this.asProtocol(folder);\n                });\n                return result;\n            };\n            const middleware = client.middleware.workspace;\n            return middleware && middleware.workspaceFolders\n                ? middleware.workspaceFolders(token, workspaceFolders)\n                : workspaceFolders(token);\n        });\n        const value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\n        let id;\n        if (typeof value === 'string') {\n            id = value;\n        }\n        else if (value === true) {\n            id = UUID.generateUuid();\n        }\n        if (id) {\n            this.register({ id: id, registerOptions: undefined });\n        }\n    }\n    sendInitialEvent(currentWorkspaceFolders) {\n        let promise;\n        if (this._initialFolders && currentWorkspaceFolders) {\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\n            if (added.length > 0 || removed.length > 0) {\n                promise = this.doSendEvent(added, removed);\n            }\n        }\n        else if (this._initialFolders) {\n            promise = this.doSendEvent([], this._initialFolders);\n        }\n        else if (currentWorkspaceFolders) {\n            promise = this.doSendEvent(currentWorkspaceFolders, []);\n        }\n        if (promise !== undefined) {\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        }\n    }\n    doSendEvent(addedFolders, removedFolders) {\n        let params = {\n            event: {\n                added: addedFolders.map(folder => this.asProtocol(folder)),\n                removed: removedFolders.map(folder => this.asProtocol(folder))\n            }\n        };\n        return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\n    }\n    register(data) {\n        let id = data.id;\n        let client = this._client;\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\n            let didChangeWorkspaceFolders = (event) => {\n                return this.doSendEvent(event.added, event.removed);\n            };\n            let middleware = client.middleware.workspace;\n            const promise = middleware && middleware.didChangeWorkspaceFolders\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\n                : didChangeWorkspaceFolders(event);\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        });\n        this._listeners.set(id, disposable);\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable === void 0) {\n            return;\n        }\n        this._listeners.delete(id);\n        disposable.dispose();\n    }\n    clear() {\n        for (let disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    asProtocol(workspaceFolder) {\n        if (workspaceFolder === void 0) {\n            return null;\n        }\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\n    }\n}\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FoldingRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'foldingRange');\n        capability.dynamicRegistration = true;\n        capability.rangeLimit = 5000;\n        capability.lineFoldingOnly = true;\n        capability.foldingRangeKind = { valueSet: [vscode_languageserver_protocol_1.FoldingRangeKind.Comment, vscode_languageserver_protocol_1.FoldingRangeKind.Imports, vscode_languageserver_protocol_1.FoldingRangeKind.Region] };\n        capability.foldingRange = { collapsedText: false };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'foldingRange').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.FoldingRangeRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeFoldingRange.fire();\n            }\n        });\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeFoldingRanges: eventEmitter.event,\n            provideFoldingRanges: (document, context, token) => {\n                const client = this._client;\n                const provideFoldingRanges = (document, _, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asFoldingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideFoldingRanges\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\n                    : provideFoldingRanges(document, context, token);\n            }\n        };\n        return [vscode_1.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider: provider, onDidChangeFoldingRange: eventEmitter }];\n    }\n}\nexports.FoldingRangeFeature = FoldingRangeFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass DeclarationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const declarationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'declaration');\n        declarationSupport.dynamicRegistration = true;\n        declarationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDeclaration: (document, position, token) => {\n                const client = this._client;\n                const provideDeclaration = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDeclarationResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDeclaration\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\n                    : provideDeclaration(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DeclarationFeature = DeclarationFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass SelectionRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'selectionRange');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideSelectionRanges: (document, positions, token) => {\n                const client = this._client;\n                const provideSelectionRanges = async (document, positions, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        positions: client.code2ProtocolConverter.asPositionsSync(positions, token)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSelectionRanges(ranges, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSelectionRanges\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\n                    : provideSelectionRanges(document, positions, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.SelectionRangeFeature = SelectionRangeFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst progressPart_1 = require(\"./progressPart\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass ProgressFeature {\n    constructor(_client) {\n        this._client = _client;\n        this.activeParts = new Set();\n    }\n    getState() {\n        return { kind: 'window', id: vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.method, registrations: this.activeParts.size > 0 };\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(capabilities, 'window').workDoneProgress = true;\n    }\n    initialize() {\n        const client = this._client;\n        const deleteHandler = (part) => {\n            this.activeParts.delete(part);\n        };\n        const createHandler = (params) => {\n            this.activeParts.add(new progressPart_1.ProgressPart(this._client, params.token, deleteHandler));\n        };\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\n    }\n    clear() {\n        for (const part of this.activeParts) {\n            part.done();\n        }\n        this.activeParts.clear();\n    }\n}\nexports.ProgressFeature = ProgressFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass CallHierarchyProvider {\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareCallHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareCallHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareCallHierarchy\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\n            : prepareCallHierarchy(document, position, token);\n    }\n    provideCallHierarchyIncomingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyIncomingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyIncomingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyIncomingCalls\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\n            : provideCallHierarchyIncomingCalls(item, token);\n    }\n    provideCallHierarchyOutgoingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyOutgoingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyOutgoingCalls\n            ? middleware.provideCallHierarchyOutgoingCalls(item, token, provideCallHierarchyOutgoingCalls)\n            : provideCallHierarchyOutgoingCalls(item, token);\n    }\n}\nclass CallHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        const capabilities = cap;\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'callHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new CallHierarchyProvider(client);\n        return [vscode_1.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.CallHierarchyFeature = CallHierarchyFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensFeature = void 0;\nconst vscode = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst Is = require(\"./utils/is\");\nclass SemanticTokensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SemanticTokensRegistrationType.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'semanticTokens');\n        capability.dynamicRegistration = true;\n        capability.tokenTypes = [\n            vscode_languageserver_protocol_1.SemanticTokenTypes.namespace,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.type,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.class,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enum,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.interface,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.struct,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.typeParameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.parameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.variable,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.property,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enumMember,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.event,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.function,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.method,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.macro,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.keyword,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.modifier,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.comment,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.string,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.number,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.regexp,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.operator,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.decorator\n        ];\n        capability.tokenModifiers = [\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.declaration,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.definition,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.readonly,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.static,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.deprecated,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.abstract,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.async,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.modification,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.documentation,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.defaultLibrary\n        ];\n        capability.formats = [vscode_languageserver_protocol_1.TokenFormat.Relative];\n        capability.requests = {\n            range: true,\n            full: {\n                delta: true\n            }\n        };\n        capability.multilineTokenSupport = false;\n        capability.overlappingTokenSupport = false;\n        capability.serverCancelSupport = true;\n        capability.augmentsSyntaxTokens = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'semanticTokens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeSemanticTokensEmitter.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const fullProvider = Is.boolean(options.full) ? options.full : options.full !== undefined;\n        const hasEditProvider = options.full !== undefined && typeof options.full !== 'boolean' && options.full.delta === true;\n        const eventEmitter = new vscode.EventEmitter();\n        const documentProvider = fullProvider\n            ? {\n                onDidChangeSemanticTokens: eventEmitter.event,\n                provideDocumentSemanticTokens: (document, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentSemanticTokens = (document, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentSemanticTokens\n                        ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\n                        : provideDocumentSemanticTokens(document, token);\n                },\n                provideDocumentSemanticTokensEdits: hasEditProvider\n                    ? (document, previousResultId, token) => {\n                        const client = this._client;\n                        const middleware = client.middleware;\n                        const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\n                            const params = {\n                                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                                previousResultId\n                            };\n                            return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, params, token).then(async (result) => {\n                                if (token.isCancellationRequested) {\n                                    return null;\n                                }\n                                if (vscode_languageserver_protocol_1.SemanticTokens.is(result)) {\n                                    return await client.protocol2CodeConverter.asSemanticTokens(result, token);\n                                }\n                                else {\n                                    return await client.protocol2CodeConverter.asSemanticTokensEdits(result, token);\n                                }\n                            }, (error) => {\n                                return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, token, error, null);\n                            });\n                        };\n                        return middleware.provideDocumentSemanticTokensEdits\n                            ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\n                            : provideDocumentSemanticTokensEdits(document, previousResultId, token);\n                    }\n                    : undefined\n            }\n            : undefined;\n        const hasRangeProvider = options.range === true;\n        const rangeProvider = hasRangeProvider\n            ? {\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            range: client.code2ProtocolConverter.asRange(range)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentRangeSemanticTokens\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\n                        : provideDocumentRangeSemanticTokens(document, range, token);\n                }\n            }\n            : undefined;\n        const disposables = [];\n        const client = this._client;\n        const legend = client.protocol2CodeConverter.asSemanticTokensLegend(options.legend);\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(selector);\n        if (documentProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(documentSelector, documentProvider, legend));\n        }\n        if (rangeProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(documentSelector, rangeProvider, legend));\n        }\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { range: rangeProvider, full: documentProvider, onDidChangeSemanticTokensEmitter: eventEmitter }];\n    }\n}\nexports.SemanticTokensFeature = SemanticTokensFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesFeature = exports.WillRenameFilesFeature = exports.WillCreateFilesFeature = exports.DidDeleteFilesFeature = exports.DidRenameFilesFeature = exports.DidCreateFilesFeature = void 0;\nconst code = require(\"vscode\");\nconst minimatch = require(\"minimatch\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nfunction access(target, key) {\n    return target[key];\n}\nfunction assign(target, key, value) {\n    target[key] = value;\n}\nclass FileOperationFeature {\n    constructor(client, event, registrationType, clientCapability, serverCapability) {\n        this._client = client;\n        this._event = event;\n        this._registrationType = registrationType;\n        this._clientCapability = clientCapability;\n        this._serverCapability = serverCapability;\n        this._filters = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this._registrationType.method, registrations: this._filters.size > 0 };\n    }\n    filterSize() {\n        return this._filters.size;\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = ensure(ensure(capabilities, 'workspace'), 'fileOperations');\n        // this happens n times but it is the same value so we tolerate this.\n        assign(value, 'dynamicRegistration', true);\n        assign(value, this._clientCapability, true);\n    }\n    initialize(capabilities) {\n        const options = capabilities.workspace?.fileOperations;\n        const capability = options !== undefined ? access(options, this._serverCapability) : undefined;\n        if (capability?.filters !== undefined) {\n            try {\n                this.register({\n                    id: UUID.generateUuid(),\n                    registerOptions: { filters: capability.filters }\n                });\n            }\n            catch (e) {\n                this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`);\n            }\n        }\n    }\n    register(data) {\n        if (!this._listener) {\n            this._listener = this._event(this.send, this);\n        }\n        const minimatchFilter = data.registerOptions.filters.map((filter) => {\n            const matcher = new minimatch.Minimatch(filter.pattern.glob, FileOperationFeature.asMinimatchOptions(filter.pattern.options));\n            if (!matcher.makeRe()) {\n                throw new Error(`Invalid pattern ${filter.pattern.glob}!`);\n            }\n            return { scheme: filter.scheme, matcher, kind: filter.pattern.matches };\n        });\n        this._filters.set(data.id, minimatchFilter);\n    }\n    unregister(id) {\n        this._filters.delete(id);\n        if (this._filters.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._filters.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getFileType(uri) {\n        return FileOperationFeature.getFileType(uri);\n    }\n    async filter(event, prop) {\n        // (Asynchronously) map each file onto a boolean of whether it matches\n        // any of the globs.\n        const fileMatches = await Promise.all(event.files.map(async (item) => {\n            const uri = prop(item);\n            // Use fsPath to make this consistent with file system watchers but help\n            // minimatch to use '/' instead of `\\\\` if present.\n            const path = uri.fsPath.replace(/\\\\/g, '/');\n            for (const filters of this._filters.values()) {\n                for (const filter of filters) {\n                    if (filter.scheme !== undefined && filter.scheme !== uri.scheme) {\n                        continue;\n                    }\n                    if (filter.matcher.match(path)) {\n                        // The pattern matches. If kind is undefined then everything is ok\n                        if (filter.kind === undefined) {\n                            return true;\n                        }\n                        const fileType = await this.getFileType(uri);\n                        // If we can't determine the file type than we treat it as a match.\n                        // Dropping it would be another alternative.\n                        if (fileType === undefined) {\n                            this._client.error(`Failed to determine file type for ${uri.toString()}.`);\n                            return true;\n                        }\n                        if ((fileType === code.FileType.File && filter.kind === proto.FileOperationPatternKind.file) || (fileType === code.FileType.Directory && filter.kind === proto.FileOperationPatternKind.folder)) {\n                            return true;\n                        }\n                    }\n                    else if (filter.kind === proto.FileOperationPatternKind.folder) {\n                        const fileType = await FileOperationFeature.getFileType(uri);\n                        if (fileType === code.FileType.Directory && filter.matcher.match(`${path}/`)) {\n                            return true;\n                        }\n                    }\n                }\n            }\n            return false;\n        }));\n        // Filter the files to those that matched.\n        const files = event.files.filter((_, index) => fileMatches[index]);\n        return { ...event, files };\n    }\n    static async getFileType(uri) {\n        try {\n            return (await code.workspace.fs.stat(uri)).type;\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    static asMinimatchOptions(options) {\n        // The spec doesn't state that dot files don't match. So we make\n        // matching those the default.\n        const result = { dot: true };\n        if (options?.ignoreCase === true) {\n            result.nocase = true;\n        }\n        return result;\n    }\n}\nclass NotificationFileOperationFeature extends FileOperationFeature {\n    constructor(client, event, notificationType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, notificationType, clientCapability, serverCapability);\n        this._notificationType = notificationType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = async (event) => {\n                return this._client.sendNotification(this._notificationType, this._createParams(event));\n            };\n            return this.doSend(filteredEvent, next);\n        }\n    }\n}\nclass CachingNotificationFileOperationFeature extends NotificationFileOperationFeature {\n    constructor() {\n        super(...arguments);\n        this._fsPathFileTypes = new Map();\n    }\n    async getFileType(uri) {\n        const fsPath = uri.fsPath;\n        if (this._fsPathFileTypes.has(fsPath)) {\n            return this._fsPathFileTypes.get(fsPath);\n        }\n        const type = await FileOperationFeature.getFileType(uri);\n        if (type) {\n            this._fsPathFileTypes.set(fsPath, type);\n        }\n        return type;\n    }\n    async cacheFileTypes(event, prop) {\n        // Calling filter will force the matching logic to run. For any item\n        // that requires a getFileType lookup, the overriden getFileType will\n        // be called that will cache the result so that when onDidRename fires,\n        // it can still be checked even though the item no longer exists on disk\n        // in its original location.\n        await this.filter(event, prop);\n    }\n    clearFileTypeCache() {\n        this._fsPathFileTypes.clear();\n    }\n    unregister(id) {\n        super.unregister(id);\n        if (this.filterSize() === 0 && this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n    clear() {\n        super.clear();\n        if (this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n}\nclass DidCreateFilesFeature extends NotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidCreateFiles, proto.DidCreateFilesNotification.type, 'didCreate', 'didCreate', (i) => i, client.code2ProtocolConverter.asDidCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didCreateFiles\n            ? middleware.didCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidCreateFilesFeature = DidCreateFilesFeature;\nclass DidRenameFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidRenameFiles, proto.DidRenameFilesNotification.type, 'didRename', 'didRename', (i) => i.oldUri, client.code2ProtocolConverter.asDidRenameFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillRenameFiles(this.willRename, this);\n        }\n        super.register(data);\n    }\n    willRename(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i.oldUri));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didRenameFiles\n            ? middleware.didRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidRenameFilesFeature = DidRenameFilesFeature;\nclass DidDeleteFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidDeleteFiles, proto.DidDeleteFilesNotification.type, 'didDelete', 'didDelete', (i) => i, client.code2ProtocolConverter.asDidDeleteFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillDeleteFiles(this.willDelete, this);\n        }\n        super.register(data);\n    }\n    willDelete(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didDeleteFiles\n            ? middleware.didDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidDeleteFilesFeature = DidDeleteFilesFeature;\nclass RequestFileOperationFeature extends FileOperationFeature {\n    constructor(client, event, requestType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, requestType, clientCapability, serverCapability);\n        this._requestType = requestType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        const waitUntil = this.waitUntil(originalEvent);\n        originalEvent.waitUntil(waitUntil);\n    }\n    async waitUntil(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = (event) => {\n                return this._client.sendRequest(this._requestType, this._createParams(event), event.token)\n                    .then(this._client.protocol2CodeConverter.asWorkspaceEdit);\n            };\n            return this.doSend(filteredEvent, next);\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nclass WillCreateFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillCreateFiles, proto.WillCreateFilesRequest.type, 'willCreate', 'willCreate', (i) => i, client.code2ProtocolConverter.asWillCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willCreateFiles\n            ? middleware.willCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillCreateFilesFeature = WillCreateFilesFeature;\nclass WillRenameFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillRenameFiles, proto.WillRenameFilesRequest.type, 'willRename', 'willRename', (i) => i.oldUri, client.code2ProtocolConverter.asWillRenameFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willRenameFiles\n            ? middleware.willRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillRenameFilesFeature = WillRenameFilesFeature;\nclass WillDeleteFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillDeleteFiles, proto.WillDeleteFilesRequest.type, 'willDelete', 'willDelete', (i) => i, client.code2ProtocolConverter.asWillDeleteFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willDeleteFiles\n            ? middleware.willDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillDeleteFilesFeature = WillDeleteFilesFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingFeature = void 0;\nconst code = require(\"vscode\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass LinkedEditingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, proto.LinkedEditingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const linkedEditingSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'linkedEditingRange');\n        linkedEditingSupport.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.linkedEditingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideLinkedEditingRanges: (document, position, token) => {\n                const client = this._client;\n                const provideLinkedEditing = (document, position, token) => {\n                    return client.sendRequest(proto.LinkedEditingRangeRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asLinkedEditingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(proto.LinkedEditingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideLinkedEditingRange\n                    ? middleware.provideLinkedEditingRange(document, position, token, provideLinkedEditing)\n                    : provideLinkedEditing(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return code.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.LinkedEditingFeature = LinkedEditingFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeHierarchyProvider {\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareTypeHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareTypeHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareTypeHierarchy\n            ? middleware.prepareTypeHierarchy(document, position, token, prepareTypeHierarchy)\n            : prepareTypeHierarchy(document, position, token);\n    }\n    provideTypeHierarchySupertypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySupertypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySupertypes\n            ? middleware.provideTypeHierarchySupertypes(item, token, provideTypeHierarchySupertypes)\n            : provideTypeHierarchySupertypes(item, token);\n    }\n    provideTypeHierarchySubtypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySubtypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySubtypes\n            ? middleware.provideTypeHierarchySubtypes(item, token, provideTypeHierarchySubtypes)\n            : provideTypeHierarchySubtypes(item, token);\n    }\n}\nclass TypeHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.typeHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new TypeHierarchyProvider(client);\n        return [vscode_1.languages.registerTypeHierarchyProvider(client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.TypeHierarchyFeature = TypeHierarchyFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlineValueFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineValueRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineValue').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlineValue').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlineValueRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlineValues.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlineValueProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlineValues: eventEmitter.event,\n            provideInlineValues: (document, viewPort, context, token) => {\n                const client = this._client;\n                const provideInlineValues = (document, viewPort, context, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort),\n                        context: client.code2ProtocolConverter.asInlineValueContext(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, requestParams, token).then((values) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineValues(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlineValues\n                    ? middleware.provideInlineValues(document, viewPort, context, token, provideInlineValues)\n                    : provideInlineValues(document, viewPort, context, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlineValues: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlineValueFeature = InlineValueFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintsFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlayHintsFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlayHintRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const inlayHint = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlayHint');\n        inlayHint.dynamicRegistration = true;\n        inlayHint.resolveSupport = {\n            properties: ['tooltip', 'textEdits', 'label.tooltip', 'label.location', 'label.command']\n        };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlayHint').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlayHintRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlayHints.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlayHintProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlayHints: eventEmitter.event,\n            provideInlayHints: (document, viewPort, token) => {\n                const client = this._client;\n                const provideInlayHints = async (document, viewPort, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort)\n                    };\n                    try {\n                        const values = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, requestParams, token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlayHints(values, token);\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlayHints\n                    ? middleware.provideInlayHints(document, viewPort, token, provideInlayHints)\n                    : provideInlayHints(document, viewPort, token);\n            }\n        };\n        provider.resolveInlayHint = options.resolveProvider === true\n            ? (hint, token) => {\n                const client = this._client;\n                const resolveInlayHint = async (item, token) => {\n                    try {\n                        const value = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, client.code2ProtocolConverter.asInlayHint(item), token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        const result = client.protocol2CodeConverter.asInlayHint(value, token);\n                        return token.isCancellationRequested ? null : result;\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.resolveInlayHint\n                    ? middleware.resolveInlayHint(hint, token, resolveInlayHint)\n                    : resolveInlayHint(hint, token);\n            }\n            : undefined;\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlayHints: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlayHintsFeature = InlayHintsFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass InlineCompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineCompletionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let inlineCompletion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineCompletion');\n        inlineCompletion.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.inlineCompletionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideInlineCompletionItems: (document, position, context, token) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideInlineCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, client.code2ProtocolConverter.asInlineCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineCompletionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideInlineCompletionItems\n                    ? middleware.provideInlineCompletionItems(document, position, context, token, provideInlineCompletionItems)\n                    : provideInlineCompletionItems(document, position, context, token);\n            }\n        };\n        return [vscode_1.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.InlineCompletionItemFeature = InlineCompletionItemFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.BaseLanguageClient = exports.MessageTransports = exports.SuspendMode = exports.State = exports.CloseAction = exports.ErrorAction = exports.RevealOutputChannelOn = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst c2p = require(\"./codeConverter\");\nconst p2c = require(\"./protocolConverter\");\nconst Is = require(\"./utils/is\");\nconst async_1 = require(\"./utils/async\");\nconst UUID = require(\"./utils/uuid\");\nconst progressPart_1 = require(\"./progressPart\");\nconst features_1 = require(\"./features\");\nconst diagnostic_1 = require(\"./diagnostic\");\nconst notebook_1 = require(\"./notebook\");\nconst configuration_1 = require(\"./configuration\");\nconst textSynchronization_1 = require(\"./textSynchronization\");\nconst completion_1 = require(\"./completion\");\nconst hover_1 = require(\"./hover\");\nconst definition_1 = require(\"./definition\");\nconst signatureHelp_1 = require(\"./signatureHelp\");\nconst documentHighlight_1 = require(\"./documentHighlight\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst workspaceSymbol_1 = require(\"./workspaceSymbol\");\nconst reference_1 = require(\"./reference\");\nconst codeAction_1 = require(\"./codeAction\");\nconst codeLens_1 = require(\"./codeLens\");\nconst formatting_1 = require(\"./formatting\");\nconst rename_1 = require(\"./rename\");\nconst documentLink_1 = require(\"./documentLink\");\nconst executeCommand_1 = require(\"./executeCommand\");\nconst fileSystemWatcher_1 = require(\"./fileSystemWatcher\");\nconst colorProvider_1 = require(\"./colorProvider\");\nconst implementation_1 = require(\"./implementation\");\nconst typeDefinition_1 = require(\"./typeDefinition\");\nconst workspaceFolder_1 = require(\"./workspaceFolder\");\nconst foldingRange_1 = require(\"./foldingRange\");\nconst declaration_1 = require(\"./declaration\");\nconst selectionRange_1 = require(\"./selectionRange\");\nconst progress_1 = require(\"./progress\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nconst fileOperations_1 = require(\"./fileOperations\");\nconst linkedEditingRange_1 = require(\"./linkedEditingRange\");\nconst typeHierarchy_1 = require(\"./typeHierarchy\");\nconst inlineValue_1 = require(\"./inlineValue\");\nconst inlayHint_1 = require(\"./inlayHint\");\nconst inlineCompletion_1 = require(\"./inlineCompletion\");\n/**\n * Controls when the output channel is revealed.\n */\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Debug\"] = 0] = \"Debug\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn || (exports.RevealOutputChannelOn = RevealOutputChannelOn = {}));\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction || (exports.ErrorAction = ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction || (exports.CloseAction = CloseAction = {}));\n/**\n * Signals in which state the language client is in.\n */\nvar State;\n(function (State) {\n    /**\n     * The client is stopped or got never started.\n     */\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    /**\n     * The client is starting but not ready yet.\n     */\n    State[State[\"Starting\"] = 3] = \"Starting\";\n    /**\n     * The client is running and ready.\n     */\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State || (exports.State = State = {}));\nvar SuspendMode;\n(function (SuspendMode) {\n    /**\n     * Don't allow suspend mode.\n     */\n    SuspendMode[\"off\"] = \"off\";\n    /**\n     * Support suspend mode even if not all\n     * registered providers have a corresponding\n     * activation listener.\n     */\n    SuspendMode[\"on\"] = \"on\";\n})(SuspendMode || (exports.SuspendMode = SuspendMode = {}));\nvar ResolvedClientOptions;\n(function (ResolvedClientOptions) {\n    function sanitizeIsTrusted(isTrusted) {\n        if (isTrusted === undefined || isTrusted === null) {\n            return false;\n        }\n        if ((typeof isTrusted === 'boolean') || (typeof isTrusted === 'object' && isTrusted !== null && Is.stringArray(isTrusted.enabledCommands))) {\n            return isTrusted;\n        }\n        return false;\n    }\n    ResolvedClientOptions.sanitizeIsTrusted = sanitizeIsTrusted;\n})(ResolvedClientOptions || (ResolvedClientOptions = {}));\nclass DefaultErrorHandler {\n    constructor(client, maxRestartCount) {\n        this.client = client;\n        this.maxRestartCount = maxRestartCount;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return { action: ErrorAction.Continue };\n        }\n        return { action: ErrorAction.Shutdown };\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.maxRestartCount) {\n            return { action: CloseAction.Restart };\n        }\n        else {\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                return { action: CloseAction.DoNotRestart, message: `The ${this.client.name} server crashed ${this.maxRestartCount + 1} times in the last 3 minutes. The server will not be restarted. See the output for more information.` };\n            }\n            else {\n                this.restarts.shift();\n                return { action: CloseAction.Restart };\n            }\n        }\n    }\n}\nvar ClientState;\n(function (ClientState) {\n    ClientState[\"Initial\"] = \"initial\";\n    ClientState[\"Starting\"] = \"starting\";\n    ClientState[\"StartFailed\"] = \"startFailed\";\n    ClientState[\"Running\"] = \"running\";\n    ClientState[\"Stopping\"] = \"stopping\";\n    ClientState[\"Stopped\"] = \"stopped\";\n})(ClientState || (ClientState = {}));\nvar MessageTransports;\n(function (MessageTransports) {\n    function is(value) {\n        let candidate = value;\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\n    }\n    MessageTransports.is = is;\n})(MessageTransports || (exports.MessageTransports = MessageTransports = {}));\nclass BaseLanguageClient {\n    constructor(id, name, clientOptions) {\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        this._diagnosticQueue = new Map();\n        this._diagnosticQueueState = { state: 'idle' };\n        this._features = [];\n        this._dynamicFeatures = new Map();\n        this.workspaceEditLock = new async_1.Semaphore(1);\n        this._id = id;\n        this._name = name;\n        clientOptions = clientOptions || {};\n        const markdown = { isTrusted: false, supportHtml: false };\n        if (clientOptions.markdown !== undefined) {\n            markdown.isTrusted = ResolvedClientOptions.sanitizeIsTrusted(clientOptions.markdown.isTrusted);\n            markdown.supportHtml = clientOptions.markdown.supportHtml === true;\n        }\n        // const defaultInterval = (clientOptions as TestOptions).$testMode ? 50 : 60000;\n        this._clientOptions = {\n            documentSelector: clientOptions.documentSelector ?? [],\n            synchronize: clientOptions.synchronize ?? {},\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\n            outputChannelName: clientOptions.outputChannelName ?? this._name,\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn ?? RevealOutputChannelOn.Error,\n            stdioEncoding: clientOptions.stdioEncoding ?? 'utf8',\n            initializationOptions: clientOptions.initializationOptions,\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\n            errorHandler: clientOptions.errorHandler ?? this.createDefaultErrorHandler(clientOptions.connectionOptions?.maxRestartCount),\n            middleware: clientOptions.middleware ?? {},\n            uriConverters: clientOptions.uriConverters,\n            workspaceFolder: clientOptions.workspaceFolder,\n            connectionOptions: clientOptions.connectionOptions,\n            markdown,\n            // suspend: {\n            // \tmode: clientOptions.suspend?.mode ?? SuspendMode.off,\n            // \tcallback: clientOptions.suspend?.callback ?? (() => Promise.resolve(true)),\n            // \tinterval: clientOptions.suspend?.interval ? Math.max(clientOptions.suspend.interval, defaultInterval) : defaultInterval\n            // },\n            diagnosticPullOptions: clientOptions.diagnosticPullOptions ?? { onChange: true, onSave: false },\n            notebookDocumentOptions: clientOptions.notebookDocumentOptions ?? {}\n        };\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this._state = ClientState.Initial;\n        this._ignoredRegistrations = new Set();\n        this._listeners = [];\n        this._notificationHandlers = new Map();\n        this._pendingNotificationHandlers = new Map();\n        this._notificationDisposables = new Map();\n        this._requestHandlers = new Map();\n        this._pendingRequestHandlers = new Map();\n        this._requestDisposables = new Map();\n        this._progressHandlers = new Map();\n        this._pendingProgressHandlers = new Map();\n        this._progressDisposables = new Map();\n        this._connection = undefined;\n        // this._idleStart = undefined;\n        this._initializeResult = undefined;\n        if (clientOptions.outputChannel) {\n            this._outputChannel = clientOptions.outputChannel;\n            this._disposeOutputChannel = false;\n        }\n        else {\n            this._outputChannel = undefined;\n            this._disposeOutputChannel = true;\n        }\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\n        this._diagnostics = undefined;\n        this._pendingOpenNotifications = new Set();\n        this._pendingChangeSemaphore = new async_1.Semaphore(1);\n        this._pendingChangeDelayer = new async_1.Delayer(250);\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onStop = undefined;\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n        this._tracer = {\n            log: (messageOrDataObject, data) => {\n                if (Is.string(messageOrDataObject)) {\n                    this.logTrace(messageOrDataObject, data);\n                }\n                else {\n                    this.logObjectTrace(messageOrDataObject);\n                }\n            },\n        };\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined, this._clientOptions.markdown.isTrusted, this._clientOptions.markdown.supportHtml);\n        this._syncedDocuments = new Map();\n        this.registerBuiltinFeatures();\n    }\n    get name() {\n        return this._name;\n    }\n    get middleware() {\n        return this._clientOptions.middleware ?? Object.create(null);\n    }\n    get clientOptions() {\n        return this._clientOptions;\n    }\n    get protocol2CodeConverter() {\n        return this._p2c;\n    }\n    get code2ProtocolConverter() {\n        return this._c2p;\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel) {\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\n        }\n        return this._outputChannel;\n    }\n    get traceOutputChannel() {\n        if (this._traceOutputChannel) {\n            return this._traceOutputChannel;\n        }\n        return this.outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    get state() {\n        return this.getPublicState();\n    }\n    get $state() {\n        return this._state;\n    }\n    set $state(value) {\n        let oldState = this.getPublicState();\n        this._state = value;\n        let newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        switch (this.$state) {\n            case ClientState.Starting:\n                return State.Starting;\n            case ClientState.Running:\n                return State.Running;\n            default:\n                return State.Stopped;\n        }\n    }\n    get initializeResult() {\n        return this._initializeResult;\n    }\n    async sendRequest(type, ...params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        const _sendRequest = this._clientOptions.middleware?.sendRequest;\n        if (_sendRequest !== undefined) {\n            let param = undefined;\n            let token = undefined;\n            // Separate cancellation tokens from other parameters for a better client interface\n            if (params.length === 1) {\n                // CancellationToken is an interface, so we need to check if the first param complies to it\n                if (vscode_languageserver_protocol_1.CancellationToken.is(params[0])) {\n                    token = params[0];\n                }\n                else {\n                    param = params[0];\n                }\n            }\n            else if (params.length === 2) {\n                param = params[0];\n                token = params[1];\n            }\n            // Return the general middleware invocation defining `next` as a utility function that reorganizes parameters to\n            // pass them to the original sendRequest function.\n            return _sendRequest(type, param, token, (type, param, token) => {\n                const params = [];\n                // Add the parameters if there are any\n                if (param !== undefined) {\n                    params.push(param);\n                }\n                // Add the cancellation token if there is one\n                if (token !== undefined) {\n                    params.push(token);\n                }\n                return connection.sendRequest(type, ...params);\n            });\n        }\n        else {\n            return connection.sendRequest(type, ...params);\n        }\n    }\n    onRequest(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._requestHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._requestDisposables.set(method, connection.onRequest(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingRequestHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingRequestHandlers.delete(method);\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._requestHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendNotification(type, params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        const needsPendingFullTextDocumentSync = this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        let openNotification;\n        if (needsPendingFullTextDocumentSync && typeof type !== 'string' && type.method === vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method) {\n            openNotification = params?.textDocument.uri;\n            this._pendingOpenNotifications.add(openNotification);\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (needsPendingFullTextDocumentSync) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        // We need to remove the pending open notification before we actually\n        // send the notification over the connection. Otherwise there could be\n        // a request coming in that although the open notification got already put\n        // onto the wire will ignore pending document changes.\n        //\n        // Since the code path of connection.sendNotification is actually sync\n        // until the message is handed of to the writer and the writer as a semaphore\n        // lock with a capacity of 1 no additional async scheduling can happen until\n        // the message is actually handed of.\n        if (openNotification !== undefined) {\n            this._pendingOpenNotifications.delete(openNotification);\n        }\n        const _sendNotification = this._clientOptions.middleware?.sendNotification;\n        return _sendNotification\n            ? _sendNotification(type, connection.sendNotification.bind(connection), params)\n            : connection.sendNotification(type, params);\n    }\n    onNotification(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._notificationHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._notificationDisposables.set(method, connection.onNotification(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingNotificationHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingNotificationHandlers.delete(method);\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._notificationHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendProgress(type, token, value) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        try {\n            // Ensure we have a connection before we force the document sync.\n            const connection = await this.$start();\n            return connection.sendProgress(type, token, value);\n        }\n        catch (error) {\n            this.error(`Sending progress for token ${token} failed.`, error);\n            throw error;\n        }\n    }\n    onProgress(type, token, handler) {\n        this._progressHandlers.set(token, { type, handler });\n        const connection = this.activeConnection();\n        let disposable;\n        const handleWorkDoneProgress = this._clientOptions.middleware?.handleWorkDoneProgress;\n        const realHandler = vscode_languageserver_protocol_1.WorkDoneProgress.is(type) && handleWorkDoneProgress !== undefined\n            ? (params) => {\n                handleWorkDoneProgress(token, params, () => handler(params));\n            }\n            : handler;\n        if (connection !== undefined) {\n            this._progressDisposables.set(token, connection.onProgress(type, token, realHandler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingProgressHandlers.set(token, { type, handler });\n            disposable = {\n                dispose: () => {\n                    this._pendingProgressHandlers.delete(token);\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._progressHandlers.delete(token);\n                disposable.dispose();\n            }\n        };\n    }\n    createDefaultErrorHandler(maxRestartCount) {\n        if (maxRestartCount !== undefined && maxRestartCount < 0) {\n            throw new Error(`Invalid maxRestartCount: ${maxRestartCount}`);\n        }\n        return new DefaultErrorHandler(this, maxRestartCount ?? 4);\n    }\n    async setTrace(value) {\n        this._trace = value;\n        const connection = this.activeConnection();\n        if (connection !== undefined) {\n            await connection.trace(this._trace, this._tracer, {\n                sendNotification: false,\n                traceFormat: this._traceFormat\n            });\n        }\n    }\n    data2String(data) {\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (Is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (Is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    debug(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Debug, RevealOutputChannelOn.Debug, 'Debug', message, data, showNotification);\n    }\n    info(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Info, RevealOutputChannelOn.Info, 'Info', message, data, showNotification);\n    }\n    warn(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Warning, RevealOutputChannelOn.Warn, 'Warn', message, data, showNotification);\n    }\n    error(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Error, RevealOutputChannelOn.Error, 'Error', message, data, showNotification);\n    }\n    logOutputMessage(type, reveal, name, message, data, showNotification) {\n        this.outputChannel.appendLine(`[${name.padEnd(5)} - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data !== null && data !== undefined) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (showNotification === 'force' || (showNotification && this._clientOptions.revealOutputChannelOn <= reveal)) {\n            this.showNotificationMessage(type, message);\n        }\n    }\n    showNotificationMessage(type, message) {\n        message = message ?? 'A request has failed. See the output for more information.';\n        const messageFunc = type === vscode_languageserver_protocol_1.MessageType.Error\n            ? vscode_1.window.showErrorMessage\n            : type === vscode_languageserver_protocol_1.MessageType.Warning\n                ? vscode_1.window.showWarningMessage\n                : vscode_1.window.showInformationMessage;\n        void messageFunc(message, 'Go to output').then((selection) => {\n            if (selection !== undefined) {\n                this.outputChannel.show(true);\n            }\n        });\n    }\n    logTrace(message, data) {\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.traceOutputChannel.appendLine(this.data2String(data));\n        }\n    }\n    logObjectTrace(data) {\n        if (data.isLSPMessage && data.type) {\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\n        }\n        else {\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\n        }\n        if (data) {\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\n        }\n    }\n    needsStart() {\n        return this.$state === ClientState.Initial || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.$state === ClientState.Starting || this.$state === ClientState.Running;\n    }\n    activeConnection() {\n        return this.$state === ClientState.Running && this._connection !== undefined ? this._connection : undefined;\n    }\n    isRunning() {\n        return this.$state === ClientState.Running;\n    }\n    async start() {\n        if (this._disposed === 'disposing' || this._disposed === 'disposed') {\n            throw new Error(`Client got disposed and can't be restarted.`);\n        }\n        if (this.$state === ClientState.Stopping) {\n            throw new Error(`Client is currently stopping. Can only restart a full stopped client`);\n        }\n        // We are already running or are in the process of getting up\n        // to speed.\n        if (this._onStart !== undefined) {\n            return this._onStart;\n        }\n        const [promise, resolve, reject] = this.createOnStartPromise();\n        this._onStart = promise;\n        // If we restart then the diagnostics collection is reused.\n        if (this._diagnostics === undefined) {\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\n                : vscode_1.languages.createDiagnosticCollection();\n        }\n        // When we start make all buffer handlers pending so that they\n        // get added.\n        for (const [method, handler] of this._notificationHandlers) {\n            if (!this._pendingNotificationHandlers.has(method)) {\n                this._pendingNotificationHandlers.set(method, handler);\n            }\n        }\n        for (const [method, handler] of this._requestHandlers) {\n            if (!this._pendingRequestHandlers.has(method)) {\n                this._pendingRequestHandlers.set(method, handler);\n            }\n        }\n        for (const [token, data] of this._progressHandlers) {\n            if (!this._pendingProgressHandlers.has(token)) {\n                this._pendingProgressHandlers.set(token, data);\n            }\n        }\n        this.$state = ClientState.Starting;\n        try {\n            const connection = await this.createConnection();\n            connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        this.error(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        this.warn(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        this.info(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Debug:\n                        this.debug(message.message, undefined, false);\n                        break;\n                    default:\n                        this.outputChannel.appendLine(message.message);\n                }\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        void vscode_1.window.showErrorMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        void vscode_1.window.showWarningMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        void vscode_1.window.showInformationMessage(message.message);\n                        break;\n                    default:\n                        void vscode_1.window.showInformationMessage(message.message);\n                }\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\n                let messageFunc;\n                switch (params.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        messageFunc = vscode_1.window.showErrorMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        messageFunc = vscode_1.window.showWarningMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                        break;\n                    default:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                }\n                let actions = params.actions || [];\n                return messageFunc(params.message, ...actions);\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, (data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type, async (params) => {\n                const showDocument = async (params) => {\n                    const uri = this.protocol2CodeConverter.asUri(params.uri);\n                    try {\n                        if (params.external === true) {\n                            const success = await vscode_1.env.openExternal(uri);\n                            return { success };\n                        }\n                        else {\n                            const options = {};\n                            if (params.selection !== undefined) {\n                                options.selection = this.protocol2CodeConverter.asRange(params.selection);\n                            }\n                            if (params.takeFocus === undefined || params.takeFocus === false) {\n                                options.preserveFocus = true;\n                            }\n                            else if (params.takeFocus === true) {\n                                options.preserveFocus = false;\n                            }\n                            await vscode_1.window.showTextDocument(uri, options);\n                            return { success: true };\n                        }\n                    }\n                    catch (error) {\n                        return { success: false };\n                    }\n                };\n                const middleware = this._clientOptions.middleware.window?.showDocument;\n                if (middleware !== undefined) {\n                    return middleware(params, showDocument);\n                }\n                else {\n                    return showDocument(params);\n                }\n            });\n            connection.listen();\n            await this.initialize(connection);\n            resolve();\n        }\n        catch (error) {\n            this.$state = ClientState.StartFailed;\n            this.error(`${this._name} client: couldn't create connection to server.`, error, 'force');\n            reject(error);\n        }\n        return this._onStart;\n    }\n    createOnStartPromise() {\n        let resolve;\n        let reject;\n        const promise = new Promise((_resolve, _reject) => {\n            resolve = _resolve;\n            reject = _reject;\n        });\n        return [promise, resolve, reject];\n    }\n    async initialize(connection) {\n        this.refreshTrace(connection, false);\n        const initOption = this._clientOptions.initializationOptions;\n        // If the client is locked to a workspace folder use it. In this case the workspace folder\n        // feature is not registered and we need to initialize the value here.\n        const [rootPath, workspaceFolders] = this._clientOptions.workspaceFolder !== undefined\n            ? [this._clientOptions.workspaceFolder.uri.fsPath, [{ uri: this._c2p.asUri(this._clientOptions.workspaceFolder.uri), name: this._clientOptions.workspaceFolder.name }]]\n            : [this._clientGetRootPath(), null];\n        const initParams = {\n            processId: null,\n            clientInfo: {\n                name: vscode_1.env.appName,\n                version: vscode_1.version\n            },\n            locale: this.getLocale(),\n            rootPath: rootPath ? rootPath : null,\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\n            capabilities: this.computeClientCapabilities(),\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\n            workspaceFolders: workspaceFolders\n        };\n        this.fillInitializeParams(initParams);\n        if (this._clientOptions.progressOnInitialization) {\n            const token = UUID.generateUuid();\n            const part = new progressPart_1.ProgressPart(connection, token);\n            initParams.workDoneToken = token;\n            try {\n                const result = await this.doInitialize(connection, initParams);\n                part.done();\n                return result;\n            }\n            catch (error) {\n                part.cancel();\n                throw error;\n            }\n        }\n        else {\n            return this.doInitialize(connection, initParams);\n        }\n    }\n    async doInitialize(connection, initParams) {\n        try {\n            const result = await connection.initialize(initParams);\n            if (result.capabilities.positionEncoding !== undefined && result.capabilities.positionEncoding !== vscode_languageserver_protocol_1.PositionEncodingKind.UTF16) {\n                throw new Error(`Unsupported position encoding (${result.capabilities.positionEncoding}) received from server ${this.name}`);\n            }\n            this._initializeResult = result;\n            this.$state = ClientState.Running;\n            let textDocumentSyncOptions = undefined;\n            if (Is.number(result.capabilities.textDocumentSync)) {\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: false,\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\n                        save: undefined\n                    };\n                }\n                else {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: result.capabilities.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n            }\n            else if (result.capabilities.textDocumentSync !== undefined && result.capabilities.textDocumentSync !== null) {\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\n            }\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\n            connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params => this.handleDiagnostics(params));\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            // Add pending notification, request and progress handlers.\n            for (const [method, handler] of this._pendingNotificationHandlers) {\n                this._notificationDisposables.set(method, connection.onNotification(method, handler));\n            }\n            this._pendingNotificationHandlers.clear();\n            for (const [method, handler] of this._pendingRequestHandlers) {\n                this._requestDisposables.set(method, connection.onRequest(method, handler));\n            }\n            this._pendingRequestHandlers.clear();\n            for (const [token, data] of this._pendingProgressHandlers) {\n                this._progressDisposables.set(token, connection.onProgress(data.type, token, data.handler));\n            }\n            this._pendingProgressHandlers.clear();\n            // if (this._clientOptions.suspend.mode !== SuspendMode.off) {\n            // \tthis._idleInterval =  RAL().timer.setInterval(() => this.checkSuspend(), this._clientOptions.suspend.interval);\n            // }\n            await connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookConfigurationChanged(connection);\n            this.initializeFeatures(connection);\n            return result;\n        }\n        catch (error) {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    void this.initialize(connection);\n                }\n                else {\n                    void this.stop();\n                }\n            }\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\n                void vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\n                    if (item && item.id === 'retry') {\n                        void this.initialize(connection);\n                    }\n                    else {\n                        void this.stop();\n                    }\n                });\n            }\n            else {\n                if (error && error.message) {\n                    void vscode_1.window.showErrorMessage(error.message);\n                }\n                this.error('Server initialization failed.', error);\n                void this.stop();\n            }\n            throw error;\n        }\n    }\n    _clientGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    stop(timeout = 2000) {\n        // Wait 2 seconds on stop\n        return this.shutdown('stop', timeout);\n    }\n    dispose(timeout = 2000) {\n        try {\n            this._disposed = 'disposing';\n            return this.stop(timeout);\n        }\n        finally {\n            this._disposed = 'disposed';\n        }\n    }\n    async shutdown(mode, timeout) {\n        // If the client is stopped or in its initial state return.\n        if (this.$state === ClientState.Stopped || this.$state === ClientState.Initial) {\n            return;\n        }\n        // If we are stopping the client and have a stop promise return it.\n        if (this.$state === ClientState.Stopping) {\n            if (this._onStop !== undefined) {\n                return this._onStop;\n            }\n            else {\n                throw new Error(`Client is stopping but no stop promise available.`);\n            }\n        }\n        const connection = this.activeConnection();\n        // We can't stop a client that is not running (e.g. has no connection). Especially not\n        // on that us starting since it can't be correctly synchronized.\n        if (connection === undefined || this.$state !== ClientState.Running) {\n            throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);\n        }\n        this._initializeResult = undefined;\n        this.$state = ClientState.Stopping;\n        this.cleanUp(mode);\n        const tp = new Promise(c => { (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(c, timeout); });\n        const shutdown = (async (connection) => {\n            await connection.shutdown();\n            await connection.exit();\n            return connection;\n        })(connection);\n        return this._onStop = Promise.race([tp, shutdown]).then((connection) => {\n            // The connection won the race with the timeout.\n            if (connection !== undefined) {\n                connection.end();\n                connection.dispose();\n            }\n            else {\n                this.error(`Stopping server timed out`, undefined, false);\n                throw new Error(`Stopping the server timed out`);\n            }\n        }, (error) => {\n            this.error(`Stopping server failed`, error, false);\n            throw error;\n        }).finally(() => {\n            this.$state = ClientState.Stopped;\n            mode === 'stop' && this.cleanUpChannel();\n            this._onStart = undefined;\n            this._onStop = undefined;\n            this._connection = undefined;\n            this._ignoredRegistrations.clear();\n        });\n    }\n    cleanUp(mode) {\n        // purge outstanding file events.\n        this._fileEvents = [];\n        this._fileEventDelayer.cancel();\n        const disposables = this._listeners.splice(0, this._listeners.length);\n        for (const disposable of disposables) {\n            disposable.dispose();\n        }\n        if (this._syncedDocuments) {\n            this._syncedDocuments.clear();\n        }\n        // Clear features in reverse order;\n        for (const feature of Array.from(this._features.entries()).map(entry => entry[1]).reverse()) {\n            feature.clear();\n        }\n        if (mode === 'stop' && this._diagnostics !== undefined) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n        if (this._idleInterval !== undefined) {\n            this._idleInterval.dispose();\n            this._idleInterval = undefined;\n        }\n        // this._idleStart = undefined;\n    }\n    cleanUpChannel() {\n        if (this._outputChannel !== undefined && this._disposeOutputChannel) {\n            this._outputChannel.dispose();\n            this._outputChannel = undefined;\n        }\n    }\n    notifyFileEvent(event) {\n        const client = this;\n        async function didChangeWatchedFile(event) {\n            client._fileEvents.push(event);\n            return client._fileEventDelayer.trigger(async () => {\n                await client.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, { changes: client._fileEvents });\n                client._fileEvents = [];\n            });\n        }\n        const workSpaceMiddleware = this.clientOptions.middleware?.workspace;\n        (workSpaceMiddleware?.didChangeWatchedFile ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event)).catch((error) => {\n            client.error(`Notify file events failed.`, error);\n        });\n    }\n    async sendPendingFullTextDocumentChanges(connection) {\n        return this._pendingChangeSemaphore.lock(async () => {\n            try {\n                const changes = this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);\n                if (changes.length === 0) {\n                    return;\n                }\n                for (const document of changes) {\n                    const params = this.code2ProtocolConverter.asChangeTextDocumentParams(document);\n                    // We await the send and not the delivery since it is more or less the same for\n                    // notifications.\n                    await connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    this._didChangeTextDocumentFeature.notificationSent(document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                }\n            }\n            catch (error) {\n                this.error(`Sending pending changes failed`, error, false);\n                throw error;\n            }\n        });\n    }\n    triggerPendingChangeDelivery() {\n        this._pendingChangeDelayer.trigger(async () => {\n            const connection = this.activeConnection();\n            if (connection === undefined) {\n                this.triggerPendingChangeDelivery();\n                return;\n            }\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }).catch((error) => this.error(`Delivering pending changes failed`, error, false));\n    }\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        const key = params.uri;\n        if (this._diagnosticQueueState.state === 'busy' && this._diagnosticQueueState.document === key) {\n            // Cancel the active run;\n            this._diagnosticQueueState.tokenSource.cancel();\n        }\n        this._diagnosticQueue.set(params.uri, params.diagnostics);\n        this.triggerDiagnosticQueue();\n    }\n    triggerDiagnosticQueue() {\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => { this.workDiagnosticQueue(); });\n    }\n    workDiagnosticQueue() {\n        if (this._diagnosticQueueState.state === 'busy') {\n            return;\n        }\n        const next = this._diagnosticQueue.entries().next();\n        if (next.done === true) {\n            // Nothing in the queue\n            return;\n        }\n        const [document, diagnostics] = next.value;\n        this._diagnosticQueue.delete(document);\n        const tokenSource = new vscode_1.CancellationTokenSource();\n        this._diagnosticQueueState = { state: 'busy', document: document, tokenSource };\n        this._p2c.asDiagnostics(diagnostics, tokenSource.token).then((converted) => {\n            if (!tokenSource.token.isCancellationRequested) {\n                const uri = this._p2c.asUri(document);\n                const middleware = this.clientOptions.middleware;\n                if (middleware.handleDiagnostics) {\n                    middleware.handleDiagnostics(uri, converted, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\n                }\n                else {\n                    this.setDiagnostics(uri, converted);\n                }\n            }\n        }).finally(() => {\n            this._diagnosticQueueState = { state: 'idle' };\n            this.triggerDiagnosticQueue();\n        });\n    }\n    setDiagnostics(uri, diagnostics) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(uri, diagnostics);\n    }\n    getLocale() {\n        return vscode_1.env.language;\n    }\n    async $start() {\n        if (this.$state === ClientState.StartFailed) {\n            throw new Error(`Previous start failed. Can't restart server.`);\n        }\n        await this.start();\n        const connection = this.activeConnection();\n        if (connection === undefined) {\n            throw new Error(`Starting server failed`);\n        }\n        return connection;\n    }\n    async createConnection() {\n        let errorHandler = (error, message, count) => {\n            this.handleConnectionError(error, message, count).catch((error) => this.error(`Handling connection error failed`, error));\n        };\n        let closeHandler = () => {\n            this.handleConnectionClosed().catch((error) => this.error(`Handling connection close failed`, error));\n        };\n        const transports = await this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8');\n        this._connection = createConnection(transports.reader, transports.writer, errorHandler, closeHandler, this._clientOptions.connectionOptions);\n        return this._connection;\n    }\n    async handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.$state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this._connection !== undefined) {\n                this._connection.dispose();\n            }\n        }\n        catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n        let handlerResult = { action: CloseAction.DoNotRestart };\n        if (this.$state !== ClientState.Stopping) {\n            try {\n                handlerResult = await this._clientOptions.errorHandler.closed();\n            }\n            catch (error) {\n                // Ignore errors coming from the error handler.\n            }\n        }\n        this._connection = undefined;\n        if (handlerResult.action === CloseAction.DoNotRestart) {\n            this.error(handlerResult.message ?? 'Connection to server got closed. Server will not be restarted.', undefined, handlerResult.handled === true ? false : 'force');\n            this.cleanUp('stop');\n            if (this.$state === ClientState.Starting) {\n                this.$state = ClientState.StartFailed;\n            }\n            else {\n                this.$state = ClientState.Stopped;\n            }\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n        }\n        else if (handlerResult.action === CloseAction.Restart) {\n            this.info(handlerResult.message ?? 'Connection to server got closed. Server will restart.', !handlerResult.handled);\n            this.cleanUp('restart');\n            this.$state = ClientState.Initial;\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n            this.start().catch((error) => this.error(`Restarting server failed`, error, 'force'));\n        }\n    }\n    async handleConnectionError(error, message, count) {\n        const handlerResult = await this._clientOptions.errorHandler.error(error, message, count);\n        if (handlerResult.action === ErrorAction.Shutdown) {\n            this.error(handlerResult.message ?? `Client ${this._name}: connection to server is erroring.\\n${error.message}\\nShutting down server.`, undefined, handlerResult.handled === true ? false : 'force');\n            this.stop().catch((error) => {\n                this.error(`Stopping server failed`, error, false);\n            });\n        }\n        else {\n            this.error(handlerResult.message ??\n                `Client ${this._name}: connection to server is erroring.\\n${error.message}`, undefined, handlerResult.handled === true ? false : 'force');\n        }\n    }\n    hookConfigurationChanged(connection) {\n        this._listeners.push(vscode_1.workspace.onDidChangeConfiguration(() => {\n            this.refreshTrace(connection, true);\n        }));\n    }\n    refreshTrace(connection, sendNotification = false) {\n        const config = vscode_1.workspace.getConfiguration(this._id);\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        if (config) {\n            const traceConfig = config.get('trace.server', 'off');\n            if (typeof traceConfig === 'string') {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\n            }\n            else {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\n            }\n        }\n        this._trace = trace;\n        this._traceFormat = traceFormat;\n        connection.trace(this._trace, this._tracer, {\n            sendNotification,\n            traceFormat: this._traceFormat\n        }).catch((error) => { this.error(`Updating trace failed with error`, error, false); });\n    }\n    hookFileEvents(_connection) {\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (Is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\n    }\n    registerFeatures(features) {\n        for (let feature of features) {\n            this.registerFeature(feature);\n        }\n    }\n    registerFeature(feature) {\n        this._features.push(feature);\n        if (features_1.DynamicFeature.is(feature)) {\n            const registrationType = feature.registrationType;\n            this._dynamicFeatures.set(registrationType.method, feature);\n        }\n    }\n    getFeature(request) {\n        return this._dynamicFeatures.get(request);\n    }\n    hasDedicatedTextSynchronizationFeature(textDocument) {\n        const feature = this.getFeature(vscode_languageserver_protocol_1.NotebookDocumentSyncRegistrationType.method);\n        if (feature === undefined || !(feature instanceof notebook_1.NotebookDocumentSyncFeature)) {\n            return false;\n        }\n        return feature.handles(textDocument);\n    }\n    registerBuiltinFeatures() {\n        const pendingFullTextDocumentChanges = new Map();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this.registerFeature(new textSynchronization_1.DidOpenTextDocumentFeature(this, this._syncedDocuments));\n        this._didChangeTextDocumentFeature = new textSynchronization_1.DidChangeTextDocumentFeature(this, pendingFullTextDocumentChanges);\n        this._didChangeTextDocumentFeature.onPendingChangeAdded(() => {\n            this.triggerPendingChangeDelivery();\n        });\n        this.registerFeature(this._didChangeTextDocumentFeature);\n        this.registerFeature(new textSynchronization_1.WillSaveFeature(this));\n        this.registerFeature(new textSynchronization_1.WillSaveWaitUntilFeature(this));\n        this.registerFeature(new textSynchronization_1.DidSaveTextDocumentFeature(this));\n        this.registerFeature(new textSynchronization_1.DidCloseTextDocumentFeature(this, this._syncedDocuments, pendingFullTextDocumentChanges));\n        this.registerFeature(new fileSystemWatcher_1.FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\n        this.registerFeature(new completion_1.CompletionItemFeature(this));\n        this.registerFeature(new hover_1.HoverFeature(this));\n        this.registerFeature(new signatureHelp_1.SignatureHelpFeature(this));\n        this.registerFeature(new definition_1.DefinitionFeature(this));\n        this.registerFeature(new reference_1.ReferencesFeature(this));\n        this.registerFeature(new documentHighlight_1.DocumentHighlightFeature(this));\n        this.registerFeature(new documentSymbol_1.DocumentSymbolFeature(this));\n        this.registerFeature(new workspaceSymbol_1.WorkspaceSymbolFeature(this));\n        this.registerFeature(new codeAction_1.CodeActionFeature(this));\n        this.registerFeature(new codeLens_1.CodeLensFeature(this));\n        this.registerFeature(new formatting_1.DocumentFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentRangeFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentOnTypeFormattingFeature(this));\n        this.registerFeature(new rename_1.RenameFeature(this));\n        this.registerFeature(new documentLink_1.DocumentLinkFeature(this));\n        this.registerFeature(new executeCommand_1.ExecuteCommandFeature(this));\n        this.registerFeature(new configuration_1.SyncConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        // We only register the workspace folder feature if the client is not locked\n        // to a specific workspace folder.\n        if (this.clientOptions.workspaceFolder === undefined) {\n            this.registerFeature(new workspaceFolder_1.WorkspaceFoldersFeature(this));\n        }\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\n        this.registerFeature(new progress_1.ProgressFeature(this));\n        this.registerFeature(new callHierarchy_1.CallHierarchyFeature(this));\n        this.registerFeature(new semanticTokens_1.SemanticTokensFeature(this));\n        this.registerFeature(new linkedEditingRange_1.LinkedEditingFeature(this));\n        this.registerFeature(new fileOperations_1.DidCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidDeleteFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillDeleteFilesFeature(this));\n        this.registerFeature(new typeHierarchy_1.TypeHierarchyFeature(this));\n        this.registerFeature(new inlineValue_1.InlineValueFeature(this));\n        this.registerFeature(new inlayHint_1.InlayHintsFeature(this));\n        this.registerFeature(new diagnostic_1.DiagnosticFeature(this));\n        this.registerFeature(new notebook_1.NotebookDocumentSyncFeature(this));\n    }\n    registerProposedFeatures() {\n        this.registerFeatures(ProposedFeatures.createAll(this));\n    }\n    fillInitializeParams(params) {\n        for (let feature of this._features) {\n            if (Is.func(feature.fillInitializeParams)) {\n                feature.fillInitializeParams(params);\n            }\n        }\n    }\n    computeClientCapabilities() {\n        const result = {};\n        (0, features_1.ensure)(result, 'workspace').applyEdit = true;\n        const workspaceEdit = (0, features_1.ensure)((0, features_1.ensure)(result, 'workspace'), 'workspaceEdit');\n        workspaceEdit.documentChanges = true;\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\n        workspaceEdit.normalizesLineEndings = true;\n        workspaceEdit.changeAnnotationSupport = {\n            groupsOnLabel: true\n        };\n        const diagnostics = (0, features_1.ensure)((0, features_1.ensure)(result, 'textDocument'), 'publishDiagnostics');\n        diagnostics.relatedInformation = true;\n        diagnostics.versionSupport = false;\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        diagnostics.codeDescriptionSupport = true;\n        diagnostics.dataSupport = true;\n        const windowCapabilities = (0, features_1.ensure)(result, 'window');\n        const showMessage = (0, features_1.ensure)(windowCapabilities, 'showMessage');\n        showMessage.messageActionItem = { additionalPropertiesSupport: true };\n        const showDocument = (0, features_1.ensure)(windowCapabilities, 'showDocument');\n        showDocument.support = true;\n        const generalCapabilities = (0, features_1.ensure)(result, 'general');\n        generalCapabilities.staleRequestSupport = {\n            cancel: true,\n            retryOnContentModified: Array.from(BaseLanguageClient.RequestsToCancelOnContentModified)\n        };\n        generalCapabilities.regularExpressions = { engine: 'ECMAScript', version: 'ES2020' };\n        generalCapabilities.markdown = {\n            parser: 'marked',\n            version: '1.1.0',\n        };\n        generalCapabilities.positionEncodings = ['utf-16'];\n        if (this._clientOptions.markdown.supportHtml) {\n            generalCapabilities.markdown.allowedTags = ['ul', 'li', 'p', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'];\n        }\n        for (let feature of this._features) {\n            feature.fillClientCapabilities(result);\n        }\n        return result;\n    }\n    initializeFeatures(_connection) {\n        const documentSelector = this._clientOptions.documentSelector;\n        for (const feature of this._features) {\n            if (Is.func(feature.preInitialize)) {\n                feature.preInitialize(this._capabilities, documentSelector);\n            }\n        }\n        for (const feature of this._features) {\n            feature.initialize(this._capabilities, documentSelector);\n        }\n    }\n    async handleRegistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleRegisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doRegisterCapability(nextParams));\n        }\n        else {\n            return this.doRegisterCapability(params);\n        }\n    }\n    async doRegisterCapability(params) {\n        // We will not receive a registration call before a client is running\n        // from a server. However if we stop or shutdown we might which might\n        // try to restart the server. So ignore registrations if we are not running\n        if (!this.isRunning()) {\n            for (const registration of params.registrations) {\n                this._ignoredRegistrations.add(registration.id);\n            }\n            return;\n        }\n        for (const registration of params.registrations) {\n            const feature = this._dynamicFeatures.get(registration.method);\n            if (feature === undefined) {\n                return Promise.reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\n            }\n            const options = registration.registerOptions ?? {};\n            options.documentSelector = options.documentSelector ?? this._clientOptions.documentSelector;\n            const data = {\n                id: registration.id,\n                registerOptions: options\n            };\n            try {\n                feature.register(data);\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        }\n    }\n    async handleUnregistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleUnregisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doUnregisterCapability(nextParams));\n        }\n        else {\n            return this.doUnregisterCapability(params);\n        }\n    }\n    async doUnregisterCapability(params) {\n        for (const unregistration of params.unregisterations) {\n            if (this._ignoredRegistrations.has(unregistration.id)) {\n                continue;\n            }\n            const feature = this._dynamicFeatures.get(unregistration.method);\n            if (!feature) {\n                return Promise.reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\n            }\n            feature.unregister(unregistration.id);\n        }\n    }\n    async handleApplyWorkspaceEdit(params) {\n        const workspaceEdit = params.edit;\n        // Make sure we convert workspace edits one after the other. Otherwise\n        // we might execute a workspace edit received first after we received another\n        // one since the conversion might race.\n        const converted = await this.workspaceEditLock.lock(() => {\n            return this._p2c.asWorkspaceEdit(workspaceEdit);\n        });\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        const openTextDocuments = new Map();\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\n                    const changeUri = this._p2c.asUri(change.textDocument.uri).toString();\n                    const textDocument = openTextDocuments.get(changeUri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return Is.asPromise(vscode_1.workspace.applyEdit(converted).then((value) => { return { applied: value }; }));\n    }\n    handleFailedRequest(type, token, error, defaultValue, showNotification = true) {\n        // If we get a request cancel or a content modified don't log anything.\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError) {\n            // The connection got disposed while we were waiting for a response.\n            // Simply return the default value. Is the best we can do.\n            if (error.code === vscode_languageserver_protocol_1.ErrorCodes.PendingResponseRejected || error.code === vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive) {\n                return defaultValue;\n            }\n            if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ServerCancelled) {\n                if (token !== undefined && token.isCancellationRequested) {\n                    return defaultValue;\n                }\n                else {\n                    if (error.data !== undefined) {\n                        throw new features_1.LSPCancellationError(error.data);\n                    }\n                    else {\n                        throw new vscode_1.CancellationError();\n                    }\n                }\n            }\n            else if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ContentModified) {\n                if (BaseLanguageClient.RequestsToCancelOnContentModified.has(type.method) || BaseLanguageClient.CancellableResolveCalls.has(type.method)) {\n                    throw new vscode_1.CancellationError();\n                }\n                else {\n                    return defaultValue;\n                }\n            }\n        }\n        this.error(`Request ${type.method} failed.`, error, showNotification);\n        throw error;\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\nBaseLanguageClient.RequestsToCancelOnContentModified = new Set([\n    vscode_languageserver_protocol_1.SemanticTokensRequest.method,\n    vscode_languageserver_protocol_1.SemanticTokensRangeRequest.method,\n    vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.method\n]);\nBaseLanguageClient.CancellableResolveCalls = new Set([\n    vscode_languageserver_protocol_1.CompletionResolveRequest.method,\n    vscode_languageserver_protocol_1.CodeLensResolveRequest.method,\n    vscode_languageserver_protocol_1.CodeActionResolveRequest.method,\n    vscode_languageserver_protocol_1.InlayHintResolveRequest.method,\n    vscode_languageserver_protocol_1.DocumentLinkResolveRequest.method,\n    vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.method\n]);\nclass ConsoleLogger {\n    error(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.error(message);\n    }\n    warn(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.warn(message);\n    }\n    info(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.info(message);\n    }\n    log(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.log(message);\n    }\n}\nfunction createConnection(input, output, errorHandler, closeHandler, options) {\n    const logger = new ConsoleLogger();\n    const connection = (0, vscode_languageserver_protocol_1.createProtocolConnection)(input, output, logger, options);\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    const result = {\n        listen: () => connection.listen(),\n        sendRequest: connection.sendRequest,\n        onRequest: connection.onRequest,\n        hasPendingResponse: connection.hasPendingResponse,\n        sendNotification: connection.sendNotification,\n        onNotification: connection.onNotification,\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\n            const defaultTraceOptions = {\n                sendNotification: false,\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\n            };\n            if (sendNotificationOrTraceOptions === undefined) {\n                return connection.trace(value, tracer, defaultTraceOptions);\n            }\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n            else {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n        },\n        initialize: (params) => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params);\n        },\n        shutdown: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined);\n        },\n        exit: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type);\n        },\n        end: () => connection.end(),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\n// Exporting proposed protocol.\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    function createAll(_client) {\n        let result = [\n            new inlineCompletion_1.InlineCompletionItemFeature(_client)\n        ];\n        return result;\n    }\n    ProposedFeatures.createAll = createAll;\n})(ProposedFeatures || (exports.ProposedFeatures = ProposedFeatures = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.terminate = void 0;\nconst cp = require(\"child_process\");\nconst path_1 = require(\"path\");\nconst isWindows = (process.platform === 'win32');\nconst isMacintosh = (process.platform === 'darwin');\nconst isLinux = (process.platform === 'linux');\nfunction terminate(process, cwd) {\n    if (isWindows) {\n        try {\n            // This we run in Atom execFileSync is available.\n            // Ignore stderr since this is otherwise piped to parent.stderr\n            // which might be already closed.\n            let options = {\n                stdio: ['pipe', 'pipe', 'ignore']\n            };\n            if (cwd) {\n                options.cwd = cwd;\n            }\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\n            return true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else if (isLinux || isMacintosh) {\n        try {\n            var cmd = (0, path_1.join)(__dirname, 'terminateProcess.sh');\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\n            return result.error ? false : true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else {\n        process.kill('SIGKILL');\n        return true;\n    }\n}\nexports.terminate = terminate;\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');", "'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n", "'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n", "'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n", "'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n", "'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n", "'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n", "'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n", "'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n", "'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n", "'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n", "'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n", "'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n", "'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n", "'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n", "'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n", "'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticPullMode = exports.vsdiag = void 0;\n__exportStar(require(\"vscode-languageserver-protocol\"), exports);\n__exportStar(require(\"./features\"), exports);\nvar diagnostic_1 = require(\"./diagnostic\");\nObject.defineProperty(exports, \"vsdiag\", { enumerable: true, get: function () { return diagnostic_1.vsdiag; } });\nObject.defineProperty(exports, \"DiagnosticPullMode\", { enumerable: true, get: function () { return diagnostic_1.DiagnosticPullMode; } });\n__exportStar(require(\"./client\"), exports);\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingMonitor = exports.LanguageClient = exports.TransportKind = void 0;\nconst cp = require(\"child_process\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst vscode_1 = require(\"vscode\");\nconst Is = require(\"../common/utils/is\");\nconst client_1 = require(\"../common/client\");\nconst processes_1 = require(\"./processes\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n// Import SemVer functions individually to avoid circular dependencies in SemVer\nconst semverParse = require(\"semver/functions/parse\");\nconst semverSatisfies = require(\"semver/functions/satisfies\");\n__exportStar(require(\"vscode-languageserver-protocol/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nconst REQUIRED_VSCODE_VERSION = '^1.82.0'; // do not change format, updated by `updateVSCode` script\nvar TransportKind;\n(function (TransportKind) {\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\n})(TransportKind || (exports.TransportKind = TransportKind = {}));\nvar Transport;\n(function (Transport) {\n    function isSocket(value) {\n        const candidate = value;\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\n    }\n    Transport.isSocket = isSocket;\n})(Transport || (Transport = {}));\nvar Executable;\n(function (Executable) {\n    function is(value) {\n        return Is.string(value.command);\n    }\n    Executable.is = is;\n})(Executable || (Executable = {}));\nvar NodeModule;\n(function (NodeModule) {\n    function is(value) {\n        return Is.string(value.module);\n    }\n    NodeModule.is = is;\n})(NodeModule || (NodeModule = {}));\nvar StreamInfo;\n(function (StreamInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.writer !== undefined && candidate.reader !== undefined;\n    }\n    StreamInfo.is = is;\n})(StreamInfo || (StreamInfo = {}));\nvar ChildProcessInfo;\n(function (ChildProcessInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.process !== undefined && typeof candidate.detached === 'boolean';\n    }\n    ChildProcessInfo.is = is;\n})(ChildProcessInfo || (ChildProcessInfo = {}));\nclass LanguageClient extends client_1.BaseLanguageClient {\n    constructor(arg1, arg2, arg3, arg4, arg5) {\n        let id;\n        let name;\n        let serverOptions;\n        let clientOptions;\n        let forceDebug;\n        if (Is.string(arg2)) {\n            id = arg1;\n            name = arg2;\n            serverOptions = arg3;\n            clientOptions = arg4;\n            forceDebug = !!arg5;\n        }\n        else {\n            id = arg1.toLowerCase();\n            name = arg1;\n            serverOptions = arg2;\n            clientOptions = arg3;\n            forceDebug = arg4;\n        }\n        if (forceDebug === undefined) {\n            forceDebug = false;\n        }\n        super(id, name, clientOptions);\n        this._serverOptions = serverOptions;\n        this._forceDebug = forceDebug;\n        this._isInDebugMode = forceDebug;\n        try {\n            this.checkVersion();\n        }\n        catch (error) {\n            if (Is.string(error.message)) {\n                this.outputChannel.appendLine(error.message);\n            }\n            throw error;\n        }\n    }\n    checkVersion() {\n        const codeVersion = semverParse(vscode_1.version);\n        if (!codeVersion) {\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\n        }\n        // Remove the insider pre-release since we stay API compatible.\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\n            codeVersion.prerelease = [];\n        }\n        if (!semverSatisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\n        }\n    }\n    get isInDebugMode() {\n        return this._isInDebugMode;\n    }\n    async restart() {\n        await this.stop();\n        // We are in debug mode. Wait a little before we restart\n        // so that the debug port can be freed. We can safely ignore\n        // the disposable returned from start since it will call\n        // stop on the same client instance.\n        if (this.isInDebugMode) {\n            await new Promise((resolve) => setTimeout(resolve, 1000));\n            await this.start();\n        }\n        else {\n            await this.start();\n        }\n    }\n    stop(timeout = 2000) {\n        return super.stop(timeout).finally(() => {\n            if (this._serverProcess) {\n                const toCheck = this._serverProcess;\n                this._serverProcess = undefined;\n                if (this._isDetached === undefined || !this._isDetached) {\n                    this.checkProcessDied(toCheck);\n                }\n                this._isDetached = undefined;\n            }\n        });\n    }\n    checkProcessDied(childProcess) {\n        if (!childProcess || childProcess.pid === undefined) {\n            return;\n        }\n        setTimeout(() => {\n            // Test if the process is still alive. Throws an exception if not\n            try {\n                if (childProcess.pid !== undefined) {\n                    process.kill(childProcess.pid, 0);\n                    (0, processes_1.terminate)(childProcess);\n                }\n            }\n            catch (error) {\n                // All is fine.\n            }\n        }, 2000);\n    }\n    handleConnectionClosed() {\n        this._serverProcess = undefined;\n        return super.handleConnectionClosed();\n    }\n    fillInitializeParams(params) {\n        super.fillInitializeParams(params);\n        if (params.processId === null) {\n            params.processId = process.pid;\n        }\n    }\n    createMessageTransports(encoding) {\n        function getEnvironment(env, fork) {\n            if (!env && !fork) {\n                return undefined;\n            }\n            const result = Object.create(null);\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\n            if (fork) {\n                result['ELECTRON_RUN_AS_NODE'] = '1';\n                result['ELECTRON_NO_ASAR'] = '1';\n            }\n            if (env) {\n                Object.keys(env).forEach(key => result[key] = env[key]);\n            }\n            return result;\n        }\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\n        function startedInDebugMode() {\n            let args = process.execArgv;\n            if (args) {\n                return args.some((arg) => {\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\n                        debugEquals.some(value => arg === value);\n                });\n            }\n            return false;\n        }\n        function assertStdio(process) {\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\n                throw new Error('Process created without stdio streams');\n            }\n        }\n        const server = this._serverOptions;\n        // We got a function.\n        if (Is.func(server)) {\n            return server().then((result) => {\n                if (client_1.MessageTransports.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return result;\n                }\n                else if (StreamInfo.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return { reader: new node_1.StreamMessageReader(result.reader), writer: new node_1.StreamMessageWriter(result.writer) };\n                }\n                else {\n                    let cp;\n                    if (ChildProcessInfo.is(result)) {\n                        cp = result.process;\n                        this._isDetached = result.detached;\n                    }\n                    else {\n                        cp = result;\n                        this._isDetached = false;\n                    }\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                    return { reader: new node_1.StreamMessageReader(cp.stdout), writer: new node_1.StreamMessageWriter(cp.stdin) };\n                }\n            });\n        }\n        let json;\n        let runDebug = server;\n        if (runDebug.run || runDebug.debug) {\n            if (this._forceDebug || startedInDebugMode()) {\n                json = runDebug.debug;\n                this._isInDebugMode = true;\n            }\n            else {\n                json = runDebug.run;\n                this._isInDebugMode = false;\n            }\n        }\n        else {\n            json = server;\n        }\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\n            if (NodeModule.is(json) && json.module) {\n                let node = json;\n                let transport = node.transport || TransportKind.stdio;\n                if (node.runtime) {\n                    const args = [];\n                    const options = node.options ?? Object.create(null);\n                    if (options.execArgv) {\n                        options.execArgv.forEach(element => args.push(element));\n                    }\n                    args.push(node.module);\n                    if (node.args) {\n                        node.args.forEach(element => args.push(element));\n                    }\n                    const execOptions = Object.create(null);\n                    execOptions.cwd = serverWorkingDir;\n                    execOptions.env = getEnvironment(options.env, false);\n                    const runtime = this._getRuntimePath(node.runtime, serverWorkingDir);\n                    let pipeName = undefined;\n                    if (transport === TransportKind.ipc) {\n                        // exec options not correctly typed in lib\n                        execOptions.stdio = [null, null, null, 'ipc'];\n                        args.push('--node-ipc');\n                    }\n                    else if (transport === TransportKind.stdio) {\n                        args.push('--stdio');\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        pipeName = (0, node_1.generateRandomPipeName)();\n                        args.push(`--pipe=${pipeName}`);\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        args.push(`--socket=${transport.port}`);\n                    }\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                        const serverProcess = cp.spawn(runtime, args, execOptions);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return handleChildProcessStartError(serverProcess, `Launching server using runtime ${runtime} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        if (transport === TransportKind.ipc) {\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return Promise.resolve({ reader: new node_1.IPCMessageReader(serverProcess), writer: new node_1.IPCMessageWriter(serverProcess) });\n                        }\n                        else {\n                            return Promise.resolve({ reader: new node_1.StreamMessageReader(serverProcess.stdout), writer: new node_1.StreamMessageWriter(serverProcess.stdin) });\n                        }\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        return (0, node_1.createClientPipeTransport)(pipeName).then((transport) => {\n                            const process = cp.spawn(runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return handleChildProcessStartError(process, `Launching server using runtime ${runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        return (0, node_1.createClientSocketTransport)(transport.port).then((transport) => {\n                            const process = cp.spawn(runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return handleChildProcessStartError(process, `Launching server using runtime ${runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                }\n                else {\n                    let pipeName = undefined;\n                    return new Promise((resolve, reject) => {\n                        const args = (node.args && node.args.slice()) ?? [];\n                        if (transport === TransportKind.ipc) {\n                            args.push('--node-ipc');\n                        }\n                        else if (transport === TransportKind.stdio) {\n                            args.push('--stdio');\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            pipeName = (0, node_1.generateRandomPipeName)();\n                            args.push(`--pipe=${pipeName}`);\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            args.push(`--socket=${transport.port}`);\n                        }\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\n                        const options = node.options ?? Object.create(null);\n                        options.env = getEnvironment(options.env, true);\n                        options.execArgv = options.execArgv || [];\n                        options.cwd = serverWorkingDir;\n                        options.silent = true;\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                            const sp = cp.fork(node.module, args || [], options);\n                            assertStdio(sp);\n                            this._serverProcess = sp;\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            if (transport === TransportKind.ipc) {\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                resolve({ reader: new node_1.IPCMessageReader(this._serverProcess), writer: new node_1.IPCMessageWriter(this._serverProcess) });\n                            }\n                            else {\n                                resolve({ reader: new node_1.StreamMessageReader(sp.stdout), writer: new node_1.StreamMessageWriter(sp.stdin) });\n                            }\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            (0, node_1.createClientPipeTransport)(pipeName).then((transport) => {\n                                const sp = cp.fork(node.module, args || [], options);\n                                assertStdio(sp);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                }, reject);\n                            }, reject);\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            (0, node_1.createClientSocketTransport)(transport.port).then((transport) => {\n                                const sp = cp.fork(node.module, args || [], options);\n                                assertStdio(sp);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                }, reject);\n                            }, reject);\n                        }\n                    });\n                }\n            }\n            else if (Executable.is(json) && json.command) {\n                const command = json;\n                const args = json.args !== undefined ? json.args.slice(0) : [];\n                let pipeName = undefined;\n                const transport = json.transport;\n                if (transport === TransportKind.stdio) {\n                    args.push('--stdio');\n                }\n                else if (transport === TransportKind.pipe) {\n                    pipeName = (0, node_1.generateRandomPipeName)();\n                    args.push(`--pipe=${pipeName}`);\n                }\n                else if (Transport.isSocket(transport)) {\n                    args.push(`--socket=${transport.port}`);\n                }\n                else if (transport === TransportKind.ipc) {\n                    throw new Error(`Transport kind ipc is not support for command executable`);\n                }\n                const options = Object.assign({}, command.options);\n                options.cwd = options.cwd || serverWorkingDir;\n                if (transport === undefined || transport === TransportKind.stdio) {\n                    const serverProcess = cp.spawn(command.command, args, options);\n                    if (!serverProcess || !serverProcess.pid) {\n                        return handleChildProcessStartError(serverProcess, `Launching server using command ${command.command} failed.`);\n                    }\n                    serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                    this._serverProcess = serverProcess;\n                    this._isDetached = !!options.detached;\n                    return Promise.resolve({ reader: new node_1.StreamMessageReader(serverProcess.stdout), writer: new node_1.StreamMessageWriter(serverProcess.stdin) });\n                }\n                else if (transport === TransportKind.pipe) {\n                    return (0, node_1.createClientPipeTransport)(pipeName).then((transport) => {\n                        const serverProcess = cp.spawn(command.command, args, options);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return handleChildProcessStartError(serverProcess, `Launching server using command ${command.command} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        this._isDetached = !!options.detached;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        return transport.onConnected().then((protocol) => {\n                            return { reader: protocol[0], writer: protocol[1] };\n                        });\n                    });\n                }\n                else if (Transport.isSocket(transport)) {\n                    return (0, node_1.createClientSocketTransport)(transport.port).then((transport) => {\n                        const serverProcess = cp.spawn(command.command, args, options);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return handleChildProcessStartError(serverProcess, `Launching server using command ${command.command} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        this._isDetached = !!options.detached;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        return transport.onConnected().then((protocol) => {\n                            return { reader: protocol[0], writer: protocol[1] };\n                        });\n                    });\n                }\n            }\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\n        }).finally(() => {\n            if (this._serverProcess !== undefined) {\n                this._serverProcess.on('exit', (code, signal) => {\n                    if (code !== null) {\n                        this.error(`Server process exited with code ${code}.`, undefined, false);\n                    }\n                    if (signal !== null) {\n                        this.error(`Server process exited with signal ${signal}.`, undefined, false);\n                    }\n                });\n            }\n        });\n    }\n    _getRuntimePath(runtime, serverWorkingDirectory) {\n        if (path.isAbsolute(runtime)) {\n            return runtime;\n        }\n        const mainRootPath = this._mainGetRootPath();\n        if (mainRootPath !== undefined) {\n            const result = path.join(mainRootPath, runtime);\n            if (fs.existsSync(result)) {\n                return result;\n            }\n        }\n        if (serverWorkingDirectory !== undefined) {\n            const result = path.join(serverWorkingDirectory, runtime);\n            if (fs.existsSync(result)) {\n                return result;\n            }\n        }\n        return runtime;\n    }\n    _mainGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    _getServerWorkingDir(options) {\n        let cwd = options && options.cwd;\n        if (!cwd) {\n            cwd = this.clientOptions.workspaceFolder\n                ? this.clientOptions.workspaceFolder.uri.fsPath\n                : this._mainGetRootPath();\n        }\n        if (cwd) {\n            // make sure the folder exists otherwise creating the process will fail\n            return new Promise(s => {\n                fs.lstat(cwd, (err, stats) => {\n                    s(!err && stats.isDirectory() ? cwd : undefined);\n                });\n            });\n        }\n        return Promise.resolve(undefined);\n    }\n}\nexports.LanguageClient = LanguageClient;\nclass SettingMonitor {\n    constructor(_client, _setting) {\n        this._client = _client;\n        this._setting = _setting;\n        this._listeners = [];\n    }\n    start() {\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\n        this.onDidChangeConfiguration();\n        return new vscode_1.Disposable(() => {\n            if (this._client.needsStop()) {\n                void this._client.stop();\n            }\n        });\n    }\n    onDidChangeConfiguration() {\n        let index = this._setting.indexOf('.');\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\n        if (enabled && this._client.needsStart()) {\n            this._client.start().catch((error) => this._client.error('Start failed after configuration change', error, 'force'));\n        }\n        else if (!enabled && this._client.needsStop()) {\n            void this._client.stop().catch((error) => this._client.error('Stop failed after configuration change', error, 'force'));\n        }\n    }\n}\nexports.SettingMonitor = SettingMonitor;\nfunction handleChildProcessStartError(process, message) {\n    if (process === null) {\n        return Promise.reject(message);\n    }\n    return new Promise((_, reject) => {\n        process.on('error', (err) => {\n            reject(`${message} ${err}`);\n        });\n        // the error event should always be run immediately,\n        // but race on it just in case\n        setImmediate(() => reject(message));\n    });\n}\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// Use source-map-support to get better stack traces\nimport \"source-map-support/register\";\n\nimport * as vscode from \"vscode\";\nimport * as commands from \"./commands\";\nimport * as debug from \"./debugger/launch\";\nimport { ProjectPanelProvider } from \"./ui/ProjectPanelProvider\";\nimport { FolderEvent, FolderOperation, WorkspaceContext } from \"./WorkspaceContext\";\nimport { FolderContext } from \"./FolderContext\";\nimport { TestExplorer } from \"./TestExplorer/TestExplorer\";\nimport { LanguageStatusItems } from \"./ui/LanguageStatusItems\";\nimport { getErrorDescription } from \"./utilities/utilities\";\nimport { Version } from \"./utilities/version\";\nimport { getReadOnlyDocumentProvider } from \"./ui/ReadOnlyDocumentProvider\";\nimport { registerDebugger } from \"./debugger/debugAdapterFactory\";\nimport { showToolchainError } from \"./ui/ToolchainSelection\";\nimport { SwiftToolchain } from \"./toolchain/toolchain\";\nimport { SwiftOutputChannel } from \"./ui/SwiftOutputChannel\";\nimport { checkAndWarnAboutWindowsSymlinks } from \"./ui/win32\";\nimport { SwiftEnvironmentVariablesManager, SwiftTerminalProfileProvider } from \"./terminal\";\nimport { resolveFolderDependencies } from \"./commands/dependencies/resolve\";\nimport { SelectedXcodeWatcher } from \"./toolchain/SelectedXcodeWatcher\";\nimport configuration, { handleConfigurationChangeEvent } from \"./configuration\";\nimport contextKeys from \"./contextKeys\";\n\n/**\n * External API as exposed by the extension. Can be queried by other extensions\n * or by the integration test runner for VS Code extensions.\n */\nexport interface Api {\n    workspaceContext?: WorkspaceContext;\n    outputChannel: SwiftOutputChannel;\n    activate(): Promise<Api>;\n    deactivate(): Promise<void>;\n}\n\n/**\n * Activate the extension. This is the main entry point.\n */\nexport async function activate(context: vscode.ExtensionContext): Promise<Api> {\n    try {\n        const outputChannel = new SwiftOutputChannel(\"Swift\");\n        context.subscriptions.push(outputChannel);\n        outputChannel.log(\"Activating Swift for Visual Studio Code...\");\n\n        checkAndWarnAboutWindowsSymlinks(outputChannel);\n\n        const toolchain = await createActiveToolchain(outputChannel);\n\n        // If we don't have a toolchain, show an error and stop initializing the extension.\n        // This can happen if the user has not installed Swift or if the toolchain is not\n        // properly configured.\n        if (!toolchain) {\n            void showToolchainError();\n            return {\n                workspaceContext: undefined,\n                outputChannel,\n                activate: () => activate(context),\n                deactivate: async () => {\n                    await deactivate(context);\n                },\n            };\n        }\n\n        const workspaceContext = await WorkspaceContext.create(context, outputChannel, toolchain);\n        context.subscriptions.push(workspaceContext);\n\n        context.subscriptions.push(new SwiftEnvironmentVariablesManager(context));\n        context.subscriptions.push(SwiftTerminalProfileProvider.register());\n        context.subscriptions.push(...commands.registerToolchainCommands(toolchain));\n\n        // Watch for configuration changes the trigger a reload of the extension if necessary.\n        context.subscriptions.push(\n            vscode.workspace.onDidChangeConfiguration(\n                handleConfigurationChangeEvent(workspaceContext)\n            )\n        );\n\n        context.subscriptions.push(...commands.register(workspaceContext));\n        context.subscriptions.push(registerDebugger(workspaceContext));\n        context.subscriptions.push(new SelectedXcodeWatcher(outputChannel));\n\n        // Register task provider.\n        context.subscriptions.push(\n            vscode.tasks.registerTaskProvider(\"swift\", workspaceContext.taskProvider)\n        );\n\n        // Register swift plugin task provider.\n        context.subscriptions.push(\n            vscode.tasks.registerTaskProvider(\"swift-plugin\", workspaceContext.pluginProvider)\n        );\n\n        // Register the language status bar items.\n        context.subscriptions.push(new LanguageStatusItems(workspaceContext));\n\n        // swift module document provider\n        context.subscriptions.push(getReadOnlyDocumentProvider());\n\n        // observer for logging workspace folder addition/removal\n        context.subscriptions.push(\n            workspaceContext.onDidChangeFolders(({ folder, operation }) => {\n                workspaceContext.outputChannel.log(\n                    `${operation}: ${folder?.folder.fsPath}`,\n                    folder?.name\n                );\n            })\n        );\n\n        // project panel provider\n        const projectPanelProvider = new ProjectPanelProvider(workspaceContext);\n        const dependenciesView = vscode.window.createTreeView(\"projectPanel\", {\n            treeDataProvider: projectPanelProvider,\n            showCollapseAll: true,\n        });\n        projectPanelProvider.observeFolders(dependenciesView);\n\n        context.subscriptions.push(dependenciesView, projectPanelProvider);\n\n        // observer that will resolve package and build launch configurations\n        context.subscriptions.push(\n            workspaceContext.onDidChangeFolders(handleFolderEvent(outputChannel))\n        );\n        context.subscriptions.push(TestExplorer.observeFolders(workspaceContext));\n\n        // setup workspace context with initial workspace folders\n        void workspaceContext.addWorkspaceFolders();\n\n        // Mark the extension as activated.\n        contextKeys.isActivated = true;\n\n        return {\n            workspaceContext,\n            outputChannel,\n            activate: () => activate(context),\n            deactivate: async () => {\n                await workspaceContext.stop();\n                await deactivate(context);\n            },\n        };\n    } catch (error) {\n        const errorMessage = getErrorDescription(error);\n        // show this error message as the VS Code error message only shows when running\n        // the extension through the debugger\n        void vscode.window.showErrorMessage(`Activating Swift extension failed: ${errorMessage}`);\n        throw error;\n    }\n}\n\nfunction handleFolderEvent(\n    outputChannel: SwiftOutputChannel\n): (event: FolderEvent) => Promise<void> {\n    // function called when a folder is added. I broke this out so we can trigger it\n    // without having to await for it.\n    async function folderAdded(folder: FolderContext, workspace: WorkspaceContext) {\n        if (\n            !configuration.folder(folder.workspaceFolder).disableAutoResolve ||\n            configuration.backgroundCompilation\n        ) {\n            // if background compilation is set then run compile at startup unless\n            // this folder is a sub-folder of the workspace folder. This is to avoid\n            // kicking off compile for multiple projects at the same time\n            if (\n                configuration.backgroundCompilation &&\n                folder.workspaceFolder.uri === folder.folder\n            ) {\n                await folder.backgroundCompilation.runTask();\n            } else {\n                await resolveFolderDependencies(folder, true);\n            }\n\n            if (folder.toolchain.swiftVersion.isGreaterThanOrEqual(new Version(5, 6, 0))) {\n                void workspace.statusItem.showStatusWhileRunning(\n                    `Loading Swift Plugins (${FolderContext.uriName(folder.workspaceFolder.uri)})`,\n                    async () => {\n                        await folder.loadSwiftPlugins(outputChannel);\n                        workspace.updatePluginContextKey();\n                        await folder.fireEvent(FolderOperation.pluginsUpdated);\n                    }\n                );\n            }\n        }\n    }\n\n    return async ({ folder, operation, workspace }) => {\n        if (!folder) {\n            return;\n        }\n\n        switch (operation) {\n            case FolderOperation.add:\n                // Create launch.json files based on package description.\n                await debug.makeDebugConfigurations(folder);\n                if (await folder.swiftPackage.foundPackage) {\n                    // do not await for this, let packages resolve in parallel\n                    void folderAdded(folder, workspace);\n                }\n                break;\n\n            case FolderOperation.packageUpdated:\n                // Create launch.json files based on package description.\n                await debug.makeDebugConfigurations(folder);\n                if (\n                    (await folder.swiftPackage.foundPackage) &&\n                    !configuration.folder(folder.workspaceFolder).disableAutoResolve\n                ) {\n                    await resolveFolderDependencies(folder, true);\n                }\n                break;\n\n            case FolderOperation.resolvedUpdated:\n                if (\n                    (await folder.swiftPackage.foundPackage) &&\n                    !configuration.folder(folder.workspaceFolder).disableAutoResolve\n                ) {\n                    await resolveFolderDependencies(folder, true);\n                }\n        }\n    };\n}\n\nasync function createActiveToolchain(\n    outputChannel: SwiftOutputChannel\n): Promise<SwiftToolchain | undefined> {\n    try {\n        const toolchain = await SwiftToolchain.create();\n        toolchain.logDiagnostics(outputChannel);\n        contextKeys.updateKeysBasedOnActiveVersion(toolchain.swiftVersion);\n        return toolchain;\n    } catch (error) {\n        outputChannel.log(\"Failed to discover Swift toolchain\");\n        outputChannel.log(`${error}`);\n        return undefined;\n    }\n}\n\nasync function deactivate(context: vscode.ExtensionContext): Promise<void> {\n    contextKeys.isActivated = false;\n    context.subscriptions.forEach(subscription => subscription.dispose());\n    context.subscriptions.length = 0;\n}\n", "require('./').install();\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"./WorkspaceContext\";\nimport { PackageNode } from \"./ui/ProjectPanelProvider\";\nimport { SwiftToolchain } from \"./toolchain/toolchain\";\nimport { debugSnippet, runSnippet } from \"./SwiftSnippets\";\nimport { showToolchainSelectionQuickPick } from \"./ui/ToolchainSelection\";\nimport { captureDiagnostics } from \"./commands/captureDiagnostics\";\nimport { attachDebugger } from \"./commands/attachDebugger\";\nimport { reindexProject } from \"./commands/reindexProject\";\nimport { cleanBuild, debugBuild, runBuild } from \"./commands/build\";\nimport { runSwiftScript } from \"./commands/runSwiftScript\";\nimport { useLocalDependency } from \"./commands/dependencies/useLocal\";\nimport { editDependency } from \"./commands/dependencies/edit\";\nimport { uneditDependency } from \"./commands/dependencies/unedit\";\nimport { openInWorkspace } from \"./commands/openInWorkspace\";\nimport { openInExternalEditor } from \"./commands/openInExternalEditor\";\nimport { switchPlatform } from \"./commands/switchPlatform\";\nimport { insertFunctionComment } from \"./commands/insertFunctionComment\";\nimport { createNewProject } from \"./commands/createNewProject\";\nimport { openEducationalNote } from \"./commands/openEducationalNote\";\nimport { openPackage } from \"./commands/openPackage\";\nimport { resolveDependencies } from \"./commands/dependencies/resolve\";\nimport { resetPackage } from \"./commands/resetPackage\";\nimport { updateDependencies } from \"./commands/dependencies/update\";\nimport { runPluginTask } from \"./commands/runPluginTask\";\nimport { runTestMultipleTimes } from \"./commands/testMultipleTimes\";\nimport { newSwiftFile } from \"./commands/newFile\";\nimport { runAllTests } from \"./commands/runAllTests\";\nimport { updateDependenciesViewList } from \"./commands/dependencies/updateDepViewList\";\nimport { runTask } from \"./commands/runTask\";\nimport { TestKind } from \"./TestExplorer/TestKind\";\nimport { pickProcess } from \"./commands/pickProcess\";\nimport { openDocumentation } from \"./commands/openDocumentation\";\nimport restartLSPServer from \"./commands/restartLSPServer\";\nimport { generateLaunchConfigurations } from \"./commands/generateLaunchConfigurations\";\n\n/**\n * References:\n *\n * - Contributing commands:\n *   https://code.visualstudio.com/api/references/contribution-points#contributes.commands\n * - Implementing commands:\n *   https://code.visualstudio.com/api/extension-guides/command\n */\n\nexport type WorkspaceContextWithToolchain = WorkspaceContext & { toolchain: SwiftToolchain };\n\nexport function registerToolchainCommands(\n    toolchain: SwiftToolchain | undefined\n): vscode.Disposable[] {\n    return [\n        vscode.commands.registerCommand(\"swift.createNewProject\", () =>\n            createNewProject(toolchain)\n        ),\n        vscode.commands.registerCommand(\"swift.selectToolchain\", () =>\n            showToolchainSelectionQuickPick(toolchain)\n        ),\n        vscode.commands.registerCommand(\"swift.pickProcess\", configuration =>\n            pickProcess(configuration)\n        ),\n    ];\n}\n\nexport enum Commands {\n    RUN = \"swift.run\",\n    DEBUG = \"swift.debug\",\n    CLEAN_BUILD = \"swift.cleanBuild\",\n    RESOLVE_DEPENDENCIES = \"swift.resolveDependencies\",\n    SHOW_FLAT_DEPENDENCIES_LIST = \"swift.flatDependenciesList\",\n    SHOW_NESTED_DEPENDENCIES_LIST = \"swift.nestedDependenciesList\",\n    UPDATE_DEPENDENCIES = \"swift.updateDependencies\",\n    RUN_TESTS_MULTIPLE_TIMES = \"swift.runTestsMultipleTimes\",\n    RESET_PACKAGE = \"swift.resetPackage\",\n    USE_LOCAL_DEPENDENCY = \"swift.useLocalDependency\",\n    UNEDIT_DEPENDENCY = \"swift.uneditDependency\",\n    RUN_TASK = \"swift.runTask\",\n    RUN_PLUGIN_TASK = \"swift.runPluginTask\",\n    RUN_SNIPPET = \"swift.runSnippet\",\n    DEBUG_SNIPPET = \"swift.debugSnippet\",\n    PREVIEW_DOCUMENTATION = \"swift.previewDocumentation\",\n    RUN_ALL_TESTS = \"swift.runAllTests\",\n    RUN_ALL_TESTS_PARALLEL = \"swift.runAllTestsParallel\",\n    DEBUG_ALL_TESTS = \"swift.debugAllTests\",\n    COVER_ALL_TESTS = \"swift.coverAllTests\",\n    OPEN_MANIFEST = \"swift.openManifest\",\n    RESTART_LSP = \"swift.restartLSPServer\",\n}\n\n/**\n * Registers this extension's commands in the given {@link vscode.ExtensionContext context}.\n */\nexport function register(ctx: WorkspaceContext): vscode.Disposable[] {\n    return [\n        vscode.commands.registerCommand(\n            \"swift.generateLaunchConfigurations\",\n            async () => await generateLaunchConfigurations(ctx)\n        ),\n        vscode.commands.registerCommand(\"swift.newFile\", async uri => await newSwiftFile(uri)),\n        vscode.commands.registerCommand(\n            Commands.RESOLVE_DEPENDENCIES,\n            async () => await resolveDependencies(ctx)\n        ),\n        vscode.commands.registerCommand(\n            Commands.UPDATE_DEPENDENCIES,\n            async () => await updateDependencies(ctx)\n        ),\n        vscode.commands.registerCommand(\n            Commands.RUN,\n            async target => await runBuild(ctx, ...unwrapTreeItem(target))\n        ),\n        vscode.commands.registerCommand(\n            Commands.DEBUG,\n            async target => await debugBuild(ctx, ...unwrapTreeItem(target))\n        ),\n        vscode.commands.registerCommand(Commands.CLEAN_BUILD, async () => await cleanBuild(ctx)),\n        vscode.commands.registerCommand(Commands.RUN_TESTS_MULTIPLE_TIMES, async (item, count) => {\n            if (ctx.currentFolder) {\n                return await runTestMultipleTimes(ctx.currentFolder, item, false, count);\n            }\n        }),\n        vscode.commands.registerCommand(\"swift.runTestsUntilFailure\", async (item, count) => {\n            if (ctx.currentFolder) {\n                return await runTestMultipleTimes(ctx.currentFolder, item, true, count);\n            }\n        }),\n        // Note: switchPlatform is only available on macOS and Swift 6.1 or later\n        // (gated in `package.json`) because it's the only OS and toolchain combination that\n        // has Darwin SDKs available and supports code editing with SourceKit-LSP\n        vscode.commands.registerCommand(\n            \"swift.switchPlatform\",\n            async () => await switchPlatform(ctx)\n        ),\n        vscode.commands.registerCommand(\n            Commands.RESET_PACKAGE,\n            async () => await resetPackage(ctx)\n        ),\n        vscode.commands.registerCommand(\"swift.runScript\", async () => await runSwiftScript(ctx)),\n        vscode.commands.registerCommand(\"swift.openPackage\", async () => {\n            if (ctx.currentFolder) {\n                return await openPackage(ctx.currentFolder.swiftVersion, ctx.currentFolder.folder);\n            }\n        }),\n        vscode.commands.registerCommand(\n            Commands.RUN_SNIPPET,\n            async target => await runSnippet(ctx, ...unwrapTreeItem(target))\n        ),\n        vscode.commands.registerCommand(\n            Commands.DEBUG_SNIPPET,\n            async target => await debugSnippet(ctx, ...unwrapTreeItem(target))\n        ),\n        vscode.commands.registerCommand(\n            Commands.RUN_PLUGIN_TASK,\n            async () => await runPluginTask()\n        ),\n        vscode.commands.registerCommand(Commands.RUN_TASK, async name => await runTask(ctx, name)),\n        vscode.commands.registerCommand(\n            Commands.RESTART_LSP,\n            async () => await restartLSPServer(ctx)\n        ),\n        vscode.commands.registerCommand(\n            \"swift.reindexProject\",\n            async () => await reindexProject(ctx)\n        ),\n        vscode.commands.registerCommand(\n            \"swift.insertFunctionComment\",\n            async () => await insertFunctionComment(ctx)\n        ),\n        vscode.commands.registerCommand(Commands.USE_LOCAL_DEPENDENCY, async (item, dep) => {\n            if (item instanceof PackageNode) {\n                return await useLocalDependency(item.name, ctx, dep);\n            }\n        }),\n        vscode.commands.registerCommand(\"swift.editDependency\", async item => {\n            if (item instanceof PackageNode) {\n                return await editDependency(item.name, ctx);\n            }\n        }),\n        vscode.commands.registerCommand(Commands.UNEDIT_DEPENDENCY, async item => {\n            if (item instanceof PackageNode) {\n                return await uneditDependency(item.name, ctx);\n            }\n        }),\n        vscode.commands.registerCommand(\"swift.openInWorkspace\", async item => {\n            if (item instanceof PackageNode) {\n                return await openInWorkspace(item);\n            }\n        }),\n        vscode.commands.registerCommand(\"swift.openExternal\", item => {\n            if (item instanceof PackageNode) {\n                return openInExternalEditor(item);\n            }\n        }),\n        vscode.commands.registerCommand(\"swift.attachDebugger\", attachDebugger),\n        vscode.commands.registerCommand(\"swift.clearDiagnosticsCollection\", () =>\n            ctx.diagnostics.clear()\n        ),\n        vscode.commands.registerCommand(\n            \"swift.captureDiagnostics\",\n            async () => await captureDiagnostics(ctx)\n        ),\n        vscode.commands.registerCommand(\n            Commands.RUN_ALL_TESTS_PARALLEL,\n            async item => await runAllTests(ctx, TestKind.parallel, ...unwrapTreeItem(item))\n        ),\n        vscode.commands.registerCommand(\n            Commands.RUN_ALL_TESTS,\n            async item => await runAllTests(ctx, TestKind.standard, ...unwrapTreeItem(item))\n        ),\n        vscode.commands.registerCommand(\n            Commands.DEBUG_ALL_TESTS,\n            async item => await runAllTests(ctx, TestKind.debug, ...unwrapTreeItem(item))\n        ),\n        vscode.commands.registerCommand(\n            Commands.COVER_ALL_TESTS,\n            async item => await runAllTests(ctx, TestKind.coverage, ...unwrapTreeItem(item))\n        ),\n        vscode.commands.registerCommand(\n            Commands.PREVIEW_DOCUMENTATION,\n            async () => await ctx.documentation.launchDocumentationPreview()\n        ),\n        vscode.commands.registerCommand(Commands.SHOW_FLAT_DEPENDENCIES_LIST, () =>\n            updateDependenciesViewList(ctx, true)\n        ),\n        vscode.commands.registerCommand(Commands.SHOW_NESTED_DEPENDENCIES_LIST, () =>\n            updateDependenciesViewList(ctx, false)\n        ),\n        vscode.commands.registerCommand(\"swift.openEducationalNote\", uri =>\n            openEducationalNote(uri)\n        ),\n        vscode.commands.registerCommand(Commands.OPEN_MANIFEST, async (uri: vscode.Uri) => {\n            const packagePath = path.join(uri.fsPath, \"Package.swift\");\n            await vscode.commands.executeCommand(\"vscode.open\", vscode.Uri.file(packagePath));\n        }),\n        vscode.commands.registerCommand(\"swift.openDocumentation\", () => openDocumentation()),\n    ];\n}\n\n/**\n * Certain commands can be called via a vscode TreeView, which will pass a {@link CommandNode} object.\n * If the command is called via a command palette or other means, the target will be a string.\n */\nfunction unwrapTreeItem(target?: string | { args: string[] }): string[] {\n    if (typeof target === \"object\" && target !== null && \"args\" in target) {\n        return target.args ?? [];\n    } else if (typeof target === \"string\") {\n        return [target];\n    }\n    return [];\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport configuration from \"../configuration\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { FolderOperation } from \"../WorkspaceContext\";\nimport contextKeys from \"../contextKeys\";\nimport { Dependency, ResolvedDependency, Target } from \"../SwiftPackage\";\nimport { FolderContext } from \"../FolderContext\";\n\nconst LOADING_ICON = \"loading~spin\";\n/**\n * References:\n *\n * - Contributing views:\n *   https://code.visualstudio.com/api/references/contribution-points#contributes.views\n * - Contributing welcome views:\n *   https://code.visualstudio.com/api/references/contribution-points#contributes.viewsWelcome\n * - Implementing a TreeView:\n *   https://code.visualstudio.com/api/extension-guides/tree-view\n */\n\n/**\n * Returns a {@link FileNode} for every file or subdirectory\n * in the given directory.\n */\nasync function getChildren(directoryPath: string, parentId?: string): Promise<FileNode[]> {\n    const contents = await fs.readdir(directoryPath);\n    const results: FileNode[] = [];\n    const excludes = configuration.excludePathsFromPackageDependencies;\n    for (const fileName of contents) {\n        if (excludes.includes(fileName)) {\n            continue;\n        }\n        const filePath = path.join(directoryPath, fileName);\n        const stats = await fs.stat(filePath);\n        results.push(new FileNode(fileName, filePath, stats.isDirectory(), parentId));\n    }\n    return results.sort((first, second) => {\n        if (first.isDirectory === second.isDirectory) {\n            // If both nodes are of the same type, sort them by name.\n            return first.name.localeCompare(second.name);\n        } else {\n            // Otherwise, sort directories first.\n            return first.isDirectory ? -1 : 1;\n        }\n    });\n}\n\n/**\n * A package in the Package Dependencies {@link vscode.TreeView TreeView}.\n */\nexport class PackageNode {\n    private id: string;\n\n    constructor(\n        private dependency: ResolvedDependency,\n        private childDependencies: (dependency: Dependency) => ResolvedDependency[],\n        private parentId?: string\n    ) {\n        this.id =\n            (this.parentId ? `${this.parentId}->` : \"\") +\n            `${this.name}-${this.dependency.version ?? \"\"}`;\n    }\n\n    get name(): string {\n        return this.dependency.identity;\n    }\n\n    get location(): string {\n        return this.dependency.location;\n    }\n\n    get type(): string {\n        return this.dependency.type;\n    }\n\n    get path(): string {\n        return this.dependency.path ?? \"\";\n    }\n\n    toTreeItem(): vscode.TreeItem {\n        const item = new vscode.TreeItem(this.name, vscode.TreeItemCollapsibleState.Collapsed);\n        item.id = this.id;\n        item.description = this.dependency.version;\n        item.iconPath = new vscode.ThemeIcon(this.icon());\n        item.contextValue = this.dependency.type;\n        item.accessibilityInformation = { label: `Package ${this.name}` };\n        item.tooltip = this.path;\n        return item;\n    }\n\n    icon() {\n        if (this.dependency.type === \"editing\") {\n            return \"edit\";\n        }\n        if (this.dependency.type === \"local\") {\n            return \"notebook-render-output\";\n        }\n        return \"package\";\n    }\n\n    async getChildren(): Promise<TreeNode[]> {\n        const [childDeps, files] = await Promise.all([\n            this.childDependencies(this.dependency),\n            getChildren(this.dependency.path, this.id),\n        ]);\n        const childNodes = childDeps.map(\n            dep => new PackageNode(dep, this.childDependencies, this.id)\n        );\n\n        // Show dependencies first, then files.\n        return [...childNodes, ...files];\n    }\n}\n\n/**\n * A file or directory in the Package Dependencies {@link vscode.TreeView TreeView}.\n */\nexport class FileNode {\n    private id: string;\n\n    constructor(\n        public name: string,\n        public path: string,\n        public isDirectory: boolean,\n        private parentId?: string\n    ) {\n        this.id = (this.parentId ? `${this.parentId}->` : \"\") + `${this.path}`;\n    }\n\n    toTreeItem(): vscode.TreeItem {\n        const item = new vscode.TreeItem(\n            this.name,\n            this.isDirectory\n                ? vscode.TreeItemCollapsibleState.Collapsed\n                : vscode.TreeItemCollapsibleState.None\n        );\n        item.id = this.id;\n        item.resourceUri = vscode.Uri.file(this.path);\n        item.tooltip = this.path;\n        if (!this.isDirectory) {\n            item.command = {\n                command: \"vscode.open\",\n                arguments: [item.resourceUri],\n                title: \"Open File\",\n            };\n            item.accessibilityInformation = { label: `File ${this.name}` };\n        } else {\n            item.accessibilityInformation = { label: `Folder ${this.name}` };\n        }\n        return item;\n    }\n\n    async getChildren(): Promise<FileNode[]> {\n        return await getChildren(this.path, this.id);\n    }\n}\n\nclass TaskNode {\n    constructor(\n        public type: string,\n        public id: string,\n        public name: string,\n        private active: boolean\n    ) {}\n\n    toTreeItem(): vscode.TreeItem {\n        const item = new vscode.TreeItem(this.name, vscode.TreeItemCollapsibleState.None);\n        item.id = `${this.type}-${this.id}`;\n        item.iconPath = new vscode.ThemeIcon(this.active ? LOADING_ICON : \"play\");\n        item.contextValue = \"task\";\n        item.accessibilityInformation = { label: this.name };\n        item.command = {\n            command: \"swift.runTask\",\n            arguments: [this.name],\n            title: \"Run Task\",\n        };\n        return item;\n    }\n\n    getChildren(): TreeNode[] {\n        return [];\n    }\n}\n\n/*\n * Prefix a unique string on the test target name to avoid confusing it\n * with another target that may share the same name. Targets can't start with %\n * so this is guarenteed to be unique.\n */\nfunction testTaskName(name: string): string {\n    return `%test-${name}`;\n}\n\nfunction snippetTaskName(name: string): string {\n    return `%snippet-${name}`;\n}\n\nclass TargetNode {\n    constructor(\n        public target: Target,\n        private activeTasks: Set<string>\n    ) {}\n\n    get name(): string {\n        return this.target.name;\n    }\n\n    get args(): string[] {\n        return [this.name];\n    }\n\n    toTreeItem(): vscode.TreeItem {\n        const name = this.target.name;\n        const hasChildren = this.getChildren().length > 0;\n        const item = new vscode.TreeItem(\n            name,\n            hasChildren\n                ? vscode.TreeItemCollapsibleState.Expanded\n                : vscode.TreeItemCollapsibleState.None\n        );\n        item.id = `${this.target.type}:${name}`;\n        item.iconPath = new vscode.ThemeIcon(this.icon());\n        item.contextValue = this.contextValue();\n        item.accessibilityInformation = { label: name };\n        item.tooltip = `${name} (${this.target.type})`;\n        return item;\n    }\n\n    private icon(): string {\n        if (this.activeTasks.has(this.name)) {\n            return LOADING_ICON;\n        }\n\n        switch (this.target.type) {\n            case \"executable\":\n                return \"output\";\n            case \"library\":\n                return \"library\";\n            case \"system-target\":\n                return \"server\";\n            case \"binary\":\n                return \"file-binary\";\n            case \"plugin\":\n                return \"plug\";\n            case \"test\":\n                if (this.activeTasks.has(testTaskName(this.name))) {\n                    return LOADING_ICON;\n                }\n                return \"test-view-icon\";\n            case \"snippet\":\n                if (this.activeTasks.has(snippetTaskName(this.name))) {\n                    return LOADING_ICON;\n                }\n                return \"notebook\";\n        }\n    }\n\n    private contextValue(): string | undefined {\n        switch (this.target.type) {\n            case \"executable\":\n                return \"runnable\";\n            case \"snippet\":\n                return \"snippet_runnable\";\n            case \"test\":\n                return \"test_runnable\";\n            default:\n                return undefined;\n        }\n    }\n\n    getChildren(): TreeNode[] {\n        return [];\n    }\n}\n\nclass HeaderNode {\n    constructor(\n        private id: string,\n        public name: string,\n        private icon: string,\n        private _getChildren: () => Promise<TreeNode[]>\n    ) {}\n\n    get path(): string {\n        return \"\";\n    }\n\n    toTreeItem(): vscode.TreeItem {\n        const item = new vscode.TreeItem(this.name, vscode.TreeItemCollapsibleState.Collapsed);\n        item.id = `${this.id}-${this.name}`;\n        item.iconPath = new vscode.ThemeIcon(this.icon);\n        item.contextValue = \"header\";\n        item.accessibilityInformation = { label: this.name };\n        return item;\n    }\n\n    getChildren(): Promise<TreeNode[]> {\n        return this._getChildren();\n    }\n}\n\nclass ErrorNode {\n    constructor(\n        public name: string,\n        private folder: vscode.Uri\n    ) {}\n\n    get path(): string {\n        return \"\";\n    }\n\n    toTreeItem(): vscode.TreeItem {\n        const item = new vscode.TreeItem(this.name, vscode.TreeItemCollapsibleState.None);\n        item.id = `error-${this.folder.fsPath}`;\n        item.iconPath = new vscode.ThemeIcon(\"error\", new vscode.ThemeColor(\"errorForeground\"));\n        item.contextValue = \"error\";\n        item.accessibilityInformation = { label: this.name };\n        item.tooltip =\n            \"Could not build the Package.swift, fix the error to refresh the project panel\";\n\n        item.command = {\n            command: \"swift.openManifest\",\n            arguments: [this.folder],\n            title: \"Open Manifest\",\n        };\n        return item;\n    }\n\n    getChildren(): Promise<TreeNode[]> {\n        return Promise.resolve([]);\n    }\n}\n\n/**\n * A node in the Package Dependencies {@link vscode.TreeView TreeView}.\n *\n * Can be either a {@link PackageNode}, {@link FileNode}, {@link TargetNode}, {@link TaskNode}, {@link ErrorNode} or {@link HeaderNode}.\n */\nexport type TreeNode = PackageNode | FileNode | HeaderNode | TaskNode | TargetNode | ErrorNode;\n\n/**\n * A {@link vscode.TreeDataProvider<T> TreeDataProvider} for project dependencies, tasks and commands {@link vscode.TreeView TreeView}.\n */\nexport class ProjectPanelProvider implements vscode.TreeDataProvider<TreeNode> {\n    private didChangeTreeDataEmitter = new vscode.EventEmitter<\n        TreeNode | undefined | null | void\n    >();\n    private workspaceObserver?: vscode.Disposable;\n    private disposables: vscode.Disposable[] = [];\n    private activeTasks: Set<string> = new Set();\n    private lastComputedNodes: TreeNode[] = [];\n\n    onDidChangeTreeData = this.didChangeTreeDataEmitter.event;\n\n    constructor(private workspaceContext: WorkspaceContext) {\n        // default context key to false. These will be updated as folders are given focus\n        contextKeys.hasPackage = false;\n        contextKeys.hasExecutableProduct = false;\n        contextKeys.packageHasDependencies = false;\n\n        this.observeTasks(workspaceContext);\n    }\n\n    dispose() {\n        this.workspaceObserver?.dispose();\n    }\n\n    observeTasks(ctx: WorkspaceContext) {\n        this.disposables.push(new TaskPoller(() => this.didChangeTreeDataEmitter.fire()));\n\n        this.disposables.push(\n            vscode.tasks.onDidStartTask(e => {\n                const taskId = e.execution.task.detail ?? e.execution.task.name;\n                this.activeTasks.add(taskId);\n                this.didChangeTreeDataEmitter.fire();\n            }),\n            vscode.tasks.onDidEndTask(e => {\n                const taskId = e.execution.task.detail ?? e.execution.task.name;\n                this.activeTasks.delete(taskId);\n                this.didChangeTreeDataEmitter.fire();\n            }),\n            ctx.onDidStartBuild(e => {\n                if (e.launchConfig.runType === \"snippet\") {\n                    this.activeTasks.add(snippetTaskName(e.targetName));\n                } else {\n                    this.activeTasks.add(e.targetName);\n                }\n                this.didChangeTreeDataEmitter.fire();\n            }),\n            ctx.onDidFinishBuild(e => {\n                if (e.launchConfig.runType === \"snippet\") {\n                    this.activeTasks.delete(snippetTaskName(e.targetName));\n                } else {\n                    this.activeTasks.delete(e.targetName);\n                }\n                this.didChangeTreeDataEmitter.fire();\n            }),\n            ctx.onDidStartTests(e => {\n                for (const target of e.targets) {\n                    this.activeTasks.add(testTaskName(target));\n                }\n                this.didChangeTreeDataEmitter.fire();\n            }),\n            ctx.onDidFinishTests(e => {\n                for (const target of e.targets) {\n                    this.activeTasks.delete(testTaskName(target));\n                }\n                this.didChangeTreeDataEmitter.fire();\n            })\n        );\n    }\n\n    observeFolders(treeView: vscode.TreeView<TreeNode>) {\n        this.workspaceObserver = this.workspaceContext.onDidChangeFolders(\n            ({ folder, operation }) => {\n                switch (operation) {\n                    case FolderOperation.focus:\n                        if (!folder) {\n                            return;\n                        }\n                        treeView.title = `Swift Project (${folder.name})`;\n                        this.didChangeTreeDataEmitter.fire();\n                        break;\n                    case FolderOperation.unfocus:\n                        treeView.title = `Swift Project`;\n                        this.didChangeTreeDataEmitter.fire();\n                        break;\n                    case FolderOperation.workspaceStateUpdated:\n                    case FolderOperation.resolvedUpdated:\n                    case FolderOperation.packageViewUpdated:\n                    case FolderOperation.pluginsUpdated:\n                        if (!folder) {\n                            return;\n                        }\n                        if (folder === this.workspaceContext.currentFolder) {\n                            this.didChangeTreeDataEmitter.fire();\n                        }\n                }\n            }\n        );\n    }\n\n    getTreeItem(element: TreeNode): vscode.TreeItem {\n        return element.toTreeItem();\n    }\n\n    async getChildren(element?: TreeNode): Promise<TreeNode[]> {\n        const folderContext = this.workspaceContext.currentFolder;\n        if (!folderContext) {\n            return [];\n        }\n\n        if (!element && folderContext.hasResolveErrors) {\n            return [\n                new ErrorNode(\"Error Parsing Package.swift\", folderContext.folder),\n                ...this.lastComputedNodes,\n            ];\n        }\n\n        const nodes = await this.computeChildren(folderContext, element);\n\n        // If we're fetching the root nodes then save them in case we have an error later,\n        // in which case we show the ErrorNode along with the last known good nodes.\n        if (!element) {\n            this.lastComputedNodes = nodes;\n        }\n        return nodes;\n    }\n\n    async computeChildren(folderContext: FolderContext, element?: TreeNode): Promise<TreeNode[]> {\n        if (element) {\n            return element.getChildren();\n        }\n\n        const dependencies = await this.dependencies();\n        const snippets = await this.snippets();\n        const commands = await this.commands();\n\n        // TODO: Control ordering\n        return [\n            ...(dependencies.length > 0\n                ? [\n                      new HeaderNode(\n                          \"dependencies\",\n                          \"Dependencies\",\n                          \"circuit-board\",\n                          this.dependencies.bind(this)\n                      ),\n                  ]\n                : []),\n            new HeaderNode(\"targets\", \"Targets\", \"book\", this.targets.bind(this)),\n            new HeaderNode(\n                \"tasks\",\n                \"Tasks\",\n                \"debug-continue-small\",\n                this.tasks.bind(this, folderContext)\n            ),\n            ...(snippets.length > 0\n                ? [\n                      new HeaderNode(\"snippets\", \"Snippets\", \"notebook\", () =>\n                          Promise.resolve(snippets)\n                      ),\n                  ]\n                : []),\n            ...(commands.length > 0\n                ? [\n                      new HeaderNode(\"commands\", \"Commands\", \"debug-line-by-line\", () =>\n                          Promise.resolve(commands)\n                      ),\n                  ]\n                : []),\n        ];\n    }\n\n    private async dependencies(): Promise<TreeNode[]> {\n        const folderContext = this.workspaceContext.currentFolder;\n        if (!folderContext) {\n            return [];\n        }\n        const pkg = folderContext.swiftPackage;\n        const rootDeps = await pkg.rootDependencies;\n        if (contextKeys.flatDependenciesList) {\n            const existenceMap = new Map<string, boolean>();\n            const gatherChildren = (dependencies: ResolvedDependency[]): ResolvedDependency[] => {\n                const result: ResolvedDependency[] = [];\n                for (const dep of dependencies) {\n                    if (!existenceMap.has(dep.identity)) {\n                        result.push(dep);\n                        existenceMap.set(dep.identity, true);\n                    }\n                    const childDeps = pkg.childDependencies(dep);\n                    result.push(...gatherChildren(childDeps));\n                }\n                return result;\n            };\n\n            const allDeps = gatherChildren(rootDeps);\n            return allDeps.map(dependency => new PackageNode(dependency, () => []));\n        } else {\n            const childDeps = pkg.childDependencies.bind(pkg);\n            return rootDeps.map(dep => new PackageNode(dep, childDeps));\n        }\n    }\n\n    private async targets(): Promise<TreeNode[]> {\n        const folderContext = this.workspaceContext.currentFolder;\n        if (!folderContext) {\n            return [];\n        }\n        const targetSort = (node: TargetNode) => `${node.target.type}-${node.name}`;\n        const targets = await folderContext.swiftPackage.targets;\n        // Snipepts are shown under the Snippets header\n        return targets\n            .filter(target => target.type !== \"snippet\")\n            .map(target => new TargetNode(target, this.activeTasks))\n            .sort((a, b) => targetSort(a).localeCompare(targetSort(b)));\n    }\n\n    private async tasks(folderContext: FolderContext): Promise<TaskNode[]> {\n        const tasks = await vscode.tasks.fetchTasks();\n\n        return (\n            tasks\n                // Plugin tasks are shown under the Commands header\n                .filter(\n                    task =>\n                        (!task.definition.cwd ||\n                            task.definition.cwd === folderContext.folder.fsPath) &&\n                        task.source !== \"swift-plugin\"\n                )\n                .map(\n                    (task, i) =>\n                        new TaskNode(\n                            \"task\",\n                            `${task.definition.cwd}-${task.name}-${task.detail ?? \"\"}-${i}`,\n                            task.name,\n                            this.activeTasks.has(task.detail ?? task.name)\n                        )\n                )\n                .sort((a, b) => a.name.localeCompare(b.name))\n        );\n    }\n\n    private async commands(): Promise<TreeNode[]> {\n        const provider = this.workspaceContext.pluginProvider;\n        const tasks = await provider.provideTasks(new vscode.CancellationTokenSource().token);\n        return tasks\n            .map(\n                (task, i) =>\n                    new TaskNode(\n                        \"command\",\n                        `${task.definition.cwd}-${task.name}-${task.detail ?? \"\"}-${i}`,\n                        task.name,\n                        this.activeTasks.has(task.detail ?? task.name)\n                    )\n            )\n            .sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    private async snippets(): Promise<TreeNode[]> {\n        const folderContext = this.workspaceContext.currentFolder;\n        if (!folderContext) {\n            return [];\n        }\n        const targets = await folderContext.swiftPackage.targets;\n        return targets\n            .filter(target => target.type === \"snippet\")\n            .flatMap(target => new TargetNode(target, this.activeTasks))\n            .sort((a, b) => a.name.localeCompare(b.name));\n    }\n}\n\n/*\n * A simple task poller that checks for changes in the tasks every 5 seconds.\n * This is a workaround for the lack of an event when tasks are added or removed.\n */\nclass TaskPoller implements vscode.Disposable {\n    private previousTasks: vscode.Task[] = [];\n    private timeout?: NodeJS.Timeout;\n    private static POLL_INTERVAL = 5000;\n\n    constructor(private onTasksChanged: () => void) {\n        void this.pollTasks();\n    }\n\n    private async pollTasks() {\n        try {\n            const tasks = await vscode.tasks.fetchTasks();\n            const tasksChanged =\n                tasks.length !== this.previousTasks.length ||\n                tasks.some((task, i) => {\n                    const prev = this.previousTasks[i];\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const c1 = (task.execution as any).command;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const c2 = (prev.execution as any).command;\n                    return (\n                        !prev ||\n                        task.name !== prev.name ||\n                        task.source !== prev.source ||\n                        task.definition.cwd !== prev.definition.cwd ||\n                        task.detail !== prev.detail ||\n                        c1 !== c2\n                    );\n                });\n            if (tasksChanged) {\n                this.previousTasks = tasks;\n                this.onTasksChanged();\n            }\n        } catch {\n            // ignore errors\n        }\n        this.timeout = setTimeout(() => this.pollTasks(), TaskPoller.POLL_INTERVAL);\n    }\n\n    dispose() {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as os from \"os\";\nimport * as path from \"path\";\nimport { showReloadExtensionNotification } from \"./ui/ReloadExtension\";\nimport { WorkspaceContext } from \"./WorkspaceContext\";\n\nexport type DebugAdapters = \"auto\" | \"lldb-dap\" | \"CodeLLDB\";\nexport type SetupCodeLLDBOptions =\n    | \"prompt\"\n    | \"alwaysUpdateGlobal\"\n    | \"alwaysUpdateWorkspace\"\n    | \"never\";\nexport type CFamilySupportOptions = \"enable\" | \"disable\" | \"cpptools-inactive\";\nexport type ActionAfterBuildError = \"Focus Problems\" | \"Focus Terminal\" | \"Do Nothing\";\nexport type OpenAfterCreateNewProjectOptions =\n    | \"always\"\n    | \"alwaysNewWindow\"\n    | \"whenNoFolderOpen\"\n    | \"prompt\";\nexport type ShowBuildStatusOptions = \"never\" | \"swiftStatus\" | \"progress\" | \"notification\";\nexport type DiagnosticCollectionOptions =\n    | \"onlySwiftc\"\n    | \"onlySourceKit\"\n    | \"keepSwiftc\"\n    | \"keepSourceKit\"\n    | \"keepAll\";\nexport type DiagnosticStyle = \"default\" | \"llvm\" | \"swift\";\n\n/** sourcekit-lsp configuration */\nexport interface LSPConfiguration {\n    /** Path to sourcekit-lsp executable */\n    readonly serverPath: string;\n    /** Arguments to pass to sourcekit-lsp executable */\n    readonly serverArguments: string[];\n    /** Are inlay hints enabled */\n    readonly inlayHintsEnabled: boolean;\n    /** Support C Family source files */\n    readonly supportCFamily: CFamilySupportOptions;\n    /** Support Languages */\n    readonly supportedLanguages: string[];\n    /** Is SourceKit-LSP disabled */\n    readonly disable: boolean;\n}\n\n/** debugger configuration */\nexport interface DebuggerConfiguration {\n    /** Get the underlying debug adapter type requested by the user. */\n    readonly debugAdapter: DebugAdapters;\n    /** Return path to debug adapter */\n    readonly customDebugAdapterPath: string;\n    /** Whether or not to disable setting up the debugger */\n    readonly disable: boolean;\n    /** User choices for updating CodeLLDB settings */\n    readonly setupCodeLLDB: SetupCodeLLDBOptions;\n}\n\n/** workspace folder configuration */\nexport interface FolderConfiguration {\n    /** Environment variables to set when running tests */\n    readonly testEnvironmentVariables: { [key: string]: string };\n    /** Extra arguments to set when building tests */\n    readonly additionalTestArguments: string[];\n    /** search sub-folder of workspace folder for Swift Packages */\n    readonly searchSubfoldersForPackages: boolean;\n    /** auto-generate launch.json configurations */\n    readonly autoGenerateLaunchConfigurations: boolean;\n    /** disable automatic running of swift package resolve */\n    readonly disableAutoResolve: boolean;\n    /** location to save swift-testing attachments */\n    readonly attachmentsPath: string;\n    /** look up saved permissions for the supplied plugin */\n    pluginPermissions(pluginId?: string): PluginPermissionConfiguration;\n    /** look up saved arguments for the supplied plugin, or global plugin arguments if no plugin id is provided */\n    pluginArguments(pluginId?: string): string[];\n}\n\nexport interface PluginPermissionConfiguration {\n    /** Disable using the sandbox when executing plugins */\n    disableSandbox?: boolean;\n    /** Allow the plugin to write to the package directory */\n    allowWritingToPackageDirectory?: boolean;\n    /** Allow the plugin to write to an additional directory or directories  */\n    allowWritingToDirectory?: string | string[];\n    /**\n     * Allow the plugin to make network connections\n     * For a list of valid options see:\n     * https://github.com/swiftlang/swift-package-manager/blob/0401a2ae55077cfd1f4c0acd43ae0a1a56ab21ef/Sources/Commands/PackageCommands/PluginCommand.swift#L62\n     */\n    allowNetworkConnections?: string;\n}\n\n/**\n * Type-safe wrapper around configuration settings.\n */\nconst configuration = {\n    /** sourcekit-lsp configuration */\n    get lsp(): LSPConfiguration {\n        return {\n            get serverPath(): string {\n                return substituteVariablesInString(\n                    vscode.workspace\n                        .getConfiguration(\"swift.sourcekit-lsp\")\n                        .get<string>(\"serverPath\", \"\")\n                );\n            },\n            get serverArguments(): string[] {\n                return vscode.workspace\n                    .getConfiguration(\"swift.sourcekit-lsp\")\n                    .get<string[]>(\"serverArguments\", [])\n                    .map(substituteVariablesInString);\n            },\n            get inlayHintsEnabled(): boolean {\n                return vscode.workspace\n                    .getConfiguration(\"sourcekit-lsp\")\n                    .get<boolean>(\"inlayHints.enabled\", true);\n            },\n            get supportCFamily(): CFamilySupportOptions {\n                return vscode.workspace\n                    .getConfiguration(\"sourcekit-lsp\")\n                    .get<CFamilySupportOptions>(\"support-c-cpp\", \"cpptools-inactive\");\n            },\n            get supportedLanguages() {\n                return vscode.workspace\n                    .getConfiguration(\"swift.sourcekit-lsp\")\n                    .get(\"supported-languages\", [\n                        \"swift\",\n                        \"c\",\n                        \"cpp\",\n                        \"objective-c\",\n                        \"objective-cpp\",\n                    ]);\n            },\n            get disable(): boolean {\n                return vscode.workspace\n                    .getConfiguration(\"swift.sourcekit-lsp\")\n                    .get<boolean>(\"disable\", false);\n            },\n        };\n    },\n\n    folder(workspaceFolder: vscode.WorkspaceFolder): FolderConfiguration {\n        function pluginSetting<T>(\n            setting: string,\n            pluginId?: string,\n            resultIsArray: boolean = false\n        ): T | undefined {\n            if (!pluginId) {\n                // Check for * as a wildcard plugin ID for configurations that want both\n                // global arguments as well as specific additional arguments for a plugin.\n                const wildcardSetting = pluginSetting(setting, \"*\", resultIsArray) as T | undefined;\n                if (wildcardSetting) {\n                    return wildcardSetting;\n                }\n\n                // Check if there is a global setting like `\"swift.pluginArguments\": [\"-c\", \"release\"]`\n                // that should apply to all plugins.\n                const args = vscode.workspace\n                    .getConfiguration(\"swift\", workspaceFolder)\n                    .get<T>(setting);\n\n                if (resultIsArray && Array.isArray(args)) {\n                    return args;\n                } else if (\n                    !resultIsArray &&\n                    args !== null &&\n                    typeof args === \"object\" &&\n                    Object.keys(args).length !== 0\n                ) {\n                    return args;\n                }\n                return undefined;\n            }\n\n            return vscode.workspace.getConfiguration(\"swift\", workspaceFolder).get<{\n                [key: string]: T;\n            }>(setting, {})[pluginId];\n        }\n        return {\n            /** Environment variables to set when running tests */\n            get testEnvironmentVariables(): { [key: string]: string } {\n                return vscode.workspace\n                    .getConfiguration(\"swift\", workspaceFolder)\n                    .get<{ [key: string]: string }>(\"testEnvironmentVariables\", {});\n            },\n            /** Extra arguments to pass to swift test and swift build when running and debugging tests. */\n            get additionalTestArguments(): string[] {\n                return vscode.workspace\n                    .getConfiguration(\"swift\", workspaceFolder)\n                    .get<string[]>(\"additionalTestArguments\", [])\n                    .map(substituteVariablesInString);\n            },\n            /** auto-generate launch.json configurations */\n            get autoGenerateLaunchConfigurations(): boolean {\n                return vscode.workspace\n                    .getConfiguration(\"swift\", workspaceFolder)\n                    .get<boolean>(\"autoGenerateLaunchConfigurations\", true);\n            },\n            /** disable automatic running of swift package resolve */\n            get disableAutoResolve(): boolean {\n                return vscode.workspace\n                    .getConfiguration(\"swift\", workspaceFolder)\n                    .get<boolean>(\"disableAutoResolve\", false);\n            },\n            /** search sub-folder of workspace folder for Swift Packages */\n            get searchSubfoldersForPackages(): boolean {\n                return vscode.workspace\n                    .getConfiguration(\"swift\", workspaceFolder)\n                    .get<boolean>(\"searchSubfoldersForPackages\", false);\n            },\n            get attachmentsPath(): string {\n                return substituteVariablesInString(\n                    vscode.workspace\n                        .getConfiguration(\"swift\", workspaceFolder)\n                        .get<string>(\"attachmentsPath\", \"./.build/attachments\")\n                );\n            },\n            pluginPermissions(pluginId?: string): PluginPermissionConfiguration {\n                return pluginSetting(\"pluginPermissions\", pluginId, false) ?? {};\n            },\n            pluginArguments(pluginId?: string): string[] {\n                return pluginSetting(\"pluginArguments\", pluginId, true) ?? [];\n            },\n        };\n    },\n\n    /** debugger configuration */\n    get debugger(): DebuggerConfiguration {\n        return {\n            get debugAdapter(): DebugAdapters {\n                // Use inspect to determine if the user has explicitly set swift.debugger.useDebugAdapterFromToolchain\n                const inspectUseDebugAdapterFromToolchain = vscode.workspace\n                    .getConfiguration(\"swift.debugger\")\n                    .inspect<boolean>(\"useDebugAdapterFromToolchain\");\n                let useDebugAdapterFromToolchain =\n                    inspectUseDebugAdapterFromToolchain?.workspaceValue ??\n                    inspectUseDebugAdapterFromToolchain?.globalValue;\n                // On Windows arm64 we enable swift.debugger.useDebugAdapterFromToolchain by default since CodeLLDB does\n                // not support this platform and gives an awful error message.\n                if (process.platform === \"win32\" && process.arch === \"arm64\") {\n                    useDebugAdapterFromToolchain = useDebugAdapterFromToolchain ?? true;\n                }\n                const selectedAdapter = vscode.workspace\n                    .getConfiguration(\"swift.debugger\")\n                    .get<DebugAdapters>(\"debugAdapter\", \"auto\");\n                switch (selectedAdapter) {\n                    case \"auto\":\n                        if (useDebugAdapterFromToolchain !== undefined) {\n                            return useDebugAdapterFromToolchain ? \"lldb-dap\" : \"CodeLLDB\";\n                        }\n                        return \"auto\";\n                    default:\n                        return selectedAdapter;\n                }\n            },\n            get customDebugAdapterPath(): string {\n                return substituteVariablesInString(\n                    vscode.workspace.getConfiguration(\"swift.debugger\").get<string>(\"path\", \"\")\n                );\n            },\n            get disable(): boolean {\n                return vscode.workspace\n                    .getConfiguration(\"swift.debugger\")\n                    .get<boolean>(\"disable\", false);\n            },\n            get setupCodeLLDB(): SetupCodeLLDBOptions {\n                return vscode.workspace\n                    .getConfiguration(\"swift.debugger\")\n                    .get<SetupCodeLLDBOptions>(\"setupCodeLLDB\", \"prompt\");\n            },\n        };\n    },\n    /** Files and directories to exclude from the code coverage. */\n    get excludeFromCodeCoverage(): string[] {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string[]>(\"excludeFromCodeCoverage\", [])\n            .map(substituteVariablesInString);\n    },\n    /** Files and directories to exclude from the Package Dependencies view. */\n    get excludePathsFromPackageDependencies(): string[] {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string[]>(\"excludePathsFromPackageDependencies\", []);\n    },\n    /** Path to folder that include swift executable */\n    get path(): string {\n        return substituteVariablesInString(\n            vscode.workspace.getConfiguration(\"swift\").get<string>(\"path\", \"\")\n        );\n    },\n    /** Path to folder that include swift runtime */\n    get runtimePath(): string {\n        return substituteVariablesInString(\n            vscode.workspace.getConfiguration(\"swift\").get<string>(\"runtimePath\", \"\")\n        );\n    },\n    /** Path to custom --sdk */\n    get sdk(): string {\n        return substituteVariablesInString(\n            vscode.workspace.getConfiguration(\"swift\").get<string>(\"SDK\", \"\")\n        );\n    },\n    set sdk(value: string | undefined) {\n        void vscode.workspace\n            .getConfiguration(\"swift\")\n            .update(\"SDK\", value)\n            .then(() => {\n                /* Put in worker queue */\n            });\n    },\n    /** Path to custom --swift-sdk */\n    get swiftSDK(): string {\n        return vscode.workspace.getConfiguration(\"swift\").get<string>(\"swiftSDK\", \"\");\n    },\n    set swiftSDK(value: string | undefined) {\n        void vscode.workspace\n            .getConfiguration(\"swift\")\n            .update(\"swiftSDK\", value)\n            .then(() => {\n                /* Put in worker queue */\n            });\n    },\n    /** swift build arguments */\n    get buildArguments(): string[] {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string[]>(\"buildArguments\", [])\n            .map(substituteVariablesInString);\n    },\n    get scriptSwiftLanguageVersion(): string {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string>(\"scriptSwiftLanguageVersion\", \"6\");\n    },\n    /** swift package arguments */\n    get packageArguments(): string[] {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string[]>(\"packageArguments\", [])\n            .map(substituteVariablesInString);\n    },\n    /** thread/address sanitizer */\n    get sanitizer(): string {\n        return vscode.workspace.getConfiguration(\"swift\").get<string>(\"sanitizer\", \"off\");\n    },\n    get buildPath(): string {\n        return substituteVariablesInString(\n            vscode.workspace.getConfiguration(\"swift\").get<string>(\"buildPath\", \"\")\n        );\n    },\n    get disableSwiftPMIntegration(): boolean {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<boolean>(\"disableSwiftPackageManagerIntegration\", false);\n    },\n    /** Environment variables to set when building */\n    get swiftEnvironmentVariables(): { [key: string]: string } {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<{ [key: string]: string }>(\"swiftEnvironmentVariables\", {});\n    },\n    /** include build errors in problems view */\n    get diagnosticsCollection(): DiagnosticCollectionOptions {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<DiagnosticCollectionOptions>(\"diagnosticsCollection\", \"keepSourceKit\");\n    },\n    /** set the -diagnostic-style option when running `swift` tasks */\n    get diagnosticsStyle(): DiagnosticStyle {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<DiagnosticStyle>(\"diagnosticsStyle\", \"llvm\");\n    },\n    /** where to show the build progress for the running task */\n    get showBuildStatus(): ShowBuildStatusOptions {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<ShowBuildStatusOptions>(\"showBuildStatus\", \"swiftStatus\");\n    },\n    /** background compilation */\n    get backgroundCompilation(): boolean {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<boolean>(\"backgroundCompilation\", false);\n    },\n    /** background indexing */\n    get backgroundIndexing(): \"on\" | \"off\" | \"auto\" {\n        const value = vscode.workspace\n            .getConfiguration(\"swift.sourcekit-lsp\")\n            .get(\"backgroundIndexing\", \"auto\");\n\n        // Legacy versions of this setting were a boolean, convert to the new string version.\n        if (typeof value === \"boolean\") {\n            return value ? \"on\" : \"off\";\n        } else {\n            return value;\n        }\n    },\n    /** focus on problems view whenever there is a build error */\n    get actionAfterBuildError(): ActionAfterBuildError {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<ActionAfterBuildError>(\"actionAfterBuildError\", \"Focus Terminal\");\n    },\n    /** output additional diagnostics */\n    get diagnostics(): boolean {\n        return vscode.workspace.getConfiguration(\"swift\").get<boolean>(\"diagnostics\", false);\n    },\n    /**\n     *  Test coverage settings\n     */\n    /** Should test coverage report be displayed after running test coverage */\n    get displayCoverageReportAfterRun(): boolean {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<boolean>(\"coverage.displayReportAfterRun\", true);\n    },\n    get alwaysShowCoverageStatusItem(): boolean {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<boolean>(\"coverage.alwaysShowStatusItem\", true);\n    },\n    get coverageHitColorLightMode(): string {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string>(\"coverage.colors.lightMode.hit\", \"#c0ffc0\");\n    },\n    get coverageMissColorLightMode(): string {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string>(\"coverage.colors.lightMode.miss\", \"#ffc0c0\");\n    },\n    get coverageHitColorDarkMode(): string {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string>(\"coverage.colors.darkMode.hit\", \"#003000\");\n    },\n    get coverageMissColorDarkMode(): string {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<string>(\"coverage.colors.darkMode.miss\", \"#400000\");\n    },\n    get openAfterCreateNewProject(): OpenAfterCreateNewProjectOptions {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<OpenAfterCreateNewProjectOptions>(\"openAfterCreateNewProject\", \"prompt\");\n    },\n    /** Whether or not the extension should warn about being unable to create symlinks on Windows */\n    get warnAboutSymlinkCreation(): boolean {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<boolean>(\"warnAboutSymlinkCreation\", true);\n    },\n    set warnAboutSymlinkCreation(value: boolean) {\n        void vscode.workspace\n            .getConfiguration(\"swift\")\n            .update(\"warnAboutSymlinkCreation\", value, vscode.ConfigurationTarget.Global)\n            .then(() => {\n                /* Put in worker queue */\n            });\n    },\n    /** Whether or not the extension will contribute Swift environment variables to the integrated terminal */\n    get enableTerminalEnvironment(): boolean {\n        return vscode.workspace\n            .getConfiguration(\"swift\")\n            .get<boolean>(\"enableTerminalEnvironment\", true);\n    },\n    /** Whether or not to disable SwiftPM sandboxing */\n    get disableSandbox(): boolean {\n        return vscode.workspace.getConfiguration(\"swift\").get<boolean>(\"disableSandbox\", false);\n    },\n};\n\nconst vsCodeVariableRegex = new RegExp(/\\$\\{(.+?)\\}/g);\nexport function substituteVariablesInString(val: string): string {\n    return val.replace(vsCodeVariableRegex, (substring: string, varName: string) =>\n        typeof varName === \"string\" ? computeVscodeVar(varName) || substring : substring\n    );\n}\n\nfunction computeVscodeVar(varName: string): string | null {\n    const workspaceFolder = () => {\n        const activeEditor = vscode.window.activeTextEditor;\n        if (activeEditor) {\n            const documentUri = activeEditor.document.uri;\n            const folder = vscode.workspace.getWorkspaceFolder(documentUri);\n            if (folder) {\n                return folder.uri.fsPath;\n            }\n        }\n\n        // If there is no active editor then return the first workspace folder\n        return vscode.workspace.workspaceFolders?.at(0)?.uri.fsPath ?? \"\";\n    };\n\n    const file = () => vscode.window.activeTextEditor?.document?.uri?.fsPath || \"\";\n\n    // https://code.visualstudio.com/docs/editor/variables-reference\n    // Variables to be substituted should be added here.\n    const supportedVariables: { [k: string]: () => string } = {\n        workspaceFolder,\n        fileWorkspaceFolder: workspaceFolder,\n        workspaceFolderBasename: () => path.basename(workspaceFolder()),\n        cwd: () => process.cwd(),\n        userHome: () => os.homedir(),\n        pathSeparator: () => path.sep,\n        file,\n        relativeFile: () => path.relative(workspaceFolder(), file()),\n        relativeFileDirname: () => path.dirname(path.relative(workspaceFolder(), file())),\n        fileBasename: () => path.basename(file()),\n        fileExtname: () => path.extname(file()),\n        fileDirname: () => path.dirname(file()),\n        fileDirnameBasename: () => path.basename(path.dirname(file())),\n    };\n\n    return varName in supportedVariables ? supportedVariables[varName]() : null;\n}\n\n/**\n * Handler for configuration change events that triggers a reload of the extension\n * if the setting changed requires one.\n * @param ctx The workspace context.\n * @returns A disposable that unregisters the provider when disposed.\n */\nexport function handleConfigurationChangeEvent(\n    ctx: WorkspaceContext\n): (event: vscode.ConfigurationChangeEvent) => void {\n    return (event: vscode.ConfigurationChangeEvent) => {\n        // on toolchain config change, reload window\n        if (\n            event.affectsConfiguration(\"swift.path\") &&\n            configuration.path !== ctx.currentFolder?.toolchain.swiftFolderPath\n        ) {\n            void showReloadExtensionNotification(\n                \"Changing the Swift path requires Visual Studio Code be reloaded.\"\n            );\n        } else if (\n            // on sdk config change, restart sourcekit-lsp\n            event.affectsConfiguration(\"swift.SDK\") ||\n            event.affectsConfiguration(\"swift.swiftSDK\")\n        ) {\n            void vscode.commands.executeCommand(\"swift.restartLSPServer\").then(() => {\n                /* Put in worker queue */\n            });\n        } else if (event.affectsConfiguration(\"swift.swiftEnvironmentVariables\")) {\n            void showReloadExtensionNotification(\n                \"Changing environment variables requires the project be reloaded.\"\n            );\n        }\n    };\n}\n\nexport default configuration;\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { Workbench } from \"../utilities/commands\";\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport debounce = require(\"lodash.debounce\");\n\n/**\n * Prompts the user to reload the extension in cases where we are unable to do\n * so automatically. Only one of these prompts will be shown at a time.\n *\n * @param message the warning message to display to the user\n * @param items extra buttons to display\n * @returns the selected button or undefined if cancelled\n */\nexport function showReloadExtensionNotificationInstance<T extends string>() {\n    let inFlight: Promise<\"Reload Extensions\" | T | undefined> | null = null;\n\n    return async function (\n        message: string,\n        ...items: T[]\n    ): Promise<\"Reload Extensions\" | T | undefined> {\n        if (inFlight) {\n            return inFlight;\n        }\n\n        const buttons: (\"Reload Extensions\" | T)[] = [\"Reload Extensions\", ...items];\n        inFlight = (async () => {\n            try {\n                const selected = await vscode.window.showWarningMessage(message, ...buttons);\n                if (selected === \"Reload Extensions\") {\n                    await vscode.commands.executeCommand(Workbench.ACTION_RELOADWINDOW);\n                }\n                return selected;\n            } finally {\n                inFlight = null;\n            }\n        })();\n\n        return inFlight;\n    };\n}\n\n// In case the user closes the dialog immediately we want to debounce showing it again\n// for 10 seconds to prevent another popup perhaps immediately appearing.\nexport const showReloadExtensionNotification = debounce(\n    showReloadExtensionNotificationInstance(),\n    10_000,\n    { leading: true }\n);\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport { FolderContext } from \"./FolderContext\";\nimport { StatusItem } from \"./ui/StatusItem\";\nimport { SwiftOutputChannel } from \"./ui/SwiftOutputChannel\";\nimport { swiftLibraryPathKey } from \"./utilities/utilities\";\nimport { isPathInsidePath } from \"./utilities/filesystem\";\nimport { LanguageClientToolchainCoordinator } from \"./sourcekit-lsp/LanguageClientToolchainCoordinator\";\nimport { TemporaryFolder } from \"./utilities/tempFolder\";\nimport { TaskManager } from \"./tasks/TaskManager\";\nimport { makeDebugConfigurations } from \"./debugger/launch\";\nimport configuration from \"./configuration\";\nimport contextKeys from \"./contextKeys\";\nimport { setSnippetContextKey } from \"./SwiftSnippets\";\nimport { CommentCompletionProviders } from \"./editor/CommentCompletion\";\nimport { SwiftBuildStatus } from \"./ui/SwiftBuildStatus\";\nimport { SwiftToolchain } from \"./toolchain/toolchain\";\nimport { DiagnosticsManager } from \"./DiagnosticsManager\";\nimport { DocumentationManager } from \"./documentation/DocumentationManager\";\nimport { DocCDocumentationRequest, ReIndexProjectRequest } from \"./sourcekit-lsp/extensions\";\nimport { TestKind } from \"./TestExplorer/TestKind\";\nimport { isValidWorkspaceFolder, searchForPackages } from \"./utilities/workspace\";\nimport { SwiftPluginTaskProvider } from \"./tasks/SwiftPluginTaskProvider\";\nimport { SwiftTaskProvider } from \"./tasks/SwiftTaskProvider\";\nimport { LLDBDebugConfigurationProvider } from \"./debugger/debugAdapterFactory\";\n\n/**\n * Context for whole workspace. Holds array of contexts for each workspace folder\n * and the ExtensionContext\n */\nexport class WorkspaceContext implements vscode.Disposable {\n    public folders: FolderContext[] = [];\n    public currentFolder: FolderContext | null | undefined;\n    public currentDocument: vscode.Uri | null;\n    public statusItem: StatusItem;\n    public buildStatus: SwiftBuildStatus;\n    public languageClientManager: LanguageClientToolchainCoordinator;\n    public tasks: TaskManager;\n    public diagnostics: DiagnosticsManager;\n    public taskProvider: SwiftTaskProvider;\n    public pluginProvider: SwiftPluginTaskProvider;\n    public launchProvider: LLDBDebugConfigurationProvider;\n    public subscriptions: vscode.Disposable[];\n    public commentCompletionProvider: CommentCompletionProviders;\n    public documentation: DocumentationManager;\n    private lastFocusUri: vscode.Uri | undefined;\n    private initialisationFinished = false;\n\n    private readonly testStartEmitter = new vscode.EventEmitter<TestEvent>();\n    private readonly testFinishEmitter = new vscode.EventEmitter<TestEvent>();\n\n    public onDidStartTests = this.testStartEmitter.event;\n    public onDidFinishTests = this.testFinishEmitter.event;\n\n    private readonly buildStartEmitter = new vscode.EventEmitter<BuildEvent>();\n    private readonly buildFinishEmitter = new vscode.EventEmitter<BuildEvent>();\n    public onDidStartBuild = this.buildStartEmitter.event;\n    public onDidFinishBuild = this.buildFinishEmitter.event;\n\n    private constructor(\n        extensionContext: vscode.ExtensionContext,\n        public tempFolder: TemporaryFolder,\n        public outputChannel: SwiftOutputChannel,\n        public globalToolchain: SwiftToolchain\n    ) {\n        this.statusItem = new StatusItem();\n        this.buildStatus = new SwiftBuildStatus(this.statusItem);\n        this.languageClientManager = new LanguageClientToolchainCoordinator(this);\n        this.tasks = new TaskManager(this);\n        this.diagnostics = new DiagnosticsManager(this);\n        this.taskProvider = new SwiftTaskProvider(this);\n        this.pluginProvider = new SwiftPluginTaskProvider(this);\n        this.launchProvider = new LLDBDebugConfigurationProvider(\n            process.platform,\n            this,\n            outputChannel\n        );\n        this.documentation = new DocumentationManager(extensionContext, this);\n        this.currentDocument = null;\n        this.commentCompletionProvider = new CommentCompletionProviders();\n\n        const onChangeConfig = vscode.workspace.onDidChangeConfiguration(async event => {\n            // on runtime path config change, regenerate launch.json\n            if (event.affectsConfiguration(\"swift.runtimePath\")) {\n                if (!(await this.needToAutoGenerateLaunchConfig())) {\n                    return;\n                }\n                void vscode.window\n                    .showInformationMessage(\n                        `Launch configurations need to be updated after changing the Swift runtime path. Custom versions of environment variable '${swiftLibraryPathKey()}' may be overridden. Do you want to update?`,\n                        \"Update\",\n                        \"Cancel\"\n                    )\n                    .then(async selected => {\n                        if (selected === \"Update\") {\n                            this.folders.forEach(ctx =>\n                                makeDebugConfigurations(ctx, { yes: true })\n                            );\n                        }\n                    });\n            }\n            // on change of swift build path, regenerate launch.json\n            if (event.affectsConfiguration(\"swift.buildPath\")) {\n                if (!(await this.needToAutoGenerateLaunchConfig())) {\n                    return;\n                }\n                void vscode.window\n                    .showInformationMessage(\n                        `Launch configurations need to be updated after changing the Swift build path. Do you want to update?`,\n                        \"Update\",\n                        \"Cancel\"\n                    )\n                    .then(selected => {\n                        if (selected === \"Update\") {\n                            this.folders.forEach(ctx =>\n                                makeDebugConfigurations(ctx, { yes: true })\n                            );\n                        }\n                    });\n            }\n        });\n        const contextKeysUpdate = this.onDidChangeFolders(event => {\n            switch (event.operation) {\n                case FolderOperation.remove:\n                    this.updatePluginContextKey();\n                    break;\n                case FolderOperation.focus:\n                    this.updateContextKeys(event.folder);\n                    void this.updateContextKeysForFile();\n                    break;\n                case FolderOperation.unfocus:\n                    this.updateContextKeys(event.folder);\n                    break;\n                case FolderOperation.resolvedUpdated:\n                    if (event.folder === this.currentFolder) {\n                        this.updateContextKeys(event.folder);\n                    }\n            }\n        });\n        // add end of task handler to be called whenever a build task has finished. If\n        // it is the build task for this folder then focus on the problems view\n        const onDidEndTask = this.tasks.onDidEndTaskProcess(event => {\n            const task = event.execution.task;\n            if (\n                task.group === vscode.TaskGroup.Build &&\n                event.exitCode !== 0 &&\n                event.exitCode !== undefined &&\n                configuration.actionAfterBuildError === \"Focus Problems\"\n            ) {\n                void vscode.commands\n                    .executeCommand(\"workbench.panel.markers.view.focus\")\n                    .then(() => {\n                        /* Put in worker queue */\n                    });\n            }\n        });\n        const swiftFileWatcher = vscode.workspace.createFileSystemWatcher(\"**/*.swift\");\n        swiftFileWatcher.onDidCreate(uri => {\n            this.swiftFileObservers.forEach(observer =>\n                observer({ uri, operation: FileOperation.created })\n            );\n        });\n        swiftFileWatcher.onDidChange(uri => {\n            this.swiftFileObservers.forEach(observer =>\n                observer({ uri, operation: FileOperation.changed })\n            );\n        });\n        swiftFileWatcher.onDidDelete(uri => {\n            this.swiftFileObservers.forEach(observer =>\n                observer({ uri, operation: FileOperation.deleted })\n            );\n        });\n\n        this.subscriptions = [\n            swiftFileWatcher,\n            onDidEndTask,\n            this.commentCompletionProvider,\n            contextKeysUpdate,\n            onChangeConfig,\n            this.tasks,\n            this.diagnostics,\n            this.documentation,\n            this.languageClientManager,\n            this.outputChannel,\n            this.statusItem,\n            this.buildStatus,\n        ];\n        this.lastFocusUri = vscode.window.activeTextEditor?.document.uri;\n\n        this.setupEventListeners();\n    }\n\n    async stop() {\n        try {\n            await this.languageClientManager.stop();\n        } catch {\n            // ignore\n        }\n    }\n\n    dispose() {\n        this.folders.forEach(f => f.dispose());\n        this.folders.length = 0;\n        this.subscriptions.forEach(item => item.dispose());\n        this.subscriptions.length = 0;\n    }\n\n    get globalToolchainSwiftVersion() {\n        return this.globalToolchain.swiftVersion;\n    }\n\n    /** Get swift version and create WorkspaceContext */\n    static async create(\n        extensionContext: vscode.ExtensionContext,\n        outputChannel: SwiftOutputChannel,\n        toolchain: SwiftToolchain\n    ): Promise<WorkspaceContext> {\n        const tempFolder = await TemporaryFolder.create();\n        return new WorkspaceContext(extensionContext, tempFolder, outputChannel, toolchain);\n    }\n\n    /**\n     * Update context keys based on package contents\n     */\n    updateContextKeys(folderContext: FolderContext | null) {\n        if (!folderContext) {\n            contextKeys.hasPackage = false;\n            contextKeys.hasExecutableProduct = false;\n            contextKeys.packageHasDependencies = false;\n            return;\n        }\n\n        void Promise.all([\n            folderContext.swiftPackage.foundPackage,\n            folderContext.swiftPackage.executableProducts,\n            folderContext.swiftPackage.dependencies,\n        ]).then(([foundPackage, executableProducts, dependencies]) => {\n            contextKeys.hasPackage = foundPackage;\n            contextKeys.hasExecutableProduct = executableProducts.length > 0;\n            contextKeys.packageHasDependencies = dependencies.length > 0;\n        });\n    }\n\n    /**\n     * Update context keys based on package contents\n     */\n    async updateContextKeysForFile() {\n        if (this.currentDocument) {\n            const target = await this.currentFolder?.swiftPackage.getTarget(\n                this.currentDocument?.fsPath\n            );\n            contextKeys.currentTargetType = target?.type;\n        } else {\n            contextKeys.currentTargetType = undefined;\n        }\n\n        if (this.currentFolder) {\n            const languageClient = this.languageClientManager.get(this.currentFolder);\n            await languageClient.useLanguageClient(async client => {\n                const experimentalCaps = client.initializeResult?.capabilities.experimental;\n                if (!experimentalCaps) {\n                    contextKeys.supportsReindexing = false;\n                    contextKeys.supportsDocumentationLivePreview = false;\n                    return;\n                }\n                contextKeys.supportsReindexing =\n                    experimentalCaps[ReIndexProjectRequest.method] !== undefined;\n                contextKeys.supportsDocumentationLivePreview =\n                    experimentalCaps[DocCDocumentationRequest.method] !== undefined;\n            });\n        }\n\n        setSnippetContextKey(this);\n    }\n\n    /**\n     * Update hasPlugins context key\n     */\n    updatePluginContextKey() {\n        let hasPlugins = false;\n        for (const folder of this.folders) {\n            if (folder.swiftPackage.plugins.length > 0) {\n                hasPlugins = true;\n                break;\n            }\n        }\n        contextKeys.packageHasPlugins = hasPlugins;\n    }\n\n    /** Setup the vscode event listeners to catch folder changes and active window changes */\n    private setupEventListeners() {\n        // add event listener for when a workspace folder is added/removed\n        const onWorkspaceChange = vscode.workspace.onDidChangeWorkspaceFolders(event => {\n            if (this === undefined) {\n                // eslint-disable-next-line no-console\n                console.log(\"Trying to run onDidChangeWorkspaceFolders on deleted context\");\n                return;\n            }\n            void this.onDidChangeWorkspaceFolders(event);\n        });\n        // add event listener for when the active edited text document changes\n        const onDidChangeActiveWindow = vscode.window.onDidChangeActiveTextEditor(async editor => {\n            if (this === undefined) {\n                // eslint-disable-next-line no-console\n                console.log(\"Trying to run onDidChangeWorkspaceFolders on deleted context\");\n                return;\n            }\n            await this.focusTextEditor(editor);\n        });\n        this.subscriptions.push(onWorkspaceChange, onDidChangeActiveWindow);\n    }\n\n    /** Add workspace folders at initialisation */\n    async addWorkspaceFolders() {\n        // add workspace folders, already loaded\n        if (vscode.workspace.workspaceFolders && vscode.workspace.workspaceFolders.length > 0) {\n            for (const folder of vscode.workspace.workspaceFolders) {\n                await this.addWorkspaceFolder(folder);\n            }\n        }\n        // If we don't have a current selected folder Start up language server by firing focus event\n        // on either null folder or the first folder if there is only one\n        if (this.currentFolder === undefined) {\n            if (this.folders.length === 1) {\n                await this.focusFolder(this.folders[0]);\n            } else {\n                await this.focusFolder(null);\n            }\n        }\n        await this.initialisationComplete();\n    }\n\n    /**\n     * Fire an event to all folder observers\n     * @param folder folder to fire event for\n     * @param operation event type\n     */\n    async fireEvent(folder: FolderContext | null, operation: FolderOperation) {\n        for (const observer of this.observers) {\n            await observer({ folder, operation, workspace: this });\n        }\n    }\n\n    /**\n     * set the focus folder\n     * @param folder folder that has gained focus, you can have a null folder\n     */\n    async focusFolder(folderContext: FolderContext | null) {\n        // null and undefined mean different things here. Undefined means nothing\n        // has been setup, null means we want to send focus events but for a null\n        // folder\n        if (folderContext === this.currentFolder) {\n            return;\n        }\n\n        // send unfocus event for previous folder observers\n        if (this.currentFolder !== undefined) {\n            await this.fireEvent(this.currentFolder, FolderOperation.unfocus);\n        }\n        this.currentFolder = folderContext;\n\n        // send focus event to all observers\n        await this.fireEvent(folderContext, FolderOperation.focus);\n    }\n\n    public testsFinished(folder: FolderContext, kind: TestKind, targets: string[]) {\n        this.testFinishEmitter.fire({ kind, folder, targets });\n    }\n\n    public testsStarted(folder: FolderContext, kind: TestKind, targets: string[]) {\n        this.testStartEmitter.fire({ kind, folder, targets });\n    }\n\n    public buildStarted(\n        targetName: string,\n        launchConfig: vscode.DebugConfiguration,\n        options: vscode.DebugSessionOptions\n    ) {\n        this.buildStartEmitter.fire({ targetName, launchConfig, options });\n    }\n\n    public buildFinished(\n        targetName: string,\n        launchConfig: vscode.DebugConfiguration,\n        options: vscode.DebugSessionOptions\n    ) {\n        this.buildFinishEmitter.fire({ targetName, launchConfig, options });\n    }\n\n    /**\n     * catch workspace folder changes and add or remove folders based on those changes\n     * @param event workspace folder event\n     */\n    async onDidChangeWorkspaceFolders(event: vscode.WorkspaceFoldersChangeEvent) {\n        for (const folder of event.added) {\n            await this.addWorkspaceFolder(folder);\n        }\n\n        for (const folder of event.removed) {\n            await this.removeWorkspaceFolder(folder);\n        }\n    }\n\n    /**\n     * Called whenever a folder is added to the workspace\n     * @param folder folder being added\n     */\n    async addWorkspaceFolder(workspaceFolder: vscode.WorkspaceFolder) {\n        const folders = await searchForPackages(\n            workspaceFolder.uri,\n            configuration.disableSwiftPMIntegration,\n            configuration.folder(workspaceFolder).searchSubfoldersForPackages\n        );\n\n        for (const folder of folders) {\n            await this.addPackageFolder(folder, workspaceFolder);\n        }\n\n        if (this.getActiveWorkspaceFolder(vscode.window.activeTextEditor) === workspaceFolder) {\n            await this.focusTextEditor(vscode.window.activeTextEditor);\n        }\n    }\n\n    public async addPackageFolder(\n        folder: vscode.Uri,\n        workspaceFolder: vscode.WorkspaceFolder\n    ): Promise<FolderContext> {\n        // find context with root folder\n        const index = this.folders.findIndex(context => context.folder.fsPath === folder.fsPath);\n        if (index !== -1) {\n            this.outputChannel.log(`Adding package folder ${folder} twice`, \"WARN\");\n            return this.folders[index];\n        }\n        const folderContext = await FolderContext.create(folder, workspaceFolder, this);\n        this.folders.push(folderContext);\n\n        await this.fireEvent(folderContext, FolderOperation.add);\n        return folderContext;\n    }\n\n    /**\n     * called when a folder is removed from workspace\n     * @param folder folder being removed\n     */\n    async removeWorkspaceFolder(workspaceFolder: vscode.WorkspaceFolder) {\n        for (const folder of this.folders) {\n            if (folder.workspaceFolder !== workspaceFolder) {\n                return;\n            }\n            // if current folder is this folder send unfocus event by setting\n            // current folder to undefined\n            if (this.currentFolder === folder) {\n                await this.focusFolder(null);\n            }\n            // run observer functions in reverse order when removing\n            const observersReversed = [...this.observers];\n            observersReversed.reverse();\n            for (const observer of observersReversed) {\n                await observer({ folder, operation: FolderOperation.remove, workspace: this });\n            }\n            folder.dispose();\n        }\n        this.folders = this.folders.filter(folder => folder.workspaceFolder !== workspaceFolder);\n    }\n\n    onDidChangeFolders(listener: (event: FolderEvent) => unknown): vscode.Disposable {\n        this.observers.add(listener);\n        return { dispose: () => this.observers.delete(listener) };\n    }\n\n    onDidChangeSwiftFiles(listener: (event: SwiftFileEvent) => unknown): vscode.Disposable {\n        this.swiftFileObservers.add(listener);\n        return { dispose: () => this.swiftFileObservers.delete(listener) };\n    }\n\n    /** set focus based on the file a TextEditor is editing */\n    async focusTextEditor(editor?: vscode.TextEditor) {\n        await this.focusUri(editor?.document.uri);\n    }\n\n    async focusUri(uri?: vscode.Uri) {\n        this.currentDocument = uri ?? null;\n        await this.updateContextKeysForFile();\n        if (\n            this.currentDocument?.scheme === \"file\" ||\n            this.currentDocument?.scheme === \"sourcekit-lsp\"\n        ) {\n            await this.focusPackageUri(this.currentDocument);\n        }\n    }\n\n    /** set focus based on the file */\n    async focusPackageUri(uri: vscode.Uri) {\n        const packageFolder = await this.getPackageFolder(uri);\n        if (packageFolder instanceof FolderContext) {\n            await this.focusFolder(packageFolder);\n            // clear last focus uri as we have set focus for a folder that has already loaded\n            this.lastFocusUri = undefined;\n        } else if (packageFolder instanceof vscode.Uri) {\n            if (this.initialisationFinished === false) {\n                // If a package takes a long time to load during initialisation, a focus event\n                // can occur prior to the package being fully loaded. At this point because the\n                // folder for that package isn't setup it will attempt to add the package again.\n                // To avoid this if we are still initialising we store the last uri to get focus\n                // and once the initialisation is complete we call focusUri again from the function\n                // initialisationComplete.\n                this.lastFocusUri = uri;\n            } else {\n                const workspaceFolder = vscode.workspace.getWorkspaceFolder(packageFolder);\n                if (!workspaceFolder) {\n                    return;\n                }\n                await this.unfocusCurrentFolder();\n                const folderContext = await this.addPackageFolder(packageFolder, workspaceFolder);\n                await this.focusFolder(folderContext);\n            }\n        } else {\n            await this.focusFolder(null);\n        }\n    }\n\n    private async initialisationComplete() {\n        this.initialisationFinished = true;\n        if (this.lastFocusUri) {\n            await this.focusUri(this.lastFocusUri);\n            this.lastFocusUri = undefined;\n        }\n    }\n\n    /** return workspace folder from text editor */\n    private getWorkspaceFolder(url: vscode.Uri): vscode.WorkspaceFolder | undefined {\n        return vscode.workspace.getWorkspaceFolder(url);\n    }\n\n    /** return workspace folder from text editor */\n    private getActiveWorkspaceFolder(\n        editor?: vscode.TextEditor\n    ): vscode.WorkspaceFolder | undefined {\n        if (!editor || !editor.document) {\n            return;\n        }\n        return vscode.workspace.getWorkspaceFolder(editor.document.uri);\n    }\n\n    /** Return Package folder for url.\n     *\n     * First the functions checks in the currently loaded folders to see if it exists inside\n     * one of those. If not then it searches up the tree to find the uppermost folder in the\n     * workspace that contains a Package.swift\n     */\n    private async getPackageFolder(\n        url: vscode.Uri\n    ): Promise<FolderContext | vscode.Uri | undefined> {\n        // is editor document in any of the current FolderContexts\n        const folder = this.folders.find(context => {\n            return isPathInsidePath(url.fsPath, context.folder.fsPath);\n        });\n        if (folder) {\n            return folder;\n        }\n\n        // if not search directory tree for 'Package.swift' files\n        const workspaceFolder = this.getWorkspaceFolder(url);\n        if (!workspaceFolder) {\n            return;\n        }\n        const workspacePath = workspaceFolder.uri.fsPath;\n        let packagePath: string | undefined = undefined;\n        let currentFolder = path.dirname(url.fsPath);\n        // does Package.swift exist in this folder\n        if (await this.isValidWorkspaceFolder(currentFolder)) {\n            packagePath = currentFolder;\n        }\n        // does Package.swift exist in any parent folders up to the root of the\n        // workspace\n        while (currentFolder !== workspacePath) {\n            currentFolder = path.dirname(currentFolder);\n            if (await this.isValidWorkspaceFolder(currentFolder)) {\n                packagePath = currentFolder;\n            }\n        }\n\n        if (packagePath) {\n            return vscode.Uri.file(packagePath);\n        } else {\n            return;\n        }\n    }\n\n    /**\n     * Return if folder is considered a valid root folder ie does it contain a SwiftPM\n     * Package.swift or a CMake compile_commands.json, compile_flags.txt, or a BSP buildServer.json.\n     */\n    async isValidWorkspaceFolder(folder: string): Promise<boolean> {\n        return await isValidWorkspaceFolder(folder, configuration.disableSwiftPMIntegration);\n    }\n\n    /** send unfocus event to current focussed folder and clear current folder */\n    private async unfocusCurrentFolder() {\n        // send unfocus event for previous folder observers\n        if (this.currentFolder !== undefined) {\n            await this.fireEvent(this.currentFolder, FolderOperation.unfocus);\n        }\n        this.currentFolder = undefined;\n    }\n\n    private async needToAutoGenerateLaunchConfig() {\n        let autoGenerate = false;\n        for (const folder of this.folders) {\n            const requiresAutoGenerate =\n                configuration.folder(folder.workspaceFolder).autoGenerateLaunchConfigurations &&\n                (await folder.swiftPackage.executableProducts).length > 0;\n            autoGenerate = autoGenerate || requiresAutoGenerate;\n        }\n        return autoGenerate;\n    }\n\n    private observers = new Set<(listener: FolderEvent) => unknown>();\n    private swiftFileObservers = new Set<(listener: SwiftFileEvent) => unknown>();\n}\n\n/** Test events for test run begin/end */\ninterface TestEvent {\n    kind: TestKind;\n    folder: FolderContext;\n    targets: string[];\n}\n\n/** Build events for build + run start/stop */\ninterface BuildEvent {\n    targetName: string;\n    launchConfig: vscode.DebugConfiguration;\n    options: vscode.DebugSessionOptions;\n}\n\n/** Workspace Folder Operation types */\nexport enum FolderOperation {\n    // Package folder has been added\n    add = \"add\",\n    // Package folder has been removed\n    remove = \"remove\",\n    // Workspace folder has gained focus via a file inside the folder becoming the actively edited file\n    focus = \"focus\",\n    // Workspace folder loses focus because another workspace folder gained it\n    unfocus = \"unfocus\",\n    // Package.swift has been updated\n    packageUpdated = \"packageUpdated\",\n    // Package.resolved has been updated\n    resolvedUpdated = \"resolvedUpdated\",\n    // .build/workspace-state.json has been updated\n    workspaceStateUpdated = \"workspaceStateUpdated\",\n    // .build/workspace-state.json has been updated\n    packageViewUpdated = \"packageViewUpdated\",\n    // Package plugins list has been updated\n    pluginsUpdated = \"pluginsUpdated\",\n    // The folder's swift toolchain version has been updated\n    swiftVersionUpdated = \"swiftVersionUpdated\",\n}\n\n/** Workspace Folder Event */\nexport interface FolderEvent {\n    operation: FolderOperation;\n    workspace: WorkspaceContext;\n    folder: FolderContext | null;\n}\n\n/** File Operation types */\nexport enum FileOperation {\n    // File has been created\n    created = \"created\",\n    // File has been changed\n    changed = \"changed\",\n    // File was deleted\n    deleted = \"deleted\",\n}\n\n/** Swift File Event */\nexport interface SwiftFileEvent {\n    operation: FileOperation;\n    uri: vscode.Uri;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport { LinuxMain } from \"./LinuxMain\";\nimport { PackageWatcher } from \"./PackageWatcher\";\nimport { SwiftPackage, Target, TargetType } from \"./SwiftPackage\";\nimport { TestExplorer } from \"./TestExplorer/TestExplorer\";\nimport { WorkspaceContext, FolderOperation } from \"./WorkspaceContext\";\nimport { BackgroundCompilation } from \"./BackgroundCompilation\";\nimport { TaskQueue } from \"./tasks/TaskQueue\";\nimport { isPathInsidePath } from \"./utilities/filesystem\";\nimport { SwiftOutputChannel } from \"./ui/SwiftOutputChannel\";\nimport { SwiftToolchain } from \"./toolchain/toolchain\";\n\nexport class FolderContext implements vscode.Disposable {\n    private packageWatcher: PackageWatcher;\n    public backgroundCompilation: BackgroundCompilation;\n    public hasResolveErrors = false;\n    public testExplorer?: TestExplorer;\n    public taskQueue: TaskQueue;\n\n    /**\n     * FolderContext constructor\n     * @param folder Workspace Folder\n     * @param swiftPackage Swift Package inside the folder\n     * @param workspaceContext Workspace context\n     */\n    private constructor(\n        public folder: vscode.Uri,\n        public toolchain: SwiftToolchain,\n        public linuxMain: LinuxMain,\n        public swiftPackage: SwiftPackage,\n        public workspaceFolder: vscode.WorkspaceFolder,\n        public workspaceContext: WorkspaceContext\n    ) {\n        this.packageWatcher = new PackageWatcher(this, workspaceContext);\n        this.backgroundCompilation = new BackgroundCompilation(this);\n        this.taskQueue = new TaskQueue(this);\n    }\n\n    /** dispose of any thing FolderContext holds */\n    dispose() {\n        this.linuxMain?.dispose();\n        this.packageWatcher.dispose();\n        this.testExplorer?.dispose();\n        this.backgroundCompilation.dispose();\n    }\n\n    /**\n     * Create FolderContext\n     * @param folder Folder that Folder Context is being created for\n     * @param workspaceContext Workspace context for extension\n     * @returns a new FolderContext\n     */\n    static async create(\n        folder: vscode.Uri,\n        workspaceFolder: vscode.WorkspaceFolder,\n        workspaceContext: WorkspaceContext\n    ): Promise<FolderContext> {\n        const statusItemText = `Loading Package (${FolderContext.uriName(folder)})`;\n        workspaceContext.statusItem.start(statusItemText);\n\n        const toolchain = await SwiftToolchain.create(folder);\n        const { linuxMain, swiftPackage } =\n            await workspaceContext.statusItem.showStatusWhileRunning(statusItemText, async () => {\n                const linuxMain = await LinuxMain.create(folder);\n                const swiftPackage = await SwiftPackage.create(folder, toolchain);\n                return { linuxMain, swiftPackage };\n            });\n        workspaceContext.statusItem.end(statusItemText);\n\n        const folderContext = new FolderContext(\n            folder,\n            toolchain,\n            linuxMain,\n            swiftPackage,\n            workspaceFolder,\n            workspaceContext\n        );\n\n        const error = await swiftPackage.error;\n        if (error) {\n            void vscode.window.showErrorMessage(\n                `Failed to load ${folderContext.name}/Package.swift: ${error.message}`\n            );\n            workspaceContext.outputChannel.log(\n                `Failed to load Package.swift: ${error.message}`,\n                folderContext.name\n            );\n        }\n\n        // Start watching for changes to Package.swift, Package.resolved and .swift-version\n        await folderContext.packageWatcher.install();\n\n        return folderContext;\n    }\n\n    get name(): string {\n        const relativePath = this.relativePath;\n        if (relativePath.length === 0) {\n            return this.workspaceFolder.name;\n        } else {\n            return `${this.workspaceFolder.name}/${this.relativePath}`;\n        }\n    }\n\n    get relativePath(): string {\n        return path.relative(this.workspaceFolder.uri.fsPath, this.folder.fsPath);\n    }\n\n    get isRootFolder(): boolean {\n        return this.workspaceFolder.uri === this.folder;\n    }\n\n    get swiftVersion() {\n        return this.toolchain.swiftVersion;\n    }\n\n    /** reload swift package for this folder */\n    async reload() {\n        await this.swiftPackage.reload(this.toolchain);\n    }\n\n    /** reload Package.resolved for this folder */\n    async reloadPackageResolved() {\n        await this.swiftPackage.reloadPackageResolved();\n    }\n\n    /** reload workspace-state.json for this folder */\n    async reloadWorkspaceState() {\n        await this.swiftPackage.reloadWorkspaceState();\n    }\n\n    /** Load Swift Plugins and store in Package */\n    async loadSwiftPlugins(outputChannel: SwiftOutputChannel) {\n        await this.swiftPackage.loadSwiftPlugins(this.toolchain, outputChannel);\n    }\n\n    /**\n     * Fire an event to all folder observers\n     * @param event event type\n     */\n    async fireEvent(event: FolderOperation) {\n        await this.workspaceContext.fireEvent(this, event);\n    }\n\n    /** Return edited Packages folder */\n    editedPackageFolder(identifier: string) {\n        return path.join(this.folder.fsPath, \"Packages\", identifier);\n    }\n\n    /** Create Test explorer for this folder */\n    addTestExplorer() {\n        if (this.testExplorer === undefined) {\n            this.testExplorer = new TestExplorer(this);\n        }\n        return this.testExplorer;\n    }\n\n    /** Create Test explorer for this folder */\n    removeTestExplorer() {\n        this.testExplorer?.dispose();\n        this.testExplorer = undefined;\n    }\n\n    /** Refresh the tests in the test explorer for this folder */\n    refreshTestExplorer() {\n        if (this.testExplorer?.controller.resolveHandler) {\n            void this.testExplorer.controller.resolveHandler(undefined);\n        }\n    }\n\n    /** Return if package folder has a test explorer */\n    hasTestExplorer() {\n        return this.testExplorer !== undefined;\n    }\n\n    static uriName(uri: vscode.Uri): string {\n        return path.basename(uri.fsPath);\n    }\n\n    /**\n     * Find testTarget for URI\n     * @param uri URI to find target for\n     * @returns Target\n     */\n    async getTestTarget(uri: vscode.Uri, type?: TargetType): Promise<Target | undefined> {\n        if (!isPathInsidePath(uri.fsPath, this.folder.fsPath)) {\n            return undefined;\n        }\n        const testTargets = await this.swiftPackage.getTargets(type);\n        const target = testTargets.find(element => {\n            const relativeUri = path.relative(\n                path.join(this.folder.fsPath, element.path),\n                uri.fsPath\n            );\n            return element.sources.find(file => file === relativeUri) !== undefined;\n        });\n        return target;\n    }\n}\n\nexport interface EditedPackage {\n    name: string;\n    folder: string;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { pathExists } from \"./utilities/filesystem\";\n\n/**\n * Cache the existence of `Tests/LinuxMain.swift`.\n */\nexport class LinuxMain {\n    private fileWatcher: vscode.FileSystemWatcher;\n\n    constructor(\n        folder: vscode.Uri,\n        public exists: boolean\n    ) {\n        this.fileWatcher = vscode.workspace.createFileSystemWatcher(\n            new vscode.RelativePattern(folder, \"Tests/LinuxMain.swift\"),\n            false,\n            true\n        );\n        this.fileWatcher.onDidCreate(() => (this.exists = true));\n        this.fileWatcher.onDidDelete(() => (this.exists = false));\n    }\n\n    static async create(folder: vscode.Uri): Promise<LinuxMain> {\n        const hasLinuxMain = await pathExists(folder.fsPath, \"Tests\", \"LinuxMain.swift\");\n        return new LinuxMain(folder, hasLinuxMain);\n    }\n\n    /**\n     * Disposes the {@link vscode.FileSystemWatcher file system watcher} when\n     * the extension deactivates.\n     */\n    dispose() {\n        this.fileWatcher?.dispose();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\n\n/**\n * Checks if a file, directory or symlink exists at the supplied path.\n * @param pathComponents The path to check for existence\n * @returns Whether or not an entity exists at the path\n */\nexport async function pathExists(...pathComponents: string[]): Promise<boolean> {\n    try {\n        await fs.access(path.join(...pathComponents));\n        return true;\n    } catch {\n        return false;\n    }\n}\n\n/**\n * Checks if a file exists at the supplied path.\n * @param pathComponents The file path to check for existence\n * @returns Whether or not the file exists at the path\n */\nexport async function fileExists(...pathComponents: string[]): Promise<boolean> {\n    try {\n        return (await fs.stat(path.join(...pathComponents))).isFile();\n    } catch (e) {\n        return false;\n    }\n}\n\n/**\n * Return whether a file/folder is inside a folder.\n * @param subpath child file/folder\n * @param parent parent folder\n * @returns if child file/folder is inside the parent folder\n */\nexport function isPathInsidePath(subpath: string, parent: string): boolean {\n    // return true if path doesn't start with '..'\n    return !path.relative(parent, subpath).startsWith(\"..\");\n}\n\n/**\n * Expand ~ in file path to full $HOME folder\n * @param filepath File path\n * @returns full path\n */\nexport function expandFilePathTilde(\n    filepath: string,\n    directory: string | null = process.env.HOME ?? null,\n    platform: NodeJS.Platform = process.platform\n): string {\n    // Guard no expanding on windows\n    if (platform === \"win32\") {\n        return filepath;\n    }\n    // Guard tilde is present\n    if (filepath[0] !== \"~\") {\n        return filepath;\n    }\n    // Guard we know home directory\n    if (!directory) {\n        return filepath;\n    }\n    return path.join(directory, filepath.slice(1));\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as path from \"path\";\nimport * as fs from \"fs/promises\";\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"./FolderContext\";\nimport { FolderOperation, WorkspaceContext } from \"./WorkspaceContext\";\nimport { BuildFlags } from \"./toolchain/BuildFlags\";\nimport { Version } from \"./utilities/version\";\nimport { fileExists } from \"./utilities/filesystem\";\nimport { showReloadExtensionNotification } from \"./ui/ReloadExtension\";\n\n/**\n * Watches for changes to **Package.swift** and **Package.resolved**.\n *\n * Any changes to these files will update the context keys, trigger a `resolve` task,\n * and update the Package Dependencies view.\n */\nexport class PackageWatcher {\n    private packageFileWatcher?: vscode.FileSystemWatcher;\n    private resolvedFileWatcher?: vscode.FileSystemWatcher;\n    private workspaceStateFileWatcher?: vscode.FileSystemWatcher;\n    private snippetWatcher?: vscode.FileSystemWatcher;\n    private swiftVersionFileWatcher?: vscode.FileSystemWatcher;\n    private currentVersion?: Version;\n\n    constructor(\n        private folderContext: FolderContext,\n        private workspaceContext: WorkspaceContext\n    ) {}\n\n    /**\n     * Creates and installs {@link vscode.FileSystemWatcher file system watchers} for\n     * **Package.swift** and **Package.resolved**.\n     */\n    async install() {\n        this.packageFileWatcher = this.createPackageFileWatcher();\n        this.resolvedFileWatcher = this.createResolvedFileWatcher();\n        this.workspaceStateFileWatcher = await this.createWorkspaceStateFileWatcher();\n        this.snippetWatcher = this.createSnippetFileWatcher();\n        this.swiftVersionFileWatcher = await this.createSwiftVersionFileWatcher();\n    }\n\n    /**\n     * Disposes the {@link vscode.FileSystemWatcher file system watchers}\n     * when the extension deactivates.\n     */\n    dispose() {\n        this.packageFileWatcher?.dispose();\n        this.resolvedFileWatcher?.dispose();\n        this.workspaceStateFileWatcher?.dispose();\n        this.snippetWatcher?.dispose();\n        this.swiftVersionFileWatcher?.dispose();\n    }\n\n    private createPackageFileWatcher(): vscode.FileSystemWatcher {\n        const watcher = vscode.workspace.createFileSystemWatcher(\n            new vscode.RelativePattern(this.folderContext.folder, \"Package.swift\")\n        );\n        watcher.onDidCreate(async () => await this.handlePackageSwiftChange());\n        watcher.onDidChange(async () => await this.handlePackageSwiftChange());\n        watcher.onDidDelete(async () => await this.handlePackageSwiftChange());\n        return watcher;\n    }\n\n    private createResolvedFileWatcher(): vscode.FileSystemWatcher {\n        const watcher = vscode.workspace.createFileSystemWatcher(\n            new vscode.RelativePattern(this.folderContext.folder, \"Package.resolved\")\n        );\n        watcher.onDidCreate(async () => await this.handlePackageResolvedChange());\n        watcher.onDidChange(async () => await this.handlePackageResolvedChange());\n        watcher.onDidDelete(async () => await this.handlePackageResolvedChange());\n        return watcher;\n    }\n\n    private async createWorkspaceStateFileWatcher(): Promise<vscode.FileSystemWatcher> {\n        const uri = vscode.Uri.joinPath(\n            vscode.Uri.file(\n                BuildFlags.buildDirectoryFromWorkspacePath(this.folderContext.folder.fsPath, true)\n            ),\n            \"workspace-state.json\"\n        );\n        const watcher = vscode.workspace.createFileSystemWatcher(uri.fsPath);\n        watcher.onDidCreate(async () => await this.handleWorkspaceStateChange());\n        watcher.onDidChange(async () => await this.handleWorkspaceStateChange());\n        watcher.onDidDelete(async () => await this.handleWorkspaceStateChange());\n\n        if (await fileExists(uri.fsPath)) {\n            await this.handleWorkspaceStateChange();\n        }\n\n        return watcher;\n    }\n\n    private createSnippetFileWatcher(): vscode.FileSystemWatcher {\n        const watcher = vscode.workspace.createFileSystemWatcher(\n            new vscode.RelativePattern(this.folderContext.folder, \"Snippets/*.swift\")\n        );\n        watcher.onDidCreate(async () => await this.handlePackageSwiftChange());\n        watcher.onDidDelete(async () => await this.handlePackageSwiftChange());\n        return watcher;\n    }\n\n    private async createSwiftVersionFileWatcher(): Promise<vscode.FileSystemWatcher> {\n        const watcher = vscode.workspace.createFileSystemWatcher(\n            new vscode.RelativePattern(this.folderContext.folder, \".swift-version\")\n        );\n        watcher.onDidCreate(async () => await this.handleSwiftVersionFileChange());\n        watcher.onDidChange(async () => await this.handleSwiftVersionFileChange());\n        watcher.onDidDelete(async () => await this.handleSwiftVersionFileChange());\n        this.currentVersion =\n            (await this.readSwiftVersionFile()) ?? this.folderContext.toolchain.swiftVersion;\n        return watcher;\n    }\n\n    async handleSwiftVersionFileChange() {\n        const version = await this.readSwiftVersionFile();\n        if (version && version.toString() !== this.currentVersion?.toString()) {\n            await this.workspaceContext.fireEvent(\n                this.folderContext,\n                FolderOperation.swiftVersionUpdated\n            );\n            await showReloadExtensionNotification(\n                \"Changing the swift toolchain version requires the extension to be reloaded\"\n            );\n        }\n        this.currentVersion = version ?? this.folderContext.toolchain.swiftVersion;\n    }\n\n    private async readSwiftVersionFile() {\n        const versionFile = path.join(this.folderContext.folder.fsPath, \".swift-version\");\n        try {\n            const contents = await fs.readFile(versionFile);\n            return Version.fromString(contents.toString().trim());\n        } catch (error) {\n            this.workspaceContext.outputChannel.appendLine(\n                `Failed to read .swift-version file at ${versionFile}: ${error}`\n            );\n            return undefined;\n        }\n    }\n\n    /**\n     * Handles a create or change event for **Package.swift**.\n     *\n     * This will reload the swift package description, update the\n     * launch configuration if required and then resolve the package\n     * dependencies.\n     */\n    async handlePackageSwiftChange() {\n        // Load SwiftPM Package.swift description\n        await this.folderContext.reload();\n        await this.workspaceContext.fireEvent(this.folderContext, FolderOperation.packageUpdated);\n    }\n\n    /**\n     * Handles a create or change event for **Package.resolved**.\n     *\n     * This will resolve any changes in the Package.resolved.\n     */\n    private async handlePackageResolvedChange() {\n        const packageResolvedHash = this.folderContext.swiftPackage.resolved?.fileHash;\n        await this.folderContext.reloadPackageResolved();\n        // if file contents has changed then send resolve updated message\n        if (this.folderContext.swiftPackage.resolved?.fileHash !== packageResolvedHash) {\n            await this.workspaceContext.fireEvent(\n                this.folderContext,\n                FolderOperation.resolvedUpdated\n            );\n        }\n    }\n\n    /**\n     * Handles a create or change event for **.build/workspace-state.json**.\n     *\n     * This will resolve any changes in the workspace-state.\n     */\n    private async handleWorkspaceStateChange() {\n        await this.folderContext.reloadWorkspaceState();\n        await this.workspaceContext.fireEvent(\n            this.folderContext,\n            FolderOperation.workspaceStateUpdated\n        );\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as path from \"path\";\nimport configuration from \"../configuration\";\nimport { SwiftToolchain, DarwinCompatibleTarget, getDarwinTargetTriple } from \"./toolchain\";\nimport { Version } from \"../utilities/version\";\n\n/** Target info */\nexport interface DarwinTargetInfo {\n    name: string;\n    target: DarwinCompatibleTarget;\n    version: string;\n}\n\nexport interface ArgumentFilter {\n    argument: string;\n    include: number;\n}\n\nexport class BuildFlags {\n    constructor(public toolchain: SwiftToolchain) {}\n\n    /**\n     * Get modified swift arguments with SDK flags.\n     *\n     * @param args original commandline arguments\n     */\n    private withSwiftSDKFlags(args: string[]): string[] {\n        switch (args[0]) {\n            case \"package\": {\n                const subcommand = args.splice(0, 2).concat(this.buildPathFlags());\n                switch (subcommand[1]) {\n                    case \"dump-symbol-graph\":\n                    case \"diagnose-api-breaking-changes\":\n                    case \"resolve\": {\n                        // These two tools require building the package, so SDK\n                        // flags are needed. Destination control flags are\n                        // required to be placed before subcommand options.\n                        return [...subcommand, ...this.swiftpmSDKFlags(), ...args];\n                    }\n                    default:\n                        // Other swift-package subcommands operate on the host,\n                        // so it doesn't need to know about the destination.\n                        return subcommand.concat(args);\n                }\n            }\n            case \"build\":\n            case \"run\":\n            case \"test\": {\n                const subcommand = args.splice(0, 1).concat(this.buildPathFlags());\n                return [...subcommand, ...this.swiftpmSDKFlags(), ...args];\n            }\n            default:\n                // We're not going to call the Swift compiler directly for cross-compiling\n                // and the destination settings are package-only, so do nothing here.\n                return args;\n        }\n    }\n\n    withSwiftPackageFlags(args: string[]): string[] {\n        switch (args[0]) {\n            case \"package\": {\n                if (args[1] === \"init\") {\n                    return args;\n                }\n                const newArgs = [...args];\n                newArgs.splice(1, 0, ...configuration.packageArguments);\n                return newArgs;\n            }\n            case \"build\":\n            case \"run\":\n            case \"test\":\n                return [...args, ...configuration.packageArguments];\n            default:\n                return args;\n        }\n    }\n\n    /**\n     * Get SDK flags for SwiftPM\n     */\n    swiftpmSDKFlags(): string[] {\n        const flags: string[] = [];\n        if (configuration.sdk !== \"\") {\n            flags.push(\"--sdk\", configuration.sdk, ...this.swiftDriverTargetFlags(true));\n        }\n        if (configuration.swiftSDK !== \"\") {\n            flags.push(\"--swift-sdk\", configuration.swiftSDK);\n        }\n        return flags;\n    }\n\n    /**\n     * Get build path flags to be passed to swift package manager and sourcekit-lsp server\n     */\n    buildPathFlags(): string[] {\n        if (configuration.buildPath && configuration.buildPath.length > 0) {\n            if (this.toolchain.swiftVersion.isLessThan(new Version(5, 8, 0))) {\n                return [\"--build-path\", configuration.buildPath];\n            } else {\n                return [\"--scratch-path\", configuration.buildPath];\n            }\n        } else {\n            return [];\n        }\n    }\n\n    /**\n     * Get build path from configuration if exists or return a fallback .build directory in given workspace\n     * @param filesystem path to workspace that will be used as a fallback loacation with .build directory\n     */\n    static buildDirectoryFromWorkspacePath(\n        workspacePath: string,\n        absolute = false,\n        platform?: \"posix\" | \"win32\"\n    ): string {\n        const nodePath =\n            platform === \"posix\" ? path.posix : platform === \"win32\" ? path.win32 : path;\n        const buildPath = configuration.buildPath.length > 0 ? configuration.buildPath : \".build\";\n        if (!nodePath.isAbsolute(buildPath) && absolute) {\n            return nodePath.join(workspacePath, buildPath);\n        } else {\n            return buildPath;\n        }\n    }\n\n    /**\n     * Get SDK flags for swiftc\n     *\n     * @param indirect whether to pass the flags by -Xswiftc\n     */\n    swiftDriverSDKFlags(indirect = false): string[] {\n        if (configuration.sdk === \"\") {\n            return [];\n        }\n        const args = [\"-sdk\", configuration.sdk];\n        return indirect ? args.flatMap(arg => [\"-Xswiftc\", arg]) : args;\n    }\n\n    /**\n     * @returns Darwin target information. Target id, name and version\n     */\n    getDarwinTarget(): DarwinTargetInfo | undefined {\n        const targetMap = [\n            { name: \"iPhoneOS\", target: DarwinCompatibleTarget.iOS },\n            { name: \"AppleTVOS\", target: DarwinCompatibleTarget.tvOS },\n            { name: \"WatchOS\", target: DarwinCompatibleTarget.watchOS },\n            { name: \"XROS\", target: DarwinCompatibleTarget.visionOS },\n        ];\n\n        if (configuration.sdk === \"\" || process.platform !== \"darwin\") {\n            return undefined;\n        }\n\n        const sdkKindParts = configuration.sdk.split(\"/\");\n        const sdkKind = sdkKindParts[sdkKindParts.length - 1];\n        for (const target of targetMap) {\n            if (sdkKind.includes(target.name)) {\n                // Obtain the version of the SDK.\n                const version = sdkKind.substring(\n                    // Trim the prefix\n                    target.name.length,\n                    // Trim the `.sdk` suffix\n                    sdkKind.length - 4\n                );\n                return { ...target, version: version };\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get target flags for swiftc\n     *\n     * @param indirect whether to pass the flags by -Xswiftc\n     */\n    swiftDriverTargetFlags(indirect = false): string[] {\n        const target = this.getDarwinTarget();\n        if (!target) {\n            return [];\n        }\n        const args = [\"-target\", `${getDarwinTargetTriple(target.target)}${target.version}`];\n        return indirect ? args.flatMap(arg => [\"-Xswiftc\", arg]) : args;\n    }\n\n    /**\n     * Get modified swift arguments with new arguments for disabling\n     * sandboxing if the `swift.disableSandbox` setting is enabled.\n     *\n     * @param args original commandline arguments\n     */\n    private withDisableSandboxFlags(args: string[]): string[] {\n        if (!configuration.disableSandbox) {\n            return args;\n        }\n        const disableSandboxFlags = [\"--disable-sandbox\", \"-Xswiftc\", \"-disable-sandbox\"];\n        switch (args[0]) {\n            case \"package\": {\n                return [args[0], ...disableSandboxFlags, ...args.slice(1)];\n            }\n            case \"build\":\n            case \"run\":\n            case \"test\": {\n                return [...args, ...disableSandboxFlags];\n            }\n            default:\n                // Do nothing for other commands\n                return args;\n        }\n    }\n\n    withAdditionalFlags(args: string[]): string[] {\n        return this.withSwiftPackageFlags(\n            this.withDisableSandboxFlags(this.withSwiftSDKFlags(args))\n        );\n    }\n\n    /**\n     *  Filter argument list\n     * @param args argument list\n     * @param filter argument list filter\n     * @returns filtered argument list\n     */\n    static filterArguments(args: string[], filter: ArgumentFilter[]): string[] {\n        const filteredArguments: string[] = [];\n        let includeCount = 0;\n        for (const arg of args) {\n            if (includeCount > 0) {\n                filteredArguments.push(arg);\n                includeCount -= 1;\n                continue;\n            }\n            const argFilter = filter.find(item => item.argument === arg);\n            if (argFilter) {\n                filteredArguments.push(arg);\n                includeCount = argFilter.include;\n                continue;\n            }\n            // find arguments of form arg=value\n            const argFilter2 = filter.find(\n                item => item.include === 1 && arg.startsWith(item.argument + \"=\")\n            );\n            if (argFilter2) {\n                filteredArguments.push(arg);\n            }\n        }\n        return filteredArguments;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport * as os from \"os\";\nimport * as plist from \"plist\";\nimport * as vscode from \"vscode\";\nimport configuration from \"../configuration\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\nimport { execFile, ExecFileError, execSwift } from \"../utilities/utilities\";\nimport { expandFilePathTilde, pathExists } from \"../utilities/filesystem\";\nimport { Version } from \"../utilities/version\";\nimport { BuildFlags } from \"./BuildFlags\";\nimport { Sanitizer } from \"./Sanitizer\";\nimport { SwiftlyConfig } from \"./ToolchainVersion\";\nimport { lineBreakRegex } from \"../utilities/tasks\";\n\n/**\n * Contents of **Info.plist** on Windows.\n */\ninterface InfoPlist {\n    DefaultProperties: {\n        XCTEST_VERSION: string | undefined;\n        SWIFT_TESTING_VERSION: string | undefined;\n    };\n}\n\n/**\n * Project template information retrieved from `swift package init --help`\n */\nexport interface SwiftProjectTemplate {\n    id: string;\n    name: string;\n    description: string;\n}\n\n/**\n * Stripped layout of `swift -print-target-info` output.\n */\ninterface SwiftTargetInfo {\n    compilerVersion: string;\n    target?: {\n        triple: string;\n        unversionedTriple: string;\n        [name: string]: string | string[];\n    };\n    paths: {\n        runtimeLibraryPaths: string[];\n        [name: string]: string | string[];\n    };\n    [name: string]: string | object | undefined;\n}\n\n/**\n * A Swift compilation target that can be compiled to\n * from macOS. These are similar to XCode's target list.\n */\nexport enum DarwinCompatibleTarget {\n    iOS = \"iOS\",\n    tvOS = \"tvOS\",\n    watchOS = \"watchOS\",\n    visionOS = \"xrOS\",\n}\n\nexport function getDarwinSDKName(target: DarwinCompatibleTarget): string {\n    switch (target) {\n        case DarwinCompatibleTarget.iOS:\n            return \"iphoneos\";\n        case DarwinCompatibleTarget.tvOS:\n            return \"appletvos\";\n        case DarwinCompatibleTarget.watchOS:\n            return \"watchos\";\n        case DarwinCompatibleTarget.visionOS:\n            return \"xros\";\n    }\n}\n\nexport function getDarwinTargetTriple(target: DarwinCompatibleTarget): string | undefined {\n    switch (target) {\n        case DarwinCompatibleTarget.iOS:\n            return \"arm64-apple-ios\";\n        case DarwinCompatibleTarget.tvOS:\n            return \"arm64-apple-tvos\";\n        case DarwinCompatibleTarget.watchOS:\n            return \"arm64-apple-watchos\";\n        case DarwinCompatibleTarget.visionOS:\n            return \"arm64-apple-xros\";\n    }\n}\n\nexport class SwiftToolchain {\n    public swiftVersionString: string;\n\n    constructor(\n        public swiftFolderPath: string, // folder swift executable in $PATH was found in\n        public toolchainPath: string, // toolchain folder. One folder up from swift bin folder. This is to support toolchains without usr folder\n        private targetInfo: SwiftTargetInfo,\n        public swiftVersion: Version, // Swift version as semVar variable\n        public runtimePath?: string, // runtime library included in output from `swift -print-target-info`\n        public defaultSDK?: string,\n        public customSDK?: string,\n        public xcTestPath?: string,\n        public swiftTestingPath?: string,\n        public swiftPMTestingHelperPath?: string\n    ) {\n        this.swiftVersionString = targetInfo.compilerVersion;\n    }\n\n    static async create(folder?: vscode.Uri): Promise<SwiftToolchain> {\n        const swiftFolderPath = await this.getSwiftFolderPath();\n        const toolchainPath = await this.getToolchainPath(swiftFolderPath, folder);\n        const targetInfo = await this.getSwiftTargetInfo(\n            this._getToolchainExecutable(toolchainPath, \"swift\")\n        );\n        const swiftVersion = this.getSwiftVersion(targetInfo);\n        const [runtimePath, defaultSDK] = await Promise.all([\n            this.getRuntimePath(targetInfo),\n            this.getDefaultSDK(),\n        ]);\n        const customSDK = this.getCustomSDK();\n        const [xcTestPath, swiftTestingPath, swiftPMTestingHelperPath] = await Promise.all([\n            this.getXCTestPath(\n                targetInfo,\n                swiftFolderPath,\n                swiftVersion,\n                runtimePath,\n                customSDK ?? defaultSDK\n            ),\n            this.getSwiftTestingPath(\n                targetInfo,\n                swiftVersion,\n                runtimePath,\n                customSDK ?? defaultSDK\n            ),\n            this.getSwiftPMTestingHelperPath(toolchainPath),\n        ]);\n\n        return new SwiftToolchain(\n            swiftFolderPath,\n            toolchainPath,\n            targetInfo,\n            swiftVersion,\n            runtimePath,\n            defaultSDK,\n            customSDK,\n            xcTestPath,\n            swiftTestingPath,\n            swiftPMTestingHelperPath\n        );\n    }\n\n    public get unversionedTriple(): string | undefined {\n        return this.targetInfo.target?.unversionedTriple;\n    }\n\n    /** build flags */\n    public get buildFlags(): BuildFlags {\n        return new BuildFlags(this);\n    }\n\n    /** build flags */\n    public sanitizer(name: string): Sanitizer | undefined {\n        return Sanitizer.create(name, this);\n    }\n\n    /**\n     * Returns true if the console output of `swift test --parallel` prints results\n     * to stdout with newlines or not.\n     */\n    public get hasMultiLineParallelTestOutput(): boolean {\n        return (\n            this.swiftVersion.isLessThanOrEqual(new Version(5, 6, 0)) ||\n            this.swiftVersion.isGreaterThanOrEqual(new Version(6, 0, 0))\n        );\n    }\n\n    /**\n     * Get active developer dir for Xcode\n     */\n    public static async getXcodeDeveloperDir(env?: { [key: string]: string }): Promise<string> {\n        const { stdout } = await execFile(\"xcode-select\", [\"-p\"], {\n            env: env,\n        });\n        return stdout.trimEnd();\n    }\n\n    /**\n     * @param target Target to obtain the SDK path for\n     * @returns path to the SDK for the target\n     */\n    public static async getSDKForTarget(\n        target: DarwinCompatibleTarget\n    ): Promise<string | undefined> {\n        return await this.getSDKPath(getDarwinSDKName(target));\n    }\n\n    /**\n     * @param sdk sdk name\n     * @returns path to the SDK\n     */\n    static async getSDKPath(sdk: string): Promise<string | undefined> {\n        // Include custom variables so that non-standard XCode installs can be better supported.\n        const { stdout } = await execFile(\"xcrun\", [\"--sdk\", sdk, \"--show-sdk-path\"], {\n            env: { ...process.env, ...configuration.swiftEnvironmentVariables },\n        });\n        return path.join(stdout.trimEnd());\n    }\n\n    /**\n     * Get the list of Xcode applications installed on macOS.\n     *\n     * Note: this uses a combination of xcode-select and the Spotlight index and may not contain\n     * all Xcode installations depending on the user's macOS settings.\n     *\n     * @returns an array of Xcode installations in no particular order.\n     */\n    public static async findXcodeInstalls(): Promise<string[]> {\n        if (process.platform !== \"darwin\") {\n            return [];\n        }\n\n        // Use the Spotlight index and xcode-select to find available Xcode installations\n        const [{ stdout: mdfindOutput }, xcodeDeveloperDir] = await Promise.all([\n            execFile(\"mdfind\", [`kMDItemCFBundleIdentifier == 'com.apple.dt.Xcode'`]),\n            this.getXcodeDeveloperDir(),\n        ]);\n        const spotlightXcodes =\n            mdfindOutput.length > 0 ? mdfindOutput.trimEnd().split(lineBreakRegex) : [];\n        const selectedXcode = this.getXcodeDirectory(xcodeDeveloperDir);\n\n        // Combine the results from both commands\n        const result = spotlightXcodes;\n        if (selectedXcode && spotlightXcodes.find(xcode => xcode === selectedXcode) === undefined) {\n            result.push(selectedXcode);\n        }\n        return result;\n    }\n\n    /**\n     * Finds the list of toolchains managed by Swiftly.\n     *\n     * @returns an array of toolchain paths\n     */\n    public static async getSwiftlyToolchainInstalls(): Promise<string[]> {\n        // Swiftly is only available on Linux right now\n        // TODO: Add support for macOS\n        if (process.platform !== \"linux\") {\n            return [];\n        }\n        try {\n            const swiftlyHomeDir: string | undefined = process.env[\"SWIFTLY_HOME_DIR\"];\n            if (!swiftlyHomeDir) {\n                return [];\n            }\n            const swiftlyConfig = await SwiftToolchain.getSwiftlyConfig();\n            if (!swiftlyConfig || !(\"installedToolchains\" in swiftlyConfig)) {\n                return [];\n            }\n            const installedToolchains = swiftlyConfig.installedToolchains;\n            if (!Array.isArray(installedToolchains)) {\n                return [];\n            }\n            return installedToolchains\n                .filter((toolchain): toolchain is string => typeof toolchain === \"string\")\n                .map(toolchain => path.join(swiftlyHomeDir, \"toolchains\", toolchain));\n        } catch (error) {\n            throw new Error(\"Failed to retrieve Swiftly installations from disk.\");\n        }\n    }\n\n    /**\n     * Reads the Swiftly configuration file, if it exists.\n     *\n     * @returns A parsed Swiftly configuration.\n     */\n    private static async getSwiftlyConfig(): Promise<SwiftlyConfig | undefined> {\n        const swiftlyHomeDir: string | undefined = process.env[\"SWIFTLY_HOME_DIR\"];\n        if (!swiftlyHomeDir) {\n            return;\n        }\n        const swiftlyConfigRaw = await fs.readFile(\n            path.join(swiftlyHomeDir, \"config.json\"),\n            \"utf-8\"\n        );\n        return JSON.parse(swiftlyConfigRaw);\n    }\n\n    /**\n     * Checks common directories for available swift toolchain installations.\n     *\n     * @returns an array of toolchain paths\n     */\n    public static async getToolchainInstalls(): Promise<string[]> {\n        if (process.platform !== \"darwin\") {\n            return [];\n        }\n        // TODO: If Swiftly is managing these toolchains then omit them\n        return Promise.all([\n            this.findToolchainsIn(\"/Library/Developer/Toolchains/\"),\n            this.findToolchainsIn(path.join(os.homedir(), \"Library/Developer/Toolchains/\")),\n            this.findCommandLineTools(),\n        ]).then(results => results.flatMap(a => a));\n    }\n\n    /**\n     * Searches the given directory for any swift toolchain installations.\n     *\n     * @param directory the directory path to search in\n     * @returns an array of toolchain paths\n     */\n    public static async findToolchainsIn(directory: string): Promise<string[]> {\n        try {\n            const toolchains = await Promise.all(\n                (await fs.readdir(directory, { withFileTypes: true }))\n                    .filter(dirent => dirent.name.startsWith(\"swift-\"))\n                    .map(async dirent => {\n                        const toolchainPath = path.join(dirent.path, dirent.name);\n                        const toolchainSwiftPath = path.join(toolchainPath, \"usr\", \"bin\", \"swift\");\n                        if (!(await pathExists(toolchainSwiftPath))) {\n                            return null;\n                        }\n                        return toolchainPath;\n                    })\n            );\n            return toolchains.filter(\n                (toolchain): toolchain is string => typeof toolchain === \"string\"\n            );\n        } catch {\n            // Assume that there are no installations here\n            return [];\n        }\n    }\n\n    /**\n     * Get a list of new project templates from swift package manager\n     * @returns a {@link SwiftProjectTemplate} for each discovered project type\n     */\n    public async getProjectTemplates(): Promise<SwiftProjectTemplate[]> {\n        // Only swift versions >=5.8.0 are supported\n        if (this.swiftVersion.isLessThan(new Version(5, 8, 0))) {\n            return [];\n        }\n        // Parse the output from `swift package init --help`\n        const { stdout } = await execSwift([\"package\", \"init\", \"--help\"], \"default\");\n        const lines = stdout.split(/\\r?\\n/g);\n        // Determine where the `--type` option is documented\n        let position = lines.findIndex(line => line.trim().startsWith(\"--type\"));\n        if (position === -1) {\n            throw new Error(\"Unable to parse output from `swift package init --help`\");\n        }\n        // Loop through the possible project types in the output\n        position += 1;\n        const result: SwiftProjectTemplate[] = [];\n        const typeRegex = /^\\s*([a-zA-z-]+)\\s+-\\s+(.+)$/;\n        for (; position < lines.length; position++) {\n            const line = lines[position];\n            // Stop if we hit a new command line option\n            if (line.trim().startsWith(\"--\")) {\n                break;\n            }\n            // Check if this is the start of a new project type\n            const match = line.match(typeRegex);\n            if (match) {\n                const nameSegments = match[1].split(\"-\");\n                result.push({\n                    id: match[1],\n                    name: nameSegments\n                        .map(seg => seg[0].toLocaleUpperCase() + seg.slice(1))\n                        .join(\" \"),\n                    description: match[2],\n                });\n            } else {\n                // Continuation of the previous project type\n                result[result.length - 1].description += \" \" + line.trim();\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Returns the path to the CommandLineTools toolchain if its installed.\n     */\n    public static async findCommandLineTools(): Promise<string[]> {\n        const commandLineToolsPath = \"/Library/Developer/CommandLineTools\";\n        if (!(await pathExists(commandLineToolsPath))) {\n            return [];\n        }\n\n        const toolchainSwiftPath = path.join(commandLineToolsPath, \"usr\", \"bin\", \"swift\");\n        if (!(await pathExists(toolchainSwiftPath))) {\n            return [];\n        }\n        return [commandLineToolsPath];\n    }\n\n    /**\n     * Return fullpath for toolchain executable\n     */\n    public getToolchainExecutable(executable: string): string {\n        return SwiftToolchain._getToolchainExecutable(this.toolchainPath, executable);\n    }\n\n    private static _getToolchainExecutable(toolchainPath: string, executable: string): string {\n        // should we add `.exe` at the end of the executable name\n        const executableSuffix = process.platform === \"win32\" ? \".exe\" : \"\";\n        return path.join(toolchainPath, \"bin\", executable + executableSuffix);\n    }\n\n    /**\n     * Returns the path to the Xcode application given a toolchain path. Returns undefined\n     * if no application could be found.\n     * @param toolchainPath The toolchain path.\n     * @returns The path to the Xcode application or undefined if none.\n     */\n    private static getXcodeDirectory(toolchainPath: string): string | undefined {\n        let xcodeDirectory = toolchainPath;\n        while (path.extname(xcodeDirectory) !== \".app\") {\n            if (path.parse(xcodeDirectory).base === \"\") {\n                return undefined;\n            }\n            xcodeDirectory = path.dirname(xcodeDirectory);\n        }\n        return xcodeDirectory;\n    }\n\n    /**\n     * Returns the path to the LLDB executable inside the selected toolchain.\n     * If the user is on macOS and has no OSS toolchain selected, also search\n     * inside Xcode.\n     * @returns The path to the `lldb` executable\n     * @throws Throws an error if the executable cannot be found\n     */\n    public async getLLDB(): Promise<string> {\n        return this.findToolchainOrXcodeExecutable(\"lldb\");\n    }\n\n    /**\n     * Returns the path to the LLDB debug adapter executable inside the selected\n     * toolchain. If the user is on macOS and has no OSS toolchain selected, also\n     * search inside Xcode.\n     * @returns The path to the `lldb-dap` executable\n     * @throws Throws an error if the executable cannot be found\n     */\n    public async getLLDBDebugAdapter(): Promise<string> {\n        return this.findToolchainOrXcodeExecutable(\"lldb-dap\");\n    }\n\n    /**\n     * Search for the supplied executable in the toolchain.\n     * If the user is on macOS and has no OSS toolchain selected, also\n     * search inside Xcode.\n     */\n    private async findToolchainOrXcodeExecutable(executable: string): Promise<string> {\n        if (process.platform === \"win32\") {\n            executable += \".exe\";\n        }\n        const toolchainExecutablePath = path.join(this.swiftFolderPath, executable);\n\n        if (await pathExists(toolchainExecutablePath)) {\n            return toolchainExecutablePath;\n        }\n\n        if (process.platform !== \"darwin\") {\n            throw new Error(\n                `Failed to find ${executable} within Swift toolchain '${this.toolchainPath}'`\n            );\n        }\n        return this.findXcodeExecutable(executable);\n    }\n\n    private async findXcodeExecutable(executable: string): Promise<string> {\n        const xcodeDirectory = SwiftToolchain.getXcodeDirectory(this.toolchainPath);\n        if (!xcodeDirectory) {\n            throw new Error(\n                `Failed to find ${executable} within Swift toolchain '${this.toolchainPath}'`\n            );\n        }\n        try {\n            const { stdout } = await execFile(\"xcrun\", [\"-find\", executable], {\n                env: { ...process.env, DEVELOPER_DIR: xcodeDirectory },\n            });\n            return stdout.trimEnd();\n        } catch (error) {\n            let errorMessage = `Failed to find ${executable} within Xcode Swift toolchain '${xcodeDirectory}'`;\n            if (error instanceof Error) {\n                errorMessage += `:\\n${error.message}`;\n            }\n            throw new Error(errorMessage);\n        }\n    }\n\n    private basePlatformDeveloperPath(): string | undefined {\n        const sdk = this.customSDK ?? this.defaultSDK;\n        if (!sdk) {\n            return undefined;\n        }\n        return path.resolve(sdk, \"../../\");\n    }\n\n    /**\n     * Library path for swift-testing executables\n     */\n    public swiftTestingLibraryPath(): string | undefined {\n        let result = \"\";\n        const base = this.basePlatformDeveloperPath();\n        if (base) {\n            result = `${path.join(base, \"usr/lib\")}:`;\n        }\n        return `${result}${path.join(this.toolchainPath, \"lib/swift/macosx/testing\")}`;\n    }\n\n    /**\n     * Framework path for swift-testing executables\n     */\n    public swiftTestingFrameworkPath(): string | undefined {\n        const base = this.basePlatformDeveloperPath();\n        if (!base) {\n            return undefined;\n        }\n        const frameworks = path.join(base, \"Library/Frameworks\");\n        const privateFrameworks = path.join(base, \"Library/PrivateFrameworks\");\n        return `${frameworks}:${privateFrameworks}`;\n    }\n\n    get diagnostics(): string {\n        let str = \"\";\n        str += this.swiftVersionString;\n        str += `\\nPlatform: ${process.platform}`;\n        str += `\\nSwift Path: ${this.swiftFolderPath}`;\n        str += `\\nToolchain Path: ${this.toolchainPath}`;\n        if (this.runtimePath) {\n            str += `\\nRuntime Library Path: ${this.runtimePath}`;\n        }\n        if (this.targetInfo.target?.triple) {\n            str += `\\nDefault Target: ${this.targetInfo.target?.triple}`;\n        }\n        if (this.defaultSDK) {\n            str += `\\nDefault SDK: ${this.defaultSDK}`;\n        }\n        if (this.customSDK) {\n            str += `\\nCustom SDK: ${this.customSDK}`;\n        }\n        if (this.xcTestPath) {\n            str += `\\nXCTest Path: ${this.xcTestPath}`;\n        }\n        return str;\n    }\n\n    logDiagnostics(channel: SwiftOutputChannel) {\n        channel.logDiagnostic(this.diagnostics);\n    }\n\n    private static async getSwiftFolderPath(): Promise<string> {\n        try {\n            let swift: string;\n            if (configuration.path !== \"\") {\n                const windowsExeSuffix = process.platform === \"win32\" ? \".exe\" : \"\";\n                swift = path.join(configuration.path, `swift${windowsExeSuffix}`);\n            } else {\n                switch (process.platform) {\n                    case \"darwin\": {\n                        const { stdout } = await execFile(\"which\", [\"swift\"]);\n                        swift = stdout.trimEnd();\n                        break;\n                    }\n                    case \"win32\": {\n                        const { stdout } = await execFile(\"where\", [\"swift\"]);\n                        const paths = stdout.trimEnd().split(\"\\r\\n\");\n                        if (paths.length > 1) {\n                            void vscode.window.showWarningMessage(\n                                `Found multiple swift executables in in %PATH%. Using excutable found at ${paths[0]}`\n                            );\n                        }\n                        swift = paths[0];\n                        break;\n                    }\n                    default: {\n                        // use `type swift` to find `swift`. Run inside /bin/sh to ensure\n                        // we get consistent output as different shells output a different\n                        // format. Tried running with `-p` but that is not available in /bin/sh\n                        const { stdout } = await execFile(\"/bin/sh\", [\n                            \"-c\",\n                            \"LC_MESSAGES=C type swift\",\n                        ]);\n                        const swiftMatch = /^swift is (.*)$/.exec(stdout.trimEnd());\n                        if (swiftMatch) {\n                            swift = swiftMatch[1];\n                        } else {\n                            throw Error(\"Failed to find swift executable\");\n                        }\n                        break;\n                    }\n                }\n            }\n            // swift may be a symbolic link\n            const realSwift = await fs.realpath(swift);\n            const swiftPath = expandFilePathTilde(path.dirname(realSwift));\n            return await this.getSwiftEnvPath(swiftPath);\n        } catch {\n            throw Error(\"Failed to find swift executable\");\n        }\n    }\n\n    /**\n     * swiftenv is a popular way to install swift on Linux. It uses shim shell scripts\n     * for all of the swift executables. This is problematic when we are trying to find\n     * the lldb version. Also swiftenv can also change the swift version beneath which\n     * could cause problems. This function will return the actual path to the swift\n     * executable instead of the shim version\n     * @param swiftPath Path to swift folder\n     * @returns Path to swift folder installed by swiftenv\n     */\n    private static async getSwiftEnvPath(swiftPath: string): Promise<string> {\n        if (process.platform === \"linux\" && swiftPath.endsWith(\".swiftenv/shims\")) {\n            try {\n                const swiftenvPath = path.dirname(swiftPath);\n                const swiftenv = path.join(swiftenvPath, \"libexec\", \"swiftenv\");\n                const { stdout } = await execFile(swiftenv, [\"which\", \"swift\"]);\n                const swift = stdout.trimEnd();\n                return path.dirname(swift);\n            } catch {\n                return swiftPath;\n            }\n        } else {\n            return swiftPath;\n        }\n    }\n\n    /**\n     * @returns path to Toolchain folder\n     */\n    private static async getToolchainPath(swiftPath: string, cwd?: vscode.Uri): Promise<string> {\n        try {\n            switch (process.platform) {\n                case \"darwin\": {\n                    if (configuration.path !== \"\") {\n                        return path.dirname(configuration.path);\n                    }\n\n                    const swiftlyToolchainLocation = await this.swiftlyToolchainLocation(cwd);\n                    if (swiftlyToolchainLocation) {\n                        return swiftlyToolchainLocation;\n                    }\n\n                    const { stdout } = await execFile(\"xcrun\", [\"--find\", \"swift\"], {\n                        env: configuration.swiftEnvironmentVariables,\n                    });\n                    const swift = stdout.trimEnd();\n                    return path.dirname(path.dirname(swift));\n                }\n                default: {\n                    return path.dirname(swiftPath);\n                }\n            }\n        } catch {\n            throw Error(\"Failed to find swift toolchain\");\n        }\n    }\n\n    /**\n     * Determine if Swiftly is being used to manage the active toolchain and if so, return\n     * the path to the active toolchain.\n     * @returns The location of the active toolchain if swiftly is being used to manage it.\n     */\n    private static async swiftlyToolchainLocation(cwd?: vscode.Uri): Promise<string | undefined> {\n        const swiftlyHomeDir: string | undefined = process.env[\"SWIFTLY_HOME_DIR\"];\n        if (swiftlyHomeDir) {\n            const { stdout: swiftLocation } = await execFile(\"which\", [\"swift\"]);\n            if (swiftLocation.indexOf(swiftlyHomeDir) === 0) {\n                // Print the location of the toolchain that swiftly is using. If there\n                // is no cwd specified then it returns the global \"inUse\" toolchain otherwise\n                // it respects the .swift-version file in the cwd and resolves using that.\n                try {\n                    const { stdout: swiftlyLocation } = await execFile(\n                        \"swiftly\",\n                        [\"use\", \"--print-location\"],\n                        {\n                            cwd: cwd?.fsPath,\n                        }\n                    );\n\n                    const trimmedLocation = swiftlyLocation.trimEnd();\n                    if (trimmedLocation.length > 0) {\n                        return path.join(trimmedLocation, \"usr\");\n                    }\n                } catch (err: unknown) {\n                    const error = err as ExecFileError;\n                    // Its possible the toolchain in .swift-version is misconfigured or doesn't exist.\n                    void vscode.window.showErrorMessage(`${error.stderr}`);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * @param targetInfo swift target info\n     * @returns path to Swift runtime\n     */\n    private static async getRuntimePath(targetInfo: SwiftTargetInfo): Promise<string | undefined> {\n        if (configuration.runtimePath !== \"\") {\n            return configuration.runtimePath;\n        } else if (process.platform === \"win32\") {\n            const { stdout } = await execFile(\"where\", [\"swiftCore.dll\"]);\n            const swiftCore = stdout.trimEnd();\n            return swiftCore.length > 0 ? path.dirname(swiftCore) : undefined;\n        } else {\n            return targetInfo.paths.runtimeLibraryPaths.length > 0\n                ? targetInfo.paths.runtimeLibraryPaths.join(\":\")\n                : undefined;\n        }\n    }\n\n    /**\n     * @returns path to default SDK\n     */\n    private static async getDefaultSDK(): Promise<string | undefined> {\n        switch (process.platform) {\n            case \"darwin\": {\n                if (process.env.SDKROOT) {\n                    return process.env.SDKROOT;\n                }\n\n                return this.getSDKPath(\"macosx\");\n            }\n            case \"win32\": {\n                return process.env.SDKROOT;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * @returns path to custom SDK\n     */\n    private static getCustomSDK(): string | undefined {\n        return configuration.sdk !== \"\" ? configuration.sdk : undefined;\n    }\n\n    /**\n     * @returns path to the swiftpm-testing-helper binary, if it exists.\n     */\n    private static async getSwiftPMTestingHelperPath(\n        toolchainPath: string\n    ): Promise<string | undefined> {\n        if (process.platform === \"darwin\") {\n            const toolchainSwiftPMHelperPath = path.join(\n                toolchainPath,\n                \"libexec\",\n                \"swift\",\n                \"pm\",\n                \"swiftpm-testing-helper\"\n            );\n\n            // Verify that the helper exists. Older toolchains wont have it and thats ok,\n            // it just means that XCTests and swift-testing tests exist in their own binaries\n            // and can each be run separately. If this path exists we know the tests exist in\n            // a unified binary and we need to use this utility to run the swift-testing tests\n            // on macOS. XCTests are still run with the xctest utility on macOS. The test binaries\n            // can be invoked directly on Linux/Windows.\n            if (await this.fileExists(toolchainSwiftPMHelperPath)) {\n                return toolchainSwiftPMHelperPath;\n            }\n        }\n\n        return undefined;\n    }\n\n    /**\n     * @param targetInfo swift target info\n     * @param swiftVersion parsed swift version\n     * @param runtimePath path to Swift runtime\n     * @param sdkroot path to swift SDK\n     * @returns path to folder where xctest can be found\n     */\n    private static async getSwiftTestingPath(\n        targetInfo: SwiftTargetInfo,\n        swiftVersion: Version,\n        runtimePath: string | undefined,\n        sdkroot: string | undefined\n    ): Promise<string | undefined> {\n        if (process.platform !== \"win32\") {\n            return undefined;\n        }\n        return this.getWindowsPlatformDLLPath(\n            \"Testing\",\n            targetInfo,\n            swiftVersion,\n            runtimePath,\n            sdkroot\n        );\n    }\n\n    /**\n     * @param targetInfo swift target info\n     * @param swiftVersion parsed swift version\n     * @param runtimePath path to Swift runtime\n     * @param sdkroot path to swift SDK\n     * @returns path to folder where xctest can be found\n     */\n    private static async getXCTestPath(\n        targetInfo: SwiftTargetInfo,\n        swiftFolderPath: string,\n        swiftVersion: Version,\n        runtimePath: string | undefined,\n        sdkroot: string | undefined\n    ): Promise<string | undefined> {\n        switch (process.platform) {\n            case \"darwin\": {\n                const xcodeDirectory = this.getXcodeDirectory(swiftFolderPath);\n                const swiftEnvironmentVariables = configuration.swiftEnvironmentVariables;\n                if (xcodeDirectory && !(\"DEVELOPER_DIR\" in swiftEnvironmentVariables)) {\n                    swiftEnvironmentVariables[\"DEVELOPER_DIR\"] = xcodeDirectory;\n                }\n                const developerDir = await this.getXcodeDeveloperDir(swiftEnvironmentVariables);\n                return path.join(developerDir, \"usr\", \"bin\");\n            }\n            case \"win32\": {\n                return await this.getWindowsPlatformDLLPath(\n                    \"XCTest\",\n                    targetInfo,\n                    swiftVersion,\n                    runtimePath,\n                    sdkroot\n                );\n            }\n        }\n        return undefined;\n    }\n\n    private static async getWindowsPlatformDLLPath(\n        type: \"XCTest\" | \"Testing\",\n        targetInfo: SwiftTargetInfo,\n        swiftVersion: Version,\n        runtimePath: string | undefined,\n        sdkroot: string | undefined\n    ): Promise<string | undefined> {\n        // look up runtime library directory for XCTest/Testing alternatively\n        const fallbackPath =\n            runtimePath !== undefined && (await pathExists(path.join(runtimePath, `${type}.dll`)))\n                ? runtimePath\n                : undefined;\n        if (!sdkroot) {\n            return fallbackPath;\n        }\n\n        const platformPath = path.dirname(path.dirname(path.dirname(sdkroot)));\n        const platformManifest = path.join(platformPath, \"Info.plist\");\n        if ((await pathExists(platformManifest)) !== true) {\n            if (fallbackPath) {\n                return fallbackPath;\n            }\n            void vscode.window.showWarningMessage(\n                `${type} not found due to non-standardized library layout. Tests explorer won't work as expected.`\n            );\n            return undefined;\n        }\n        const data = await fs.readFile(platformManifest, \"utf8\");\n        let infoPlist;\n        try {\n            infoPlist = plist.parse(data) as unknown as InfoPlist;\n        } catch (error) {\n            void vscode.window.showWarningMessage(`Unable to parse ${platformManifest}: ${error}`);\n            return undefined;\n        }\n        const plistKey = type === \"XCTest\" ? \"XCTEST_VERSION\" : \"SWIFT_TESTING_VERSION\";\n        const version = infoPlist.DefaultProperties[plistKey];\n        if (!version) {\n            new SwiftOutputChannel(\"swift\").appendLine(\n                `Warning: ${platformManifest} is missing the ${plistKey} key.`\n            );\n            return undefined;\n        }\n\n        if (swiftVersion.isGreaterThanOrEqual(new Version(5, 7, 0))) {\n            let bindir: string;\n            const arch = targetInfo.target?.triple.split(\"-\", 1)[0];\n            switch (arch) {\n                case \"x86_64\":\n                    bindir = \"bin64\";\n                    break;\n                case \"i686\":\n                    bindir = \"bin32\";\n                    break;\n                case \"aarch64\":\n                    bindir = \"bin64a\";\n                    break;\n                default:\n                    throw Error(`unsupported architecture ${arch}`);\n            }\n            return path.join(\n                platformPath,\n                \"Developer\",\n                \"Library\",\n                `${type}-${version}`,\n                \"usr\",\n                bindir\n            );\n        } else {\n            return path.join(\n                platformPath,\n                \"Developer\",\n                \"Library\",\n                `${type}-${version}`,\n                \"usr\",\n                \"bin\"\n            );\n        }\n    }\n\n    /** @returns swift target info */\n    private static async getSwiftTargetInfo(swiftExecutable: string): Promise<SwiftTargetInfo> {\n        try {\n            try {\n                const { stdout } = await execSwift([\"-print-target-info\"], { swiftExecutable });\n                const targetInfo = JSON.parse(stdout.trimEnd()) as SwiftTargetInfo;\n                if (targetInfo.compilerVersion) {\n                    return targetInfo;\n                }\n            } catch {\n                // hit error while running `swift -print-target-info`. We are possibly running\n                // a version of swift 5.3 or older\n            }\n            const { stdout } = await execSwift([\"--version\"], { swiftExecutable });\n            return {\n                compilerVersion: stdout.split(lineBreakRegex, 1)[0],\n                paths: { runtimeLibraryPaths: [\"\"] },\n            };\n        } catch {\n            throw Error(\n                \"Failed to get swift version from either '-print-target-info' or '--version'.\"\n            );\n        }\n    }\n\n    /**\n     * @param targetInfo swift target info\n     * @returns swift version object\n     */\n    private static getSwiftVersion(targetInfo: SwiftTargetInfo): Version {\n        const match = targetInfo.compilerVersion.match(/Swift version ([\\S]+)/);\n        let version: Version | undefined;\n        if (match) {\n            version = Version.fromString(match[1]);\n        }\n        return version ?? new Version(0, 0, 0);\n    }\n\n    /**\n     * Check if a file exists.\n     * @returns true if the file exists at the supplied path\n     */\n    private static async fileExists(path: string): Promise<boolean> {\n        try {\n            await fs.access(path, fs.constants.F_OK);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport configuration from \"../configuration\";\nimport { IS_RUNNING_IN_CI } from \"../utilities/utilities\";\n\nexport class SwiftOutputChannel implements vscode.OutputChannel {\n    private channel: vscode.OutputChannel;\n    private logStore: RollingLog;\n\n    /**\n     * Creates a vscode.OutputChannel that allows for later retrival of logs.\n     * @param name\n     */\n    constructor(\n        public name: string,\n        logStoreLinesSize: number = 250_000 // default to capturing 250k log lines\n    ) {\n        this.name = name;\n        this.channel = vscode.window.createOutputChannel(name, \"Swift\");\n        this.logStore = new RollingLog(logStoreLinesSize);\n    }\n\n    append(value: string): void {\n        this.channel.append(value);\n        this.logStore.append(value);\n    }\n\n    appendLine(value: string): void {\n        this.channel.appendLine(value);\n        this.logStore.appendLine(value);\n    }\n\n    replace(value: string): void {\n        this.channel.replace(value);\n        this.logStore.replace(value);\n    }\n\n    clear(): void {\n        this.channel.clear();\n        this.logStore.clear();\n    }\n\n    show(_column?: unknown, preserveFocus?: boolean | undefined): void {\n        this.channel.show(preserveFocus);\n    }\n\n    hide(): void {\n        this.channel.hide();\n    }\n\n    dispose() {\n        this.channel.dispose();\n        this.logStore.dispose();\n    }\n\n    log(message: string, label?: string) {\n        let fullMessage: string;\n        if (label !== undefined) {\n            fullMessage = `${label}: ${message}`;\n        } else {\n            fullMessage = message;\n        }\n        this.appendLine(`${this.nowFormatted}: ${fullMessage}`);\n    }\n\n    logDiagnostic(message: string, label?: string) {\n        if (!configuration.diagnostics && !IS_RUNNING_IN_CI) {\n            return;\n        }\n        const fullMessage = label !== undefined ? `${label}: ${message}` : message;\n        this.appendLine(`${this.nowFormatted}: ${fullMessage}`);\n    }\n\n    get nowFormatted(): string {\n        return new Date().toLocaleString(\"en-US\", {\n            hourCycle: \"h23\",\n            hour: \"2-digit\",\n            minute: \"numeric\",\n            second: \"numeric\",\n        });\n    }\n\n    get logs(): string[] {\n        return this.logStore.logs;\n    }\n}\n\nclass RollingLog implements vscode.Disposable {\n    private _logs: (string | null)[];\n    private startIndex: number = 0;\n    private endIndex: number = 0;\n    private logCount: number = 0;\n\n    constructor(private maxLogs: number) {\n        this._logs = new Array(maxLogs).fill(null);\n    }\n\n    public get logs(): string[] {\n        const logs: string[] = [];\n        for (let i = 0; i < this.logCount; i++) {\n            logs.push(this._logs[(this.startIndex + i) % this.maxLogs]!);\n        }\n        return logs;\n    }\n\n    private incrementIndex(index: number): number {\n        return (index + 1) % this.maxLogs;\n    }\n\n    dispose() {\n        this.clear();\n    }\n\n    clear() {\n        this._logs = new Array(this.maxLogs).fill(null);\n        this.startIndex = 0;\n        this.endIndex = 0;\n        this.logCount = 0;\n    }\n\n    appendLine(log: string) {\n        // Writing to a new line that isn't the very first, increment the end index\n        if (this.logCount > 0) {\n            this.endIndex = this.incrementIndex(this.endIndex);\n        }\n\n        // We're over the window size, move the start index\n        if (this.logCount === this.maxLogs) {\n            this.startIndex = this.incrementIndex(this.startIndex);\n        } else {\n            this.logCount++;\n        }\n\n        this._logs[this.endIndex] = log;\n    }\n\n    append(log: string) {\n        if (this.logCount === 0) {\n            this.logCount = 1;\n        }\n        const newLogLine = (this._logs[this.endIndex] ?? \"\") + log;\n        this._logs[this.endIndex] = newLogLine;\n    }\n\n    replace(log: string) {\n        this._logs = new Array(this.maxLogs).fill(null);\n        this._logs[0] = log;\n        this.startIndex = 0;\n        this.endIndex = 1;\n        this.logCount = 1;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as cp from \"child_process\";\nimport * as path from \"path\";\nimport * as Stream from \"stream\";\nimport configuration from \"../configuration\";\nimport { FolderContext } from \"../FolderContext\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\n\n/**\n * Whether or not this is a production build.\n *\n * Code that checks for this will be removed completely when the extension is packaged into\n * a VSIX.\n */\nexport const IS_PRODUCTION_BUILD = process.env.NODE_ENV === \"production\";\n\n/**\n * Whether or not the code is being run in CI.\n *\n * Code that checks for this will be removed completely when the extension is packaged into\n * a VSIX.\n */\nexport const IS_RUNNING_IN_CI = process.env.CI === \"1\";\n\n/**\n * Get required environment variable for Swift product\n *\n * @param base base environment configuration\n * @returns minimal required environment for Swift product\n */\nexport function swiftRuntimeEnv(\n    base: NodeJS.ProcessEnv | boolean = process.env,\n    runtimePath: string = configuration.runtimePath\n): { [key: string]: string } | undefined {\n    const key = swiftLibraryPathKey();\n    const separator = process.platform === \"win32\" ? \";\" : \":\";\n    switch (base) {\n        case false:\n            base = {};\n            break;\n        case true:\n            base = { [key]: `\\${env:${key}}` };\n            break;\n        default:\n            break;\n    }\n    return runtimeEnv(base, key, runtimePath, separator);\n}\n\nexport function runtimeEnv(\n    base: NodeJS.ProcessEnv,\n    key: string,\n    value: string,\n    separator: string\n): { [key: string]: string } | undefined {\n    if (value === \"\") {\n        return undefined;\n    }\n    return base[key] ? { [key]: `${value}${separator}${base[key]}` } : { [key]: value };\n}\n\n/** Return environment variable to update for runtime library search path */\nexport function swiftLibraryPathKey(): string {\n    return swiftPlatformLibraryPathKey(process.platform);\n}\n\nexport function swiftPlatformLibraryPathKey(platform: NodeJS.Platform): string {\n    switch (platform) {\n        case \"win32\":\n            return \"Path\";\n        case \"darwin\":\n            return \"DYLD_LIBRARY_PATH\";\n        default:\n            return \"LD_LIBRARY_PATH\";\n    }\n}\n\nexport class ExecFileError extends Error {\n    constructor(\n        public readonly causedBy: Error,\n        public readonly stdout: string,\n        public readonly stderr: string\n    ) {\n        super(causedBy.message);\n    }\n}\n\n/**\n * Asynchronous wrapper around {@link cp.execFile child_process.execFile}.\n *\n * Assumes output will be a string\n *\n * @param executable name of executable to run\n * @param args arguments to be passed to executable\n * @param options execution options\n */\nexport async function execFile(\n    executable: string,\n    args: string[],\n    options: cp.ExecFileOptions = {},\n    folderContext?: FolderContext,\n    customSwiftRuntime = true\n): Promise<{ stdout: string; stderr: string }> {\n    folderContext?.workspaceContext.outputChannel.logDiagnostic(\n        `Exec: ${executable} ${args.join(\" \")}`,\n        folderContext.name\n    );\n    if (customSwiftRuntime) {\n        const runtimeEnv = swiftRuntimeEnv(options.env);\n        if (runtimeEnv && Object.keys(runtimeEnv).length > 0) {\n            options.env = { ...(options.env ?? process.env), ...runtimeEnv };\n        }\n    }\n    options = {\n        ...options,\n        maxBuffer: options.maxBuffer ?? 1024 * 1024 * 64, // 64MB\n    };\n    return new Promise<{ stdout: string; stderr: string }>((resolve, reject) => {\n        cp.execFile(executable, args, options, (error, stdout, stderr) => {\n            if (error) {\n                reject(new ExecFileError(error, stdout, stderr));\n            } else {\n                resolve({ stdout, stderr });\n            }\n        });\n    });\n}\n\nexport async function execFileStreamOutput(\n    executable: string,\n    args: string[],\n    stdout: Stream.Writable | null,\n    stderr: Stream.Writable | null,\n    token: vscode.CancellationToken | null,\n    options: cp.ExecFileOptions = {},\n    folderContext?: FolderContext,\n    customSwiftRuntime = true,\n    killSignal: NodeJS.Signals = \"SIGTERM\"\n): Promise<void> {\n    folderContext?.workspaceContext.outputChannel.logDiagnostic(\n        `Exec: ${executable} ${args.join(\" \")}`,\n        folderContext.name\n    );\n    if (customSwiftRuntime) {\n        const runtimeEnv = swiftRuntimeEnv(options.env);\n        if (runtimeEnv && Object.keys(runtimeEnv).length > 0) {\n            options.env = { ...(options.env ?? process.env), ...runtimeEnv };\n        }\n    }\n    return new Promise<void>((resolve, reject) => {\n        let cancellation: vscode.Disposable;\n        const p = cp.execFile(executable, args, options, error => {\n            if (error) {\n                reject(error);\n            } else {\n                resolve();\n            }\n            if (cancellation) {\n                cancellation.dispose();\n            }\n        });\n        if (stdout) {\n            p.stdout?.pipe(stdout);\n        }\n        if (stderr) {\n            p.stderr?.pipe(stderr);\n        }\n        if (token) {\n            cancellation = token.onCancellationRequested(() => {\n                p.kill(killSignal);\n            });\n        }\n    });\n}\n\n/**\n * Asynchronous wrapper around {@link cp.execFile child_process.execFile} running\n * swift executable\n *\n * @param args array of arguments to pass to swift executable\n * @param options execution options\n * @param setSDKFlags whether to set SDK flags\n */\nexport async function execSwift(\n    args: string[],\n    toolchain: SwiftToolchain | \"default\" | { swiftExecutable: string },\n    options: cp.ExecFileOptions = {},\n    folderContext?: FolderContext\n): Promise<{ stdout: string; stderr: string }> {\n    let swift: string;\n    if (typeof toolchain === \"object\" && \"swiftExecutable\" in toolchain) {\n        swift = toolchain.swiftExecutable;\n    } else if (toolchain === \"default\") {\n        swift = getSwiftExecutable();\n    } else {\n        swift = toolchain.getToolchainExecutable(\"swift\");\n        args = toolchain.buildFlags.withAdditionalFlags(args);\n    }\n    if (Object.keys(configuration.swiftEnvironmentVariables).length > 0) {\n        // when adding environment vars we either combine with vars passed\n        // into the function or the process environment vars\n        options.env = {\n            ...(options.env ?? process.env),\n            ...configuration.swiftEnvironmentVariables,\n        };\n    }\n    options = {\n        ...options,\n        maxBuffer: options.maxBuffer ?? 1024 * 1024 * 64, // 64MB\n    };\n    return await execFile(swift, args, options, folderContext);\n}\n\n/**\n * Keep calling a function until it returns true\n * @param fn function to test\n * @param everyMilliseconds Time period between each call of the function\n */\nexport async function poll(fn: () => boolean, everyMilliseconds: number) {\n    while (!fn()) {\n        await wait(everyMilliseconds);\n    }\n}\n\n/**\n * Wait for amount of time\n * @param milliseconds Amount of time to wait\n */\nexport function wait(milliseconds: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, milliseconds));\n}\n\n/**\n * Returns an array containing the non-null and non-undefined results of calling\n * the given transformation with each element of this sequence.\n *\n * @param arr An array to map\n * @param transform A transformation function to apply to each element\n * @returns An array containing the non-null and non-undefined results of calling transform on each element\n */\nexport function compactMap<T, U>(\n    arr: readonly T[],\n    transform: (value: T) => U | null | undefined\n): U[] {\n    return arr.reduce<U[]>((acc, item) => {\n        const result = transform(item);\n        if (result !== null && result !== undefined) {\n            acc.push(result);\n        }\n        return acc;\n    }, []);\n}\n/**\n * Get path to swift executable, or executable in swift bin folder\n *\n * @param exe name of executable to return\n */\nexport function getSwiftExecutable(exe = \"swift\"): string {\n    // should we add `.exe` at the end of the executable name\n    const windowsExeSuffix = process.platform === \"win32\" ? \".exe\" : \"\";\n    return path.join(configuration.path, `${exe}${windowsExeSuffix}`);\n}\n\n/**\n * Extracts the base name of a repository from its URL.\n *\n * The base name is the last path component of the URL, without the extension `.git`,\n * and without an optional trailing slash.\n */\nexport function getRepositoryName(url: string): string {\n    // This regular expression consists of:\n    // - any number of characters that aren't a slash: ([^/]*)\n    // - optionally followed by a trailing slash: \\/?\n    // - at the end of the URL: $\n    const pattern = /([^/]*)\\/?$/;\n    // The capture group in this pattern will match the last path component of the URL.\n    let lastPathComponent = url.match(pattern)![1];\n    // Trim the optional .git extension.\n    if (lastPathComponent.endsWith(\".git\")) {\n        lastPathComponent = lastPathComponent.replace(/\\.git$/, \"\");\n    }\n    return lastPathComponent;\n}\n\n/**\n * Return random string\n * @param length Length of string to return (max 16)\n * @returns Random string\n */\nexport function randomString(length = 8): string {\n    return Math.random().toString(16).substring(2, length);\n}\n\n/**\n * Return string description of Error object\n * @param error Error object\n * @returns String description of error\n */\nexport function getErrorDescription(error: unknown): string {\n    if (!error) {\n        return \"No error provided\";\n    } else if ((error as { stderr: string }).stderr) {\n        return (error as { stderr: string }).stderr;\n    } else if ((error as { error: string }).error) {\n        return JSON.stringify((error as { error: string }).error);\n    } else if (error instanceof Error) {\n        return error.message;\n    } else {\n        return JSON.stringify(error);\n    }\n}\n\n/**\n * Convert array of strings into phrase eg \"a, b and c\"\n * @param strings Array of strings\n * @returns phrase\n */\nexport function stringArrayInEnglish(strings: string[]): string {\n    return strings.length === 1\n        ? strings[0]\n        : [strings.slice(0, -1).join(\", \"), strings[strings.length - 1]].join(\" and \");\n}\n\n/**\n * String hashing function taken from https://stackoverflow.com/a/52171480/7831758\n * @param str String to hash\n * @param seed Seed for hash function\n * @returns Hash of string\n */\nexport function hashString(str: string, seed = 0) {\n    let h1 = 0xdeadbeef ^ seed,\n        h2 = 0x41c6ce57 ^ seed;\n    for (let i = 0, ch; i < str.length; i++) {\n        ch = str.charCodeAt(i);\n        h1 = Math.imul(h1 ^ ch, 2654435761);\n        h2 = Math.imul(h2 ^ ch, 1597334677);\n    }\n    h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n    h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n    return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n}\n\n/**\n * Transforms a file, line and optional column in to a vscode.Location.\n * The line numbers are expected to start at 1, not 0.\n * @param string A file path\n * @param line A line number, starting at 1\n * @param column An optional column\n */\nexport function sourceLocationToVSCodeLocation(\n    file: string,\n    line: number,\n    column?: number\n): vscode.Location {\n    return new vscode.Location(vscode.Uri.file(file), new vscode.Position(line - 1, column ?? 0));\n}\n\nconst regexEscapedCharacters = new Set([\"(\", \")\", \"[\", \"]\", \".\", \"$\", \"^\", \"?\", \"|\", \"/\", \":\"]);\n/**\n * Escapes regular expression special characters with a backslash.\n * @param string A string to escape\n * @returns The escaped string\n */\nexport function regexEscapedString(string: string, omitting?: Set<string>): string {\n    let result = \"\";\n    for (const c of string) {\n        if (regexEscapedCharacters.has(c) && (!omitting || !omitting.has(c))) {\n            result += `\\\\${c}`;\n        } else {\n            result += c;\n        }\n    }\n    return result;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nexport interface VersionInterface {\n    major: number;\n    minor: number;\n    patch: number;\n}\n\nexport class Version implements VersionInterface {\n    constructor(\n        readonly major: number,\n        readonly minor: number,\n        readonly patch: number\n    ) {}\n\n    static fromString(s: string): Version | undefined {\n        const numbers = s.match(/(\\d+).(\\d+)(?:.(\\d+))?/);\n        if (numbers) {\n            const major = parseInt(numbers[1]);\n            const minor = parseInt(numbers[2]);\n            if (numbers[3] === undefined) {\n                return new Version(major, minor, 0);\n            } else {\n                const patch = parseInt(numbers[3]);\n                return new Version(major, minor, patch);\n            }\n        }\n        return undefined;\n    }\n\n    toString(): string {\n        return `${this.major}.${this.minor}.${this.patch}`;\n    }\n\n    isLessThan(rhs: VersionInterface): boolean {\n        if (this.major < rhs.major) {\n            return true;\n        } else if (this.major > rhs.major) {\n            return false;\n        }\n        if (this.minor < rhs.minor) {\n            return true;\n        } else if (this.minor > rhs.minor) {\n            return false;\n        }\n        if (this.patch < rhs.patch) {\n            return true;\n        }\n        return false;\n    }\n\n    isGreaterThan(rhs: VersionInterface): boolean {\n        if (this.major > rhs.major) {\n            return true;\n        } else if (this.major < rhs.major) {\n            return false;\n        }\n        if (this.minor > rhs.minor) {\n            return true;\n        } else if (this.minor < rhs.minor) {\n            return false;\n        }\n        if (this.patch > rhs.patch) {\n            return true;\n        }\n        return false;\n    }\n\n    isLessThanOrEqual(rhs: VersionInterface): boolean {\n        return !this.isGreaterThan(rhs);\n    }\n\n    isGreaterThanOrEqual(rhs: VersionInterface): boolean {\n        return !this.isLessThan(rhs);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as path from \"path\";\nimport { SwiftToolchain } from \"./toolchain\";\n\nexport class Sanitizer {\n    private constructor(\n        public type: \"thread\" | \"address\",\n        public toolchain: SwiftToolchain\n    ) {}\n\n    /** create sanitizer */\n    static create(type: string, toolchain: SwiftToolchain): Sanitizer | undefined {\n        if (type === \"thread\" || type === \"address\") {\n            return new Sanitizer(type, toolchain);\n        }\n    }\n\n    /** Return runtime environment variables for macOS */\n    get runtimeEnvironment(): Record<string, string> | undefined {\n        if (!this.toolchain.toolchainPath) {\n            return undefined;\n        }\n        const lib = `/lib/swift/clang/lib/darwin/libclang_rt.${this.clangName}_osx_dynamic.dylib`;\n        const libFullPath = path.join(this.toolchain.toolchainPath, lib);\n        return { DYLD_INSERT_LIBRARIES: libFullPath };\n    }\n\n    /** return build flags */\n    get buildFlags(): [string] {\n        return [`--sanitize=${this.type}`];\n    }\n\n    get clangName(): string {\n        switch (this.type) {\n            case \"address\":\n                return \"asan\";\n            case \"thread\":\n                return \"tsan\";\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\n\nexport const lineBreakRegex = /\\r\\n|\\n|\\r/gm;\n\nexport function resolveTaskCwd(task: vscode.Task, cwd?: string): string | undefined {\n    const scopeWorkspaceFolder = getScopeWorkspaceFolder(task);\n    if (!cwd) {\n        return scopeWorkspaceFolder;\n    }\n\n    if (path.isAbsolute(cwd)) {\n        return cwd;\n    } else if (scopeWorkspaceFolder) {\n        return path.join(scopeWorkspaceFolder, cwd);\n    }\n    return cwd;\n}\n\nfunction getScopeWorkspaceFolder(task: vscode.Task): string | undefined {\n    if (task.scope !== vscode.TaskScope.Global && task.scope !== vscode.TaskScope.Workspace) {\n        const scopeWorkspaceFolder = task.scope as vscode.WorkspaceFolder;\n        return scopeWorkspaceFolder.uri.fsPath;\n    }\n    return;\n}\n\nexport function checkIfBuildComplete(line: string): boolean {\n    // Output in this format for \"build\" and \"test\" commands\n    const completeRegex = /^Build complete!/gm;\n    let match = completeRegex.exec(line);\n    if (match) {\n        return true;\n    }\n    // Output in this format for \"run\" commands\n    const productCompleteRegex = /^Build of product '.*' complete!/gm;\n    match = productCompleteRegex.exec(line);\n    if (match) {\n        return true;\n    }\n    return false;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport { execSwift, getErrorDescription, hashString } from \"./utilities/utilities\";\nimport { isPathInsidePath } from \"./utilities/filesystem\";\nimport { SwiftToolchain } from \"./toolchain/toolchain\";\nimport { BuildFlags } from \"./toolchain/BuildFlags\";\nimport { SwiftOutputChannel } from \"./ui/SwiftOutputChannel\";\nimport { lineBreakRegex } from \"./utilities/tasks\";\n\n/** Swift Package Manager contents */\ninterface PackageContents {\n    name: string;\n    products: Product[];\n    dependencies: Dependency[];\n    targets: Target[];\n}\n\n/** Swift Package Manager product */\nexport interface Product {\n    name: string;\n    targets: string[];\n    type: { executable?: null; library?: string[] };\n}\n\n/** Swift Package Manager target */\nexport interface Target {\n    name: string;\n    c99name: string;\n    path: string;\n    sources: string[];\n    type: \"executable\" | \"test\" | \"library\" | \"snippet\" | \"plugin\" | \"binary\" | \"system-target\";\n}\n\n/** Swift Package Manager dependency */\nexport interface Dependency {\n    identity: string;\n    type?: string;\n    requirement?: object;\n    url?: string;\n    path?: string;\n    dependencies: Dependency[];\n}\n\nexport interface ResolvedDependency extends Dependency {\n    version: string;\n    type: string;\n    path: string;\n    location: string;\n}\n\n/** Swift Package.resolved file */\nexport class PackageResolved {\n    readonly fileHash: number;\n    readonly pins: PackageResolvedPin[];\n    readonly version: number;\n\n    constructor(fileContents: string) {\n        const json = JSON.parse(fileContents);\n        const version = <{ version: number }>json;\n        this.version = version.version;\n        this.fileHash = hashString(fileContents);\n\n        if (this.version === 1) {\n            const v1Json = json as PackageResolvedFileV1;\n            this.pins = v1Json.object.pins.map(\n                pin =>\n                    new PackageResolvedPin(\n                        this.identity(pin.repositoryURL),\n                        pin.repositoryURL,\n                        pin.state\n                    )\n            );\n        } else if (this.version === 2 || this.version === 3) {\n            const v2Json = json as PackageResolvedFileV2;\n            this.pins = v2Json.pins.map(\n                pin => new PackageResolvedPin(pin.identity, pin.location, pin.state)\n            );\n        } else {\n            throw Error(\"Unsupported Package.resolved version\");\n        }\n    }\n\n    // Copied from `PackageIdentityParser.computeDefaultName` in\n    // https://github.com/apple/swift-package-manager/blob/main/Sources/PackageModel/PackageIdentity.swift\n    identity(url: string): string {\n        const file = path.basename(url, \".git\");\n        return file.toLowerCase();\n    }\n}\n\n/** Swift Package.resolved file */\nexport class PackageResolvedPin {\n    constructor(\n        readonly identity: string,\n        readonly location: string,\n        readonly state: PackageResolvedPinState\n    ) {}\n}\n\n/** Swift Package.resolved file */\nexport interface PackageResolvedPinState {\n    branch: string | null;\n    revision: string;\n    version: string | null;\n}\n\ninterface PackageResolvedFileV1 {\n    object: { pins: PackageResolvedPinFileV1[] };\n    version: number;\n}\n\ninterface PackageResolvedPinFileV1 {\n    package: string;\n    repositoryURL: string;\n    state: PackageResolvedPinState;\n}\n\ninterface PackageResolvedFileV2 {\n    pins: PackageResolvedPinFileV2[];\n    version: number;\n}\n\ninterface PackageResolvedPinFileV2 {\n    identity: string;\n    location: string;\n    state: PackageResolvedPinState;\n}\n\n/** workspace-state.json file */\nexport interface WorkspaceState {\n    object: { dependencies: WorkspaceStateDependency[] };\n    version: number;\n}\n\n/** revision + (branch || version)\n * ref: https://github.com/apple/swift-package-manager/blob/e25a590dc455baa430f2ec97eacc30257c172be2/Sources/Workspace/CheckoutState.swift#L19:L23\n */\nexport interface CheckoutState {\n    revision: string;\n    branch: string | null;\n    version: string | null;\n}\n\nexport interface WorkspaceStateDependency {\n    packageRef: { identity: string; kind: string; location: string; name: string };\n    state: { name: string; path?: string; checkoutState?: CheckoutState; version?: string };\n    subpath: string;\n}\n\nexport interface PackagePlugin {\n    command: string;\n    name: string;\n    package: string;\n}\n\n/** Swift Package State\n *\n * Can be package contents, error found when loading package or undefined meaning\n * did not find package\n */\ntype SwiftPackageState = PackageContents | Error | undefined;\n\nfunction isPackage(state: SwiftPackageState): state is PackageContents {\n    return (state as PackageContents).products !== undefined;\n}\n\nfunction isError(state: SwiftPackageState): state is Error {\n    return state instanceof Error;\n}\n\n/**\n * Class holding Swift Package Manager Package\n */\nexport class SwiftPackage {\n    public plugins: PackagePlugin[] = [];\n    private _contents: SwiftPackageState | undefined;\n\n    /**\n     * SwiftPackage Constructor\n     * @param folder folder package is in\n     * @param contents results of `swift package describe`\n     * @param resolved contents of Package.resolved\n     */\n    private constructor(\n        readonly folder: vscode.Uri,\n        private contentsPromise: Promise<SwiftPackageState>,\n        public resolved: PackageResolved | undefined,\n        private workspaceState: WorkspaceState | undefined\n    ) {}\n\n    /**\n     * Create a SwiftPackage from a folder\n     * @param folder folder package is in\n     * @returns new SwiftPackage\n     */\n    public static async create(\n        folder: vscode.Uri,\n        toolchain: SwiftToolchain\n    ): Promise<SwiftPackage> {\n        const [resolved, workspaceState] = await Promise.all([\n            SwiftPackage.loadPackageResolved(folder),\n            SwiftPackage.loadWorkspaceState(folder),\n        ]);\n        return new SwiftPackage(\n            folder,\n            SwiftPackage.loadPackage(folder, toolchain),\n            resolved,\n            workspaceState\n        );\n    }\n\n    /**\n     * Returns the package state once it has loaded.\n     * A snapshot of the state is stored in `_contents` after initial resolution.\n     */\n    private get contents(): Promise<SwiftPackageState> {\n        return this.contentsPromise.then(contents => {\n            // If `reload` is called immediately its possible for it to resolve\n            // before the initial contentsPromise resolution. In that case return\n            // the newer loaded `_contents`.\n            if (this._contents === undefined) {\n                this._contents = contents;\n                return contents;\n            } else {\n                return this._contents;\n            }\n        });\n    }\n\n    /**\n     * Run `swift package describe` and return results\n     * @param folder folder package is in\n     * @returns results of `swift package describe`\n     */\n    static async loadPackage(\n        folder: vscode.Uri,\n        toolchain: SwiftToolchain\n    ): Promise<SwiftPackageState> {\n        try {\n            // Use swift package describe to describe the package targets, products, and platforms\n            const describe = await execSwift([\"package\", \"describe\", \"--type\", \"json\"], toolchain, {\n                cwd: folder.fsPath,\n            });\n            const packageState = JSON.parse(\n                SwiftPackage.trimStdout(describe.stdout)\n            ) as PackageContents;\n\n            // Use swift package show-dependencies to get the dependencies in a tree format\n            const dependencies = await execSwift(\n                [\"package\", \"show-dependencies\", \"--format\", \"json\"],\n                toolchain,\n                {\n                    cwd: folder.fsPath,\n                }\n            );\n\n            packageState.dependencies = JSON.parse(\n                SwiftPackage.trimStdout(dependencies.stdout)\n            ).dependencies;\n\n            return packageState;\n        } catch (error) {\n            const execError = error as { stderr: string };\n            // if caught error and it begins with \"error: root manifest\" then there is no Package.swift\n            if (\n                execError.stderr !== undefined &&\n                (execError.stderr.startsWith(\"error: root manifest\") ||\n                    execError.stderr.startsWith(\"error: Could not find Package.swift\"))\n            ) {\n                return undefined;\n            } else {\n                // otherwise it is an error loading the Package.swift so return `null` indicating\n                // we have a package but we failed to load it\n                return Error(getErrorDescription(error));\n            }\n        }\n    }\n\n    private static async loadPackageResolved(\n        folder: vscode.Uri\n    ): Promise<PackageResolved | undefined> {\n        try {\n            const uri = vscode.Uri.joinPath(folder, \"Package.resolved\");\n            const contents = await fs.readFile(uri.fsPath, \"utf8\");\n            return new PackageResolved(contents);\n        } catch {\n            // failed to load resolved file return undefined\n            return undefined;\n        }\n    }\n\n    private static async loadPlugins(\n        folder: vscode.Uri,\n        toolchain: SwiftToolchain,\n        outputChannel: SwiftOutputChannel\n    ): Promise<PackagePlugin[]> {\n        try {\n            const { stdout } = await execSwift([\"package\", \"plugin\", \"--list\"], toolchain, {\n                cwd: folder.fsPath,\n            });\n            const plugins: PackagePlugin[] = [];\n            const lines = stdout.split(lineBreakRegex).map(item => item.trim());\n            for (const line of lines) {\n                // \u2018generate-documentation\u2019 (plugin \u2018Swift-DocC\u2019 in package \u2018SwiftDocCPlugin\u2019)\n                const pluginMatch = /^\u2018(.*)\u2019 \\(plugin \u2018(.*)\u2019 in package \u2018(.*)\u2019\\)/.exec(line);\n                if (pluginMatch) {\n                    plugins.push({\n                        command: pluginMatch[1],\n                        name: pluginMatch[2],\n                        package: pluginMatch[3],\n                    });\n                }\n            }\n            return plugins;\n        } catch (error) {\n            outputChannel.appendLine(`Failed to laod plugins: ${error}`);\n            // failed to load resolved file return undefined\n            return [];\n        }\n    }\n\n    /**\n     * Load workspace-state.json file for swift package\n     * @returns Workspace state\n     */\n    private static async loadWorkspaceState(\n        folder: vscode.Uri\n    ): Promise<WorkspaceState | undefined> {\n        try {\n            const uri = vscode.Uri.joinPath(\n                vscode.Uri.file(BuildFlags.buildDirectoryFromWorkspacePath(folder.fsPath, true)),\n                \"workspace-state.json\"\n            );\n            const contents = await fs.readFile(uri.fsPath, \"utf8\");\n            return JSON.parse(contents);\n        } catch {\n            // failed to load resolved file return undefined\n            return undefined;\n        }\n    }\n\n    /** Reload swift package */\n    public async reload(toolchain: SwiftToolchain) {\n        const loadedContents = await SwiftPackage.loadPackage(this.folder, toolchain);\n        this._contents = loadedContents;\n        this.contentsPromise = Promise.resolve(loadedContents);\n    }\n\n    /** Reload Package.resolved file */\n    public async reloadPackageResolved() {\n        this.resolved = await SwiftPackage.loadPackageResolved(this.folder);\n    }\n\n    public async reloadWorkspaceState() {\n        this.workspaceState = await SwiftPackage.loadWorkspaceState(this.folder);\n    }\n\n    public async loadSwiftPlugins(toolchain: SwiftToolchain, outputChannel: SwiftOutputChannel) {\n        this.plugins = await SwiftPackage.loadPlugins(this.folder, toolchain, outputChannel);\n    }\n\n    /** Return if has valid contents */\n    public get isValid(): Promise<boolean> {\n        return this.contents.then(contents => isPackage(contents));\n    }\n\n    /** Load error */\n    public get error(): Promise<Error | undefined> {\n        return this.contents.then(contents => (isError(contents) ? contents : undefined));\n    }\n\n    /** Did we find a Package.swift */\n    public get foundPackage(): Promise<boolean> {\n        return this.contents.then(contents => contents !== undefined);\n    }\n\n    public get rootDependencies(): Promise<ResolvedDependency[]> {\n        // Correlate the root dependencies found in the Package.swift with their\n        // checked out versions in the workspace-state.json.\n        return this.dependencies.then(dependencies =>\n            dependencies.map(dependency => this.resolveDependencyAgainstWorkspaceState(dependency))\n        );\n    }\n\n    private resolveDependencyAgainstWorkspaceState(dependency: Dependency): ResolvedDependency {\n        const workspaceStateDep = this.workspaceState?.object.dependencies.find(\n            dep => dep.packageRef.identity === dependency.identity\n        );\n        return {\n            ...dependency,\n            version: workspaceStateDep?.state.checkoutState?.version ?? \"\",\n            path: workspaceStateDep\n                ? this.dependencyPackagePath(workspaceStateDep, this.folder.fsPath)\n                : \"\",\n            type: workspaceStateDep ? this.dependencyType(workspaceStateDep) : \"\",\n            location: workspaceStateDep ? workspaceStateDep.packageRef.location : \"\",\n        };\n    }\n\n    public childDependencies(dependency: Dependency): ResolvedDependency[] {\n        return dependency.dependencies.map(dep => this.resolveDependencyAgainstWorkspaceState(dep));\n    }\n\n    /**\n     *  * Get package source path of dependency\n     * `editing`: dependency.state.path ?? workspacePath + Packages/ + dependency.subpath\n     * `local`: dependency.packageRef.location\n     * `remote`: buildDirectory + checkouts + dependency.packageRef.location\n     * @param dependency\n     * @param workspaceFolder\n     * @return the package path based on the type\n     */\n    private dependencyPackagePath(\n        dependency: WorkspaceStateDependency,\n        workspaceFolder: string\n    ): string {\n        const type = this.dependencyType(dependency);\n        if (type === \"editing\") {\n            return (\n                dependency.state.path ?? path.join(workspaceFolder, \"Packages\", dependency.subpath)\n            );\n        } else if (type === \"local\") {\n            return dependency.state.path ?? dependency.packageRef.location;\n        } else {\n            // remote\n            const buildDirectory = BuildFlags.buildDirectoryFromWorkspacePath(\n                workspaceFolder,\n                true\n            );\n            if (dependency.packageRef.kind === \"registry\") {\n                return path.join(buildDirectory, \"registry\", \"downloads\", dependency.subpath);\n            } else {\n                return path.join(buildDirectory, \"checkouts\", dependency.subpath);\n            }\n        }\n    }\n\n    /**\n     * Get type of WorkspaceStateDependency for displaying in the tree: real version | edited | local\n     * @param dependency\n     * @return \"local\" | \"remote\" | \"editing\"\n     */\n    private dependencyType(dependency: WorkspaceStateDependency): \"local\" | \"remote\" | \"editing\" {\n        if (dependency.state.name === \"edited\") {\n            return \"editing\";\n        } else if (\n            dependency.packageRef.kind === \"local\" ||\n            dependency.packageRef.kind === \"fileSystem\"\n        ) {\n            // need to check for both \"local\" and \"fileSystem\" as swift 5.5 and earlier\n            // use \"local\" while 5.6 and later use \"fileSystem\"\n            return \"local\";\n        } else {\n            return \"remote\";\n        }\n    }\n\n    /** getName of Swift Package */\n    get name(): Promise<string> {\n        return this.contents.then(contents => (contents as PackageContents)?.name ?? \"\");\n    }\n\n    /** array of products in Swift Package */\n    private get products(): Promise<Product[]> {\n        return this.contents.then(contents => (contents as PackageContents)?.products ?? []);\n    }\n\n    /** array of dependencies in Swift Package */\n    get dependencies(): Promise<Dependency[]> {\n        return this.contents.then(contents => (contents as PackageContents)?.dependencies ?? []);\n    }\n\n    /** array of targets in Swift Package */\n    get targets(): Promise<Target[]> {\n        return this.contents.then(contents => (contents as PackageContents)?.targets ?? []);\n    }\n\n    /** array of executable products in Swift Package */\n    get executableProducts(): Promise<Product[]> {\n        return this.products.then(products =>\n            products.filter(product => product.type.executable !== undefined)\n        );\n    }\n\n    /** array of library products in Swift Package */\n    get libraryProducts(): Promise<Product[]> {\n        return this.products.then(products =>\n            products.filter(product => product.type.library !== undefined)\n        );\n    }\n\n    /**\n     * Array of targets in Swift Package. The targets may not be loaded yet.\n     * It is preferable to use the `targets` property that returns a promise that\n     * returns the targets when they're guarenteed to be resolved.\n     **/\n    get currentTargets(): Target[] {\n        return (this._contents as unknown as { targets: Target[] })?.targets ?? [];\n    }\n\n    /**\n     * Return array of targets of a certain type\n     * @param type Type of target\n     * @returns Array of targets\n     */\n    async getTargets(type?: TargetType): Promise<Target[]> {\n        if (type === undefined) {\n            return this.targets;\n        } else {\n            return this.targets.then(targets => targets.filter(target => target.type === type));\n        }\n    }\n\n    /**\n     * Get target for file\n     */\n    async getTarget(file: string): Promise<Target | undefined> {\n        const filePath = path.relative(this.folder.fsPath, file);\n        return this.targets.then(targets =>\n            targets.find(target => isPathInsidePath(filePath, target.path))\n        );\n    }\n\n    private static trimStdout(stdout: string): string {\n        // remove lines from `swift package describe` until we find a \"{\"\n        while (!stdout.startsWith(\"{\")) {\n            const firstNewLine = stdout.indexOf(\"\\n\");\n            stdout = stdout.slice(firstNewLine + 1);\n        }\n        return stdout;\n    }\n}\n\nexport enum TargetType {\n    executable = \"executable\",\n    library = \"library\",\n    test = \"test\",\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"../FolderContext\";\nimport { getErrorDescription } from \"../utilities/utilities\";\nimport { isPathInsidePath } from \"../utilities/filesystem\";\nimport { FolderOperation, WorkspaceContext } from \"../WorkspaceContext\";\nimport { TestRunProxy, TestRunner } from \"./TestRunner\";\nimport { LSPTestDiscovery } from \"./LSPTestDiscovery\";\nimport { Version } from \"../utilities/version\";\nimport configuration from \"../configuration\";\nimport { buildOptions, getBuildAllTask } from \"../tasks/SwiftTaskProvider\";\nimport { SwiftExecOperation, TaskOperation } from \"../tasks/TaskQueue\";\nimport * as TestDiscovery from \"./TestDiscovery\";\nimport { TargetType } from \"../SwiftPackage\";\nimport { parseTestsFromSwiftTestListOutput } from \"./SPMTestDiscovery\";\nimport { parseTestsFromDocumentSymbols } from \"./DocumentSymbolTestDiscovery\";\nimport { flattenTestItemCollection } from \"./TestUtils\";\n\n/** Build test explorer UI */\nexport class TestExplorer {\n    static errorTestItemId = \"#Error#\";\n    public controller: vscode.TestController;\n    public testRunProfiles: vscode.TestRunProfile[];\n    private lspTestDiscovery: LSPTestDiscovery;\n    private subscriptions: { dispose(): unknown }[];\n    private testFileEdited = true;\n    private tokenSource = new vscode.CancellationTokenSource();\n\n    // Emits after the `vscode.TestController` has been updated.\n    private onTestItemsDidChangeEmitter = new vscode.EventEmitter<vscode.TestController>();\n    public onTestItemsDidChange: vscode.Event<vscode.TestController>;\n\n    public onDidCreateTestRunEmitter = new vscode.EventEmitter<TestRunProxy>();\n    public onCreateTestRun: vscode.Event<TestRunProxy>;\n\n    constructor(public folderContext: FolderContext) {\n        this.onTestItemsDidChange = this.onTestItemsDidChangeEmitter.event;\n        this.onCreateTestRun = this.onDidCreateTestRunEmitter.event;\n\n        this.controller = vscode.tests.createTestController(\n            folderContext.name,\n            `${folderContext.name} Tests`\n        );\n\n        this.controller.resolveHandler = async item => {\n            if (!item) {\n                await this.discoverTestsInWorkspace(this.tokenSource.token);\n            }\n        };\n\n        this.testRunProfiles = TestRunner.setupProfiles(\n            this.controller,\n            this.folderContext,\n            this.onDidCreateTestRunEmitter\n        );\n\n        const workspaceContext = folderContext.workspaceContext;\n        const languageClientManager = workspaceContext.languageClientManager.get(folderContext);\n        this.lspTestDiscovery = new LSPTestDiscovery(languageClientManager);\n\n        // add end of task handler to be called whenever a build task has finished. If\n        // it is the build task for this folder then update the tests\n        const onDidEndTask = folderContext.workspaceContext.tasks.onDidEndTaskProcess(event => {\n            const task = event.execution.task;\n            const execution = task.execution as vscode.ProcessExecution;\n            if (\n                task.scope === this.folderContext.workspaceFolder &&\n                task.group === vscode.TaskGroup.Build &&\n                execution?.options?.cwd === this.folderContext.folder.fsPath &&\n                event.exitCode === 0 &&\n                task.definition.dontTriggerTestDiscovery !== true &&\n                this.testFileEdited\n            ) {\n                this.testFileEdited = false;\n\n                // only run discover tests if the library has tests\n                void this.folderContext.swiftPackage.getTargets(TargetType.test).then(targets => {\n                    if (targets.length > 0) {\n                        void this.discoverTestsInWorkspace(this.tokenSource.token);\n                    }\n                });\n            }\n        });\n\n        // add file watcher to catch changes to swift test files\n        const fileWatcher = this.folderContext.workspaceContext.onDidChangeSwiftFiles(({ uri }) => {\n            if (this.testFileEdited === false) {\n                void this.folderContext.getTestTarget(uri).then(target => {\n                    if (target) {\n                        this.testFileEdited = true;\n                    }\n                });\n            }\n        });\n\n        this.subscriptions = [\n            this.tokenSource,\n            fileWatcher,\n            onDidEndTask,\n            this.controller,\n            this.onTestItemsDidChangeEmitter,\n            this.onDidCreateTestRunEmitter,\n            ...this.testRunProfiles,\n            this.onTestItemsDidChange(() => this.updateSwiftTestContext()),\n        ];\n    }\n\n    dispose() {\n        this.controller.refreshHandler = undefined;\n        this.controller.resolveHandler = undefined;\n        this.tokenSource.cancel();\n        this.subscriptions.forEach(element => element.dispose());\n    }\n\n    /**\n     * Create folder observer that creates a TestExplorer when a folder is added and\n     * Discovers available tests when the folder is in focus\n     * @param workspaceContext Workspace context for extension\n     * @returns Observer disposable\n     */\n    static observeFolders(workspaceContext: WorkspaceContext): vscode.Disposable {\n        const tokenSource = new vscode.CancellationTokenSource();\n        const disposable = workspaceContext.onDidChangeFolders(\n            ({ folder, operation, workspace }) => {\n                switch (operation) {\n                    case FolderOperation.add:\n                        if (folder) {\n                            void folder.swiftPackage.getTargets(TargetType.test).then(targets => {\n                                if (targets.length === 0) {\n                                    return;\n                                }\n\n                                folder.addTestExplorer();\n                                // discover tests in workspace but only if disableAutoResolve is not on.\n                                // discover tests will kick off a resolve if required\n                                if (\n                                    !configuration.folder(folder.workspaceFolder).disableAutoResolve\n                                ) {\n                                    void folder.testExplorer?.discoverTestsInWorkspace(\n                                        tokenSource.token\n                                    );\n                                }\n                            });\n                        }\n                        break;\n                    case FolderOperation.packageUpdated:\n                        if (folder) {\n                            void folder.swiftPackage.getTargets(TargetType.test).then(targets => {\n                                const hasTestTargets = targets.length > 0;\n                                if (hasTestTargets && !folder.hasTestExplorer()) {\n                                    folder.addTestExplorer();\n                                    // discover tests in workspace but only if disableAutoResolve is not on.\n                                    // discover tests will kick off a resolve if required\n                                    if (\n                                        !configuration.folder(folder.workspaceFolder)\n                                            .disableAutoResolve\n                                    ) {\n                                        void folder.testExplorer?.discoverTestsInWorkspace(\n                                            tokenSource.token\n                                        );\n                                    }\n                                } else if (!hasTestTargets && folder.hasTestExplorer()) {\n                                    folder.removeTestExplorer();\n                                } else if (folder.hasTestExplorer()) {\n                                    folder.refreshTestExplorer();\n                                }\n                            });\n                        }\n                        break;\n                    case FolderOperation.focus:\n                        if (folder) {\n                            const languageClientManager =\n                                workspace.languageClientManager.get(folder);\n                            languageClientManager.documentSymbolWatcher = (document, symbols) =>\n                                TestExplorer.onDocumentSymbols(folder, document, symbols);\n                        }\n                }\n            }\n        );\n        return {\n            dispose: () => {\n                tokenSource.dispose();\n                disposable.dispose();\n            },\n        };\n    }\n\n    /**\n     * Sets the `swift.tests` context variable which is used by commands\n     * to determine if the test item belongs to the Swift extension.\n     */\n    private updateSwiftTestContext() {\n        const items = flattenTestItemCollection(this.controller.items).map(({ id }) => id);\n        void vscode.commands.executeCommand(\"setContext\", \"swift.tests\", items).then(() => {\n            /* Put in worker queue */\n        });\n    }\n\n    /**\n     * Called whenever we have new document symbols\n     */\n    private static onDocumentSymbols(\n        folder: FolderContext,\n        document: vscode.TextDocument,\n        symbols: vscode.DocumentSymbol[] | null | undefined\n    ) {\n        const uri = document?.uri;\n        const testExplorer = folder?.testExplorer;\n        if (testExplorer && symbols && uri && uri.scheme === \"file\") {\n            if (isPathInsidePath(uri.fsPath, folder.folder.fsPath)) {\n                void folder.swiftPackage.getTarget(uri.fsPath).then(target => {\n                    if (target && target.type === \"test\") {\n                        testExplorer.lspTestDiscovery\n                            .getDocumentTests(folder.swiftPackage, uri)\n                            .then(tests =>\n                                TestDiscovery.updateTestsForTarget(\n                                    testExplorer.controller,\n                                    { id: target.c99name, label: target.name },\n                                    tests,\n                                    uri\n                                )\n                            )\n                            // Fallback to parsing document symbols for XCTests only\n                            .catch(() => {\n                                const tests = parseTestsFromDocumentSymbols(\n                                    target.name,\n                                    symbols,\n                                    uri\n                                );\n                                testExplorer.updateTests(testExplorer.controller, tests, uri);\n                            });\n                    }\n                });\n            }\n        }\n    }\n\n    private updateTests(\n        controller: vscode.TestController,\n        tests: TestDiscovery.TestClass[],\n        uri?: vscode.Uri\n    ) {\n        TestDiscovery.updateTests(controller, tests, uri);\n        this.onTestItemsDidChangeEmitter.fire(controller);\n    }\n\n    /**\n     * Discover tests\n     */\n    async discoverTestsInWorkspace(token: vscode.CancellationToken) {\n        try {\n            // If the LSP cannot produce a list of tests it throws and\n            // we fall back to discovering tests with SPM.\n            await this.discoverTestsInWorkspaceLSP(token);\n        } catch {\n            this.folderContext.workspaceContext.outputChannel.logDiagnostic(\n                \"workspace/tests LSP request not supported, falling back to SPM to discover tests.\",\n                \"Test Discovery\"\n            );\n            await this.discoverTestsInWorkspaceSPM(token);\n        }\n    }\n\n    /**\n     * Discover tests\n     * Uses `swift test --list-tests` to get the list of tests\n     */\n    async discoverTestsInWorkspaceSPM(token: vscode.CancellationToken) {\n        async function runDiscover(explorer: TestExplorer, firstTry: boolean) {\n            try {\n                // we depend on sourcekit-lsp to detect swift-testing tests so let the user know\n                // that things won't work properly if sourcekit-lsp has been disabled for some reason\n                // and provide an option to enable sourcekit-lsp again\n                const ok = \"OK\";\n                const enable = \"Enable SourceKit-LSP\";\n                if (firstTry && configuration.lsp.disable === true) {\n                    void vscode.window\n                        .showInformationMessage(\n                            `swift-testing tests will not be detected since SourceKit-LSP\n                            has been disabled for this workspace.`,\n                            enable,\n                            ok\n                        )\n                        .then(selected => {\n                            if (selected === enable) {\n                                explorer.folderContext.workspaceContext.outputChannel.log(\n                                    `Enabling SourceKit-LSP after swift-testing message`\n                                );\n                                void vscode.workspace\n                                    .getConfiguration(\"swift\")\n                                    .update(\"sourcekit-lsp.disable\", false)\n                                    .then(() => {\n                                        /* Put in worker queue */\n                                    });\n                            } else if (selected === ok) {\n                                explorer.folderContext.workspaceContext.outputChannel.log(\n                                    `User acknowledged that SourceKit-LSP is disabled`\n                                );\n                            }\n                        });\n                }\n                const toolchain = explorer.folderContext.toolchain;\n                // get build options before build is run so we can be sure they aren't changed\n                // mid-build\n                const testBuildOptions = buildOptions(toolchain);\n                // normally we wouldn't run the build here, but you can suspend swiftPM on macOS\n                // if you try and list tests while skipping the build if you are using a different\n                // sanitizer settings\n                if (process.platform === \"darwin\" && configuration.sanitizer !== \"off\") {\n                    const task = await getBuildAllTask(explorer.folderContext);\n                    task.definition.dontTriggerTestDiscovery = true;\n                    const exitCode = await explorer.folderContext.taskQueue.queueOperation(\n                        new TaskOperation(task)\n                    );\n                    if (exitCode === undefined || exitCode !== 0) {\n                        explorer.setErrorTestItem(\"Build the project to enable test discovery.\");\n                        return;\n                    }\n                }\n\n                if (token.isCancellationRequested) {\n                    return;\n                }\n\n                // get list of tests from `swift test --list-tests`\n                let listTestArguments: string[];\n                if (toolchain.swiftVersion.isGreaterThanOrEqual(new Version(5, 8, 0))) {\n                    listTestArguments = [\"test\", \"list\", \"--skip-build\"];\n                } else {\n                    listTestArguments = [\"test\", \"--list-tests\", \"--skip-build\"];\n                }\n                listTestArguments = [...listTestArguments, ...testBuildOptions];\n                const listTestsOperation = new SwiftExecOperation(\n                    listTestArguments,\n                    explorer.folderContext,\n                    \"Listing Tests\",\n                    { showStatusItem: true, checkAlreadyRunning: false, log: \"Listing tests\" },\n                    stdout => {\n                        // if we got to this point we can get rid of any error test item\n                        explorer.deleteErrorTestItem();\n\n                        const tests = parseTestsFromSwiftTestListOutput(stdout);\n                        explorer.updateTests(explorer.controller, tests);\n                    }\n                );\n                await explorer.folderContext.taskQueue.queueOperation(listTestsOperation, token);\n            } catch (error) {\n                // If a test list fails its possible the tests have not been built.\n                // Build them and try again, and if we still fail then notify the user.\n                if (firstTry) {\n                    const backgroundTask = await getBuildAllTask(explorer.folderContext);\n                    if (!backgroundTask) {\n                        return;\n                    }\n\n                    try {\n                        await explorer.folderContext.taskQueue.queueOperation(\n                            new TaskOperation(backgroundTask)\n                        );\n                    } catch {\n                        // can ignore if running task fails\n                    }\n\n                    // Retry test discovery after performing a build.\n                    await runDiscover(explorer, false);\n                } else {\n                    const errorDescription = getErrorDescription(error);\n                    if (\n                        (process.platform === \"darwin\" &&\n                            errorDescription.match(/error: unableToLoadBundle/)) ||\n                        (process.platform === \"win32\" &&\n                            errorDescription.match(/The file doesn\u2019t exist./)) ||\n                        (![\"darwin\", \"win32\"].includes(process.platform) &&\n                            errorDescription.match(/No such file or directory/))\n                    ) {\n                        explorer.setErrorTestItem(\"Build the project to enable test discovery.\");\n                    } else if (errorDescription.startsWith(\"error: no tests found\")) {\n                        explorer.setErrorTestItem(\n                            \"Add a test target to your Package.\",\n                            \"No Tests Found.\"\n                        );\n                    } else {\n                        explorer.setErrorTestItem(errorDescription);\n                    }\n                    explorer.folderContext.workspaceContext.outputChannel.log(\n                        `Test Discovery Failed: ${errorDescription}`,\n                        explorer.folderContext.name\n                    );\n                }\n            }\n        }\n        await runDiscover(this, true);\n    }\n\n    /**\n     * Discover tests\n     */\n    async discoverTestsInWorkspaceLSP(token: vscode.CancellationToken) {\n        const tests = await this.lspTestDiscovery.getWorkspaceTests(\n            this.folderContext.swiftPackage\n        );\n        if (token.isCancellationRequested) {\n            return;\n        }\n\n        await TestDiscovery.updateTestsFromClasses(\n            this.controller,\n            this.folderContext.swiftPackage,\n            tests\n        );\n        this.onTestItemsDidChangeEmitter.fire(this.controller);\n    }\n\n    /** Delete TestItem with error id */\n    private deleteErrorTestItem() {\n        this.controller.items.delete(TestExplorer.errorTestItemId);\n        this.onTestItemsDidChangeEmitter.fire(this.controller);\n    }\n\n    /**\n     * Add/replace a TestItem with an error, if test controller currently has no TestItems\n     * @param errorDescription Error description to display\n     */\n    private setErrorTestItem(errorDescription: string | undefined, title = \"Test Discovery Error\") {\n        this.folderContext.workspaceContext.outputChannel.log(\n            `Test Discovery Error: ${errorDescription}`\n        );\n        this.controller.items.forEach(item => {\n            this.controller.items.delete(item.id);\n        });\n        if (this.controller.items.size === 0) {\n            const errorItem = this.controller.createTestItem(TestExplorer.errorTestItemId, title);\n            errorItem.error = errorDescription;\n            this.controller.items.add(errorItem);\n        }\n        this.onTestItemsDidChangeEmitter.fire(this.controller);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as stream from \"stream\";\nimport * as os from \"os\";\nimport * as asyncfs from \"fs/promises\";\nimport { FolderContext } from \"../FolderContext\";\nimport { compactMap, execFile, getErrorDescription } from \"../utilities/utilities\";\nimport { createSwiftTask } from \"../tasks/SwiftTaskProvider\";\nimport configuration from \"../configuration\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport {\n    IXCTestOutputParser,\n    ParallelXCTestOutputParser,\n    XCTestOutputParser,\n} from \"./TestParsers/XCTestOutputParser\";\nimport {\n    SwiftTestingOutputParser,\n    SymbolRenderer,\n    TestSymbol,\n} from \"./TestParsers/SwiftTestingOutputParser\";\nimport { LoggingDebugAdapterTracker } from \"../debugger/logTracker\";\nimport { TaskOperation } from \"../tasks/TaskQueue\";\nimport { TestXUnitParser } from \"./TestXUnitParser\";\nimport { ITestRunState, TestIssueDiff } from \"./TestParsers/TestRunState\";\nimport { TestRunArguments } from \"./TestRunArguments\";\nimport { TemporaryFolder } from \"../utilities/tempFolder\";\nimport { TestClass, runnableTag, upsertTestItem } from \"./TestDiscovery\";\nimport { TestCoverage } from \"../coverage/LcovResults\";\nimport {\n    BuildConfigurationFactory,\n    SwiftTestingBuildAguments,\n    SwiftTestingConfigurationSetup,\n    TestingConfigurationFactory,\n} from \"../debugger/buildConfig\";\nimport { TestKind, isDebugging, isRelease } from \"./TestKind\";\nimport { reduceTestItemChildren } from \"./TestUtils\";\nimport { CompositeCancellationToken } from \"../utilities/cancellation\";\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport stripAnsi = require(\"strip-ansi\");\n\nexport enum TestLibrary {\n    xctest = \"XCTest\",\n    swiftTesting = \"swift-testing\",\n}\n\nexport interface TestRunState {\n    pending: vscode.TestItem[];\n    failed: {\n        test: vscode.TestItem;\n        message: vscode.TestMessage | readonly vscode.TestMessage[];\n    }[];\n    passed: vscode.TestItem[];\n    skipped: vscode.TestItem[];\n    errored: vscode.TestItem[];\n    unknown: number;\n    output: string[];\n}\n\nexport class TestRunProxy {\n    private testRun?: vscode.TestRun;\n    private addedTestItems: { testClass: TestClass; parentIndex: number }[] = [];\n    private runStarted: boolean = false;\n    private queuedOutput: string[] = [];\n    private _testItems: vscode.TestItem[];\n    private iteration: number | undefined;\n    private attachments: { [key: string]: string[] } = {};\n    public coverage: TestCoverage;\n    public token: CompositeCancellationToken;\n\n    public testRunCompleteEmitter = new vscode.EventEmitter<void>();\n    public onTestRunComplete: vscode.Event<void>;\n\n    // Allows for introspection on the state of TestItems after a test run.\n    public runState = TestRunProxy.initialTestRunState();\n\n    public static initialTestRunState(): TestRunState {\n        return {\n            pending: [],\n            failed: [],\n            passed: [],\n            skipped: [],\n            errored: [],\n            unknown: 0,\n            output: [],\n        };\n    }\n\n    public get testItems(): vscode.TestItem[] {\n        return this._testItems;\n    }\n\n    public get isCancellationRequested(): boolean {\n        return this.token.isCancellationRequested;\n    }\n\n    constructor(\n        private testRunRequest: vscode.TestRunRequest,\n        private controller: vscode.TestController,\n        private args: TestRunArguments,\n        private folderContext: FolderContext,\n        testProfileCancellationToken: vscode.CancellationToken\n    ) {\n        this._testItems = args.testItems;\n        this.coverage = new TestCoverage(folderContext);\n        this.token = new CompositeCancellationToken(testProfileCancellationToken);\n        this.onTestRunComplete = this.testRunCompleteEmitter.event;\n    }\n\n    public testRunStarted = () => {\n        if (this.runStarted) {\n            return;\n        }\n\n        this.resetTags(this.controller);\n        this.runStarted = true;\n\n        // When a test run starts we need to do several things:\n        // - Create new TestItems for each paramterized test that was added\n        //   and attach them to their parent TestItem.\n        // - Create a new test run from the TestRunArguments + newly created TestItems.\n        // - Mark all of these test items as enqueued on the test run.\n\n        const addedTestItems = this.addedTestItems\n            .map(({ testClass, parentIndex }) => {\n                const parent = this.args.testItems[parentIndex];\n                // clear out the children before we add the new ones.\n                parent.children.replace([]);\n                return {\n                    testClass,\n                    parent,\n                };\n            })\n            .map(({ testClass, parent }) => {\n                // strip the location off parameterized tests so only the parent TestItem\n                // has one. The parent collects all the issues so they're colated on the top\n                // level test item and users can cycle through them with the up/down arrows in the UI.\n                testClass.location = undefined;\n\n                // Results should inherit any tags from the parent.\n                // Until we can rerun a swift-testing test with an individual argument, mark\n                // the argument test items as not runnable. This should be revisited when\n                // https://github.com/swiftlang/swift-testing/issues/671 is resolved.\n                testClass.tags = compactMap(parent.tags, t =>\n                    t.id === runnableTag.id ? null : new vscode.TestTag(t.id)\n                );\n\n                const added = upsertTestItem(this.controller, testClass, parent);\n\n                // If we just update leaf nodes the root test controller never realizes that\n                // items have updated. This may be a bug in VS Code. We can work around it by\n                // re-adding the existing items back up the chain to refresh all the nodes along the way.\n                let p = parent;\n                while (p?.parent) {\n                    p.parent.children.add(p);\n                    p = p.parent;\n                }\n\n                return added;\n            });\n\n        this.testRun = this.controller.createTestRun(this.testRunRequest);\n        this.token.add(this.testRun.token);\n        this._testItems = [...this.testItems, ...addedTestItems];\n\n        // Forward any output captured before the testRun was created.\n        for (const outputLine of this.queuedOutput) {\n            this.performAppendOutput(this.testRun, outputLine);\n        }\n        this.queuedOutput = [];\n\n        for (const test of this.testItems) {\n            this.testRun.enqueued(test);\n        }\n    };\n\n    public addParameterizedTestCase = (testClass: TestClass, parentIndex: number) => {\n        this.addedTestItems.push({ testClass, parentIndex });\n    };\n\n    public addAttachment = (testIndex: number, attachment: string) => {\n        const attachments = this.attachments[testIndex] ?? [];\n        attachments.push(attachment);\n        this.attachments[testIndex] = attachments;\n\n        const testItem = this.testItems[testIndex];\n        if (testItem) {\n            testItem.tags = [\n                ...testItem.tags,\n                new vscode.TestTag(TestRunProxy.Tags.HAS_ATTACHMENT),\n            ];\n        }\n    };\n\n    public getTestIndex(id: string, filename?: string): number {\n        return this.testItemFinder.getIndex(id, filename);\n    }\n\n    private get testItemFinder(): TestItemFinder {\n        if (process.platform === \"darwin\") {\n            return new DarwinTestItemFinder(this.testItems);\n        } else {\n            return new NonDarwinTestItemFinder(this.testItems, this.folderContext);\n        }\n    }\n\n    public unknownTestRan() {\n        this.runState.unknown++;\n    }\n\n    public started(test: vscode.TestItem) {\n        this.runState.pending.push(test);\n        this.testRun?.started(test);\n    }\n\n    private clearPendingTest(test: vscode.TestItem) {\n        this.runState.pending = this.runState.pending.filter(t => t !== test);\n    }\n\n    public skipped(test: vscode.TestItem) {\n        test.tags = [...test.tags, new vscode.TestTag(TestRunProxy.Tags.SKIPPED)];\n\n        this.runState.skipped.push(test);\n        this.clearPendingTest(test);\n        this.testRun?.skipped(test);\n    }\n\n    public passed(test: vscode.TestItem, duration?: number) {\n        this.runState.passed.push(test);\n        this.clearPendingTest(test);\n        this.testRun?.passed(test, duration);\n    }\n\n    public failed(\n        test: vscode.TestItem,\n        message: vscode.TestMessage | readonly vscode.TestMessage[],\n        duration?: number\n    ) {\n        this.runState.failed.push({ test, message });\n        this.clearPendingTest(test);\n        this.testRun?.failed(test, message, duration);\n    }\n\n    public errored(\n        test: vscode.TestItem,\n        message: vscode.TestMessage | readonly vscode.TestMessage[],\n        duration?: number\n    ) {\n        this.runState.errored.push(test);\n        this.clearPendingTest(test);\n        this.testRun?.errored(test, message, duration);\n    }\n\n    public async end() {\n        // If the test run never started (typically due to a build error)\n        // start it to flush any queued output, and then immediately end it.\n        if (!this.runStarted) {\n            this.testRunStarted();\n        }\n\n        // Any tests still in the pending state are considered failed. This\n        // can happen if a test causes a crash and aborts the test run.\n        this.runState.pending.forEach(test => {\n            this.failed(test, new vscode.TestMessage(\"Test did not complete.\"));\n        });\n\n        this.reportAttachments();\n        this.testRun?.end();\n        this.testRunCompleteEmitter.fire();\n        this.token.dispose();\n    }\n\n    public setIteration(iteration: number) {\n        this.runState = TestRunProxy.initialTestRunState();\n        this.iteration = iteration;\n    }\n\n    public appendOutput(output: string) {\n        const tranformedOutput = this.prependIterationToOutput(output);\n        if (this.testRun) {\n            this.performAppendOutput(this.testRun, tranformedOutput);\n        } else {\n            this.queuedOutput.push(tranformedOutput);\n        }\n    }\n\n    public appendOutputToTest(output: string, test: vscode.TestItem, location?: vscode.Location) {\n        const tranformedOutput = this.prependIterationToOutput(output);\n        if (this.testRun) {\n            this.performAppendOutput(this.testRun, tranformedOutput, location, test);\n        } else {\n            this.queuedOutput.push(tranformedOutput);\n        }\n    }\n\n    private reportAttachments() {\n        const attachmentKeys = Object.keys(this.attachments);\n        if (attachmentKeys.length > 0) {\n            let attachment = \"\";\n            const totalAttachments = attachmentKeys.reduce((acc, key) => {\n                const attachments = this.attachments[key];\n                attachment = attachments.length ? attachments[0] : attachment;\n                return acc + attachments.length;\n            }, 0);\n\n            if (attachment) {\n                attachment = path.dirname(attachment);\n                this.appendOutput(\n                    `${SymbolRenderer.eventMessageSymbol(TestSymbol.attachment)} ${SymbolRenderer.ansiEscapeCodePrefix}90mRecorded ${totalAttachments} attachment${totalAttachments === 1 ? \"\" : \"s\"} to ${attachment}${SymbolRenderer.resetANSIEscapeCode}`\n                );\n            }\n        }\n    }\n\n    private performAppendOutput(\n        testRun: vscode.TestRun,\n        output: string,\n        location?: vscode.Location,\n        test?: vscode.TestItem\n    ) {\n        testRun.appendOutput(output, location, test);\n        this.runState.output.push(stripAnsi(output));\n    }\n\n    private prependIterationToOutput(output: string): string {\n        if (this.iteration === undefined) {\n            return output;\n        }\n        const itr = this.iteration + 1;\n        const lines = output.match(/[^\\r\\n]*[\\r\\n]*/g);\n        return lines?.map(line => (line ? `\\x1b[34mRun ${itr}\\x1b[0m ${line}` : \"\")).join(\"\") ?? \"\";\n    }\n\n    public async computeCoverage() {\n        if (!this.testRun) {\n            return;\n        }\n\n        // Compute final coverage numbers if any coverage info has been captured during the run.\n        await this.coverage.computeCoverage(this.testRun);\n    }\n\n    private static Tags = {\n        SKIPPED: \"skipped\",\n        HAS_ATTACHMENT: \"hasAttachment\",\n    };\n\n    // Remove any tags that were added due to test results\n    private resetTags(controller: vscode.TestController) {\n        function removeTestRunTags(_acc: void, test: vscode.TestItem) {\n            const tags = Object.values(TestRunProxy.Tags);\n            test.tags = test.tags.filter(tag => !tags.includes(tag.id));\n        }\n        reduceTestItemChildren(controller.items, removeTestRunTags, void 0);\n    }\n}\n\n/** Class used to run tests */\nexport class TestRunner {\n    public testRun: TestRunProxy;\n    private testArgs: TestRunArguments;\n    private xcTestOutputParser: IXCTestOutputParser;\n    private swiftTestOutputParser: SwiftTestingOutputParser;\n    private static CANCELLATION_ERROR = \"Test run cancelled\";\n\n    /**\n     * Constructor for TestRunner\n     * @param request Test run request\n     * @param folderContext Folder tests are being run in\n     * @param controller Test controller\n     */\n    constructor(\n        private testKind: TestKind,\n        private request: vscode.TestRunRequest,\n        private folderContext: FolderContext,\n        private controller: vscode.TestController,\n        token: vscode.CancellationToken\n    ) {\n        this.testArgs = new TestRunArguments(\n            this.ensureRequestIncludesTests(this.request),\n            isDebugging(testKind)\n        );\n        this.testRun = new TestRunProxy(request, controller, this.testArgs, folderContext, token);\n        this.xcTestOutputParser =\n            testKind === TestKind.parallel\n                ? new ParallelXCTestOutputParser(\n                      this.folderContext.toolchain.hasMultiLineParallelTestOutput\n                  )\n                : new XCTestOutputParser();\n        this.swiftTestOutputParser = new SwiftTestingOutputParser(\n            this.testRun.testRunStarted,\n            this.testRun.addParameterizedTestCase,\n            this.testRun.addAttachment\n        );\n    }\n\n    /**\n     * When performing a \"Run test multiple times\" run set the iteration\n     * so it can be shown in the logs.\n     * @param iteration The iteration counter\n     */\n    public setIteration(iteration: number) {\n        // The SwiftTestingOutputParser holds state and needs to be reset between iterations.\n        this.swiftTestOutputParser = new SwiftTestingOutputParser(\n            this.testRun.testRunStarted,\n            this.testRun.addParameterizedTestCase,\n            this.testRun.addAttachment\n        );\n        this.testRun.setIteration(iteration);\n    }\n\n    /**\n     * If the request has no test items to include in the run,\n     * default to using all the items in the `TestController`.\n     */\n    private ensureRequestIncludesTests(request: vscode.TestRunRequest): vscode.TestRunRequest {\n        if ((request.include?.length ?? 0) > 0) {\n            return request;\n        }\n        const items: vscode.TestItem[] = [];\n        this.controller.items.forEach(item => items.push(item));\n        return new vscode.TestRunRequest(items, request.exclude, request.profile);\n    }\n\n    get workspaceContext(): WorkspaceContext {\n        return this.folderContext.workspaceContext;\n    }\n\n    /**\n     * Setup debug and run test profiles\n     * @param controller Test controller\n     * @param folderContext Folder tests are running in\n     */\n    static setupProfiles(\n        controller: vscode.TestController,\n        folderContext: FolderContext,\n        onCreateTestRun: vscode.EventEmitter<TestRunProxy>\n    ): vscode.TestRunProfile[] {\n        return [\n            // Add non-debug profiles\n            controller.createRunProfile(\n                TestKind.standard,\n                vscode.TestRunProfileKind.Run,\n                async (request, token) => {\n                    const runner = new TestRunner(\n                        TestKind.standard,\n                        request,\n                        folderContext,\n                        controller,\n                        token\n                    );\n                    onCreateTestRun.fire(runner.testRun);\n                    await runner.runHandler();\n                },\n                true,\n                runnableTag\n            ),\n            controller.createRunProfile(\n                TestKind.parallel,\n                vscode.TestRunProfileKind.Run,\n                async (request, token) => {\n                    const runner = new TestRunner(\n                        TestKind.parallel,\n                        request,\n                        folderContext,\n                        controller,\n                        token\n                    );\n                    onCreateTestRun.fire(runner.testRun);\n                    await runner.runHandler();\n                },\n                false,\n                runnableTag\n            ),\n            controller.createRunProfile(\n                TestKind.release,\n                vscode.TestRunProfileKind.Run,\n                async (request, token) => {\n                    const runner = new TestRunner(\n                        TestKind.release,\n                        request,\n                        folderContext,\n                        controller,\n                        token\n                    );\n                    onCreateTestRun.fire(runner.testRun);\n                    await runner.runHandler();\n                },\n                false,\n                runnableTag\n            ),\n            // Add coverage profile\n            controller.createRunProfile(\n                TestKind.coverage,\n                vscode.TestRunProfileKind.Coverage,\n                async (request, token) => {\n                    const runner = new TestRunner(\n                        TestKind.coverage,\n                        request,\n                        folderContext,\n                        controller,\n                        token\n                    );\n                    onCreateTestRun.fire(runner.testRun);\n                    if (request.profile) {\n                        request.profile.loadDetailedCoverage = async (_testRun, fileCoverage) => {\n                            return runner.testRun.coverage.loadDetailedCoverage(fileCoverage.uri);\n                        };\n                    }\n                    await runner.runHandler();\n                    await vscode.commands.executeCommand(\"testing.openCoverage\");\n                },\n                false,\n                runnableTag\n            ),\n            // Add debug profile\n            controller.createRunProfile(\n                TestKind.debug,\n                vscode.TestRunProfileKind.Debug,\n                async (request, token) => {\n                    const runner = new TestRunner(\n                        TestKind.debug,\n                        request,\n                        folderContext,\n                        controller,\n                        token\n                    );\n                    onCreateTestRun.fire(runner.testRun);\n                    await runner.runHandler();\n                },\n                false,\n                runnableTag\n            ),\n            controller.createRunProfile(\n                TestKind.debugRelease,\n                vscode.TestRunProfileKind.Debug,\n                async (request, token) => {\n                    const runner = new TestRunner(\n                        TestKind.debugRelease,\n                        request,\n                        folderContext,\n                        controller,\n                        token\n                    );\n                    onCreateTestRun.fire(runner.testRun);\n                    await runner.runHandler();\n                },\n                false,\n                runnableTag\n            ),\n        ];\n    }\n\n    /**\n     * Extracts a list of unique test Targets from the list of test items.\n     */\n    private testTargets(items: vscode.TestItem[]): string[] {\n        const targets = new Set<string>();\n        for (const item of items) {\n            const target = item.id.split(\".\")[0];\n            targets.add(target);\n        }\n        return Array.from(targets);\n    }\n\n    /**\n     * Test run handler. Run a series of tests and extracts the results from the output\n     * @param shouldDebug Should we run the debugger\n     * @param token Cancellation token\n     * @returns When complete\n     */\n    async runHandler() {\n        const testTargets = this.testTargets(this.testArgs.testItems);\n        this.workspaceContext.testsStarted(this.folderContext, this.testKind, testTargets);\n\n        const runState = new TestRunnerTestRunState(this.testRun);\n\n        const cancellationDisposable = this.testRun.token.onCancellationRequested(() => {\n            this.testRun.appendOutput(\"\\r\\nTest run cancelled.\");\n        });\n\n        try {\n            if (isDebugging(this.testKind)) {\n                await this.debugSession(runState);\n            } else {\n                await this.runSession(runState);\n            }\n        } catch (error) {\n            this.workspaceContext.outputChannel.log(`Error: ${getErrorDescription(error)}`);\n            this.testRun.appendOutput(`\\r\\nError: ${getErrorDescription(error)}`);\n        }\n\n        // Coverage must be computed before the testRun is ended as of VS Code 1.90.0\n        if (this.testKind === TestKind.coverage) {\n            await this.testRun.computeCoverage();\n        }\n\n        cancellationDisposable.dispose();\n        await this.testRun.end();\n\n        this.workspaceContext.testsFinished(this.folderContext, this.testKind, testTargets);\n    }\n\n    /** Run test session without attaching to a debugger */\n    async runSession(runState: TestRunnerTestRunState): Promise<TestRunState> {\n        // Run swift-testing first, then XCTest.\n        // swift-testing being parallel by default should help these run faster.\n        if (this.testArgs.hasSwiftTestingTests) {\n            const testRunTime = Date.now();\n            const fifoPipePath = this.generateFifoPipePath(testRunTime);\n\n            await TemporaryFolder.withNamedTemporaryFiles([fifoPipePath], async () => {\n                // macOS/Linux require us to create the named pipe before we use it.\n                // Windows just lets us communicate by specifying a pipe path without any ceremony.\n                if (process.platform !== \"win32\") {\n                    await execFile(\"mkfifo\", [fifoPipePath], undefined, this.folderContext);\n                }\n                // Create the swift-testing configuration JSON file, peparing any\n                // directories the configuration may require.\n                const attachmentFolder = await SwiftTestingConfigurationSetup.setupAttachmentFolder(\n                    this.folderContext,\n                    testRunTime\n                );\n                const swiftTestingArgs = SwiftTestingBuildAguments.build(\n                    fifoPipePath,\n                    attachmentFolder\n                );\n                const testBuildConfig = await TestingConfigurationFactory.swiftTestingConfig(\n                    this.folderContext,\n                    swiftTestingArgs,\n                    this.testKind,\n                    this.testArgs.swiftTestArgs,\n                    true\n                );\n\n                if (testBuildConfig === null || this.testRun.isCancellationRequested) {\n                    return this.testRun.runState;\n                }\n\n                const outputStream = this.testOutputWritable(TestLibrary.swiftTesting, runState);\n\n                // Watch the pipe for JSONL output and parse the events into test explorer updates.\n                // The await simply waits for the watching to be configured.\n                await this.swiftTestOutputParser.watch(fifoPipePath, runState);\n\n                await this.launchTests(\n                    runState,\n                    this.testKind === TestKind.parallel ? TestKind.standard : this.testKind,\n                    outputStream,\n                    testBuildConfig,\n                    TestLibrary.swiftTesting\n                );\n\n                await SwiftTestingConfigurationSetup.cleanupAttachmentFolder(\n                    this.folderContext,\n                    testRunTime,\n                    this.workspaceContext.outputChannel\n                );\n            });\n        }\n\n        if (this.testArgs.hasXCTests) {\n            const testBuildConfig = await TestingConfigurationFactory.xcTestConfig(\n                this.folderContext,\n                this.testKind,\n                this.testArgs.xcTestArgs,\n                true\n            );\n\n            if (testBuildConfig === null || this.testRun.isCancellationRequested) {\n                return this.testRun.runState;\n            }\n\n            // XCTestRuns are started immediately\n            this.testRun.testRunStarted();\n\n            await this.launchTests(\n                runState,\n                this.testKind,\n                this.testOutputWritable(TestLibrary.xctest, runState),\n                testBuildConfig,\n                TestLibrary.xctest\n            );\n        }\n\n        return this.testRun.runState;\n    }\n\n    private async launchTests(\n        runState: TestRunnerTestRunState,\n        testKind: TestKind,\n        outputStream: stream.Writable,\n        testBuildConfig: vscode.DebugConfiguration,\n        testLibrary: TestLibrary\n    ) {\n        try {\n            switch (testKind) {\n                case TestKind.coverage:\n                    await this.runCoverageSession(outputStream, testBuildConfig, testLibrary);\n                    break;\n                case TestKind.parallel:\n                    await this.runParallelSession(outputStream, testBuildConfig, runState);\n                    break;\n                default:\n                    await this.runStandardSession(outputStream, testBuildConfig, testKind);\n                    break;\n            }\n        } catch (error) {\n            if (error === TestRunner.CANCELLATION_ERROR) {\n                this.testRun.appendOutput(`\\r\\n${error}`);\n            } else if (error !== 1) {\n                // Test failures result in error code 1\n                this.testRun.appendOutput(`\\r\\nError: ${getErrorDescription(error)}`);\n            } else {\n                // swift-testing tests don't have their run started until the .swift-testing binary has\n                // sent all of its `test` events, which enumerate the parameterized test cases. This means that\n                // build output is witheld until the run starts. If there is a compile error, unless we call\n                // `testRunStarted()` to flush the buffer of test result output, the build error will be silently\n                // discarded. If the test run has already started this is a no-op so its safe to call it multiple times.\n                this.testRun.testRunStarted();\n\n                void this.swiftTestOutputParser.close();\n            }\n        } finally {\n            outputStream.end();\n        }\n    }\n\n    /** Run tests outside of debugger */\n    async runStandardSession(\n        outputStream: stream.Writable,\n        testBuildConfig: vscode.DebugConfiguration,\n        testKind: TestKind\n    ) {\n        return new Promise<void>((resolve, reject) => {\n            const args = testBuildConfig.args ?? [];\n            let kindLabel: string;\n            switch (testKind) {\n                case TestKind.coverage:\n                    kindLabel = \" With Code Coverage\";\n                    break;\n                case TestKind.parallel:\n                    kindLabel = \" In Parallel\";\n                    break;\n                case TestKind.debug:\n                    kindLabel = \" For Debugging\";\n                    break;\n                case TestKind.release:\n                    kindLabel = \" in Release Mode\";\n                    break;\n                case TestKind.debugRelease:\n                    kindLabel = \" For Debugging in Release Mode\";\n                    break;\n                case TestKind.standard:\n                    kindLabel = \"\";\n            }\n\n            const task = createSwiftTask(\n                args,\n                `Building and Running Tests${kindLabel}`,\n                {\n                    cwd: this.folderContext.folder,\n                    scope: this.folderContext.workspaceFolder,\n                    prefix: this.folderContext.name,\n                    presentationOptions: { reveal: vscode.TaskRevealKind.Never },\n                },\n                this.folderContext.toolchain,\n                { ...process.env, ...testBuildConfig.env },\n                { readOnlyTerminal: process.platform !== \"win32\" }\n            );\n\n            task.execution.onDidWrite(str => {\n                const replaced = str\n                    .replace(\"[1/1] Planning build\", \"\") // Work around SPM still emitting progress when doing --no-build.\n                    .replace(/\\[1\\/1\\] Write swift-version-.*/gm, \"\")\n                    .replace(\n                        /LLVM Profile Error: Failed to write file \"default.profraw\": Operation not permitted\\r\\n/gm,\n                        \"\"\n                    ); // Work around benign LLVM coverage warnings\n                outputStream.write(replaced);\n            });\n\n            // If the test run is iterrupted by a cancellation request from VS Code, ensure the task is terminated.\n            const cancellationDisposable = this.testRun.token.onCancellationRequested(() => {\n                task.execution.terminate(\"SIGINT\");\n                reject(TestRunner.CANCELLATION_ERROR);\n            });\n\n            task.execution.onDidClose(code => {\n                cancellationDisposable.dispose();\n\n                // undefined or 0 are viewed as success\n                if (!code) {\n                    resolve();\n                } else {\n                    reject(code);\n                }\n            });\n\n            void this.folderContext.taskQueue.queueOperation(\n                new TaskOperation(task),\n                this.testRun.token\n            );\n        });\n    }\n\n    /** Run tests with code coverage, and parse coverage results */\n    async runCoverageSession(\n        outputStream: stream.Writable,\n        testBuildConfig: vscode.DebugConfiguration,\n        testLibrary: TestLibrary\n    ) {\n        try {\n            await this.runStandardSession(outputStream, testBuildConfig, TestKind.coverage);\n        } catch (error) {\n            // If this isn't a standard test failure, forward the error and skip generating coverage.\n            if (error !== 1) {\n                throw error;\n            }\n        }\n\n        await this.testRun.coverage.captureCoverage(testLibrary);\n    }\n\n    /** Run tests in parallel outside of debugger */\n    async runParallelSession(\n        outputStream: stream.Writable,\n        testBuildConfig: vscode.DebugConfiguration,\n        runState: TestRunnerTestRunState\n    ) {\n        await this.workspaceContext.tempFolder.withTemporaryFile(\"xml\", async filename => {\n            const args = [...(testBuildConfig.args ?? []), \"--xunit-output\", filename];\n\n            try {\n                testBuildConfig.args = await this.runStandardSession(\n                    outputStream,\n                    {\n                        ...testBuildConfig,\n                        args,\n                    },\n                    TestKind.parallel\n                );\n            } catch (error) {\n                // If this isn't a standard test failure, forward the error and skip generating coverage.\n                if (error !== 1) {\n                    throw error;\n                }\n            }\n\n            const buffer = await asyncfs.readFile(filename, \"utf8\");\n            const xUnitParser = new TestXUnitParser(\n                this.folderContext.toolchain.hasMultiLineParallelTestOutput\n            );\n            const results = await xUnitParser.parse(\n                buffer,\n                runState,\n                this.workspaceContext.outputChannel\n            );\n            if (results) {\n                this.testRun.appendOutput(\n                    `\\r\\nExecuted ${results.tests} tests, with ${results.failures} failures and ${results.errors} errors.\\r\\n`\n                );\n            }\n        });\n    }\n\n    /** Run test session inside debugger */\n    async debugSession(runState: TestRunnerTestRunState) {\n        // Perform a build all first to produce the binaries we'll run later.\n        let buildOutput = \"\";\n        try {\n            await this.runStandardSession(\n                // Capture the output to print it in case of a build error.\n                // We dont want to associate it with the test run.\n                new stream.Writable({\n                    write: (chunk, _encoding, next) => {\n                        buildOutput += chunk.toString();\n                        next();\n                    },\n                }),\n                await BuildConfigurationFactory.buildAll(\n                    this.folderContext,\n                    true,\n                    isRelease(this.testKind)\n                ),\n                this.testKind\n            );\n        } catch (buildExitCode) {\n            runState.recordOutput(undefined, buildOutput);\n            throw new Error(`Build failed with exit code ${buildExitCode}`);\n        }\n\n        const testRunTime = Date.now();\n        const subscriptions: vscode.Disposable[] = [];\n        const buildConfigs: Array<vscode.DebugConfiguration | undefined> = [];\n        const fifoPipePath = this.generateFifoPipePath(testRunTime);\n\n        await TemporaryFolder.withNamedTemporaryFiles([fifoPipePath], async () => {\n            if (this.testArgs.hasSwiftTestingTests) {\n                // macOS/Linux require us to create the named pipe before we use it.\n                // Windows just lets us communicate by specifying a pipe path without any ceremony.\n                if (process.platform !== \"win32\") {\n                    await execFile(\"mkfifo\", [fifoPipePath], undefined, this.folderContext);\n                }\n                // Create the swift-testing configuration JSON file, peparing any\n                // directories the configuration may require.\n                const attachmentFolder = await SwiftTestingConfigurationSetup.setupAttachmentFolder(\n                    this.folderContext,\n                    testRunTime\n                );\n                const swiftTestingArgs = SwiftTestingBuildAguments.build(\n                    fifoPipePath,\n                    attachmentFolder\n                );\n\n                const swiftTestBuildConfig = await TestingConfigurationFactory.swiftTestingConfig(\n                    this.folderContext,\n                    swiftTestingArgs,\n                    this.testKind,\n                    this.testArgs.swiftTestArgs,\n                    true\n                );\n\n                if (swiftTestBuildConfig !== null) {\n                    swiftTestBuildConfig.testType = TestLibrary.swiftTesting;\n                    swiftTestBuildConfig.preLaunchTask = null;\n\n                    // If we're testing in both frameworks we're going to start more than one debugging\n                    // session. If both build configurations have the same name LLDB will replace the\n                    // output of the first one in the Debug Console with the output of the second one.\n                    // If they each have a unique name the Debug Console gets a nice dropdown the user\n                    // can switch between to see the output for both sessions.\n                    swiftTestBuildConfig.name = `Swift Testing: ${swiftTestBuildConfig.name}`;\n\n                    // output test build configuration\n                    if (configuration.diagnostics) {\n                        const configJSON = JSON.stringify(swiftTestBuildConfig);\n                        this.workspaceContext.outputChannel.logDiagnostic(\n                            `swift-testing Debug Config: ${configJSON}`,\n                            this.folderContext.name\n                        );\n                    }\n\n                    buildConfigs.push(swiftTestBuildConfig);\n                }\n            }\n\n            // create launch config for testing\n            if (this.testArgs.hasXCTests) {\n                const xcTestBuildConfig = await TestingConfigurationFactory.xcTestConfig(\n                    this.folderContext,\n                    this.testKind,\n                    this.testArgs.xcTestArgs,\n                    true\n                );\n\n                if (xcTestBuildConfig !== null) {\n                    xcTestBuildConfig.testType = TestLibrary.xctest;\n                    xcTestBuildConfig.preLaunchTask = null;\n                    xcTestBuildConfig.name = `XCTest: ${xcTestBuildConfig.name}`;\n\n                    // output test build configuration\n                    if (configuration.diagnostics) {\n                        const configJSON = JSON.stringify(xcTestBuildConfig);\n                        this.workspaceContext.outputChannel.logDiagnostic(\n                            `XCTest Debug Config: ${configJSON}`,\n                            this.folderContext.name\n                        );\n                    }\n\n                    buildConfigs.push(xcTestBuildConfig);\n                }\n            }\n\n            const validBuildConfigs = buildConfigs.filter(\n                config => config !== null\n            ) as vscode.DebugConfiguration[];\n\n            const debugRuns = validBuildConfigs.map(config => {\n                return () =>\n                    new Promise<void>((resolve, reject) => {\n                        if (this.testRun.isCancellationRequested) {\n                            resolve();\n                            return;\n                        }\n\n                        const startSession = vscode.debug.onDidStartDebugSession(session => {\n                            const outputHandler = this.testOutputHandler(config.testType, runState);\n                            outputHandler(`> ${config.program} ${config.args.join(\" \")}\\n\\n\\r`);\n\n                            LoggingDebugAdapterTracker.setDebugSessionCallback(\n                                session,\n                                this.workspaceContext.outputChannel,\n                                output => {\n                                    outputHandler(output);\n                                }\n                            );\n\n                            // add cancellation\n                            const cancellation = this.testRun.token.onCancellationRequested(() => {\n                                this.workspaceContext.outputChannel.logDiagnostic(\n                                    \"Test Debugging Cancelled\",\n                                    this.folderContext.name\n                                );\n                                void vscode.debug.stopDebugging(session).then(() => resolve());\n                            });\n                            subscriptions.push(cancellation);\n                        });\n                        subscriptions.push(startSession);\n\n                        const terminateSession = vscode.debug.onDidTerminateDebugSession(e => {\n                            if (e.name !== config.name) {\n                                return;\n                            }\n                            this.workspaceContext.outputChannel.logDiagnostic(\n                                \"Stop Test Debugging\",\n                                this.folderContext.name\n                            );\n                            // dispose terminate debug handler\n                            subscriptions.forEach(sub => sub.dispose());\n\n                            void vscode.commands\n                                .executeCommand(\"workbench.view.extension.test\")\n                                .then(() => resolve());\n                        });\n                        subscriptions.push(terminateSession);\n\n                        vscode.debug\n                            .startDebugging(this.folderContext.workspaceFolder, config)\n                            .then(\n                                async started => {\n                                    if (started) {\n                                        if (config.testType === TestLibrary.swiftTesting) {\n                                            // Watch the pipe for JSONL output and parse the events into test explorer updates.\n                                            // The await simply waits for the watching to be configured.\n                                            await this.swiftTestOutputParser.watch(\n                                                fifoPipePath,\n                                                runState\n                                            );\n                                        } else if (config.testType === TestLibrary.xctest) {\n                                            this.testRun.testRunStarted();\n                                        }\n\n                                        this.workspaceContext.outputChannel.logDiagnostic(\n                                            \"Start Test Debugging\",\n                                            this.folderContext.name\n                                        );\n                                    } else {\n                                        subscriptions.forEach(sub => sub.dispose());\n                                        reject(\"Debugger not started\");\n                                    }\n                                },\n                                reason => {\n                                    subscriptions.forEach(sub => sub.dispose());\n                                    reject(reason);\n                                }\n                            );\n                    });\n            });\n\n            // Run each debugging session sequentially\n            await debugRuns.reduce((p, fn) => p.then(() => fn()), Promise.resolve());\n\n            // Clean up any leftover resources\n            await SwiftTestingConfigurationSetup.cleanupAttachmentFolder(\n                this.folderContext,\n                testRunTime,\n                this.workspaceContext.outputChannel\n            );\n        });\n    }\n\n    /** Returns a callback that handles a chunk of stdout output from a test run. */\n    private testOutputHandler(\n        testLibrary: TestLibrary,\n        runState: TestRunnerTestRunState\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ): (chunk: any) => void {\n        let preambleComplete = false;\n        switch (testLibrary) {\n            case TestLibrary.swiftTesting:\n                return chunk => {\n                    // Capture all the output from the build process up until the test run starts.\n                    // From there the SwiftTestingOutputParser reconstructs the test output from the JSON events\n                    // emitted by the swift-testing binary during the run. This allows individual messages to be\n                    // associated with their respective tests while still producing a complete test run log.\n                    if (chunk.indexOf(\"Test run started.\") !== -1) {\n                        preambleComplete = true;\n                    }\n                    if (!preambleComplete) {\n                        this.testRun.appendOutput(chunk.toString().replace(/\\n/g, \"\\r\\n\"));\n                    } else {\n                        this.swiftTestOutputParser.parseStdout(chunk.toString(), runState);\n                    }\n                };\n            case TestLibrary.xctest:\n                return chunk => this.xcTestOutputParser.parseResult(chunk.toString(), runState);\n        }\n    }\n\n    /** Returns a `stream.Writable` that handles a chunk of stdout output from a test run. */\n    private testOutputWritable(\n        testLibrary: TestLibrary,\n        runState: TestRunnerTestRunState\n    ): stream.Writable {\n        const handler = this.testOutputHandler(testLibrary, runState);\n        return new stream.Writable({\n            write: (chunk, _encoding, next) => {\n                handler(chunk);\n                next();\n            },\n        });\n    }\n\n    /** Get TestItem finder for current platform */\n    get testItemFinder(): TestItemFinder {\n        if (process.platform === \"darwin\") {\n            return new DarwinTestItemFinder(this.testArgs.testItems);\n        } else {\n            return new NonDarwinTestItemFinder(this.testArgs.testItems, this.folderContext);\n        }\n    }\n\n    private generateFifoPipePath(testRunDateNow: number): string {\n        return process.platform === \"win32\"\n            ? `\\\\\\\\.\\\\pipe\\\\vscodemkfifo-${testRunDateNow}`\n            : path.join(os.tmpdir(), `vscodemkfifo-${testRunDateNow}`);\n    }\n}\n\n/** Interface defining how to find test items given a test id from XCTest output */\ninterface TestItemFinder {\n    getIndex(id: string, filename?: string): number;\n    testItems: vscode.TestItem[];\n}\n\n/** Defines how to find test items given a test id from XCTest output on Darwin platforms */\nclass DarwinTestItemFinder implements TestItemFinder {\n    constructor(public testItems: vscode.TestItem[]) {}\n\n    getIndex(id: string): number {\n        return this.testItems.findIndex(item => item.id === id);\n    }\n}\n\n/** Defines how to find test items given a test id from XCTest output on non-Darwin platforms */\nclass NonDarwinTestItemFinder implements TestItemFinder {\n    constructor(\n        public testItems: vscode.TestItem[],\n        public folderContext: FolderContext\n    ) {}\n\n    /**\n     * Get test item index from id for non Darwin platforms. It is a little harder to\n     * be certain we have the correct test item on non Darwin platforms as the target\n     * name is not included in the id\n     */\n    getIndex(id: string, filename?: string): number {\n        let testIndex = -1;\n        if (filename) {\n            testIndex = this.testItems.findIndex(item =>\n                this.isTestWithFilenameInTarget(id, filename, item)\n            );\n        }\n        if (testIndex === -1) {\n            testIndex = this.testItems.findIndex(item => item.id.endsWith(id));\n        }\n        return testIndex;\n    }\n\n    /**\n     * Linux test output does not include the target name. So I have to work out which target\n     * the test is in via the test name and if it failed the filename from the error. In theory\n     * if a test fails the filename for where it failed should indicate which target it is in.\n     *\n     * @param testName Test name\n     * @param filename File name of where test failed\n     * @param item TestItem\n     * @returns Is it this TestItem\n     */\n    private isTestWithFilenameInTarget(\n        testName: string,\n        filename: string,\n        item: vscode.TestItem\n    ): boolean {\n        if (!item.id.endsWith(testName)) {\n            return false;\n        }\n        // get target test item\n        const targetTestItem = item.parent?.parent;\n        if (!targetTestItem) {\n            return false;\n        }\n        // get target from Package\n        const target = this.folderContext.swiftPackage.currentTargets.find(\n            item => targetTestItem.label === item.name\n        );\n        if (target) {\n            const fileErrorIsIn = filename;\n            const targetPath = path.join(this.folderContext.folder.fsPath, target.path);\n            const relativePath = path.relative(targetPath, fileErrorIsIn);\n            return target.sources.find(source => source === relativePath) !== undefined;\n        }\n        return false;\n    }\n}\n\n/**\n * Store state of current test run output parse\n */\nexport class TestRunnerTestRunState implements ITestRunState {\n    constructor(private testRun: TestRunProxy) {}\n\n    public currentTestItem?: vscode.TestItem;\n    public lastTestItem?: vscode.TestItem;\n    public excess?: string;\n    public failedTest?: {\n        testIndex: number;\n        message: string;\n        file: string;\n        lineNumber: number;\n        complete: boolean;\n    };\n    private startTimes: Map<number, number | undefined> = new Map();\n    private issues: Map<number, { isKnown: boolean; message: vscode.TestMessage }[]> = new Map();\n\n    getTestItemIndex(id: string, filename?: string): number {\n        return this.testRun.getTestIndex(id, filename);\n    }\n\n    // set test item to be started\n    started(index: number, startTime?: number) {\n        if (this.isUnknownTest(index)) {\n            return;\n        }\n        const testItem = this.testRun.testItems[index];\n        this.issues.delete(index);\n        this.testRun.started(testItem);\n        this.currentTestItem = testItem;\n        this.startTimes.set(index, startTime);\n    }\n\n    // set test item to have passed or failed, depending on if any issues were recorded\n    completed(index: number, timing: { duration: number } | { timestamp: number }) {\n        if (this.isUnknownTest(index)) {\n            return;\n        }\n        const test = this.testRun.testItems[index];\n        const startTime = this.startTimes.get(index);\n\n        let duration: number;\n        if (\"timestamp\" in timing) {\n            // Completion was specified in timestamp format but the test has no saved `started` timestamp.\n            // This is a bug in the code and can't be caused by a user.\n            if (startTime === undefined) {\n                throw Error(\n                    \"Timestamp was provided on test completion, but there was no startTime set when the test was started.\"\n                );\n            }\n            duration = (timing.timestamp - startTime) * 1000;\n        } else {\n            duration = timing.duration * 1000;\n        }\n\n        const isSuite = test.children.size > 0;\n        const issues = isSuite ? this.childrensIssues(test) : (this.issues.get(index) ?? []);\n        if (issues.length > 0) {\n            const allUnknownIssues = issues.filter(({ isKnown }) => !isKnown);\n            if (allUnknownIssues.length === 0) {\n                this.testRun.skipped(test);\n            } else if (isSuite) {\n                // Suites deliberately report no issues since the suite's children will,\n                // and we don't want to duplicate issues. This would make navigating via\n                // the \"prev/next issue\" buttons confusing.\n                this.testRun.failed(test, [], duration);\n            } else {\n                this.testRun.failed(\n                    test,\n                    allUnknownIssues.map(({ message }) => message),\n                    duration\n                );\n            }\n        } else {\n            this.testRun.passed(test, duration);\n        }\n\n        this.lastTestItem = this.currentTestItem;\n        this.currentTestItem = undefined;\n    }\n\n    // Gather the issues of test children into a flat collection.\n    private childrensIssues(test: vscode.TestItem): {\n        isKnown: boolean;\n        message: vscode.TestMessage;\n    }[] {\n        const index = this.getTestItemIndex(test.id);\n        return [\n            ...(this.issues.get(index) ?? []),\n            ...reduceTestItemChildren(\n                test.children,\n                (acc, test) => [\n                    ...acc,\n                    ...this.childrensIssues(test).map(issue => {\n                        issue.message.message = `${test.label} \\u{203A} ${issue.message.message}`;\n                        return {\n                            ...issue,\n                            message: issue.message,\n                        };\n                    }),\n                ],\n                [] as { isKnown: boolean; message: vscode.TestMessage }[]\n            ),\n        ];\n    }\n\n    recordIssue(\n        index: number,\n        message: string | vscode.MarkdownString,\n        isKnown: boolean = false,\n        location?: vscode.Location,\n        diff?: TestIssueDiff\n    ) {\n        if (this.isUnknownTest(index)) {\n            return;\n        }\n\n        const msg = new vscode.TestMessage(message);\n        if (diff) {\n            msg.expectedOutput = diff.expected;\n            msg.actualOutput = diff.actual;\n        }\n\n        msg.location = location;\n        const issueList = this.issues.get(index) ?? [];\n        issueList.push({\n            message: msg,\n            isKnown,\n        });\n        this.issues.set(index, issueList);\n    }\n\n    // set test item to have been skipped\n    skipped(index: number) {\n        if (this.isUnknownTest(index)) {\n            return;\n        }\n        this.testRun.skipped(this.testRun.testItems[index]);\n        this.lastTestItem = this.currentTestItem;\n        this.currentTestItem = undefined;\n    }\n\n    // For testing purposes we want to know if a run ran any tests we didn't expect.\n    isUnknownTest(index: number) {\n        if (index < 0 || index >= this.testRun.testItems.length) {\n            this.testRun.unknownTestRan();\n            return true;\n        }\n        return false;\n    }\n\n    // started suite\n    startedSuite() {\n        // Nothing to do here\n    }\n    // passed suite\n    passedSuite(name: string) {\n        // Regular runs don't provide the full suite name (Target.Suite)\n        // in the output, so reference the last passing/failing test item\n        // and derive the suite from that.\n\n        // However, when running a parallel test run the XUnit XML output\n        // provides the full suite name, and the `lastTestItem` set is not\n        // guarenteed to be in this suite due to the parallel nature of the run.\n\n        // If we can look the suite up by name then we're doing a parallel run\n        // and can mark it as passed, otherwise derive the suite from the last\n        // completed test item.\n        const suiteIndex = this.testRun.getTestIndex(name);\n        if (suiteIndex !== -1) {\n            this.testRun.passed(this.testRun.testItems[suiteIndex]);\n        } else {\n            const lastClassTestItem = this.lastTestItem?.parent;\n            if (lastClassTestItem && lastClassTestItem.id.endsWith(`.${name}`)) {\n                this.testRun.passed(lastClassTestItem);\n            }\n        }\n    }\n    // failed suite\n    failedSuite(name: string) {\n        // See comment in `passedSuite` for more context.\n        const suiteIndex = this.testRun.getTestIndex(name);\n        if (suiteIndex !== -1) {\n            this.testRun.failed(this.testRun.testItems[suiteIndex], []);\n        } else {\n            const lastClassTestItem = this.lastTestItem?.parent;\n            if (lastClassTestItem && lastClassTestItem.id.endsWith(`.${name}`)) {\n                this.testRun.failed(lastClassTestItem, []);\n            }\n        }\n    }\n\n    recordOutput(index: number | undefined, output: string): void {\n        if (index === undefined || this.isUnknownTest(index)) {\n            this.testRun.appendOutput(output);\n            return;\n        }\n\n        const testItem = this.testRun.testItems[index];\n        const { uri, range } = testItem;\n        const location = uri && range ? new vscode.Location(uri, range) : undefined;\n        this.testRun.appendOutputToTest(output, testItem, location);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { FolderContext } from \"../FolderContext\";\nimport { Product } from \"../SwiftPackage\";\nimport configuration, {\n    ShowBuildStatusOptions,\n    substituteVariablesInString,\n} from \"../configuration\";\nimport { swiftRuntimeEnv } from \"../utilities/utilities\";\nimport { Version } from \"../utilities/version\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\nimport { SwiftExecution } from \"../tasks/SwiftExecution\";\nimport { resolveTaskCwd } from \"../utilities/tasks\";\nimport { BuildConfigurationFactory } from \"../debugger/buildConfig\";\n\n/**\n * References:\n *\n * - General information on tasks:\n *   https://code.visualstudio.com/docs/editor/tasks\n * - Contributing task definitions:\n *   https://code.visualstudio.com/api/references/contribution-points#contributes.taskDefinitions\n * - Implementing task providers:\n *   https://code.visualstudio.com/api/extension-guides/task-provider\n */\n\n// Interface class for defining task configuration\ninterface TaskConfig {\n    cwd: vscode.Uri;\n    scope: vscode.TaskScope | vscode.WorkspaceFolder;\n    group?: vscode.TaskGroup;\n    presentationOptions?: vscode.TaskPresentationOptions;\n    prefix?: string;\n    disableTaskQueue?: boolean;\n    dontTriggerTestDiscovery?: boolean;\n    showBuildStatus?: ShowBuildStatusOptions;\n}\n\ninterface TaskPlatformSpecificConfig {\n    args?: string[];\n    cwd?: string;\n    env?: { [name: string]: unknown };\n}\n\nexport interface SwiftTask extends vscode.Task {\n    execution: SwiftExecution;\n}\n\n/** arguments for generating debug builds */\nexport function platformDebugBuildOptions(toolchain: SwiftToolchain): string[] {\n    if (process.platform === \"win32\") {\n        if (toolchain.swiftVersion.isGreaterThanOrEqual(new Version(5, 9, 0))) {\n            return [\"-Xlinker\", \"-debug:dwarf\"];\n        } else {\n            return [\"-Xswiftc\", \"-g\", \"-Xswiftc\", \"-use-ld=lld\", \"-Xlinker\", \"-debug:dwarf\"];\n        }\n    }\n    return [];\n}\n\n/** arguments for setting diagnostics style */\nexport function diagnosticsStyleOptions(): string[] {\n    if (configuration.diagnosticsStyle !== \"default\") {\n        return [\"-Xswiftc\", `-diagnostic-style=${configuration.diagnosticsStyle}`];\n    }\n    return [];\n}\n\n/** Return swift build options */\nexport function buildOptions(toolchain: SwiftToolchain, debug = true): string[] {\n    const args: string[] = [];\n    if (debug) {\n        args.push(...platformDebugBuildOptions(toolchain));\n    }\n    args.push(...diagnosticsStyleOptions());\n    const sanitizer = toolchain.sanitizer(configuration.sanitizer);\n    if (sanitizer) {\n        args.push(...sanitizer.buildFlags);\n    }\n    args.push(...configuration.buildArguments);\n    return args;\n}\n\n/**\n * Get task reveal kind based off configuration\n */\nfunction getBuildRevealOption(): vscode.TaskRevealKind {\n    return configuration.actionAfterBuildError === \"Focus Terminal\"\n        ? vscode.TaskRevealKind.Silent\n        : vscode.TaskRevealKind.Never;\n}\n\nconst buildAllTaskCache = (() => {\n    const cache = new Map<string, SwiftTask>();\n    const key = (name: string, folderContext: FolderContext, task: SwiftTask) => {\n        return `${name}:${folderContext.folder}:${buildOptions(folderContext.toolchain).join(\",\")}:${task.definition.args.join(\",\")}`;\n    };\n\n    return {\n        get(name: string, folderContext: FolderContext, task: SwiftTask): SwiftTask {\n            const cached = cache.get(key(name, folderContext, task));\n            if (!cached) {\n                this.set(name, folderContext, task);\n            }\n            return cached ?? task;\n        },\n        set(name: string, folderContext: FolderContext, task: SwiftTask) {\n            cache.set(key(name, folderContext, task), task);\n        },\n        reset() {\n            cache.clear();\n        },\n    };\n})();\n\n/**\n * Should only be used for tests purposes\n */\nexport function resetBuildAllTaskCache() {\n    // Don't want to expose the whole cache, just the reset\n    buildAllTaskCache.reset();\n}\n\nfunction buildAllTaskName(folderContext: FolderContext, release: boolean): string {\n    let buildTaskName = release\n        ? `${SwiftTaskProvider.buildAllName} - Release`\n        : SwiftTaskProvider.buildAllName;\n    if (folderContext.relativePath.length > 0) {\n        buildTaskName += ` (${folderContext.relativePath})`;\n    }\n    return buildTaskName;\n}\n\n/**\n * Creates a {@link vscode.Task Task} to build all targets in this package.\n */\nexport async function createBuildAllTask(\n    folderContext: FolderContext,\n    release: boolean = false\n): Promise<SwiftTask> {\n    const args = (await BuildConfigurationFactory.buildAll(folderContext, false, release)).args;\n    const buildTaskName = buildAllTaskName(folderContext, release);\n    const task = createSwiftTask(\n        args,\n        buildTaskName,\n        {\n            group: vscode.TaskGroup.Build,\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            presentationOptions: {\n                reveal: getBuildRevealOption(),\n            },\n            disableTaskQueue: true,\n        },\n        folderContext.toolchain\n    );\n\n    // Ensures there is one Build All task per folder context, since this can be called multiple\n    // times and we want the same instance each time. Otherwise, VS Code may try and execute\n    // one instance while our extension code tries to listen to events on an instance created earlier/later.\n    return buildAllTaskCache.get(buildTaskName, folderContext, task);\n}\n\n/**\n * Return build all task for a folder\n * @param folderContext Folder to get Build All Task for\n * @returns Build All Task\n */\nexport async function getBuildAllTask(\n    folderContext: FolderContext,\n    release: boolean = false\n): Promise<vscode.Task> {\n    const buildTaskName = buildAllTaskName(folderContext, release);\n    const folderWorkingDir = folderContext.workspaceFolder.uri.fsPath;\n    // search for build all task in task.json first, that are valid for folder\n    const tasks = await vscode.tasks.fetchTasks();\n    const workspaceTasks = tasks.filter(task => {\n        if (task.source !== \"Workspace\" || task.scope !== folderContext.workspaceFolder) {\n            return false;\n        }\n        const swiftExecutionOptions = (task.execution as SwiftExecution).options;\n        let cwd = swiftExecutionOptions?.cwd;\n        if (cwd === \"${workspaceFolder}\" || cwd === undefined) {\n            cwd = folderWorkingDir;\n        }\n        return cwd === folderContext.folder.fsPath;\n    });\n\n    // find default build task\n    let task = workspaceTasks.find(\n        task => task.group?.id === vscode.TaskGroup.Build.id && task.group?.isDefault === true\n    );\n    if (task) {\n        return task;\n    }\n    // find task with name \"swift: Build All\"\n    task = workspaceTasks.find(task => task.name === `swift: ${buildTaskName}`);\n    if (task) {\n        return task;\n    }\n    // search for generated tasks\n    const swiftTasks = await vscode.tasks.fetchTasks({ type: \"swift\" });\n    task = swiftTasks.find(\n        task =>\n            task.name === buildTaskName &&\n            (task.execution as SwiftExecution).options?.cwd === folderContext.folder.fsPath &&\n            task.source === \"swift\"\n    );\n    if (!task) {\n        task = await createBuildAllTask(folderContext, release);\n    }\n\n    return task;\n}\n\n/**\n * Creates a {@link vscode.Task Task} to run an executable target.\n */\nfunction createBuildTasks(product: Product, folderContext: FolderContext): vscode.Task[] {\n    const toolchain = folderContext.toolchain;\n    let buildTaskNameSuffix = \"\";\n    if (folderContext.relativePath.length > 0) {\n        buildTaskNameSuffix = ` (${folderContext.relativePath})`;\n    }\n\n    const buildDebugName = `Build Debug ${product.name}${buildTaskNameSuffix}`;\n    const buildDebugTask = createSwiftTask(\n        [\"build\", \"--product\", product.name, ...buildOptions(toolchain)],\n        buildDebugName,\n        {\n            group: vscode.TaskGroup.Build,\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            presentationOptions: {\n                reveal: getBuildRevealOption(),\n            },\n            disableTaskQueue: true,\n            dontTriggerTestDiscovery: true,\n        },\n        folderContext.toolchain\n    );\n    const buildDebug = buildAllTaskCache.get(buildDebugName, folderContext, buildDebugTask);\n\n    const buildReleaseName = `Build Release ${product.name}${buildTaskNameSuffix}`;\n    const buildReleaseTask = createSwiftTask(\n        [\"build\", \"-c\", \"release\", \"--product\", product.name, ...buildOptions(toolchain, false)],\n        `Build Release ${product.name}${buildTaskNameSuffix}`,\n        {\n            group: vscode.TaskGroup.Build,\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            presentationOptions: {\n                reveal: getBuildRevealOption(),\n            },\n            disableTaskQueue: true,\n            dontTriggerTestDiscovery: true,\n        },\n        folderContext.toolchain\n    );\n    const buildRelease = buildAllTaskCache.get(buildReleaseName, folderContext, buildReleaseTask);\n    return [buildDebug, buildRelease];\n}\n\n/**\n * Helper function to create a {@link vscode.Task Task} with the given parameters.\n */\nexport function createSwiftTask(\n    args: string[],\n    name: string,\n    config: TaskConfig,\n    toolchain: SwiftToolchain,\n    cmdEnv: { [key: string]: string } = {},\n    options: { readOnlyTerminal: boolean } = { readOnlyTerminal: false }\n): SwiftTask {\n    const swift = toolchain.getToolchainExecutable(\"swift\");\n    args = toolchain.buildFlags.withAdditionalFlags(args);\n\n    // Add relative path current working directory\n    const cwd = config.cwd.fsPath;\n    const fullCwd = config.cwd.fsPath;\n\n    /* Currently there seems to be a bug in vscode where kicking off two tasks\n     with the same definition but different scopes messes with the task\n     completion code. When that is resolved we will go back to the code below\n     where we only store the relative cwd instead of the full cwd\n\n    const scopeWorkspaceFolder = config.scope as vscode.WorkspaceFolder;\n    if (scopeWorkspaceFolder.uri.fsPath) {\n        cwd = path.relative(scopeWorkspaceFolder.uri.fsPath, config.cwd.fsPath);\n    } else {\n        cwd = config.cwd.fsPath;\n    }*/\n    const env = { ...configuration.swiftEnvironmentVariables, ...swiftRuntimeEnv(), ...cmdEnv };\n    const presentation = config?.presentationOptions ?? {};\n    const task = new vscode.Task(\n        {\n            type: \"swift\",\n            args: args,\n            env: env,\n            cwd: cwd,\n            ...(config.showBuildStatus !== undefined\n                ? { showBuildStatus: config.showBuildStatus }\n                : {}),\n            ...(config.disableTaskQueue !== undefined\n                ? { disableTaskQueue: config.disableTaskQueue }\n                : {}),\n            ...(config.dontTriggerTestDiscovery !== undefined\n                ? { dontTriggerTestDiscovery: config.dontTriggerTestDiscovery }\n                : {}),\n        },\n        config?.scope ?? vscode.TaskScope.Workspace,\n        name,\n        \"swift\",\n        new SwiftExecution(swift, args, {\n            cwd: fullCwd,\n            env: env,\n            presentation,\n            readOnlyTerminal: options.readOnlyTerminal,\n        })\n    );\n    // This doesn't include any quotes added by VS Code.\n    // See also: https://github.com/microsoft/vscode/issues/137895\n\n    let prefix: string;\n    if (config?.prefix) {\n        prefix = `(${config.prefix}) `;\n    } else {\n        prefix = \"\";\n    }\n    task.detail = `${prefix}swift ${args.join(\" \")}`;\n    task.group = config?.group;\n    task.presentationOptions = presentation;\n    return task as SwiftTask;\n}\n\n/**\n * A {@link vscode.TaskProvider TaskProvider} for tasks that match the definition\n * in **package.json**: `{ type: 'swift'; args: string[], cwd: string? }`.\n *\n * See {@link SwiftTaskProvider.provideTasks provideTasks} for a list of provided tasks.\n */\nexport class SwiftTaskProvider implements vscode.TaskProvider {\n    static buildAllName = \"Build All\";\n    static cleanBuildName = \"Clean Build\";\n    static resolvePackageName = \"Resolve Package Dependencies\";\n    static updatePackageName = \"Update Package Dependencies\";\n\n    constructor(private workspaceContext: WorkspaceContext) {}\n\n    /**\n     * Provides tasks to run the following commands:\n     *\n     * - `swift build`\n     * - `swift package clean`\n     * - `swift package resolve`\n     * - `swift package update`\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async provideTasks(token: vscode.CancellationToken): Promise<vscode.Task[]> {\n        if (this.workspaceContext.folders.length === 0) {\n            return [];\n        }\n        const tasks = [];\n\n        for (const folderContext of this.workspaceContext.folders) {\n            if (!(await folderContext.swiftPackage.foundPackage)) {\n                continue;\n            }\n            const activeOperation = folderContext.taskQueue.activeOperation;\n            // if there is an active task running on the folder task queue (eg resolve or update)\n            // then don't add build tasks for this folder instead create a dummy task indicating why\n            // the build tasks are unavailable\n            //\n            // Ignore an active build task, it could be the build task that has just been\n            // initiated.\n            //\n            // This is only required in Swift toolchains before v6 as SwiftPM in newer toolchains\n            // will block multiple processes accessing the .build folder at the same time\n            if (\n                folderContext.toolchain.swiftVersion.isLessThan(new Version(6, 0, 0)) &&\n                activeOperation &&\n                !activeOperation.operation.isBuildOperation\n            ) {\n                let buildTaskName = \"Build tasks disabled\";\n                if (folderContext.relativePath.length > 0) {\n                    buildTaskName += ` (${folderContext.relativePath})`;\n                }\n                const task = new vscode.Task(\n                    {\n                        type: \"swift\",\n                        args: [],\n                    },\n                    folderContext.workspaceFolder,\n                    buildTaskName,\n                    \"swift\",\n                    new vscode.CustomExecution(() => {\n                        throw Error(\"Task disabled.\");\n                    })\n                );\n                task.group = vscode.TaskGroup.Build;\n                task.detail = `While ${activeOperation.operation.name} is running.`;\n                task.presentationOptions = { reveal: vscode.TaskRevealKind.Never, echo: false };\n                tasks.push(task);\n                continue;\n            }\n\n            // Create debug Build All task.\n            tasks.push(await createBuildAllTask(folderContext, false));\n\n            const executables = await folderContext.swiftPackage.executableProducts;\n            for (const executable of executables) {\n                tasks.push(...createBuildTasks(executable, folderContext));\n            }\n        }\n        return tasks;\n    }\n\n    /**\n     * Resolves a {@link vscode.Task Task} specified in **tasks.json**.\n     *\n     * Other than its definition, this `Task` may be incomplete,\n     * so this method should fill in the blanks.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    resolveTask(task: vscode.Task, token: vscode.CancellationToken): vscode.Task {\n        const currentFolder =\n            this.workspaceContext.currentFolder ?? this.workspaceContext.folders[0];\n        if (!currentFolder) {\n            return task;\n        }\n        // We need to create a new Task object here.\n        // Reusing the task parameter doesn't seem to work.\n        const toolchain = currentFolder.toolchain;\n        const swift = toolchain.getToolchainExecutable(\"swift\");\n        // platform specific\n        let platform: TaskPlatformSpecificConfig | undefined;\n        if (process.platform === \"win32\") {\n            platform = task.definition.windows;\n        } else if (process.platform === \"linux\") {\n            platform = task.definition.linux;\n        } else if (process.platform === \"darwin\") {\n            platform = task.definition.macos;\n        }\n        // get args and cwd values from either platform specific block or base\n        const args = (platform?.args ?? task.definition.args ?? []).map(\n            substituteVariablesInString\n        );\n        const env = platform?.env ?? task.definition.env;\n        const fullCwd = resolveTaskCwd(task, platform?.cwd ?? task.definition.cwd);\n        const fullEnv = {\n            ...configuration.swiftEnvironmentVariables,\n            ...swiftRuntimeEnv(),\n            ...env,\n        };\n\n        const presentation = task.definition.presentation ?? task.presentationOptions ?? {};\n        const newTask = new vscode.Task(\n            task.definition,\n            task.scope ?? vscode.TaskScope.Workspace,\n            task.name ?? \"Swift Custom Task\",\n            \"swift\",\n            new SwiftExecution(swift, args, {\n                cwd: fullCwd,\n                env: fullEnv,\n                presentation,\n            }),\n            task.problemMatchers\n        );\n        newTask.detail = task.detail ?? `swift ${args.join(\" \")}`;\n        newTask.group = task.group;\n        newTask.presentationOptions = presentation;\n\n        return newTask;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { ReadOnlySwiftProcess, SwiftProcess, SwiftPtyProcess } from \"./SwiftProcess\";\nimport { SwiftPseudoterminal } from \"./SwiftPseudoterminal\";\n\nexport interface SwiftExecutionOptions extends vscode.ProcessExecutionOptions {\n    presentation?: vscode.TaskPresentationOptions;\n    readOnlyTerminal?: boolean;\n}\n\n/**\n * A custom task execution to use for `swift` tasks. This gives us more\n * control over how the task and `swift` process is executed and allows\n * us to capture and process the output of the `swift` process\n */\nexport class SwiftExecution extends vscode.CustomExecution implements vscode.Disposable {\n    private readonly writeEmitter: vscode.EventEmitter<string> = new vscode.EventEmitter<string>();\n    private readonly closeEmitter: vscode.EventEmitter<number | void> = new vscode.EventEmitter<\n        number | void\n    >();\n    private disposables: vscode.Disposable[] = [];\n\n    constructor(\n        public readonly command: string,\n        public readonly args: string[],\n        public readonly options: SwiftExecutionOptions,\n        private swiftProcess: SwiftProcess | undefined = undefined\n    ) {\n        super(async () => {\n            const createSwiftProcess = () => {\n                if (!swiftProcess) {\n                    this.swiftProcess = options.readOnlyTerminal\n                        ? new ReadOnlySwiftProcess(command, args, options)\n                        : new SwiftPtyProcess(command, args, options);\n                    this.listen(this.swiftProcess);\n                }\n                return this.swiftProcess!;\n            };\n            return new SwiftPseudoterminal(createSwiftProcess, options.presentation || {});\n        });\n        if (this.swiftProcess) {\n            this.listen(this.swiftProcess);\n        }\n    }\n\n    private listen(swiftProcess: SwiftProcess) {\n        this.dispose();\n        this.disposables.push(\n            swiftProcess.onDidWrite(e => this.writeEmitter.fire(e)),\n            swiftProcess.onDidClose(e => this.closeEmitter.fire(e))\n        );\n    }\n\n    dispose() {\n        this.disposables.forEach(d => d.dispose());\n        this.disposables = [];\n    }\n\n    /**\n     * Bubbles up the {@link SwiftProcess.onDidWrite onDidWrite} event\n     * from the {@link SwiftProcess}\n     *\n     * @see {@link SwiftProcess.onDidWrite}\n     */\n    onDidWrite: vscode.Event<string> = this.writeEmitter.event;\n\n    /**\n     * Bubbles up the {@link SwiftProcess.onDidClose onDidClose} event\n     * from the {@link SwiftProcess}\n     *\n     * @see {@link SwiftProcess.onDidClose}\n     */\n    onDidClose: vscode.Event<number | void> = this.closeEmitter.event;\n\n    /**\n     * Terminate the underlying executable.\n     */\n    terminate(signal?: NodeJS.Signals) {\n        this.swiftProcess?.terminate(signal);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport type * as nodePty from \"node-pty\";\nimport * as child_process from \"child_process\";\nimport * as vscode from \"vscode\";\n\nimport { requireNativeModule } from \"../utilities/native\";\nconst { spawn } = requireNativeModule<typeof nodePty>(\"node-pty\");\n\nexport interface SwiftProcess extends vscode.Disposable {\n    /**\n     * Resolved path to the `swift` executable\n     */\n    command: string;\n    /**\n     * `swift` arguments\n     */\n    args: string[];\n    /**\n     * Spawn the `swift` {@link command} with the specified {@link args}\n     */\n    spawn(): void;\n    /**\n     * Listen for `swift` pty process to get spawned\n     */\n    onDidSpawn: vscode.Event<void>;\n    /**\n     * Listen for output from the `swift` process. The `string` output\n     * may contain ansii characters which you're event listener can\n     * strip if desired.\n     * @see `strip-ansi` module\n     */\n    onDidWrite: vscode.Event<string>;\n    /**\n     * Listen for `swift` pty process to fail to spawn\n     */\n    onDidThrowError: vscode.Event<Error>;\n    /**\n     * Listen for the `swift` process to close. The event listener will\n     * be called with a `number` exit code if the process exited with an\n     * exit code. No exit code will be provided if the `swift` process\n     * exited from receiving a signal or if the process abnormally terminated.\n     */\n    onDidClose: vscode.Event<number | void>;\n    /**\n     * Write a VT sequence as a string to the pty process\n     * to use as stdin\n     *\n     * @param s string to write to pty\n     */\n    handleInput(s: string): void;\n    /**\n     * Forcefully terminate the pty process. Optionally can provide a signal.\n     */\n    terminate(signal?: NodeJS.Signals): void;\n    /**\n     * Resize the pty to match the new {@link vscode.Pseudoterminal} dimensions\n     *\n     * @param dimensions\n     */\n    setDimensions(dimensions: vscode.TerminalDimensions): void;\n}\n\nclass CloseHandler implements vscode.Disposable {\n    private readonly closeEmitter: vscode.EventEmitter<number | void> = new vscode.EventEmitter<\n        number | void\n    >();\n    private exitCode: number | void | undefined;\n    private closeTimeout: NodeJS.Timeout | undefined;\n\n    event = this.closeEmitter.event;\n\n    handle(exitCode: number | void) {\n        this.exitCode = exitCode;\n        this.queueClose();\n    }\n\n    reset() {\n        if (this.closeTimeout) {\n            clearTimeout(this.closeTimeout);\n            this.queueClose();\n        }\n    }\n\n    dispose() {\n        this.closeEmitter.dispose();\n    }\n\n    private queueClose() {\n        this.closeTimeout = setTimeout(() => {\n            this.closeEmitter.fire(this.exitCode);\n        }, 250);\n    }\n}\n\n/**\n * Wraps a {@link nodePty node-pty} instance to handle spawning a `swift` process\n * and feeds the process state and output through event emitters.\n */\nexport class SwiftPtyProcess implements SwiftProcess {\n    private readonly spawnEmitter: vscode.EventEmitter<void> = new vscode.EventEmitter<void>();\n    private readonly writeEmitter: vscode.EventEmitter<string> = new vscode.EventEmitter<string>();\n    private readonly errorEmitter: vscode.EventEmitter<Error> = new vscode.EventEmitter<Error>();\n    private readonly closeHandler: CloseHandler = new CloseHandler();\n    private disposables: vscode.Disposable[] = [];\n\n    private spawnedProcess?: nodePty.IPty;\n\n    constructor(\n        public readonly command: string,\n        public readonly args: string[],\n        private options: vscode.ProcessExecutionOptions = {}\n    ) {\n        this.disposables.push(\n            this.spawnEmitter,\n            this.writeEmitter,\n            this.errorEmitter,\n            this.closeHandler\n        );\n    }\n\n    spawn(): void {\n        try {\n            const isWindows = process.platform === \"win32\";\n            // The pty process hangs on Windows when debugging the extension if we use conpty\n            // See https://github.com/microsoft/node-pty/issues/640\n            const useConpty = isWindows && process.env[\"VSCODE_DEBUG\"] === \"1\" ? false : true;\n            this.spawnedProcess = spawn(this.command, this.args, {\n                cwd: this.options.cwd,\n                env: { ...process.env, ...this.options.env },\n                useConpty,\n                // https://github.com/swiftlang/vscode-swift/issues/1074\n                // Causing weird truncation issues\n                cols: isWindows ? 4096 : undefined,\n            });\n            this.spawnEmitter.fire();\n            this.spawnedProcess.onData(data => {\n                this.writeEmitter.fire(data);\n                this.closeHandler.reset();\n            });\n            this.spawnedProcess.onExit(event => {\n                if (event.signal) {\n                    this.closeHandler.handle(event.signal);\n                } else if (typeof event.exitCode === \"number\") {\n                    this.closeHandler.handle(event.exitCode);\n                } else {\n                    this.closeHandler.handle();\n                }\n            });\n            this.disposables.push(\n                this.onDidClose(() => {\n                    this.dispose();\n                })\n            );\n        } catch (error) {\n            this.errorEmitter.fire(new Error(`${error}`));\n            this.closeHandler.handle();\n        }\n    }\n\n    handleInput(s: string): void {\n        this.spawnedProcess?.write(s);\n    }\n\n    terminate(signal?: NodeJS.Signals): void {\n        if (!this.spawnedProcess) {\n            return;\n        }\n        this.spawnedProcess.kill(signal);\n    }\n\n    setDimensions(dimensions: vscode.TerminalDimensions): void {\n        // https://github.com/swiftlang/vscode-swift/issues/1074\n        // Causing weird truncation issues\n        if (process.platform === \"win32\") {\n            return;\n        }\n        this.spawnedProcess?.resize(dimensions.columns, dimensions.rows);\n    }\n\n    dispose() {\n        this.disposables.forEach(d => d.dispose());\n    }\n\n    onDidSpawn: vscode.Event<void> = this.spawnEmitter.event;\n\n    onDidWrite: vscode.Event<string> = this.writeEmitter.event;\n\n    onDidThrowError: vscode.Event<Error> = this.errorEmitter.event;\n\n    onDidClose: vscode.Event<number | void> = this.closeHandler.event;\n}\n\n/**\n * A {@link SwiftProcess} that spawns a child process and does not bind to stdio.\n *\n * Use this for Swift tasks that do not need to accept input, as its lighter weight and\n * less error prone than using a spawned node-pty process.\n *\n * Specifically node-pty on Linux suffers from a long standing issue where the last chunk\n * of output before a program exits is sometimes dropped, especially if that program produces\n * a lot of output immediately before exiting. See https://github.com/microsoft/node-pty/issues/72\n */\nexport class ReadOnlySwiftProcess implements SwiftProcess {\n    private readonly spawnEmitter: vscode.EventEmitter<void> = new vscode.EventEmitter<void>();\n    private readonly writeEmitter: vscode.EventEmitter<string> = new vscode.EventEmitter<string>();\n    private readonly errorEmitter: vscode.EventEmitter<Error> = new vscode.EventEmitter<Error>();\n    private readonly closeHandler: CloseHandler = new CloseHandler();\n    private disposables: vscode.Disposable[] = [];\n\n    private spawnedProcess: child_process.ChildProcessWithoutNullStreams | undefined;\n\n    constructor(\n        public readonly command: string,\n        public readonly args: string[],\n        private readonly options: vscode.ProcessExecutionOptions = {}\n    ) {\n        this.disposables.push(\n            this.spawnEmitter,\n            this.writeEmitter,\n            this.errorEmitter,\n            this.closeHandler\n        );\n    }\n\n    spawn(): void {\n        try {\n            this.spawnedProcess = child_process.spawn(this.command, this.args, {\n                cwd: this.options.cwd,\n                env: { ...process.env, ...this.options.env },\n            });\n            this.spawnEmitter.fire();\n\n            this.spawnedProcess.stdout.on(\"data\", data => {\n                this.writeEmitter.fire(data.toString());\n                this.closeHandler.reset();\n            });\n\n            this.spawnedProcess.stderr.on(\"data\", data => {\n                this.writeEmitter.fire(data.toString());\n                this.closeHandler.reset();\n            });\n\n            this.spawnedProcess.on(\"error\", error => {\n                this.errorEmitter.fire(new Error(`${error}`));\n                this.closeHandler.handle();\n            });\n\n            this.spawnedProcess.once(\"exit\", code => {\n                this.closeHandler.handle(code ?? undefined);\n            });\n\n            this.disposables.push(\n                this.onDidClose(() => {\n                    this.dispose();\n                })\n            );\n        } catch (error) {\n            this.errorEmitter.fire(new Error(`${error}`));\n            this.closeHandler.handle();\n        }\n    }\n\n    handleInput(_s: string): void {\n        // Do nothing\n    }\n\n    terminate(signal?: NodeJS.Signals): void {\n        if (!this.spawnedProcess) {\n            return;\n        }\n        this.spawnedProcess.kill(signal);\n        this.dispose();\n    }\n\n    setDimensions(_dimensions: vscode.TerminalDimensions): void {\n        // Do nothing\n    }\n\n    dispose(): void {\n        this.spawnedProcess?.stdout.removeAllListeners();\n        this.spawnedProcess?.stderr.removeAllListeners();\n        this.spawnedProcess?.removeAllListeners();\n        this.disposables.forEach(d => d.dispose());\n    }\n\n    onDidSpawn: vscode.Event<void> = this.spawnEmitter.event;\n\n    onDidWrite: vscode.Event<string> = this.writeEmitter.event;\n\n    onDidThrowError: vscode.Event<Error> = this.errorEmitter.event;\n\n    onDidClose: vscode.Event<number | void> = this.closeHandler.event;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n/* eslint-disable @typescript-eslint/no-require-imports */\nimport * as vscode from \"vscode\";\n\n// To not electron-rebuild for every platform and arch, we want to\n// use the asar bundled native module. Taking inspiration from\n// https://github.com/microsoft/node-pty/issues/582\nexport function requireNativeModule<T>(id: string): T {\n    if (vscode.env.remoteName) {\n        return require(`${vscode.env.appRoot}/node_modules/${id}`);\n    }\n    // https://github.com/microsoft/vscode/commit/a162831c17ad0d675f1f0d5c3f374fd1514f04b5\n    // VSCode has moved node-pty out of asar bundle\n    try {\n        return require(`${vscode.env.appRoot}/node_modules.asar/${id}`);\n    } catch {\n        return require(`${vscode.env.appRoot}/node_modules/${id}`);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { SwiftProcess } from \"./SwiftProcess\";\n\n/**\n * Implements {@link vscode.Pseudoterminal} to spawn a {@link SwiftProcess} for tasks\n * that provide a custom {@link vscode.CustomExecution}\n */\nexport class SwiftPseudoterminal implements vscode.Pseudoterminal, vscode.Disposable {\n    private readonly writeEmitter: vscode.EventEmitter<string> = new vscode.EventEmitter<string>();\n    private readonly closeEmitter: vscode.EventEmitter<number | void> = new vscode.EventEmitter<\n        number | void\n    >();\n    private swiftProcess: SwiftProcess | undefined;\n\n    constructor(\n        private createSwiftProcess: () => SwiftProcess,\n        private options: vscode.TaskPresentationOptions\n    ) {}\n\n    private disposables: vscode.Disposable[] = [];\n\n    open(initialDimensions: vscode.TerminalDimensions | undefined): void {\n        this.swiftProcess = this.createSwiftProcess();\n        const commandLine = [this.swiftProcess.command, ...this.swiftProcess.args].join(\" \");\n        try {\n            // Convert the pty's events to the ones expected by the Tasks API\n            this.disposables.push(\n                this.swiftProcess.onDidSpawn(() => {\n                    // Display the actual command line that we're executing. `echo` defaults to true.\n                    if (this.options.echo !== false) {\n                        this.writeEmitter.fire(`> ${commandLine}\\n\\n\\r`);\n                    }\n                }),\n                this.swiftProcess.onDidWrite(data => {\n                    // The terminal expects a string that has \"\\n\\r\" line endings\n                    this.writeEmitter.fire(data.replace(/\\n(\\r)?/g, \"\\n\\r\"));\n                }),\n                this.swiftProcess.onDidThrowError(e => {\n                    void vscode.window.showErrorMessage(\n                        `Failed to run Swift command \"${commandLine}\":\\n${e}`\n                    );\n                    this.closeEmitter.fire();\n                    this.dispose();\n                }),\n                this.swiftProcess.onDidClose(event => {\n                    this.closeEmitter.fire(event);\n                    this.dispose();\n                })\n            );\n            this.swiftProcess.spawn();\n            if (initialDimensions) {\n                this.setDimensions(initialDimensions);\n            }\n        } catch (error) {\n            this.closeEmitter.fire();\n            this.dispose();\n        }\n    }\n\n    dispose() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n    }\n\n    /**\n     * Called by vscode when the user interacts with the\n     * terminal. Here we will handle any special sequences,\n     * ex. ctrl+c to terminate, and otherwise pass the input along\n     * to {@link SwiftProcess.handleInput}\n     *\n     * @param data VT sequence as a string\n     */\n    handleInput(data: string): void {\n        const buf: Buffer = Buffer.from(data);\n        // Terminate process on ctrl+c\n        if (buf.length === 1 && buf[0] === 3) {\n            this.swiftProcess?.terminate();\n        } else {\n            this.swiftProcess?.handleInput(data);\n        }\n    }\n\n    setDimensions(dimensions: vscode.TerminalDimensions): void {\n        this.swiftProcess?.setDimensions(dimensions);\n    }\n\n    onDidWrite: vscode.Event<string> = this.writeEmitter.event;\n\n    onDidClose: vscode.Event<number | void> = this.closeEmitter.event;\n\n    close(): void {\n        this.swiftProcess?.terminate();\n        // Terminal may be re-used so only dispose of these on close\n        this.writeEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as os from \"os\";\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\nimport configuration from \"../configuration\";\nimport { FolderContext } from \"../FolderContext\";\nimport { BuildFlags } from \"../toolchain/BuildFlags\";\nimport { regexEscapedString, swiftRuntimeEnv } from \"../utilities/utilities\";\nimport { SWIFT_LAUNCH_CONFIG_TYPE } from \"./debugAdapter\";\nimport { TargetType } from \"../SwiftPackage\";\nimport { Version } from \"../utilities/version\";\nimport { TestLibrary } from \"../TestExplorer/TestRunner\";\nimport { TestKind, isDebugging, isRelease } from \"../TestExplorer/TestKind\";\nimport { buildOptions } from \"../tasks/SwiftTaskProvider\";\nimport { updateLaunchConfigForCI } from \"./lldb\";\n\nexport class BuildConfigurationFactory {\n    public static buildAll(\n        ctx: FolderContext,\n        isTestBuild: boolean,\n        isRelease: boolean\n    ): Promise<vscode.DebugConfiguration> {\n        return new BuildConfigurationFactory(ctx, isTestBuild, isRelease).build();\n    }\n\n    private constructor(\n        private ctx: FolderContext,\n        private isTestBuild: boolean,\n        private isRelease: boolean\n    ) {}\n\n    private async build(): Promise<vscode.DebugConfiguration> {\n        let additionalArgs = buildOptions(this.ctx.toolchain);\n        if ((await this.ctx.swiftPackage.getTargets(TargetType.test)).length > 0) {\n            additionalArgs.push(...this.testDiscoveryFlag(this.ctx));\n        }\n\n        if (this.isRelease) {\n            additionalArgs = [...additionalArgs, \"-c\", \"release\"];\n        }\n\n        // don't build tests for iOS etc as they don't compile\n        if (this.ctx.toolchain.buildFlags.getDarwinTarget() === undefined) {\n            additionalArgs = [\"--build-tests\", ...additionalArgs];\n            if (this.isRelease) {\n                additionalArgs = [...additionalArgs, \"-Xswiftc\", \"-enable-testing\"];\n            }\n            if (this.isTestBuild) {\n                additionalArgs = [\n                    ...additionalArgs,\n                    ...configuration.folder(this.ctx.workspaceFolder).additionalTestArguments,\n                ];\n            }\n        }\n\n        return {\n            ...(await this.baseConfig),\n            program: \"swift\",\n            args: [\"build\", ...additionalArgs],\n            env: {},\n        };\n    }\n\n    /** flag for enabling test discovery */\n    private testDiscoveryFlag(ctx: FolderContext): string[] {\n        // Test discovery is only available in SwiftPM 5.1 and later.\n        if (ctx.swiftVersion.isLessThan(new Version(5, 1, 0))) {\n            return [];\n        }\n        // Test discovery is always enabled on Darwin.\n        if (process.platform !== \"darwin\") {\n            const hasLinuxMain = ctx.linuxMain.exists;\n            const testDiscoveryByDefault = ctx.swiftVersion.isGreaterThanOrEqual(\n                new Version(5, 4, 0)\n            );\n            if (hasLinuxMain || !testDiscoveryByDefault) {\n                return [\"--enable-test-discovery\"];\n            }\n        }\n        return [];\n    }\n\n    private get baseConfig() {\n        return getBaseConfig(this.ctx, true);\n    }\n}\n\nexport class SwiftTestingBuildAguments {\n    private constructor(\n        public fifoPipePath: string,\n        public attachmentPath: string | undefined\n    ) {}\n\n    public static build(\n        fifoPipePath: string,\n        attachmentPath: string | undefined\n    ): SwiftTestingBuildAguments {\n        return new SwiftTestingBuildAguments(fifoPipePath, attachmentPath);\n    }\n}\n\nexport class SwiftTestingConfigurationSetup {\n    public static async setupAttachmentFolder(\n        folderContext: FolderContext,\n        testRunTime: number\n    ): Promise<string | undefined> {\n        const attachmentPath = SwiftTestingConfigurationSetup.resolveAttachmentPath(\n            folderContext,\n            testRunTime\n        );\n        if (attachmentPath) {\n            // Create the directory if it doesn't exist.\n            await fs.mkdir(attachmentPath, { recursive: true });\n\n            return attachmentPath;\n        }\n\n        return attachmentPath;\n    }\n\n    public static async cleanupAttachmentFolder(\n        folderContext: FolderContext,\n        testRunTime: number,\n        outputChannel: vscode.OutputChannel\n    ): Promise<void> {\n        const attachmentPath = SwiftTestingConfigurationSetup.resolveAttachmentPath(\n            folderContext,\n            testRunTime\n        );\n\n        if (attachmentPath) {\n            try {\n                // If no attachments were written during the test run clean up the folder\n                // that was created to contain them to prevent accumulation of empty folders\n                // after every run.\n                const files = await fs.readdir(attachmentPath);\n                if (files.length === 0) {\n                    await fs.rmdir(attachmentPath);\n                }\n            } catch (error) {\n                outputChannel.appendLine(`Failed to clean up attachment path: ${error}`);\n            }\n        }\n    }\n\n    private static resolveAttachmentPath(\n        folderContext: FolderContext,\n        testRunTime: number\n    ): string | undefined {\n        let attachmentPath = configuration.folder(folderContext.workspaceFolder).attachmentsPath;\n        if (attachmentPath.length > 0) {\n            // If the attachment path is relative, resolve it relative to the workspace folder.\n            if (!path.isAbsolute(attachmentPath)) {\n                attachmentPath = path.resolve(folderContext.folder.fsPath, attachmentPath);\n            }\n\n            const dateString = this.dateString(testRunTime);\n            return path.join(attachmentPath, dateString);\n        }\n        return undefined;\n    }\n\n    private static dateString(time: number): string {\n        const date = new Date(time);\n        return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, \"0\")}-${String(date.getDate()).padStart(2, \"0\")}_${String(date.getHours()).padStart(2, \"0\")}-${String(date.getMinutes()).padStart(2, \"0\")}-${String(date.getSeconds()).padStart(2, \"0\")}`;\n    }\n}\n\n/**\n * Creates `vscode.DebugConfiguration`s for different combinations of\n * testing library, test kind and platform. Use the static `swiftTestingConfig`\n * and `xcTestConfig` functions to create\n */\nexport class TestingConfigurationFactory {\n    public static swiftTestingConfig(\n        ctx: FolderContext,\n        buildArguments: SwiftTestingBuildAguments,\n        testKind: TestKind,\n        testList: string[],\n        expandEnvVariables = false\n    ): Promise<vscode.DebugConfiguration | null> {\n        return new TestingConfigurationFactory(\n            ctx,\n            testKind,\n            TestLibrary.swiftTesting,\n            testList,\n            buildArguments,\n            expandEnvVariables\n        ).build();\n    }\n\n    public static xcTestConfig(\n        ctx: FolderContext,\n        testKind: TestKind,\n        testList: string[],\n        expandEnvVariables = false\n    ): Promise<vscode.DebugConfiguration | null> {\n        return new TestingConfigurationFactory(\n            ctx,\n            testKind,\n            TestLibrary.xctest,\n            testList,\n            undefined,\n            expandEnvVariables\n        ).build();\n    }\n\n    public static testExecutableOutputPath(\n        ctx: FolderContext,\n        testKind: TestKind,\n        testLibrary: TestLibrary\n    ): Promise<string> {\n        return new TestingConfigurationFactory(\n            ctx,\n            testKind,\n            testLibrary,\n            [],\n            undefined,\n            true\n        ).testExecutableOutputPath();\n    }\n\n    private constructor(\n        private ctx: FolderContext,\n        private testKind: TestKind,\n        private testLibrary: TestLibrary,\n        private testList: string[],\n        private swiftTestingArguments?: SwiftTestingBuildAguments,\n        private expandEnvVariables = false\n    ) {}\n\n    /**\n     * Builds a `vscode.DebugConfiguration` for running tests based on four main criteria:\n     *\n     * - Platform\n     * - Toolchain\n     * - Test Kind (coverage, debugging)\n     * - Test Library (XCTest, swift-testing)\n     */\n    private async build(): Promise<vscode.DebugConfiguration | null> {\n        if (!(await this.hasTestTarget)) {\n            return null;\n        }\n\n        switch (process.platform) {\n            case \"darwin\":\n                return this.buildDarwinConfig();\n            case \"win32\":\n                return this.buildWindowsConfig();\n            default:\n                return this.buildLinuxConfig();\n        }\n    }\n\n    /* eslint-disable no-case-declarations */\n    private async buildWindowsConfig(): Promise<vscode.DebugConfiguration | null> {\n        if (isDebugging(this.testKind)) {\n            const testEnv = {\n                ...swiftRuntimeEnv(),\n                ...configuration.folder(this.ctx.workspaceFolder).testEnvironmentVariables,\n            };\n            // On Windows, add XCTest.dll/Testing.dll to the Path\n            // and run the .xctest executable from the .build directory.\n            const runtimePath = this.ctx.toolchain.runtimePath;\n            const xcTestPath = this.ctx.toolchain.xcTestPath;\n            if (xcTestPath && xcTestPath !== runtimePath) {\n                testEnv.Path = `${xcTestPath};${testEnv.Path ?? process.env.Path}`;\n            }\n\n            const swiftTestingPath = this.ctx.toolchain.swiftTestingPath;\n            if (swiftTestingPath && swiftTestingPath !== runtimePath) {\n                testEnv.Path = `${swiftTestingPath};${testEnv.Path ?? process.env.Path}`;\n            }\n\n            const baseConfig = await this.baseConfig();\n            return {\n                ...baseConfig,\n                program: await this.testExecutableOutputPath(),\n                args: this.debuggingTestExecutableArgs(),\n                env: testEnv,\n            };\n        } else {\n            return this.buildDarwinConfig();\n        }\n    }\n\n    /* eslint-disable no-case-declarations */\n    private async buildLinuxConfig(): Promise<vscode.DebugConfiguration | null> {\n        if (isDebugging(this.testKind) && this.testLibrary === TestLibrary.xctest) {\n            const baseConfig = await this.baseConfig();\n            return {\n                ...baseConfig,\n                program: await this.testExecutableOutputPath(),\n                args: this.debuggingTestExecutableArgs(),\n                env: {\n                    ...swiftRuntimeEnv(\n                        process.env,\n                        this.ctx.toolchain.runtimePath ?? configuration.runtimePath\n                    ),\n                    ...configuration.folder(this.ctx.workspaceFolder).testEnvironmentVariables,\n                },\n            };\n        } else {\n            return this.buildDarwinConfig();\n        }\n    }\n\n    private async buildDarwinConfig(): Promise<vscode.DebugConfiguration | null> {\n        const baseConfig = await this.baseConfig();\n        switch (this.testLibrary) {\n            case TestLibrary.swiftTesting:\n                switch (this.testKind) {\n                    case TestKind.debugRelease:\n                    case TestKind.debug:\n                        // In the debug case we need to build the testing executable and then\n                        // launch it with LLDB instead of going through `swift test`.\n                        const toolchain = this.ctx.toolchain;\n                        const libraryPath = toolchain.swiftTestingLibraryPath();\n                        const frameworkPath = toolchain.swiftTestingFrameworkPath();\n                        const swiftPMTestingHelperPath = toolchain.swiftPMTestingHelperPath;\n\n                        // Toolchains that contain https://github.com/swiftlang/swift-package-manager/commit/844bd137070dcd18d0f46dd95885ef7907ea0697\n                        // produce a single testing binary for both xctest and swift-testing (called <ProductName>.xctest).\n                        // We can continue to invoke it with the xctest utility, but to run swift-testing tests\n                        // we need to invoke then using the swiftpm-testing-helper utility. If this helper utility exists\n                        // then we know we're working with a unified binary.\n                        if (swiftPMTestingHelperPath) {\n                            const result = {\n                                ...baseConfig,\n                                program: swiftPMTestingHelperPath,\n                                args: this.addBuildOptionsToArgs(\n                                    this.addTestsToArgs(\n                                        this.addSwiftTestingFlagsArgs([\n                                            \"--test-bundle-path\",\n                                            await this.unifiedTestingOutputPath(),\n                                            \"--testing-library\",\n                                            \"swift-testing\",\n                                        ])\n                                    )\n                                ),\n                                env: {\n                                    ...this.testEnv,\n                                    ...this.sanitizerRuntimeEnvironment,\n                                    DYLD_FRAMEWORK_PATH: frameworkPath,\n                                    DYLD_LIBRARY_PATH: libraryPath,\n                                    SWT_SF_SYMBOLS_ENABLED: \"0\",\n                                },\n                            };\n                            return result;\n                        }\n\n                        const result = {\n                            ...baseConfig,\n                            program: await this.testExecutableOutputPath(),\n                            args: this.debuggingTestExecutableArgs(),\n                            env: {\n                                ...this.testEnv,\n                                ...this.sanitizerRuntimeEnvironment,\n                                DYLD_FRAMEWORK_PATH: frameworkPath,\n                                DYLD_LIBRARY_PATH: libraryPath,\n                                SWT_SF_SYMBOLS_ENABLED: \"0\",\n                            },\n                        };\n                        return result;\n                    default:\n                        let args = this.addSwiftTestingFlagsArgs([\n                            \"test\",\n                            ...(this.testKind === TestKind.coverage\n                                ? [\"--enable-code-coverage\"]\n                                : []),\n                        ]);\n\n                        if (this.swiftVersionGreaterOrEqual(6, 0, 0)) {\n                            args = [...args, \"--disable-xctest\"];\n                        }\n\n                        return {\n                            ...baseConfig,\n                            program: this.swiftProgramPath,\n                            args: this.addBuildOptionsToArgs(this.addTestsToArgs(args)),\n                            env: {\n                                ...this.testEnv,\n                                ...this.sanitizerRuntimeEnvironment,\n                                SWT_SF_SYMBOLS_ENABLED: \"0\",\n                            },\n                            // For coverage we need to rebuild so do the build/test all in one step,\n                            // otherwise we do a build, then test, to give better progress.\n                            preLaunchTask:\n                                this.testKind === TestKind.coverage\n                                    ? undefined\n                                    : baseConfig.preLaunchTask,\n                        };\n                }\n            case TestLibrary.xctest:\n                switch (this.testKind) {\n                    case TestKind.debugRelease:\n                    case TestKind.debug:\n                        const xcTestPath = this.ctx.toolchain.xcTestPath;\n                        // On macOS, find the path to xctest\n                        // and point it at the .xctest bundle from the configured build directory.\n                        if (xcTestPath === undefined) {\n                            return null;\n                        }\n                        return {\n                            ...baseConfig,\n                            program: path.join(xcTestPath, \"xctest\"),\n                            args: this.addXCTestExecutableTestsToArgs([\n                                await this.xcTestOutputPath(),\n                            ]),\n                            env: {\n                                ...this.testEnv,\n                                ...this.sanitizerRuntimeEnvironment,\n                                SWIFT_TESTING_ENABLED: \"0\",\n                            },\n                        };\n                    default:\n                        const swiftVersion = this.ctx.toolchain.swiftVersion;\n                        if (\n                            swiftVersion.isLessThan(new Version(5, 7, 0)) &&\n                            swiftVersion.isGreaterThanOrEqual(new Version(5, 6, 0)) &&\n                            process.platform === \"darwin\"\n                        ) {\n                            // if debugging on macOS with Swift 5.6 we need to create a custom launch\n                            // configuration so we can set the system architecture\n                            return await this.createDarwin56TestConfiguration();\n                        }\n\n                        let xcTestArgs = [\n                            \"test\",\n                            ...(this.testKind === TestKind.coverage\n                                ? [\"--enable-code-coverage\"]\n                                : []),\n                        ];\n                        if (this.swiftVersionGreaterOrEqual(6, 0, 0)) {\n                            xcTestArgs = [\n                                ...xcTestArgs,\n                                \"--enable-xctest\",\n                                \"--disable-experimental-swift-testing\",\n                            ];\n                        }\n\n                        if (this.testKind === TestKind.parallel) {\n                            xcTestArgs = [...xcTestArgs, \"--parallel\"];\n                        }\n\n                        return {\n                            ...baseConfig,\n                            program: this.swiftProgramPath,\n                            args: this.addBuildOptionsToArgs(this.addTestsToArgs(xcTestArgs)),\n                            env: {\n                                ...this.testEnv,\n                                ...this.sanitizerRuntimeEnvironment,\n                                SWT_SF_SYMBOLS_ENABLED: \"0\",\n                            },\n                            // For coverage we need to rebuild so do the build/test all in one step,\n                            // otherwise we do a build, then test, to give better progress.\n                            preLaunchTask:\n                                this.testKind === TestKind.coverage\n                                    ? undefined\n                                    : baseConfig.preLaunchTask,\n                        };\n                }\n        }\n    }\n    /* eslint-enable no-case-declarations */\n\n    /**\n     * Return custom Darwin test configuration that works with Swift 5.6\n     **/\n    private async createDarwin56TestConfiguration(): Promise<vscode.DebugConfiguration | null> {\n        if ((await this.ctx.swiftPackage.getTargets(TargetType.test)).length === 0) {\n            return null;\n        }\n\n        let testFilterArg: string;\n        const testList = this.testList.join(\",\");\n        if (testList.length > 0) {\n            testFilterArg = `-XCTest ${testList}`;\n        } else {\n            testFilterArg = \"\";\n        }\n\n        const { folder, nameSuffix } = getFolderAndNameSuffix(this.ctx, true);\n        // On macOS, find the path to xctest\n        // and point it at the .xctest bundle from the configured build directory.\n        const xctestPath = this.ctx.toolchain.xcTestPath;\n        if (xctestPath === undefined) {\n            return null;\n        }\n        let arch: string;\n        switch (os.arch()) {\n            case \"x64\":\n                arch = \"x86_64\";\n                break;\n            case \"arm64\":\n                arch = \"arm64e\";\n                break;\n            default:\n                return null;\n        }\n        const sanitizer = this.ctx.toolchain.sanitizer(configuration.sanitizer);\n        const envCommands = Object.entries({\n            ...swiftRuntimeEnv(),\n            ...configuration.folder(this.ctx.workspaceFolder).testEnvironmentVariables,\n            ...sanitizer?.runtimeEnvironment,\n        }).map(([key, value]) => `settings set target.env-vars ${key}=\"${value}\"`);\n\n        return {\n            type: SWIFT_LAUNCH_CONFIG_TYPE,\n            request: \"custom\",\n            name: `Test ${await this.ctx.swiftPackage.name}`,\n            targetCreateCommands: [`file -a ${arch} ${xctestPath}/xctest`],\n            processCreateCommands: [\n                ...envCommands,\n                `process launch -w ${folder} -- ${testFilterArg} ${this.xcTestOutputPath()}`,\n            ],\n            preLaunchTask: `swift: Build All${nameSuffix}`,\n        };\n    }\n\n    private addSwiftTestingFlagsArgs(args: string[]): string[] {\n        if (!this.swiftTestingArguments) {\n            throw new Error(\n                \"Attempted to create swift testing flags without any swift testing arguments. This is an internal error, please report an issue at https://github.com/swiftlang/vscode-swift/issues/new\"\n            );\n        }\n\n        const swiftTestingArgs = [\n            ...this.ctx.toolchain.buildFlags.withAdditionalFlags(args),\n            \"--enable-swift-testing\",\n            \"--event-stream-version\",\n            \"0\",\n            \"--event-stream-output-path\",\n            this.swiftTestingArguments.fifoPipePath,\n        ];\n\n        if (this.swiftTestingArguments.attachmentPath && this.swiftVersionGreaterOrEqual(6, 1, 0)) {\n            swiftTestingArgs.push(\n                \"--experimental-attachments-path\",\n                this.swiftTestingArguments.attachmentPath\n            );\n        }\n\n        return swiftTestingArgs;\n    }\n\n    private addTestsToArgs(args: string[]): string[] {\n        return [\n            ...args,\n            ...this.testList.flatMap(arg => [\n                \"--filter\",\n                regexEscapedString(arg, new Set([\"$\", \"^\"])),\n            ]),\n        ];\n    }\n\n    private addXCTestExecutableTestsToArgs(args: string[]): string[] {\n        if (args.length === 0) {\n            return args;\n        }\n        return [\"-XCTest\", this.testList.join(\",\"), ...args];\n    }\n\n    private addBuildOptionsToArgs(args: string[]): string[] {\n        let result = [...args, ...buildOptions(this.ctx.toolchain, isDebugging(this.testKind))];\n        if (isRelease(this.testKind)) {\n            result = [...result, \"-c\", \"release\", \"-Xswiftc\", \"-enable-testing\"];\n        }\n\n        // Add in any user specified test arguments.\n        result = [\n            ...result,\n            ...configuration.folder(this.ctx.workspaceFolder).additionalTestArguments,\n        ];\n\n        // `link.exe` doesn't support duplicate weak symbols, and lld-link in an effort to\n        // match link.exe also doesn't support them by default. We can use `-lldmingw` to get\n        // lld-link to allow duplicate weak symbols, but that also changes its library search\n        // path behavior, which could(?) be unintended.\n        //\n        // On the `next` branch (6.1?) in llvm, the duplicate symbol behavior now has its own flag\n        // `-lld-allow-duplicate-weak` (https://github.com/llvm/llvm-project/pull/68077).\n        // Once this is available we should use it if possible, as it will suppress the warnings\n        // seen with `-lldmingw`.\n        //\n        // SEE: rdar://129337999\n        if (process.platform === \"win32\" && this.testKind === TestKind.coverage) {\n            result = [...result, \"-Xlinker\", \"-lldmingw\"];\n        }\n        return result;\n    }\n\n    private swiftVersionGreaterOrEqual(major: number, minor: number, patch: number): boolean {\n        return this.ctx.swiftVersion.isGreaterThanOrEqual(new Version(major, minor, patch));\n    }\n\n    private get swiftProgramPath(): string {\n        return this.ctx.toolchain.getToolchainExecutable(\"swift\");\n    }\n\n    private get buildDirectory(): string {\n        const { folder } = getFolderAndNameSuffix(this.ctx, this.expandEnvVariables);\n        return BuildFlags.buildDirectoryFromWorkspacePath(folder, true);\n    }\n\n    private get artifactFolderForTestKind(): string {\n        const mode = isRelease(this.testKind) ? \"release\" : \"debug\";\n        const triple = this.ctx.toolchain.unversionedTriple;\n        return triple ? path.join(triple, mode) : mode;\n    }\n\n    private async xcTestOutputPath(): Promise<string> {\n        const packageName = await this.ctx.swiftPackage.name;\n        return path.join(\n            this.buildDirectory,\n            this.artifactFolderForTestKind,\n            `${packageName}PackageTests.xctest`\n        );\n    }\n\n    private async unifiedTestingOutputPath(): Promise<string> {\n        // The unified binary that contains both swift-testing and XCTests\n        // is named the same as the old style .xctest binary. The swiftpm-testing-helper\n        // requires the full path to the binary.\n        if (process.platform === \"darwin\") {\n            const packageName = await this.ctx.swiftPackage.name;\n            return path.join(\n                await this.xcTestOutputPath(),\n                \"Contents\",\n                \"MacOS\",\n                `${packageName}PackageTests`\n            );\n        } else {\n            return this.xcTestOutputPath();\n        }\n    }\n\n    private async testExecutableOutputPath(): Promise<string> {\n        switch (this.testLibrary) {\n            case TestLibrary.swiftTesting:\n                return this.unifiedTestingOutputPath();\n            case TestLibrary.xctest:\n                return this.xcTestOutputPath();\n        }\n    }\n\n    private debuggingTestExecutableArgs(): string[] {\n        switch (this.testLibrary) {\n            case TestLibrary.swiftTesting: {\n                const swiftTestingArgs = [\"--testing-library\", \"swift-testing\"];\n\n                return this.addBuildOptionsToArgs(\n                    this.addTestsToArgs(this.addSwiftTestingFlagsArgs(swiftTestingArgs))\n                );\n            }\n            case TestLibrary.xctest:\n                return [this.testList.join(\",\")];\n        }\n    }\n\n    private get sanitizerRuntimeEnvironment() {\n        return this.ctx.toolchain.sanitizer(configuration.sanitizer)?.runtimeEnvironment;\n    }\n\n    private get testEnv() {\n        return {\n            ...swiftRuntimeEnv(),\n            ...configuration.folder(this.ctx.workspaceFolder).testEnvironmentVariables,\n        };\n    }\n\n    private async baseConfig(): Promise<ReturnType<typeof getBaseConfig>> {\n        return getBaseConfig(this.ctx, this.expandEnvVariables);\n    }\n\n    private get hasTestTarget(): Promise<boolean> {\n        return this.ctx.swiftPackage\n            .getTargets(TargetType.test)\n            .then(targets => targets.length > 0);\n    }\n}\n\nasync function getBaseConfig(ctx: FolderContext, expandEnvVariables: boolean) {\n    const { folder, nameSuffix } = getFolderAndNameSuffix(ctx, expandEnvVariables);\n    const packageName = await ctx.swiftPackage.name;\n    return updateLaunchConfigForCI({\n        type: SWIFT_LAUNCH_CONFIG_TYPE,\n        request: \"launch\",\n        sourceLanguages: [\"swift\"],\n        name: `Test ${packageName}`,\n        cwd: folder,\n        args: [],\n        preLaunchTask: `swift: Build All${nameSuffix}`,\n        terminal: \"console\",\n    });\n}\n\nexport function getFolderAndNameSuffix(\n    ctx: FolderContext,\n    expandEnvVariables = false,\n    platform?: \"posix\" | \"win32\"\n): { folder: string; nameSuffix: string } {\n    const nodePath = platform === \"posix\" ? path.posix : platform === \"win32\" ? path.win32 : path;\n    const workspaceFolder = expandEnvVariables\n        ? ctx.workspaceFolder.uri.fsPath\n        : `\\${workspaceFolder:${ctx.workspaceFolder.name}}`;\n    let folder: string;\n    let nameSuffix: string;\n    if (ctx.relativePath.length === 0) {\n        folder = workspaceFolder;\n        nameSuffix = \"\";\n    } else {\n        folder = nodePath.join(workspaceFolder, ctx.relativePath);\n        nameSuffix = ` (${ctx.relativePath})`;\n    }\n    return { folder: folder, nameSuffix: nameSuffix };\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport configuration from \"../configuration\";\nimport { Version } from \"../utilities/version\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\n\n/**\n * The launch configuration type added by the Swift extension that will delegate to the appropriate\n * LLDB debug adapter when launched.\n */\nexport const SWIFT_LAUNCH_CONFIG_TYPE = \"swift\";\n\n/**\n * The supported {@link vscode.DebugConfiguration.type Debug Configuration Types} that can handle\n * LLDB launch requests.\n */\nexport const enum LaunchConfigType {\n    LLDB_DAP = \"lldb-dap\",\n    CODE_LLDB = \"lldb\",\n}\n\n/**\n * Class managing which debug adapter we are using. Will only setup lldb-vscode/lldb-dap if it is available.\n */\nexport class DebugAdapter {\n    /**\n     * Return the launch configuration type for the given Swift version. This also takes\n     * into account user settings when determining which launch configuration to use.\n     *\n     * @param swiftVersion the version of the Swift toolchain\n     * @returns the type of launch configuration used by the given Swift toolchain version\n     */\n    public static getLaunchConfigType(swiftVersion: Version): LaunchConfigType {\n        const lldbDapIsAvailable = swiftVersion.isGreaterThanOrEqual(new Version(6, 0, 0));\n        if (lldbDapIsAvailable && configuration.debugger.debugAdapter !== \"CodeLLDB\") {\n            return LaunchConfigType.LLDB_DAP;\n        } else {\n            return LaunchConfigType.CODE_LLDB;\n        }\n    }\n\n    /**\n     * Return the path to the debug adapter.\n     *\n     * @param toolchain The Swift toolchain to use\n     * @returns A path to the debug adapter for the user's toolchain and configuration\n     **/\n    public static async getLLDBDebugAdapterPath(toolchain: SwiftToolchain): Promise<string> {\n        const customDebugAdapterPath = configuration.debugger.customDebugAdapterPath;\n        if (customDebugAdapterPath.length > 0) {\n            return customDebugAdapterPath;\n        }\n        return toolchain.getLLDBDebugAdapter();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n/** Workspace Folder events */\nexport enum TestKind {\n    // run tests serially\n    standard = \"Run Tests\",\n    // run tests in parallel\n    parallel = \"Run Tests (Parallel)\",\n    // run tests and extract test coverage\n    coverage = \"Run With Test Coverage\",\n    // run tests with the debugger\n    debug = \"Debug Tests\",\n    // run tests compiled in release mode\n    release = \"Run Tests (Release Mode)\",\n    // run tests compiled in release mode with debugger\n    debugRelease = \"Debug Tests (Release Mode)\",\n}\n\nexport function isDebugging(testKind: TestKind): boolean {\n    return testKind === TestKind.debug || testKind === TestKind.debugRelease;\n}\n\nexport function isRelease(testKind: TestKind): boolean {\n    return testKind === TestKind.release || testKind === TestKind.debugRelease;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// Based on code taken from CodeLLDB https://github.com/vadimcn/vscode-lldb/\n// LICENSED with MIT License\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as fs from \"fs/promises\";\nimport { execFile, IS_RUNNING_IN_CI } from \"../utilities/utilities\";\nimport { Result } from \"../utilities/result\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\n\n/**\n * Updates the provided debug configuration to be compatible with running in CI.\n *\n * Will be optimized out of production builds.\n */\nexport function updateLaunchConfigForCI(\n    config: vscode.DebugConfiguration\n): vscode.DebugConfiguration {\n    if (!IS_RUNNING_IN_CI) {\n        return config;\n    }\n\n    const result = structuredClone(config);\n    // Tell LLDB not to disable ASLR when running in Docker CI https://stackoverflow.com/a/78471987\n    result.disableASLR = false;\n    result.initCommands = [\"settings set target.disable-aslr false\"];\n    return result;\n}\n\n/**\n * Get the path to the LLDB library.\n *\n * @returns Library path for LLDB\n */\nexport async function getLLDBLibPath(toolchain: SwiftToolchain): Promise<Result<string>> {\n    let executable: string;\n    try {\n        executable = await toolchain.getLLDB();\n    } catch (error) {\n        return Result.makeFailure(error);\n    }\n    let pathHint = path.dirname(toolchain.swiftFolderPath);\n    try {\n        const statement = `print('<!' + lldb.SBHostOS.GetLLDBPath(lldb.ePathTypeLLDBShlibDir).fullpath + '!>')`;\n        const args = [\"-b\", \"-O\", `script ${statement}`];\n        const { stdout } = await execFile(executable, args);\n        const m = /^<!([^!]*)!>/m.exec(stdout);\n        if (m) {\n            pathHint = m[1];\n        }\n    } catch (error) {\n        // If we get an error on Windows here we should not attempt to use the fallback path. If it failed\n        // it is most likely due to lldb failing to run because $PYHTONHOME environment variable is setup\n        // incorrectly (this is the case in Swift < 5.7). In this situation swift lldb does not work so we\n        // should just the version of lldb that comes with CodeLLDB. We return a failure with no message\n        // to indicate we want it to fail silently.\n        if (process.platform === \"win32\") {\n            return Result.makeFailure(undefined);\n        }\n    }\n    const lldbPath = await findLibLLDB(pathHint);\n    if (lldbPath) {\n        return Result.makeSuccess(lldbPath);\n    } else {\n        return Result.makeFailure(\"LLDB failed to provide a library path\");\n    }\n}\n\nexport async function findLibLLDB(pathHint: string): Promise<string | undefined> {\n    const stat = await fs.stat(pathHint);\n    if (stat.isFile()) {\n        return pathHint;\n    }\n\n    let libDir;\n    let pattern;\n    if (process.platform === \"linux\") {\n        libDir = path.join(pathHint, \"lib\");\n        pattern = /liblldb.*\\.so.*/;\n    } else if (process.platform === \"darwin\") {\n        libDir = path.join(pathHint, \"lib\");\n        pattern = /liblldb\\..*dylib|LLDB/;\n    } else if (process.platform === \"win32\") {\n        libDir = path.join(pathHint, \"bin\");\n        pattern = /liblldb\\.dll/;\n    } else {\n        return pathHint;\n    }\n\n    for (const dir of [pathHint, libDir]) {\n        const file = await findFileByPattern(dir, pattern);\n        if (file) {\n            return path.join(dir, file);\n        }\n    }\n    return undefined;\n}\n\nexport async function findFileByPattern(path: string, pattern: RegExp): Promise<string | null> {\n    try {\n        const files = await fs.readdir(path);\n        for (const file of files) {\n            if (pattern.test(file)) {\n                return file;\n            }\n        }\n    } catch (err) {\n        // Ignore missing directories and such...\n    }\n    return null;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n/**\n * Wrapper class for a Result that might contain either success or failure\n */\nexport class Result<Success> {\n    private constructor(\n        readonly success?: Success,\n        readonly failure?: unknown\n    ) {}\n\n    /** Return a successful result */\n    static makeSuccess<Success>(success: Success): Result<Success> {\n        return new Result(success);\n    }\n\n    /** Return a failed result */\n    static makeFailure<Success>(failure: unknown): Result<Success> {\n        return new Result<Success>(undefined, failure);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { ITestRunState, TestIssueDiff } from \"./TestRunState\";\nimport { sourceLocationToVSCodeLocation } from \"../../utilities/utilities\";\nimport { MarkdownString, Location } from \"vscode\";\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport stripAnsi = require(\"strip-ansi\");\nimport { lineBreakRegex } from \"../../utilities/tasks\";\n\n/** Regex for parsing XCTest output */\ninterface TestRegex {\n    started: RegExp;\n    finished: RegExp;\n    error: RegExp;\n    skipped: RegExp;\n    startedSuite: RegExp;\n    passedSuite: RegExp;\n    failedSuite: RegExp;\n}\n\nenum TestCompletionState {\n    passed = \"passed\",\n    failed = \"failed\",\n    skipped = \"skipped\",\n}\n\n/** Regex for parsing darwin XCTest output */\nexport const darwinTestRegex = {\n    // Regex \"Test Case '-[<test target> <class.function>]' started\"\n    started: /Test Case '-\\[(\\S+)\\s(.*)\\]' started\\./,\n    // Regex \"Test Case '-[<test target> <class.function>]' <completion_state> (<duration> seconds)\"\n    finished: /Test Case '-\\[(\\S+)\\s(.*)\\]' (.*) \\((\\d.*) seconds\\)/,\n    // Regex \"<path/to/test>:<line number>: error: -[<test target> <class.function>] : <error>\"\n    error: /(.+):(\\d+):\\serror:\\s-\\[(\\S+)\\s(.*)\\] : (.*)$/,\n    // Regex \"<path/to/test>:<line number>: -[<test target> <class.function>] : Test skipped\"\n    skipped: /(.+):(\\d+):\\s-\\[(\\S+)\\s(.*)\\] : Test skipped/,\n    // Regex \"Test Suite '<class>' started\"\n    startedSuite: /Test Suite '(.*)' started/,\n    // Regex \"Test Suite '<class>' passed\"\n    passedSuite: /Test Suite '(.*)' passed/,\n    // Regex \"Test Suite '<class>' failed\"\n    failedSuite: /Test Suite '(.*)' failed/,\n};\n\n/** Regex for parsing non darwin XCTest output */\nexport const nonDarwinTestRegex = {\n    // Regex \"Test Case '-[<test target> <class.function>]' started\"\n    started: /Test Case '(.*)\\.(.*)' started/,\n    // Regex \"Test Case '<class>.<function>' <completion_state> (<duration> seconds)\"\n    finished: /Test Case '(.*)\\.(.*)' (.*) \\((\\d.*) seconds\\)/,\n    // Regex \"<path/to/test>:<line number>: error: <class>.<function> : <error>\"\n    error: /(.+):(\\d+):\\serror:\\s*(.*)\\.(.*) : (.*)/,\n    // Regex \"<path/to/test>:<line number>: <class>.<function> : Test skipped\"\n    skipped: /(.+):(\\d+):\\s*(.*)\\.(.*) : Test skipped/,\n    // Regex \"Test Suite '<class>' started\"\n    startedSuite: /Test Suite '(.*)' started/,\n    // Regex \"Test Suite '<class>' passed\"\n    passedSuite: /Test Suite '(.*)' passed/,\n    // Regex \"Test Suite '<class>' failed\"\n    failedSuite: /Test Suite '(.*)' failed/,\n};\n\nexport interface IXCTestOutputParser {\n    parseResult(output: string, runState: ITestRunState): void;\n}\n\nexport class ParallelXCTestOutputParser implements IXCTestOutputParser {\n    private outputParser: XCTestOutputParser;\n\n    /**\n     * Create an ParallelXCTestOutputParser.\n     * Optional regex can be supplied for tests.\n     */\n    constructor(\n        private hasMultiLineParallelTestOutput: boolean,\n        regex?: TestRegex\n    ) {\n        this.outputParser = new XCTestOutputParser(regex);\n    }\n\n    public parseResult(output: string, runState: ITestRunState) {\n        // From 5.7 to 5.10 running with the --parallel option dumps the test results out\n        // to the console with no newlines, so it isn't possible to distinguish where errors\n        // begin and end. Consequently we can't record them. For these versions we rely on the\n        // generated xunit XML, which we can parse and mark tests as passed or failed here with\n        // manufactured issues.\n        // Don't attempt to parse the console output of parallel tests between 5.7 and 5.10\n        // as it doesn't have newlines. You might get lucky and find the output is split\n        // in the right spot, but more often than not we wont be able to parse it.\n        if (!this.hasMultiLineParallelTestOutput) {\n            return;\n        }\n\n        // For parallel XCTest runs we get pass/fail results from the xunit XML\n        // produced at the end of the run, but we still want to monitor the output\n        // for the individual assertion failures. Wrap the run state and only forward\n        // along the issues captured during a test run, and let the `TestXUnitParser`\n        // handle marking tests as completed.\n        this.outputParser.parseResult(output, new ParallelXCTestRunStateProxy(runState));\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nclass ParallelXCTestRunStateProxy implements ITestRunState {\n    // Note this must remain stateless as its recreated on\n    // every `parseResult` call in `ParallelXCTestOutputParser`\n    constructor(private runState: ITestRunState) {}\n\n    get excess(): typeof this.runState.excess {\n        return this.runState.excess;\n    }\n\n    set excess(value: typeof this.runState.excess) {\n        this.runState.excess = value;\n    }\n\n    get activeSuite(): typeof this.runState.activeSuite {\n        return this.runState.activeSuite;\n    }\n\n    set activeSuite(value: typeof this.runState.activeSuite) {\n        this.runState.activeSuite = value;\n    }\n\n    get pendingSuiteOutput(): typeof this.runState.pendingSuiteOutput {\n        return this.runState.pendingSuiteOutput;\n    }\n\n    set pendingSuiteOutput(value: typeof this.runState.pendingSuiteOutput) {\n        this.runState.pendingSuiteOutput = value;\n    }\n\n    get failedTest(): typeof this.runState.failedTest {\n        return this.runState.failedTest;\n    }\n\n    set failedTest(value: typeof this.runState.failedTest) {\n        this.runState.failedTest = value;\n    }\n\n    getTestItemIndex(id: string, filename: string | undefined): number {\n        return this.runState.getTestItemIndex(id, filename);\n    }\n    recordIssue(\n        index: number,\n        message: string | MarkdownString,\n        isKnown: boolean = false,\n        location?: Location | undefined\n    ): void {\n        this.runState.recordIssue(index, message, isKnown, location);\n    }\n    started(index: number, startTime?: number | undefined): void {}\n    completed(index: number, timing: { duration: number } | { timestamp: number }): void {}\n    skipped(index: number): void {}\n    startedSuite(name: string): void {}\n    passedSuite(name: string): void {}\n    failedSuite(name: string): void {}\n    recordOutput(index: number | undefined, output: string): void {}\n}\n/* eslint-enable @typescript-eslint/no-unused-vars */\n\nexport class XCTestOutputParser implements IXCTestOutputParser {\n    private regex: TestRegex;\n\n    /**\n     * Create an XCTestOutputParser.\n     * Optional regex can be supplied for tests.\n     */\n    constructor(regex?: TestRegex) {\n        this.regex = regex ?? this.platformTestRegex;\n    }\n\n    /**\n     * Parse results from `swift test` and update tests accordingly\n     * @param output Output from `swift test`\n     */\n    public parseResult(rawOutput: string, runState: ITestRunState) {\n        // Windows is inserting ANSI codes into the output to do things like clear the cursor,\n        // which we don't care about.\n        const output = process.platform === \"win32\" ? stripAnsi(rawOutput) : rawOutput;\n        const output2 = output.replace(/\\r\\n/g, \"\\n\");\n        const lines = output2.split(lineBreakRegex);\n        if (runState.excess) {\n            lines[0] = runState.excess + lines[0];\n        }\n        // pop empty string off the end of the lines array\n        if (lines.length > 0 && lines[lines.length - 1] === \"\") {\n            lines.pop();\n        }\n        // if submitted text does not end with a newline then pop that off and store in excess\n        // for next call of parseResult\n        if (output2[output2.length - 1] !== \"\\n\") {\n            runState.excess = lines.pop();\n        } else {\n            runState.excess = undefined;\n        }\n\n        // Non-Darwin test output does not include the test target name. The only way to find out\n        // the target for a test is when it fails and returns a file name. If we find failed tests\n        // first and then remove them from the list we cannot set them to passed by mistake.\n        // We extract the file name from the error and use that to check whether the file belongs\n        // to the target associated with the TestItem. This does not work 100% as the error could\n        // occur in another target, so we revert to just searching for class and function name if\n        // the above method is unsuccessful.\n        for (const line of lines) {\n            // Regex \"Test Case '-[<test target> <class.function>]' started\"\n            const startedMatch = this.regex.started.exec(line);\n            if (startedMatch) {\n                const testName = `${startedMatch[1]}/${startedMatch[2]}`;\n\n                // Save the active TestTarget.SuiteClass.\n                // Note that TestTarget is only present on Darwin.\n                runState.activeSuite = startedMatch[1];\n                this.processPendingSuiteOutput(runState, startedMatch[1]);\n\n                const startedTestIndex = runState.getTestItemIndex(testName, undefined);\n                this.startTest(startedTestIndex, runState);\n                this.appendTestOutput(startedTestIndex, line, runState);\n                continue;\n            }\n            // Regex \"Test Case '-[<test target> <class.function>]' <completion_state> (<duration> seconds)\"\n            const finishedMatch = this.regex.finished.exec(line);\n            if (finishedMatch) {\n                const testName = `${finishedMatch[1]}/${finishedMatch[2]}`;\n                const testIndex = runState.getTestItemIndex(testName, undefined);\n                const state = finishedMatch[3] as TestCompletionState;\n                const duration = +finishedMatch[4];\n                switch (state) {\n                    case TestCompletionState.failed:\n                        this.failTest(testIndex, { duration }, runState);\n                        break;\n                    case TestCompletionState.passed:\n                        this.passTest(testIndex, { duration }, runState);\n                        break;\n                    case TestCompletionState.skipped:\n                        this.skipTest(testIndex, runState);\n                        break;\n                }\n\n                this.appendTestOutput(testIndex, line, runState);\n                continue;\n            }\n            // Regex \"<path/to/test>:<line number>: error: <class>.<function> : <error>\"\n            const errorMatch = this.regex.error.exec(line);\n            if (errorMatch) {\n                const testName = `${errorMatch[3]}/${errorMatch[4]}`;\n                const failedTestIndex = runState.getTestItemIndex(testName, errorMatch[1]);\n                this.startErrorMessage(\n                    failedTestIndex,\n                    errorMatch[5],\n                    errorMatch[1],\n                    errorMatch[2],\n                    runState\n                );\n                this.appendTestOutput(failedTestIndex, line, runState);\n                continue;\n            }\n            // Regex \"<path/to/test>:<line number>: <class>.<function> : Test skipped\"\n            const skippedMatch = this.regex.skipped.exec(line);\n            if (skippedMatch) {\n                const testName = `${skippedMatch[3]}/${skippedMatch[4]}`;\n                const skippedTestIndex = runState.getTestItemIndex(testName, skippedMatch[1]);\n                this.skipTest(skippedTestIndex, runState);\n                this.appendTestOutput(skippedTestIndex, line, runState);\n                continue;\n            }\n            // Regex \"Test Suite '-[<test target> <class.function>]' started\"\n            const startedSuiteMatch = this.regex.startedSuite.exec(line);\n            if (startedSuiteMatch) {\n                this.startTestSuite(startedSuiteMatch[1], line, runState);\n                continue;\n            }\n            // Regex \"Test Suite '-[<test target> <class.function>]' passed\"\n            const passedSuiteMatch = this.regex.passedSuite.exec(line);\n            if (passedSuiteMatch) {\n                this.completeSuite(runState, line, this.passTestSuite);\n                continue;\n            }\n            // Regex \"Test Suite '-[<test target> <class.function>]' failed\"\n            const failedSuiteMatch = this.regex.failedSuite.exec(line);\n            if (failedSuiteMatch) {\n                this.completeSuite(runState, line, this.failTestSuite);\n                continue;\n            }\n            // unrecognised output could be the continuation of a previous error message\n            this.continueErrorMessage(line, runState);\n        }\n    }\n\n    /**\n     * Process the buffered lines captured before a test case has started.\n     */\n    private processPendingSuiteOutput(runState: ITestRunState, suite?: string) {\n        // If we have a qualified suite name captured from a runninng test\n        // process the lines captured before the test started, associating the\n        // line line with the suite.\n        if (runState.pendingSuiteOutput) {\n            const startedSuiteIndex = suite ? runState.getTestItemIndex(suite, undefined) : -1;\n            const totalLines = runState.pendingSuiteOutput.length - 1;\n            for (let i = 0; i <= totalLines; i++) {\n                const line = runState.pendingSuiteOutput[i];\n\n                // Only the last line of the captured output should be associated with the suite\n                const associateLineWithSuite = i === totalLines && startedSuiteIndex !== -1;\n\n                this.appendTestOutput(\n                    associateLineWithSuite ? startedSuiteIndex : undefined,\n                    line,\n                    runState\n                );\n            }\n            runState.pendingSuiteOutput = [];\n        }\n    }\n\n    /** Mark a suite as complete */\n    private completeSuite(\n        runState: ITestRunState,\n        line: string,\n        resultMethod: (name: string, runState: ITestRunState) => void\n    ) {\n        let suiteIndex: number | undefined;\n        if (runState.activeSuite) {\n            resultMethod(runState.activeSuite, runState);\n            suiteIndex = runState.getTestItemIndex(runState.activeSuite, undefined);\n        }\n\n        // If no tests have run we may have output still in the buffer.\n        // If activeSuite is undefined we finished an empty suite\n        // and we still want to flush the buffer.\n        this.processPendingSuiteOutput(runState, runState.activeSuite);\n\n        runState.activeSuite = undefined;\n        this.appendTestOutput(suiteIndex, line, runState);\n    }\n\n    /** Get Test parsing regex for current platform */\n    private get platformTestRegex(): TestRegex {\n        return process.platform === \"darwin\" ? darwinTestRegex : nonDarwinTestRegex;\n    }\n\n    /** Flag a test suite has started */\n    private startTestSuite(name: string, line: string, runState: ITestRunState) {\n        // Buffer the output to this point until the first test\n        // starts, at which point we can determine the target.\n        runState.pendingSuiteOutput = runState.pendingSuiteOutput\n            ? [...runState.pendingSuiteOutput, line]\n            : [line];\n\n        runState.startedSuite(name);\n    }\n\n    /** Flag a test suite has passed */\n    private passTestSuite(name: string, runState: ITestRunState) {\n        runState.passedSuite(name);\n    }\n\n    /** Flag a test suite has failed */\n    private failTestSuite(name: string, runState: ITestRunState) {\n        runState.failedSuite(name);\n    }\n\n    /** Flag we have started a test */\n    private startTest(testIndex: number, runState: ITestRunState) {\n        runState.started(testIndex);\n        // clear error state\n        runState.failedTest = undefined;\n    }\n\n    /** Flag we have passed a test */\n    private passTest(\n        testIndex: number,\n        timing: { duration: number } | { timestamp: number },\n        runState: ITestRunState\n    ) {\n        runState.completed(testIndex, timing);\n        runState.failedTest = undefined;\n    }\n\n    /** Start capture error message */\n    private startErrorMessage(\n        testIndex: number,\n        message: string,\n        file: string,\n        lineNumber: string,\n        runState: ITestRunState\n    ) {\n        // If we were already capturing an error record it and start a new one\n        if (runState.failedTest) {\n            const location = sourceLocationToVSCodeLocation(\n                runState.failedTest.file,\n                runState.failedTest.lineNumber\n            );\n            runState.recordIssue(testIndex, runState.failedTest.message, false, location);\n            runState.failedTest.complete = true;\n        }\n        runState.failedTest = {\n            testIndex: testIndex,\n            message: message,\n            file: file,\n            lineNumber: parseInt(lineNumber),\n            complete: false,\n        };\n    }\n\n    /** continue capturing error message */\n    private continueErrorMessage(message: string, runState: ITestRunState) {\n        // if we have a failed test message and it isn't complete\n        if (runState.failedTest && runState.failedTest.complete !== true) {\n            runState.failedTest.message += `\\n${message}`;\n            this.appendTestOutput(runState.failedTest.testIndex, message, runState);\n        } else {\n            this.appendTestOutput(undefined, message, runState);\n        }\n    }\n\n    /** Flag we have failed a test */\n    private failTest(\n        testIndex: number,\n        timing: { duration: number } | { timestamp: number },\n        runState: ITestRunState\n    ) {\n        if (runState.failedTest) {\n            const location = sourceLocationToVSCodeLocation(\n                runState.failedTest.file,\n                runState.failedTest.lineNumber\n            );\n            const message = runState.failedTest.message;\n            const diff = this.extractDiff(message);\n            runState.recordIssue(testIndex, message, false, location, diff);\n        } else {\n            runState.recordIssue(testIndex, \"Failed\", false);\n        }\n        runState.completed(testIndex, timing);\n        runState.failedTest = undefined;\n    }\n\n    /** Flag we have skipped a test */\n    private skipTest(testIndex: number, runState: ITestRunState) {\n        runState.skipped(testIndex);\n        runState.failedTest = undefined;\n    }\n\n    private appendTestOutput(testIndex: number | undefined, line: string, runState: ITestRunState) {\n        // Need to add back in the newlines since output was split for parsing.\n        runState.recordOutput(testIndex, `${line}\\r\\n`);\n    }\n\n    private extractDiff(message: string): TestIssueDiff | undefined {\n        const regex = /\\((.*)\\) is not .* to \\((.*)\\)/ms;\n        const match = message.match(regex);\n        if (match && match[1] !== match[2]) {\n            return {\n                actual: match[1],\n                expected: match[2],\n            };\n        }\n\n        return undefined;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as readline from \"readline\";\nimport { Readable } from \"stream\";\nimport {\n    INamedPipeReader,\n    UnixNamedPipeReader,\n    WindowsNamedPipeReader,\n} from \"./TestEventStreamReader\";\nimport { ITestRunState } from \"./TestRunState\";\nimport { TestClass } from \"../TestDiscovery\";\nimport { sourceLocationToVSCodeLocation } from \"../../utilities/utilities\";\nimport { exec } from \"child_process\";\nimport { lineBreakRegex } from \"../../utilities/tasks\";\n\n// All events produced by a swift-testing run will be one of these three types.\n// Detailed information about swift-testing's JSON schema is available here:\n// https://github.com/apple/swift-testing/blob/main/Documentation/ABI/JSON.md\nexport type SwiftTestEvent = MetadataRecord | TestRecord | EventRecord;\n\ninterface VersionedRecord {\n    version: number;\n}\n\ninterface MetadataRecord extends VersionedRecord {\n    kind: \"metadata\";\n    payload: Metadata;\n}\n\ninterface TestRecord extends VersionedRecord {\n    kind: \"test\";\n    payload: TestSuite | TestFunction;\n}\n\nexport type EventRecordPayload =\n    | RunStarted\n    | TestStarted\n    | TestEnded\n    | TestCaseStarted\n    | TestCaseEnded\n    | IssueRecorded\n    | TestSkipped\n    | RunEnded\n    | ValueAttached;\n\nexport interface EventRecord extends VersionedRecord {\n    kind: \"event\";\n    payload: EventRecordPayload;\n}\n\ninterface Metadata {\n    [key: string]: object; // Currently unstructured content\n}\n\ninterface TestBase {\n    id: string;\n    name: string;\n    _testCases?: TestCase[];\n    sourceLocation: SourceLocation;\n}\n\ninterface TestSuite extends TestBase {\n    kind: \"suite\";\n}\n\ninterface TestFunction extends TestBase {\n    kind: \"function\";\n    isParameterized: boolean;\n}\n\nexport interface TestCase {\n    id: string;\n    displayName: string;\n}\n\n// Event types\ninterface RunStarted {\n    kind: \"runStarted\";\n    messages: EventMessage[];\n}\n\ninterface RunEnded {\n    kind: \"runEnded\";\n    messages: EventMessage[];\n}\n\ninterface ValueAttached {\n    kind: \"_valueAttached\";\n    _attachment: {\n        path?: string;\n    };\n    testID: string;\n    messages: EventMessage[];\n}\n\ninterface Instant {\n    absolute: number;\n    since1970: number;\n}\n\ninterface BaseEvent {\n    instant: Instant;\n    messages: EventMessage[];\n    testID: string;\n}\n\ninterface TestCaseEvent {\n    sourceLocation: SourceLocation;\n    _testCase?: TestCase;\n}\n\ninterface TestStarted extends BaseEvent {\n    kind: \"testStarted\";\n}\n\ninterface TestEnded extends BaseEvent {\n    kind: \"testEnded\";\n}\n\ninterface TestCaseStarted extends BaseEvent, TestCaseEvent {\n    kind: \"testCaseStarted\";\n}\n\ninterface TestCaseEnded extends BaseEvent, TestCaseEvent {\n    kind: \"testCaseEnded\";\n}\n\ninterface TestSkipped extends BaseEvent {\n    kind: \"testSkipped\";\n}\n\ninterface IssueRecorded extends BaseEvent, TestCaseEvent {\n    kind: \"issueRecorded\";\n    issue: {\n        isKnown: boolean;\n        sourceLocation: SourceLocation;\n    };\n}\n\nexport enum TestSymbol {\n    default = \"default\",\n    skip = \"skip\",\n    passWithKnownIssue = \"passWithKnownIssue\",\n    fail = \"fail\",\n    pass = \"pass\",\n    difference = \"difference\",\n    warning = \"warning\",\n    details = \"details\",\n    attachment = \"attachment\",\n    none = \"none\",\n}\n\nexport interface EventMessage {\n    symbol: TestSymbol;\n    text: string;\n}\n\nexport interface SourceLocation {\n    _filePath: string;\n    line: number;\n    column: number;\n}\n\nexport class SwiftTestingOutputParser {\n    private completionMap = new Map<number, boolean>();\n    private testCaseMap = new Map<string, Map<string, TestCase>>();\n    private path?: string;\n\n    constructor(\n        public testRunStarted: () => void,\n        public addParameterizedTestCase: (testClass: TestClass, parentIndex: number) => void,\n        public onAttachment: (testIndex: number, path: string) => void\n    ) {}\n\n    /**\n     * Watches for test events on the named pipe at the supplied path.\n     * As events are read they are parsed and recorded in the test run state.\n     */\n    public async watch(\n        path: string,\n        runState: ITestRunState,\n        pipeReader?: INamedPipeReader\n    ): Promise<void> {\n        this.path = path;\n\n        // Creates a reader based on the platform unless being provided in a test context.\n        const reader = pipeReader ?? this.createReader(path);\n        const readlinePipe = new Readable({\n            read() {},\n        });\n\n        // Use readline to automatically chunk the data into lines,\n        // and then take each line and parse it as JSON.\n        const rl = readline.createInterface({\n            input: readlinePipe,\n            crlfDelay: Infinity,\n        });\n\n        rl.on(\"line\", line => this.parse(JSON.parse(line), runState));\n\n        void reader.start(readlinePipe);\n    }\n\n    /**\n     * Closes the FIFO pipe after a test run. This must be called at the\n     * end of a run regardless of the run's success or failure.\n     */\n    public async close() {\n        if (!this.path) {\n            return;\n        }\n\n        await new Promise<void>(resolve => {\n            exec(`echo '{}' > ${this.path}`, () => {\n                resolve();\n            });\n        });\n    }\n\n    /**\n     * Parses stdout of a test run looking for lines that were not captured by\n     * a JSON event and injecting them in to the test run output.\n     * @param chunk A chunk of stdout emitted during a test run.\n     */\n    public parseStdout(chunk: string, runState: ITestRunState) {\n        for (const line of chunk.split(lineBreakRegex)) {\n            if (line.trim().length > 0) {\n                runState.recordOutput(undefined, `${line}\\r\\n`);\n            }\n        }\n    }\n\n    private createReader(path: string): INamedPipeReader {\n        return process.platform === \"win32\"\n            ? new WindowsNamedPipeReader(path)\n            : new UnixNamedPipeReader(path);\n    }\n\n    private testName(id: string): string {\n        const nameMatcher = /^(.*\\(.*\\))\\/(.*)\\.swift:\\d+:\\d+$/;\n        const matches = id.match(nameMatcher);\n        return !matches ? id : matches[1];\n    }\n\n    private testCaseId(testId: string, testCaseId: string): string {\n        const testCase = this.testCaseMap.get(testId)?.get(testCaseId);\n        return testCase ? `${testId}/${this.idFromTestCase(testCase)}` : testId;\n    }\n\n    // Test cases do not have a unique ID if their arguments are not serializable\n    // with Codable. If they aren't, their id appears as `argumentIDs: nil`, and we\n    // fall back to using the testCase display name as the test case ID. This isn't\n    // ideal because its possible to have multiple test cases with the same display name,\n    // but until we have a better solution for identifying test cases it will have to do.\n    // SEE: rdar://119522099.\n    private idFromTestCase(testCase: TestCase): string {\n        return testCase.id === \"argumentIDs: nil\" ? testCase.displayName : testCase.id;\n    }\n\n    private idFromOptionalTestCase(testID: string, testCase?: TestCase): string {\n        return testCase\n            ? this.testCaseId(testID, this.idFromTestCase(testCase))\n            : this.testName(testID);\n    }\n\n    private parameterizedFunctionTestCaseToTestClass(\n        testId: string,\n        testCase: TestCase,\n        location: vscode.Location,\n        index: number\n    ): TestClass {\n        return {\n            id: this.testCaseId(testId, this.idFromTestCase(testCase)),\n            label: testCase.displayName,\n            tags: [],\n            children: [],\n            style: \"swift-testing\",\n            location: location,\n            disabled: true,\n            sortText: `${index}`.padStart(8, \"0\"),\n        };\n    }\n\n    private buildTestCaseMapForParameterizedTest(record: TestRecord) {\n        const map = new Map<string, TestCase>();\n        (record.payload._testCases ?? []).forEach(testCase => {\n            map.set(this.idFromTestCase(testCase), testCase);\n        });\n        this.testCaseMap.set(record.payload.id, map);\n    }\n\n    private getTestCaseIndex(runState: ITestRunState, testID: string): number {\n        const fullNameIndex = runState.getTestItemIndex(testID, undefined);\n        if (fullNameIndex === -1) {\n            return runState.getTestItemIndex(this.testName(testID), undefined);\n        }\n        return fullNameIndex;\n    }\n\n    /**\n     * Partitions a collection of messages in to issues and details about the issues.\n     * This is used to print the issues first, followed by the details.\n     */\n    private partitionIssueMessages(messages: EventMessage[]): {\n        issues: EventMessage[];\n        details: EventMessage[];\n    } {\n        return messages.reduce(\n            (buckets, message) => {\n                const key =\n                    message.symbol === \"details\" ||\n                    message.symbol === \"default\" ||\n                    message.symbol === \"none\"\n                        ? \"details\"\n                        : \"issues\";\n                return { ...buckets, [key]: [...buckets[key], message] };\n            },\n            {\n                issues: [],\n                details: [],\n            }\n        );\n    }\n\n    /*\n     * A multi line comment preceeding an issue will have a 'default' symbol for\n     * all lines except the first one. To match the swift-testing command line we\n     * should show no symbol on these lines.\n     */\n    private transformIssueMessageSymbols(messages: EventMessage[]): EventMessage[] {\n        return messages.map(message => ({\n            ...message,\n            symbol: message.symbol === \"default\" ? TestSymbol.none : message.symbol,\n        }));\n    }\n\n    private parse(item: SwiftTestEvent, runState: ITestRunState) {\n        if (\n            item.kind === \"test\" &&\n            item.payload.kind === \"function\" &&\n            item.payload.isParameterized &&\n            item.payload._testCases\n        ) {\n            // Store a map of [Test ID, [Test Case ID, TestCase]] so we can quickly\n            // map an event.payload.testID back to a test case.\n            this.buildTestCaseMapForParameterizedTest(item);\n\n            const testName = this.testName(item.payload.id);\n            const testIndex = runState.getTestItemIndex(testName, undefined);\n            // If a test has test cases it is paramterized and we need to notify\n            // the caller that the TestClass should be added to the vscode.TestRun\n            // before it starts.\n            item.payload._testCases\n                .map((testCase, index) =>\n                    this.parameterizedFunctionTestCaseToTestClass(\n                        item.payload.id,\n                        testCase,\n                        sourceLocationToVSCodeLocation(\n                            item.payload.sourceLocation._filePath,\n                            item.payload.sourceLocation.line,\n                            item.payload.sourceLocation.column\n                        ),\n                        index\n                    )\n                )\n                .flatMap(testClass => (testClass ? [testClass] : []))\n                .forEach(testClass => this.addParameterizedTestCase(testClass, testIndex));\n        } else if (item.kind === \"event\") {\n            if (item.payload.kind === \"runStarted\") {\n                // Notify the runner that we've recieved all the test cases and\n                // are going to start running tests now.\n                this.testRunStarted();\n                return;\n            } else if (item.payload.kind === \"testStarted\") {\n                const testName = this.testName(item.payload.testID);\n                const testIndex = runState.getTestItemIndex(testName, undefined);\n                runState.started(testIndex, item.payload.instant.absolute);\n                return;\n            } else if (item.payload.kind === \"testCaseStarted\") {\n                const testID = this.idFromOptionalTestCase(\n                    item.payload.testID,\n                    item.payload._testCase\n                );\n                const testIndex = this.getTestCaseIndex(runState, testID);\n                runState.started(testIndex, item.payload.instant.absolute);\n                return;\n            } else if (item.payload.kind === \"testSkipped\") {\n                const testName = this.testName(item.payload.testID);\n                const testIndex = runState.getTestItemIndex(testName, undefined);\n                runState.skipped(testIndex);\n                return;\n            } else if (item.payload.kind === \"issueRecorded\") {\n                const testID = this.idFromOptionalTestCase(\n                    item.payload.testID,\n                    item.payload._testCase\n                );\n                const testIndex = this.getTestCaseIndex(runState, testID);\n\n                const isKnown = item.payload.issue.isKnown;\n                const sourceLocation = item.payload.issue.sourceLocation;\n                const location = sourceLocationToVSCodeLocation(\n                    sourceLocation._filePath,\n                    sourceLocation.line,\n                    sourceLocation.column\n                );\n\n                const messages = this.transformIssueMessageSymbols(item.payload.messages);\n                const { issues, details } = this.partitionIssueMessages(messages);\n\n                // Order the details after the issue text.\n                const additionalDetails = details\n                    .map(message => MessageRenderer.render(message))\n                    .join(\"\\n\");\n\n                issues.forEach(message => {\n                    runState.recordIssue(\n                        testIndex,\n                        additionalDetails.length > 0\n                            ? `${MessageRenderer.render(message)}\\n${additionalDetails}`\n                            : MessageRenderer.render(message),\n                        isKnown,\n                        location\n                    );\n                });\n\n                if (item.payload._testCase && testID !== item.payload.testID) {\n                    const testIndex = this.getTestCaseIndex(runState, item.payload.testID);\n                    messages.forEach(message => {\n                        runState.recordIssue(testIndex, message.text, isKnown, location);\n                    });\n                }\n                return;\n            } else if (item.payload.kind === \"testEnded\") {\n                const testName = this.testName(item.payload.testID);\n                const testIndex = runState.getTestItemIndex(testName, undefined);\n\n                // When running a single test the testEnded and testCaseEnded events\n                // have the same ID, and so we'd end the same test twice.\n                if (this.completionMap.get(testIndex)) {\n                    return;\n                }\n                this.completionMap.set(testIndex, true);\n                runState.completed(testIndex, { timestamp: item.payload.instant.absolute });\n                return;\n            } else if (item.payload.kind === \"testCaseEnded\") {\n                const testID = this.idFromOptionalTestCase(\n                    item.payload.testID,\n                    item.payload._testCase\n                );\n                const testIndex = this.getTestCaseIndex(runState, testID);\n\n                // When running a single test the testEnded and testCaseEnded events\n                // have the same ID, and so we'd end the same test twice.\n                if (this.completionMap.get(testIndex)) {\n                    return;\n                }\n                this.completionMap.set(testIndex, true);\n                runState.completed(testIndex, { timestamp: item.payload.instant.absolute });\n                return;\n            } else if (item.payload.kind === \"_valueAttached\" && item.payload._attachment.path) {\n                const testID = this.idFromOptionalTestCase(item.payload.testID);\n                const testIndex = this.getTestCaseIndex(runState, testID);\n\n                this.onAttachment(testIndex, item.payload._attachment.path);\n                return;\n            }\n        }\n    }\n}\n\nexport class MessageRenderer {\n    /**\n     * Converts a swift-testing `EventMessage` to a printable string.\n     *\n     * @param message An event message, typically found on an `EventRecordPayload`.\n     * @returns A string representing the message.\n     */\n    static render(message: EventMessage): string {\n        return message.text;\n\n        // Currently VS Code doesn't support colorizing the output of issues\n        // shown inline in the editor. Until this is supported we just return\n        // the message text. Once it is supported we can use the following code:\n        // return `${SymbolRenderer.eventMessageSymbol(message.symbol)} ${MessageRenderer.colorize(message.symbol, message.text)}`;\n    }\n\n    private static colorize(symbolType: TestSymbol, message: string): string {\n        const ansiEscapeCodePrefix = \"\\u{001B}[\";\n        const resetANSIEscapeCode = `${ansiEscapeCodePrefix}0m`;\n        switch (symbolType) {\n            case TestSymbol.details:\n            case TestSymbol.skip:\n            case TestSymbol.difference:\n            case TestSymbol.passWithKnownIssue:\n                return `${ansiEscapeCodePrefix}90m${message}${resetANSIEscapeCode}`;\n            default:\n                return message;\n        }\n    }\n}\n\nexport class SymbolRenderer {\n    /**\n     * Converts a swift-testing symbol identifier in to a colorized unicode symbol.\n     *\n     * @param message An event message, typically found on an `EventRecordPayload`.\n     * @returns A string colorized with ANSI escape codes.\n     */\n    public static eventMessageSymbol(symbol: TestSymbol): string {\n        return this.colorize(symbol, this.symbol(symbol));\n    }\n\n    static ansiEscapeCodePrefix = \"\\u{001B}[\";\n    static resetANSIEscapeCode = `${SymbolRenderer.ansiEscapeCodePrefix}0m`;\n\n    // This is adapted from\n    // https://github.com/apple/swift-testing/blob/786ade71421eb1d8a9c1d99c902cf1c93096e7df/Sources/Testing/Events/Recorder/Event.Symbol.swift#L102\n    public static symbol(symbol: TestSymbol): string {\n        if (process.platform === \"win32\") {\n            switch (symbol) {\n                case TestSymbol.default:\n                    return \"\\u{25CA}\"; // Unicode: LOZENGE\n                case TestSymbol.skip:\n                case TestSymbol.passWithKnownIssue:\n                case TestSymbol.fail:\n                    return \"\\u{279C}\"; // Unicode: HEAVY ROUND-TIPPED RIGHTWARDS ARROW\n                case TestSymbol.pass:\n                    return \"\\u{221A}\"; // Unicode: SQUARE ROOT\n                case TestSymbol.difference:\n                    return \"\\u{00B1}\"; // Unicode: PLUS-MINUS SIGN\n                case TestSymbol.warning:\n                    return \"\\u{25B2}\"; // Unicode: BLACK UP-POINTING TRIANGLE\n                case TestSymbol.details:\n                    return \"\\u{2192}\"; // Unicode: RIGHTWARDS ARROW\n                case TestSymbol.attachment:\n                    return \"\\u{2399}\"; // Unicode: PRINT SCREEN SYMBOL\n                case TestSymbol.none:\n                    return \"\";\n            }\n        } else {\n            switch (symbol) {\n                case TestSymbol.default:\n                    return \"\\u{25C7}\"; // Unicode: WHITE DIAMOND\n                case TestSymbol.skip:\n                case TestSymbol.passWithKnownIssue:\n                case TestSymbol.fail:\n                    return \"\\u{279C}\"; // Unicode: HEAVY ROUND-TIPPED RIGHTWARDS ARROW\n                case TestSymbol.pass:\n                    return \"\\u{2714}\"; // Unicode: HEAVY CHECK MARK\n                case TestSymbol.difference:\n                    return \"\\u{00B1}\"; // Unicode: PLUS-MINUS SIGN\n                case TestSymbol.warning:\n                    return \"\\u{26A0}\\u{FE0E}\"; // Unicode: WARNING SIGN + VARIATION SELECTOR-15 (disable emoji)\n                case TestSymbol.details:\n                    return \"\\u{21B3}\"; // Unicode: DOWNWARDS ARROW WITH TIP RIGHTWARDS\n                case TestSymbol.attachment:\n                    return \"\\u{2399}\"; // Unicode: PRINT SCREEN SYMBOL\n                case TestSymbol.none:\n                    return \" \";\n            }\n        }\n    }\n\n    // This is adapted from\n    // https://github.com/apple/swift-testing/blob/786ade71421eb1d8a9c1d99c902cf1c93096e7df/Sources/Testing/Events/Recorder/Event.ConsoleOutputRecorder.swift#L164\n    private static colorize(symbolType: TestSymbol, symbol: string): string {\n        switch (symbolType) {\n            case TestSymbol.default:\n            case TestSymbol.details:\n            case TestSymbol.skip:\n            case TestSymbol.difference:\n            case TestSymbol.passWithKnownIssue:\n                return `${SymbolRenderer.ansiEscapeCodePrefix}90m${symbol}${SymbolRenderer.resetANSIEscapeCode}`;\n            case TestSymbol.pass:\n                return `${SymbolRenderer.ansiEscapeCodePrefix}92m${symbol}${SymbolRenderer.resetANSIEscapeCode}`;\n            case TestSymbol.fail:\n                return `${SymbolRenderer.ansiEscapeCodePrefix}91m${symbol}${SymbolRenderer.resetANSIEscapeCode}`;\n            case TestSymbol.warning:\n                return `${SymbolRenderer.ansiEscapeCodePrefix}93m${symbol}${SymbolRenderer.resetANSIEscapeCode}`;\n            case TestSymbol.attachment:\n                return `${SymbolRenderer.ansiEscapeCodePrefix}94m${symbol}${SymbolRenderer.resetANSIEscapeCode}`;\n            case TestSymbol.none:\n            default:\n                return symbol;\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs\";\nimport * as net from \"net\";\nimport { Readable } from \"stream\";\n\nexport interface INamedPipeReader {\n    start(readable: Readable): Promise<void>;\n}\n\n/**\n * Reads from a named pipe on Windows and forwards data to a `Readable` stream.\n * Note that the path must be in the Windows named pipe format of `\\\\.\\pipe\\pipename`.\n */\nexport class WindowsNamedPipeReader implements INamedPipeReader {\n    constructor(private path: string) {}\n\n    public async start(readable: Readable) {\n        return new Promise<void>((resolve, reject) => {\n            try {\n                const server = net.createServer(function (stream) {\n                    stream.on(\"data\", data => readable.push(data));\n                    stream.on(\"error\", () => server.close());\n                    stream.on(\"end\", function () {\n                        readable.push(null);\n                        server.close();\n                    });\n                });\n\n                server.listen(this.path, () => resolve());\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n}\n\n/**\n * Reads from a unix FIFO pipe and forwards data to a `Readable` stream.\n * Note that the pipe at the supplied path should be created with `mkfifo`\n * before calling `start()`.\n */\nexport class UnixNamedPipeReader implements INamedPipeReader {\n    constructor(private path: string) {}\n\n    public async start(readable: Readable) {\n        return new Promise<void>((resolve, reject) => {\n            fs.open(this.path, fs.constants.O_RDONLY, (err, fd) => {\n                if (err) {\n                    return reject(err);\n                }\n                try {\n                    // Create our own readable stream that handles backpressure.\n                    // Using a net.Socket to read the pipe has an 8kb internal buffer,\n                    // meaning we couldn't read from writes that were > 8kb.\n                    const pipe = fs.createReadStream(\"\", { fd });\n\n                    pipe.on(\"data\", data => {\n                        if (!readable.push(data)) {\n                            pipe.pause();\n                        }\n                    });\n\n                    readable.on(\"drain\", () => pipe.resume());\n                    pipe.on(\"error\", () => pipe.close());\n                    pipe.on(\"end\", () => {\n                        readable.push(null);\n                        fs.close(fd);\n                    });\n\n                    resolve();\n                } catch (error) {\n                    fs.close(fd, () => reject(error));\n                }\n            });\n        });\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { LaunchConfigType } from \"./debugAdapter\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\n\n/**\n * Factory class for building LoggingDebugAdapterTracker\n */\nexport class LoggingDebugAdapterTrackerFactory implements vscode.DebugAdapterTrackerFactory {\n    createDebugAdapterTracker(\n        session: vscode.DebugSession\n    ): vscode.ProviderResult<vscode.DebugAdapterTracker> {\n        return new LoggingDebugAdapterTracker(session.id);\n    }\n}\n\ninterface OutputEventBody {\n    category: string;\n    output: string;\n}\n\ninterface DebugMessage {\n    seq: number;\n    type: string;\n    event: string;\n    body: OutputEventBody;\n}\n\n/**\n * Register the LoggingDebugAdapterTrackerFactory with the VS Code debug adapter tracker\n * @returns A disposable to be disposed when the extension is deactivated\n */\nexport function registerLoggingDebugAdapterTracker(): vscode.Disposable {\n    // Register the factory for both lldb-dap and CodeLLDB since either could be used when\n    // resolving a Swift launch configuration.\n    const trackerFactory = new LoggingDebugAdapterTrackerFactory();\n    const subscriptions: vscode.Disposable[] = [\n        vscode.debug.registerDebugAdapterTrackerFactory(LaunchConfigType.CODE_LLDB, trackerFactory),\n        vscode.debug.registerDebugAdapterTrackerFactory(LaunchConfigType.LLDB_DAP, trackerFactory),\n    ];\n\n    // Return a disposable that cleans everything up.\n    return {\n        dispose() {\n            subscriptions.forEach(sub => sub.dispose());\n        },\n    };\n}\n\n/**\n * Debug Adapter tracker that tracks debugger output to stdout and stderr and returns it\n */\nexport class LoggingDebugAdapterTracker implements vscode.DebugAdapterTracker {\n    // keep a track of the logging debug trackers, so we can set the callback later on\n    private static debugSessionIdMap: { [id: string]: LoggingDebugAdapterTracker } = {};\n\n    private cb?: (output: string) => void;\n    private output: string[] = [];\n\n    constructor(public id: string) {\n        LoggingDebugAdapterTracker.debugSessionIdMap[id] = this;\n    }\n\n    static setDebugSessionCallback(\n        session: vscode.DebugSession,\n        outputChannel: SwiftOutputChannel,\n        cb: (log: string) => void\n    ) {\n        const loggingDebugAdapter = this.debugSessionIdMap[session.id];\n        if (loggingDebugAdapter) {\n            loggingDebugAdapter.cb = cb;\n            for (const o of loggingDebugAdapter.output) {\n                cb(o);\n            }\n            loggingDebugAdapter.output = [];\n        } else {\n            outputChannel.appendLine(\"Could not find debug adapter for session: \" + session.id);\n        }\n    }\n\n    /**\n     * The debug adapter has sent a Debug Adapter Protocol message to the editor. Check\n     * it is a output message and is not being sent to the console\n     */\n    onDidSendMessage(message: unknown): void {\n        const debugMessage = message as DebugMessage;\n        if (\n            !(\n                debugMessage &&\n                debugMessage.type === \"event\" &&\n                debugMessage.event === \"output\" &&\n                debugMessage.body.category !== \"console\"\n            )\n        ) {\n            return;\n        }\n        const output = debugMessage.body.output;\n        if (this.cb) {\n            this.cb(output);\n        } else {\n            this.output.push(output);\n        }\n    }\n\n    /**\n     * The debug adapter session is about to be stopped. Delete the session from\n     * the tracker\n     */\n    onWillStopSession?(): void {\n        delete LoggingDebugAdapterTracker.debugSessionIdMap[this.id];\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"../FolderContext\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { execSwift, poll } from \"../utilities/utilities\";\n\nexport interface SwiftOperationOptions {\n    // Should I show a status item\n    showStatusItem: boolean;\n    // Should I check if an instance of this task is already running\n    checkAlreadyRunning: boolean;\n    // log output\n    log?: string;\n}\n/** Swift operation to add to TaskQueue */\nexport interface SwiftOperation {\n    // options\n    options: SwiftOperationOptions;\n    // identifier for statusitem\n    statusItemId: vscode.Task | string;\n    // operation name\n    name: string;\n    // internally used identifier\n    id: string;\n    // is task a build operation\n    isBuildOperation: boolean;\n    // run operation\n    run(\n        workspaceContext: WorkspaceContext,\n        token: vscode.CancellationToken | undefined\n    ): Promise<number | undefined>;\n}\n\n/** Operation that wraps a vscode Task */\nexport class TaskOperation implements SwiftOperation {\n    constructor(\n        public task: vscode.Task,\n        public options: SwiftOperationOptions = {\n            showStatusItem: false,\n            checkAlreadyRunning: false,\n        }\n    ) {}\n\n    get name(): string {\n        return this.task.name;\n    }\n\n    get id(): string {\n        let scopeString: string;\n        if (\n            this.task.scope === vscode.TaskScope.Workspace ||\n            this.task.scope === vscode.TaskScope.Global\n        ) {\n            scopeString = vscode.TaskScope[this.task.scope];\n        } else if (this.task.scope) {\n            scopeString = `,${this.task.scope.name}`;\n        } else {\n            scopeString = \"*undefined*\";\n        }\n        return this.task.definition.args.join() + scopeString;\n    }\n\n    get statusItemId(): vscode.Task | string {\n        return this.task;\n    }\n\n    get isBuildOperation(): boolean {\n        return this.task.group === vscode.TaskGroup.Build;\n    }\n\n    run(\n        workspaceContext: WorkspaceContext,\n        token?: vscode.CancellationToken\n    ): Promise<number | undefined> {\n        if (token?.isCancellationRequested) {\n            return Promise.resolve(undefined);\n        }\n        workspaceContext.outputChannel.log(`Exec Task: ${this.task.detail ?? this.task.name}`);\n        return workspaceContext.tasks.executeTaskAndWait(this.task, token);\n    }\n}\n\n/** Operation that runs the swift executable and then parses the result */\nexport class SwiftExecOperation implements SwiftOperation {\n    constructor(\n        public args: string[],\n        public folderContext: FolderContext,\n        public name: string,\n        public options: SwiftOperationOptions,\n        public process: (stdout: string, stderr: string) => Promise<void> | void\n    ) {}\n\n    get id(): string {\n        return `${this.args.join()},${this.folderContext?.folder.path}`;\n    }\n\n    get statusItemId(): vscode.Task | string {\n        return `${this.name} (${this.folderContext.name})`;\n    }\n\n    get isBuildOperation(): boolean {\n        return false;\n    }\n\n    async run(): Promise<number | undefined> {\n        const { stdout, stderr } = await execSwift(\n            this.args,\n            this.folderContext.toolchain,\n            { cwd: this.folderContext.folder.fsPath },\n            this.folderContext\n        );\n        await this.process(stdout, stderr);\n        return 0;\n    }\n}\n\ninterface TaskQueueResult {\n    success?: number;\n    fail?: unknown;\n}\n\n/**\n * Operation added to queue.\n */\nclass QueuedOperation {\n    get id(): string {\n        return this.operation.id;\n    }\n    get showStatusItem(): boolean {\n        return this.operation.options.showStatusItem;\n    }\n    get log(): string | undefined {\n        return this.operation.options.log;\n    }\n\n    public promise?: Promise<number | undefined> = undefined;\n    constructor(\n        public operation: SwiftOperation,\n        public cb: (result: TaskQueueResult) => void,\n        public token?: vscode.CancellationToken\n    ) {}\n\n    run(workspaceContext: WorkspaceContext): Promise<number | undefined> {\n        return this.operation.run(workspaceContext, this.token);\n    }\n}\n\n/**\n * Task queue\n *\n * Queue swift task operations to be executed serially\n */\nexport class TaskQueue {\n    queue: QueuedOperation[];\n    activeOperation?: QueuedOperation;\n    workspaceContext: WorkspaceContext;\n    disabled: boolean;\n\n    constructor(private folderContext: FolderContext) {\n        this.queue = [];\n        this.workspaceContext = folderContext.workspaceContext;\n        this.activeOperation = undefined;\n        this.disabled = false;\n    }\n\n    /**\n     * Add operation to queue\n     * @param operation Operation to queue\n     * @param token Cancellation token\n     * @returns When queued operation is complete\n     */\n    queueOperation(\n        operation: SwiftOperation,\n        token?: vscode.CancellationToken\n    ): Promise<number | undefined> {\n        // do we already have a version of this operation in the queue. If so\n        // return the promise for when that operation is complete instead of adding\n        // a new operation\n        let queuedOperation = this.findQueuedOperation(operation);\n        if (queuedOperation && queuedOperation.promise !== undefined) {\n            return queuedOperation.promise;\n        }\n        // if checkAlreadyRunning is set then check the active operation is not the same\n        if (\n            operation.options.checkAlreadyRunning === true &&\n            this.activeOperation &&\n            this.activeOperation.promise &&\n            this.activeOperation.id === operation.id\n        ) {\n            return this.activeOperation.promise;\n        }\n\n        const promise = new Promise<number | undefined>((resolve, fail) => {\n            queuedOperation = new QueuedOperation(\n                operation,\n                result => {\n                    if (result.success !== undefined) {\n                        resolve(result.success);\n                    } else if (result.fail !== undefined) {\n                        fail(result.fail);\n                    } else {\n                        resolve(undefined);\n                    }\n                },\n                token\n            );\n            this.queue.push(queuedOperation);\n            void this.processQueue();\n        });\n        // if the last item does not have a promise then it is the queue\n        // entry we just added above and we should set its promise\n        if (this.queue.length > 0 && !this.queue[this.queue.length - 1].promise) {\n            this.queue[this.queue.length - 1].promise = promise;\n        }\n        return promise;\n    }\n\n    /** If there is no active operation then run the task at the top of the queue */\n    private async processQueue() {\n        if (!this.activeOperation) {\n            // get task from queue\n            const operation = this.queue.shift();\n\n            if (operation) {\n                //const task = operation.task;\n                this.activeOperation = operation;\n                // show active task status item\n                if (operation.showStatusItem === true) {\n                    this.workspaceContext.statusItem.start(operation.operation.statusItemId);\n                }\n                // wait while queue is disabled before running task\n                await this.waitWhileDisabled();\n                // log start\n                if (operation.log) {\n                    this.workspaceContext.outputChannel.log(\n                        `${operation.log}: starting ... `,\n                        this.folderContext.name\n                    );\n                }\n                operation\n                    .run(this.workspaceContext)\n                    .then(result => {\n                        // log result\n                        if (operation.log && !operation.token?.isCancellationRequested) {\n                            switch (result) {\n                                case 0:\n                                    this.workspaceContext.outputChannel.log(\n                                        `${operation.log}: ... done.`,\n                                        this.folderContext.name\n                                    );\n                                    break;\n                                default:\n                                    this.workspaceContext.outputChannel.log(\n                                        `${operation.log}: ... failed.`,\n                                        this.folderContext.name\n                                    );\n                                    break;\n                            }\n                        }\n                        this.finishTask(operation, { success: result });\n                    })\n                    .catch(error => {\n                        // log error\n                        if (operation.log) {\n                            this.workspaceContext.outputChannel.log(\n                                `${operation.log}: ${error}`,\n                                this.folderContext.name\n                            );\n                        }\n                        this.finishTask(operation, { fail: error });\n                    });\n            }\n        }\n    }\n\n    private finishTask(operation: QueuedOperation, result: TaskQueueResult) {\n        operation.cb(result);\n        if (operation.showStatusItem === true) {\n            this.workspaceContext.statusItem.end(operation.operation.statusItemId);\n        }\n        this.activeOperation = undefined;\n        void this.processQueue();\n    }\n\n    /** Return if we already have an operation in the queue */\n    findQueuedOperation(operation: SwiftOperation): QueuedOperation | undefined {\n        for (const queuedOperation of this.queue) {\n            if (queuedOperation.id === operation.id) {\n                return queuedOperation;\n            }\n        }\n    }\n\n    private async waitWhileDisabled() {\n        await poll(() => !this.disabled, 1000);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as xml2js from \"xml2js\";\nimport { ITestRunState } from \"./TestParsers/TestRunState\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\n\nexport interface TestResults {\n    tests: number;\n    failures: number;\n    errors: number;\n}\n\ninterface XUnitFailure {\n    $: { message?: string };\n}\n\ninterface XUnitTestCase {\n    $: { classname: string; name: string; time: number };\n    failure?: XUnitFailure[];\n}\n\ninterface XUnitTestSuite {\n    $: { name: string; errors: string; failures: string; tests: string; time: string };\n    testcase: XUnitTestCase[];\n}\n\ninterface XUnitTestSuites {\n    testsuite: XUnitTestSuite[];\n}\n\ninterface XUnit {\n    testsuites: XUnitTestSuites;\n}\n\nexport class TestXUnitParser {\n    constructor(private hasMultiLineParallelTestOutput: boolean) {}\n\n    async parse(\n        buffer: string,\n        runState: ITestRunState,\n        outputChannel: SwiftOutputChannel\n    ): Promise<TestResults | undefined> {\n        const xml = await xml2js.parseStringPromise(buffer);\n        try {\n            return await this.parseXUnit(xml, runState);\n        } catch (error) {\n            // ignore error\n            outputChannel.appendLine(`Error parsing xUnit output: ${error}`);\n            return undefined;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async parseXUnit(xUnit: XUnit, runState: ITestRunState): Promise<TestResults> {\n        // eslint-disable-next-line no-console\n        let tests = 0;\n        let failures = 0;\n        let errors = 0;\n        xUnit.testsuites.testsuite.forEach(testsuite => {\n            const suiteFailures = parseInt(testsuite.$.failures);\n            failures += suiteFailures;\n            tests = tests + parseInt(testsuite.$.tests);\n            errors += parseInt(testsuite.$.errors);\n\n            let className: string | undefined;\n            testsuite.testcase.forEach(testcase => {\n                className = testcase.$.classname;\n                const id = `${className}/${testcase.$.name}`;\n                const index = runState.getTestItemIndex(id, undefined);\n\n                // From 5.7 to 5.10 running with the --parallel option dumps the test results out\n                // to the console with no newlines, so it isn't possible to distinguish where errors\n                // begin and end. Consequently we can't record them, and so we manually mark them\n                // as passed or failed here with a manufactured issue.\n                if (!!testcase.failure && !this.hasMultiLineParallelTestOutput) {\n                    runState.recordIssue(\n                        index,\n                        testcase.failure.shift()?.$.message ?? \"Test Failed\",\n                        false\n                    );\n                }\n                runState.completed(index, { duration: testcase.$.time });\n            });\n\n            if (className !== undefined) {\n                if (className && suiteFailures === 0) {\n                    runState.passedSuite(className);\n                } else if (className) {\n                    runState.failedSuite(className);\n                }\n            }\n        });\n        return { tests: tests, failures: failures, errors: errors };\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\n/**\n * An implementation of `reduce()` that operates on a vscode.TestItemCollection,\n * which only exposes `forEach` for iterating its items\n */\nexport function reduceTestItemChildren<U>(\n    array: vscode.TestItemCollection,\n    callback: (accumulator: U, currentValue: vscode.TestItem) => U,\n    initialValue: U\n): U {\n    let accumulator = initialValue;\n    array.forEach(currentValue => {\n        accumulator = callback(accumulator, currentValue);\n    });\n    return accumulator;\n}\n\n/**\n * Returns a flattented, iterable collection of test items in the collection.\n */\nexport function flattenTestItemCollection(coll: vscode.TestItemCollection): vscode.TestItem[] {\n    const items: vscode.TestItem[] = [];\n    coll.forEach(item => {\n        items.push(item);\n        items.push(...flattenTestItemCollection(item.children));\n    });\n    return items;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { reduceTestItemChildren } from \"./TestUtils\";\n\ntype ProcessResult = {\n    testItems: vscode.TestItem[];\n    xcTestArgs: vscode.TestItem[];\n    swiftTestArgs: vscode.TestItem[];\n};\n\n/**\n * Given a `TestRunRequest`, produces the lists of\n * XCTests and swift-testing tests to run.\n */\nexport class TestRunArguments {\n    public testItems: vscode.TestItem[];\n    public xcTestArgs: string[];\n    public swiftTestArgs: string[];\n\n    constructor(request: vscode.TestRunRequest, isDebug: boolean) {\n        const { testItems, xcTestArgs, swiftTestArgs } = this.createTestLists(request, isDebug);\n        this.testItems = testItems;\n        this.xcTestArgs = this.annotateTestArgs(xcTestArgs, isDebug);\n        this.swiftTestArgs = this.annotateTestArgs(swiftTestArgs, isDebug);\n    }\n\n    public get hasXCTests(): boolean {\n        return this.xcTestArgs.length > 0;\n    }\n\n    public get hasSwiftTestingTests(): boolean {\n        return this.swiftTestArgs.length > 0;\n    }\n\n    /**\n     * Construct test item list from TestRequest\n     * @returns list of test items to run and list of test for XCTest arguments\n     */\n    private createTestLists(request: vscode.TestRunRequest, isDebug: boolean): ProcessResult {\n        const includes = request.include ?? [];\n        const excludes = request.exclude ?? [];\n        return includes.reduce(this.createTestItemReducer(includes, excludes, isDebug), {\n            testItems: this.createIncludeParentList(includes),\n            xcTestArgs: [],\n            swiftTestArgs: [],\n        });\n    }\n\n    /**\n     * For all the included tests we want to collect up a list of their\n     * parents so they are included in the final testItems list. Otherwise\n     * we'll get testStart/End events for testItems we have no record of.\n     */\n    private createIncludeParentList(includes: readonly vscode.TestItem[]): vscode.TestItem[] {\n        const parents = includes.reduce((map, include) => {\n            let parent = include.parent;\n            while (parent) {\n                map.set(parent.id, parent);\n                parent = parent.parent;\n            }\n            return map;\n        }, new Map<string, vscode.TestItem>());\n        return Array.from(parents.values());\n    }\n\n    /**\n     * Converts a list of TestItems to a regex test item ID. Depending on the TestItem's\n     * tags and whether it is a debug run the ID is converted to a regex pattern that will\n     * match the correct tests when passed to the `--filter` argument of `swift test`.\n     */\n    private annotateTestArgs(testArgs: vscode.TestItem[], isDebug: boolean): string[] {\n        return testArgs.map(arg => {\n            const isTestTarget = !!arg.tags.find(tag => tag.id === \"test-target\");\n            if (isTestTarget) {\n                return `${arg.id}.*`;\n            }\n            const isXCTest = !!arg.tags.find(tag => tag.id === \"XCTest\");\n            const hasChildren = arg.children.size > 0;\n            if (isXCTest) {\n                const terminator = hasChildren ? \"/\" : \"$\";\n                // Debugging XCTests requires exact matches, so we don't need a trailing terminator.\n                return isDebug ? arg.id : `${arg.id}${terminator}`;\n            } else if (hasChildren) {\n                // Append a trailing slash to match a suite name exactly.\n                // This prevents TestTarget.MySuite matching TestTarget.MySuite2.\n                return `${arg.id}/`;\n            }\n            return arg.id;\n        });\n    }\n\n    private createTestItemReducer(\n        include: readonly vscode.TestItem[],\n        exclude: readonly vscode.TestItem[],\n        isDebug: boolean\n    ): (previousValue: ProcessResult, testItem: vscode.TestItem) => ProcessResult {\n        return (previousValue, testItem) => {\n            const { testItems, swiftTestArgs, xcTestArgs } = this.processTestItem(\n                testItem,\n                include,\n                exclude,\n                isDebug\n            );\n\n            // If no children were added we can skip adding this parent.\n            if (xcTestArgs.length + swiftTestArgs.length === 0) {\n                return previousValue;\n            } else if (this.itemContainsAllArgs(testItem, xcTestArgs, swiftTestArgs)) {\n                // If we're including every chlid in the parent, we can simplify the\n                // arguments and just use the parent\n                const { xcTestResult, swiftTestResult } = this.simplifyTestArgs(\n                    testItem,\n                    xcTestArgs,\n                    swiftTestArgs,\n                    isDebug\n                );\n\n                return {\n                    testItems: [...previousValue.testItems, ...testItems],\n                    xcTestArgs: [...previousValue.xcTestArgs, ...xcTestResult],\n                    swiftTestArgs: [...previousValue.swiftTestArgs, ...swiftTestResult],\n                };\n            } else {\n                // If we've only added some of the children the append to our test list\n                return {\n                    testItems: [...previousValue.testItems, ...testItems],\n                    swiftTestArgs: [...previousValue.swiftTestArgs, ...swiftTestArgs],\n                    xcTestArgs: [...previousValue.xcTestArgs, ...xcTestArgs],\n                };\n            }\n        };\n    }\n\n    private itemContainsAllArgs(\n        testItem: vscode.TestItem,\n        xcTestArgs: vscode.TestItem[],\n        swiftTestArgs: vscode.TestItem[]\n    ): boolean {\n        return (\n            testItem.children.size > 0 &&\n            xcTestArgs.length + swiftTestArgs.length === testItem.children.size\n        );\n    }\n\n    private simplifyTestArgs(\n        testItem: vscode.TestItem,\n        xcTestArgs: vscode.TestItem[],\n        swiftTestArgs: vscode.TestItem[],\n        isDebug: boolean\n    ): { xcTestResult: vscode.TestItem[]; swiftTestResult: vscode.TestItem[] } {\n        // If we've worked all the way up to a test target, it may have both swift-testing\n        // and XCTests.\n        const isTestTarget = !!testItem.tags.find(tag => tag.id === \"test-target\");\n\n        if (isTestTarget) {\n            // We cannot simplify away test suites leaving only the target if we are debugging,\n            // since the exact names of test suites to run need to be passed to the xctest binary.\n            // It will not debug all tests with only the target name.\n            if (isDebug) {\n                return {\n                    xcTestResult: xcTestArgs,\n                    swiftTestResult: swiftTestArgs,\n                };\n            }\n            return {\n                // Add a trailing .* to match a test target name exactly.\n                // This prevents TestTarget matching TestTarget2.\n                xcTestResult: xcTestArgs.length > 0 ? [testItem] : [],\n                swiftTestResult: swiftTestArgs.length > 0 ? [testItem] : [],\n            };\n        }\n\n        // If we've added all the children to the list of arguments, just add\n        // the parent instead of each individual child. This crafts a minimal set\n        // of test/suites that run all the test cases requested with the smallest list\n        // of arguments. The testItem has to have a parent to perform this optimization.\n        // If it does not we break the ability to run both swift testing tests and XCTests\n        // in the same run, since test targets can have both types of tests in them.\n        const isXCTest = !!testItem.tags.find(tag => tag.id === \"XCTest\");\n        return {\n            xcTestResult: isXCTest ? [testItem] : [],\n            swiftTestResult: !isXCTest ? [testItem] : [],\n        };\n    }\n\n    private processTestItem(\n        testItem: vscode.TestItem,\n        include: readonly vscode.TestItem[],\n        exclude: readonly vscode.TestItem[],\n        isDebug: boolean\n    ): ProcessResult {\n        // Skip tests the user asked to exclude\n        if (exclude.includes(testItem)) {\n            return {\n                testItems: [],\n                xcTestArgs: [],\n                swiftTestArgs: [],\n            };\n        }\n\n        const testItems: vscode.TestItem[] = [];\n        const xcTestArgs: vscode.TestItem[] = [];\n        const swiftTestArgs: vscode.TestItem[] = [];\n\n        // If this test item is included or we are including everything\n        if (include.includes(testItem) || include.length === 0) {\n            const isXCTest = testItem.tags.find(tag => tag.id === \"XCTest\");\n            const isSwiftTestingTest = testItem.tags.find(tag => tag.id === \"swift-testing\");\n\n            // Collect up a list of all the test items involved in the run\n            // from the TestExplorer tree and store them in `testItems`. Exclude\n            // parameterized test result entries from this list (they don't have a uri).\n            if (testItem.uri !== undefined || isXCTest) {\n                testItems.push(testItem);\n\n                // Only add leaf items to the list of arguments to pass to the test runner.\n                if (this.isLeafTestItem(testItem, !!isXCTest)) {\n                    if (isXCTest) {\n                        xcTestArgs.push(testItem);\n                    } else if (isSwiftTestingTest) {\n                        swiftTestArgs.push(testItem);\n                    }\n                }\n            }\n        }\n\n        return reduceTestItemChildren(\n            testItem.children,\n            this.createTestItemReducer([], exclude, isDebug),\n            {\n                testItems,\n                xcTestArgs,\n                swiftTestArgs,\n            }\n        );\n    }\n\n    private isLeafTestItem(testItem: vscode.TestItem, isXCTest: boolean) {\n        if (isXCTest) {\n            return testItem.children.size === 0;\n        }\n\n        let result = true;\n        testItem.children.forEach(child => {\n            if (child.uri) {\n                result = false;\n            }\n        });\n        return result;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { tmpdir } from \"os\";\nimport * as path from \"path\";\nimport * as fs from \"fs/promises\";\nimport { randomString } from \"./utilities\";\nimport { Disposable } from \"vscode\";\n\nexport class TemporaryFolder {\n    private constructor(public path: string) {}\n\n    public createDisposableFileCollection(): DisposableFileCollection {\n        return new DisposableFileCollection(this);\n    }\n    /**\n     * Return random filename inside temporary folder\n     * @param prefix Prefix of file\n     * @param extension File extension\n     * @returns Filename\n     */\n    filename(prefix: string, extension?: string): string {\n        let filename: string;\n        if (extension) {\n            filename = `${prefix}${randomString(16)}.${extension}`;\n        } else {\n            filename = `${prefix}${randomString(16)}`;\n        }\n        return path.join(this.path, filename);\n    }\n\n    /**\n     * Generate temporary filename, run a process and delete file with filename once that\n     * process has finished\n     *\n     * @param prefix File prefix\n     * @param extension File extension\n     * @param process Process to run\n     * @returns return value of process\n     */\n    async withTemporaryFile<Return>(\n        extension: string,\n        process: (filename: string) => Promise<Return>\n    ): Promise<Return> {\n        const filename = this.filename(\"\", extension);\n        return TemporaryFolder.withNamedTemporaryFile(filename, () => process(filename));\n    }\n\n    /**\n     * Create Temporary folder\n     * @returns Temporary folder class\n     */\n    static async create(): Promise<TemporaryFolder> {\n        const tmpPath = path.join(tmpdir(), \"vscode-swift\");\n        try {\n            await fs.mkdir(tmpPath);\n        } catch {\n            // ignore error. It is most likely directory exists already\n        }\n        return new TemporaryFolder(tmpPath);\n    }\n\n    /**\n     * Run a process and delete file with filename once that\n     * process has finished.\n     *\n     * @param path Full file path to a temporary file\n     * @param process Process to run\n     * @returns return value of process\n     */\n    static async withNamedTemporaryFile<Return>(\n        path: string,\n        process: () => Promise<Return>\n    ): Promise<Return> {\n        return this.withNamedTemporaryFiles([path], process);\n    }\n\n    /**\n     * Run a process and delete the supplied files once that\n     * process has finished.\n     *\n     * @param paths File paths to temporary files\n     * @param process Process to run\n     * @returns return value of process\n     */\n    static async withNamedTemporaryFiles<Return>(\n        paths: string[],\n        process: () => Promise<Return>\n    ): Promise<Return> {\n        try {\n            const rt = await process();\n            for (const path of paths) {\n                await fs.rm(path, { force: true });\n            }\n            return rt;\n        } catch (error) {\n            for (const path of paths) {\n                await fs.rm(path, { force: true });\n            }\n            throw error;\n        }\n    }\n}\n\nexport class DisposableFileCollection implements Disposable {\n    private files: string[] = [];\n\n    constructor(private folder: TemporaryFolder) {}\n\n    public file(prefix: string, extension?: string): string {\n        const filename = this.folder.filename(prefix, extension);\n        this.files.push(filename);\n        return filename;\n    }\n\n    async dispose() {\n        for (const file of this.files) {\n            await fs.rm(file, { force: true });\n        }\n        this.files = [];\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { SwiftPackage, TargetType } from \"../SwiftPackage\";\nimport { LSPTestItem } from \"../sourcekit-lsp/extensions\";\nimport { reduceTestItemChildren } from \"./TestUtils\";\n\n/** Test class definition */\nexport interface TestClass extends Omit<Omit<LSPTestItem, \"location\">, \"children\"> {\n    location: vscode.Location | undefined;\n    children: TestClass[];\n}\n\n/**\n * Tag that denotes TestItems should be runnable in the VS Code UI.\n * Test items that do not have this tag will not have the green \"run test\" triangle button.\n */\nexport const runnableTag = new vscode.TestTag(\"runnable\");\n\n/**\n * Tags that should not be duplicated on TestItems when applying parent tags to children.\n */\nconst defaultTags = [runnableTag.id, \"test-target\", \"XCTest\", \"swift-testing\"];\n\n/**\n * Update Test Controller TestItems based off array of TestClasses.\n *\n * The function creates the TestTargets based off the test targets in the Swift\n * Package\n * @param testController Test controller\n * @param swiftPackage A swift package containing test targets\n * @param testClasses Array of test classes\n */\nexport async function updateTestsFromClasses(\n    testController: vscode.TestController,\n    swiftPackage: SwiftPackage,\n    testItems: TestClass[]\n) {\n    const targets = await swiftPackage.getTargets(TargetType.test);\n    const results: TestClass[] = [];\n    for (const target of targets) {\n        const filteredItems: TestClass[] = [];\n        for (const testItem of testItems) {\n            if (\n                testItem.location &&\n                (await swiftPackage.getTarget(testItem.location.uri.fsPath)) === target\n            ) {\n                filteredItems.push(testItem);\n            }\n        }\n        results.push({\n            id: target.c99name,\n            label: target.name,\n            children: filteredItems,\n            location: undefined,\n            disabled: false,\n            style: \"test-target\",\n            tags: [],\n        });\n    }\n    updateTests(testController, results);\n}\n\nexport function updateTestsForTarget(\n    testController: vscode.TestController,\n    testTarget: { id: string; label: string },\n    testItems: TestClass[],\n    filterFile?: vscode.Uri\n) {\n    // Because swift-testing suites can be defined through nested extensions the tests\n    // provided might not be directly parented to the test target. For instance, the\n    // target might be `Foo`, and one of the child `testItems` might be `Foo.Bar/Baz`.\n    // If we simply attach the `testItems` to the root test target then the intermediate\n    // suite `Bar` will be dropped. To avoid this, we syntheize the intermediate children\n    // just like we synthesize the test target.\n    function synthesizeChildren(testItem: TestClass): TestClass {\n        // Only Swift Testing tests can be nested in a way that requires synthesis.\n        if (testItem.style === \"XCTest\") {\n            return testItem;\n        }\n\n        const item = { ...testItem };\n        // To determine if any root level test items are missing a parent we check how many\n        // components there are in the ID. If there are more than one (the test target) then\n        // we synthesize all the intermediary test items.\n        const idComponents = testItem.id.split(/\\.|\\//);\n        idComponents.pop(); // Remove the last component to get the parent ID components\n        if (idComponents.length > 1) {\n            let newId = idComponents.slice(0, 2).join(\".\");\n            const remainingIdComponents = idComponents.slice(2);\n            if (remainingIdComponents.length) {\n                newId += \"/\" + remainingIdComponents.join(\"/\");\n            }\n            return synthesizeChildren({\n                id: newId,\n                label: idComponents[idComponents.length - 1],\n                children: [item],\n                location: undefined,\n                disabled: false,\n                style: item.style,\n                tags: item.tags,\n            });\n        }\n        return item;\n    }\n\n    const testTargetClass: TestClass = {\n        id: testTarget.id,\n        label: testTarget.label,\n        children: testItems.map(synthesizeChildren),\n        location: undefined,\n        disabled: false,\n        style: \"test-target\",\n        tags: [],\n    };\n    updateTests(testController, [testTargetClass], filterFile);\n}\n\n/**\n * Update Test Controller TestItems based off array of TestTargets\n * @param testController Test controller\n * @param testItems Array of TestClasses\n * @param filterFile Filter test deletion just for tests in the one file\n */\nexport function updateTests(\n    testController: vscode.TestController,\n    testItems: TestClass[],\n    filterFile?: vscode.Uri\n) {\n    const incomingTestsLookup = createIncomingTestLookup(testItems);\n    function removeOldTests(testItem: vscode.TestItem) {\n        testItem.children.forEach(child => removeOldTests(child));\n\n        // If the existing item isn't in the map\n        if (\n            !incomingTestsLookup.get(testItem.id) &&\n            (!filterFile || testItem.uri?.fsPath === filterFile.fsPath)\n        ) {\n            const collection = testItem.parent ? testItem.parent.children : testController.items;\n\n            if (\n                testItem.children.size === 0 ||\n                testItemHasParameterizedTestResultChildren(testItem)\n            ) {\n                collection.delete(testItem.id);\n            }\n        }\n    }\n\n    // Skip removing tests if the test explorer is empty\n    if (testController.items.size !== 0) {\n        testController.items.forEach(removeOldTests);\n    }\n\n    // Add/update the top level test items. upsertTestItem will descend the tree of children adding them as well.\n    testItems.forEach(testItem => {\n        upsertTestItem(testController, testItem);\n    });\n}\n\n/**\n * Returns true if all children have no URI.\n * This indicates the test item is parameterized and the children are the results.\n */\nfunction testItemHasParameterizedTestResultChildren(testItem: vscode.TestItem) {\n    return (\n        testItem.children.size > 0 &&\n        reduceTestItemChildren(\n            testItem.children,\n            (acc, child) => acc || child.uri !== undefined,\n            false\n        ) === false\n    );\n}\n\n/**\n * Create a lookup of the incoming tests we can compare to the existing list of tests\n * to produce a list of tests that are no longer present. If a filterFile is specified we\n * scope this work to just the tests inside that file.\n */\nfunction createIncomingTestLookup(\n    collection: TestClass[],\n    filterFile?: vscode.Uri\n): Map<string, TestClass> {\n    const dictionary = new Map<string, TestClass>();\n    function traverse(testItem: TestClass) {\n        // If we are filtering based on tests being one file and this\n        // function isn't in the file then ignore\n        if (!filterFile || testItem.location?.uri.fsPath === filterFile.fsPath) {\n            dictionary.set(testItem.id, testItem);\n            testItem.children.forEach(item => traverse(item));\n        }\n    }\n    collection.forEach(item => traverse(item));\n    return dictionary;\n}\n\n/**\n * Merges the TestItems recursively from the `existingItem` in to the `newItem`\n */\nfunction deepMergeTestItemChildren(existingItem: vscode.TestItem, newItem: vscode.TestItem) {\n    reduceTestItemChildren(\n        existingItem.children,\n        (collection, testItem: vscode.TestItem) => {\n            const existing = collection.get(testItem.id);\n            if (existing) {\n                deepMergeTestItemChildren(existing, testItem);\n            }\n            collection.add(testItem);\n            return collection;\n        },\n        newItem.children\n    );\n}\n\n/**\n * Given a `TestClass` adds the TestClasses tags to each of its children.\n * Does not apply recursively.\n * @param testClass A test class whose tags should be propagated to its children.\n * @returns A `TestClass` whose children include the parent's tags.\n */\nfunction applyTagsToChildren(testClass: TestClass): TestClass {\n    const tagsToAdd = testClass.tags.filter(tag => !defaultTags.includes(tag.id));\n    return {\n        ...testClass,\n        children: testClass.children.map(child => ({\n            ...child,\n            tags: [...child.tags, ...tagsToAdd],\n        })),\n    };\n}\n\n/**\n * Updates the existing `vscode.TestItem` if it exists with the same ID as the `TestClass`,\n * otherwise creates an add a new one. The location on the returned vscode.TestItem is always updated.\n */\nexport function upsertTestItem(\n    testController: vscode.TestController,\n    testItem: TestClass,\n    parent?: vscode.TestItem\n): vscode.TestItem {\n    const collection = parent?.children ?? testController.items;\n    const existingItem = collection.get(testItem.id);\n    let newItem: vscode.TestItem;\n\n    // Unfortunately TestItem.uri is readonly so if the location of the test has changed\n    // we need to create a new TestItem. If the location of the new test item is undefined\n    // then don't create a new item and use the old one.\n    if (\n        existingItem === undefined ||\n        (existingItem && testItem.location?.uri && existingItem.uri !== testItem.location.uri)\n    ) {\n        newItem = testController.createTestItem(\n            testItem.id,\n            testItem.label,\n            testItem.location?.uri\n        );\n\n        // We want to keep existing children if they exist.\n        if (existingItem) {\n            const existingChildren: vscode.TestItem[] = [];\n            existingItem.children.forEach(child => {\n                existingChildren.push(child);\n            });\n            newItem.children.replace(existingChildren);\n        }\n    } else {\n        newItem = existingItem;\n    }\n\n    // At this point all the test items that should have been deleted are out of the tree.\n    // Its possible we're dropping a whole branch of test items on top of an existing one,\n    // and we want to merge these branches instead of the new one replacing the existing one.\n    if (existingItem) {\n        deepMergeTestItemChildren(existingItem, newItem);\n    }\n\n    // In VS Code tags are not inherited automatically, so if we're recieving a suite we need\n    // to set a suites tag on all of its children. Because test items are added top down the children\n    // aren't updated recursively all at once, but rather one level at a time which then propagages\n    // parent tags down the tree as children are upserted.\n    testItem = applyTagsToChildren(testItem);\n\n    const hasTestStyleTag = testItem.tags.find(tag => tag.id === testItem.style);\n\n    // Manually add the test style as a tag if it isn't already in the tags list.\n    // This lets the user filter by test type.\n    newItem.tags = hasTestStyleTag\n        ? [...testItem.tags]\n        : [{ id: testItem.style }, ...testItem.tags];\n\n    if (testItem.disabled === false) {\n        newItem.tags = [...newItem.tags, runnableTag];\n    }\n\n    newItem.label = testItem.label;\n    newItem.range = testItem.location?.range;\n\n    if (testItem.sortText) {\n        newItem.sortText = testItem.sortText;\n    } else if (!testItem.location) {\n        // TestItems without a location should be sorted to the top.\n        const zeros = ``.padStart(8, \"0\");\n        newItem.sortText = `${zeros}:${testItem.label}`;\n    }\n\n    // Performs an upsert based on whether a test item exists in the collection with the same id.\n    // If no parent is provided operate on the testController's root items.\n    collection.add(newItem);\n\n    testItem.children.forEach(child => {\n        upsertTestItem(testController, child, newItem);\n    });\n\n    return newItem;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as lcov from \"lcov-parse\";\nimport * as asyncfs from \"fs/promises\";\nimport * as path from \"path\";\nimport { Writable } from \"stream\";\nimport { promisify } from \"util\";\nimport configuration from \"../configuration\";\nimport { FolderContext } from \"../FolderContext\";\nimport { execFileStreamOutput } from \"../utilities/utilities\";\nimport { BuildFlags } from \"../toolchain/BuildFlags\";\nimport { TestLibrary } from \"../TestExplorer/TestRunner\";\nimport { DisposableFileCollection } from \"../utilities/tempFolder\";\nimport { TargetType } from \"../SwiftPackage\";\nimport { TestingConfigurationFactory } from \"../debugger/buildConfig\";\nimport { TestKind } from \"../TestExplorer/TestKind\";\n\ninterface CodeCovFile {\n    testLibrary: TestLibrary;\n    path: string;\n}\n\nexport class TestCoverage {\n    private lcovFiles: CodeCovFile[] = [];\n    private lcovTmpFiles: DisposableFileCollection;\n    private coverageDetails = new Map<vscode.Uri, vscode.FileCoverageDetail[]>();\n\n    constructor(private folderContext: FolderContext) {\n        const tmpFolder = folderContext.workspaceContext.tempFolder;\n        this.lcovTmpFiles = tmpFolder.createDisposableFileCollection();\n    }\n\n    /**\n     * Returns coverage information for the suppplied URI.\n     */\n    public loadDetailedCoverage(uri: vscode.Uri) {\n        return this.coverageDetails.get(uri) || [];\n    }\n\n    /**\n     * Captures the coverage data after an individual test binary has been run.\n     * After the test run completes then the coverage is merged.\n     */\n    public async captureCoverage(testLibrary: TestLibrary) {\n        const buildDirectory = BuildFlags.buildDirectoryFromWorkspacePath(\n            this.folderContext.folder.fsPath,\n            true\n        );\n        const result = await asyncfs.readFile(`${buildDirectory}/debug/codecov/default.profdata`);\n        const filename = this.lcovTmpFiles.file(testLibrary, \"profdata\");\n        await asyncfs.writeFile(filename, result);\n        this.lcovFiles.push({ testLibrary, path: filename });\n    }\n\n    /**\n     * Once all test binaries have been run compute the coverage information and\n     * associate it with the test run.\n     */\n    async computeCoverage(testRun: vscode.TestRun) {\n        const lcovFiles = await this.computeLCOVCoverage();\n        if (lcovFiles.length > 0) {\n            for (const sourceFileCoverage of lcovFiles) {\n                const uri = vscode.Uri.file(sourceFileCoverage.file);\n                const detailedCoverage: vscode.FileCoverageDetail[] = [];\n                for (const lineCoverage of sourceFileCoverage.lines.details) {\n                    const statementCoverage = new vscode.StatementCoverage(\n                        lineCoverage.hit,\n                        new vscode.Position(lineCoverage.line - 1, 0)\n                    );\n                    detailedCoverage.push(statementCoverage);\n                }\n\n                const coverage = vscode.FileCoverage.fromDetails(uri, detailedCoverage);\n                testRun.addCoverage(coverage);\n                this.coverageDetails.set(uri, detailedCoverage);\n            }\n        }\n        await this.lcovTmpFiles.dispose();\n    }\n\n    /**\n     * Merges multiple `.profdata` files into a single `.profdata` file.\n     */\n    private async mergeProfdata(profDataFiles: string[]) {\n        const filename = this.lcovTmpFiles.file(\"merged\", \"profdata\");\n        const toolchain = this.folderContext.toolchain;\n        const llvmProfdata = toolchain.getToolchainExecutable(\"llvm-profdata\");\n        await execFileStreamOutput(\n            llvmProfdata,\n            [\"merge\", \"-sparse\", \"-o\", filename, ...profDataFiles],\n            null,\n            null,\n            null,\n            {\n                env: process.env,\n                maxBuffer: 16 * 1024 * 1024,\n            },\n            this.folderContext\n        );\n\n        return filename;\n    }\n\n    private async computeLCOVCoverage(): Promise<lcov.LcovFile[]> {\n        if (this.lcovFiles.length === 0) {\n            return [];\n        }\n\n        try {\n            // Merge all the profdata files from each test binary.\n            const mergedProfileFile = await this.mergeProfdata(\n                this.lcovFiles.map(({ path }) => path)\n            );\n\n            // Then export to the final lcov file that\n            // can be processed and fed to VS Code.\n            const lcovData = await this.exportProfdata(\n                this.lcovFiles.map(({ testLibrary }) => testLibrary),\n                mergedProfileFile\n            );\n\n            return await this.loadLcov(lcovData.toString(\"utf8\"));\n        } catch (error) {\n            return [];\n        }\n    }\n\n    /**\n     * Exports a `.profdata` file using `llvm-cov export`, returning the result as a `Buffer`.\n     */\n    private async exportProfdata(types: TestLibrary[], mergedProfileFile: string): Promise<Buffer> {\n        const coveredBinaries = new Set<string>();\n        if (types.includes(TestLibrary.xctest)) {\n            let xcTestBinary = await TestingConfigurationFactory.testExecutableOutputPath(\n                this.folderContext,\n                TestKind.coverage,\n                TestLibrary.xctest\n            );\n            if (process.platform === \"darwin\") {\n                const packageName = await this.folderContext.swiftPackage.name;\n                xcTestBinary += `/Contents/MacOS/${packageName}PackageTests`;\n            }\n            coveredBinaries.add(xcTestBinary);\n        }\n\n        if (types.includes(TestLibrary.swiftTesting)) {\n            const swiftTestBinary = await TestingConfigurationFactory.testExecutableOutputPath(\n                this.folderContext,\n                TestKind.coverage,\n                TestLibrary.swiftTesting\n            );\n            coveredBinaries.add(swiftTestBinary);\n        }\n\n        let buffer = Buffer.alloc(0);\n        const writableStream = new Writable({\n            write(chunk, _encoding, callback) {\n                buffer = Buffer.concat([buffer, chunk]);\n                callback();\n            },\n        });\n\n        await execFileStreamOutput(\n            this.folderContext.toolchain.getToolchainExecutable(\"llvm-cov\"),\n            [\n                \"export\",\n                \"--format\",\n                \"lcov\",\n                ...coveredBinaries,\n                `--ignore-filename-regex=${await this.ignoredFilenamesRegex()}`,\n                `--instr-profile=${mergedProfileFile}`,\n            ],\n            writableStream,\n            writableStream,\n            null,\n            {\n                env: { ...process.env, ...configuration.swiftEnvironmentVariables },\n                maxBuffer: 16 * 1024 * 1024,\n            },\n            this.folderContext\n        );\n\n        return buffer;\n    }\n\n    /**\n     * Constructs a string containing all the paths to exclude from the code coverage report.\n     * This should exclude everything in the `.build` folder as well as all the test targets.\n     */\n    private async ignoredFilenamesRegex(): Promise<string> {\n        const basePath = this.folderContext.folder.path;\n        const buildFolder = path.join(basePath, \".build\");\n        const snippetsFolder = path.join(basePath, \"Snippets\");\n        const pluginsFolder = path.join(basePath, \"Plugins\");\n        const testTargets = (await this.folderContext.swiftPackage.getTargets(TargetType.test)).map(\n            target => path.join(basePath, target.path)\n        );\n\n        const excluded = configuration.excludeFromCodeCoverage.map(target =>\n            path.isAbsolute(target) ? target : path.join(basePath, target)\n        );\n\n        return [buildFolder, snippetsFolder, pluginsFolder, ...testTargets, ...excluded].join(\"|\");\n    }\n\n    private async loadLcov(lcovContents: string): Promise<lcov.LcovFile[]> {\n        return promisify(lcov.source)(lcovContents).then(value => value ?? []);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\n/**\n * An implementation of `vscode.CancellationToken` that monitors multiple child\n * tokens and emits on the `onCancellationRequested` event when any of them are cancelled.\n */\nexport class CompositeCancellationToken implements vscode.CancellationToken, vscode.Disposable {\n    private tokens: vscode.CancellationToken[] = [];\n    private disposables: vscode.Disposable[] = [];\n    private cancellationRequestedEmitter: vscode.EventEmitter<unknown> = new vscode.EventEmitter();\n    private cancelled: boolean = false;\n\n    public onCancellationRequested: vscode.Event<unknown> = this.cancellationRequestedEmitter.event;\n\n    public constructor(...tokens: vscode.CancellationToken[]) {\n        tokens.forEach(token => this.add(token));\n    }\n\n    public get isCancellationRequested(): boolean {\n        return this.tokens.find(t => t.isCancellationRequested) !== undefined;\n    }\n\n    public add(token: vscode.CancellationToken) {\n        this.tokens.push(token);\n        this.disposables.push(\n            token.onCancellationRequested(e => {\n                // Ensure we only trigger once even if multiple children are cancelled.\n                if (this.cancelled) {\n                    return;\n                }\n                this.cancelled = true;\n                this.cancellationRequestedEmitter.fire(e);\n            })\n        );\n    }\n\n    public dispose() {\n        this.disposables.forEach(d => d.dispose());\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport {\n    TextDocumentIdentifier,\n    Position,\n    MessageDirection,\n    RequestType,\n} from \"vscode-languageclient\";\n\n/** Parameters used to make a {@link DocCDocumentationRequest}. */\nexport interface DocCDocumentationParams {\n    /**\n     * The document to render documentation for.\n     */\n    textDocument: TextDocumentIdentifier;\n\n    /**\n     * The document location at which to lookup symbol information.\n     *\n     * This parameter is only used in Swift files to determine which symbol to render.\n     * The position is ignored for markdown and tutorial documents.\n     */\n    position: Position;\n}\n\n/**\n * The response from a {@link DocCDocumentationRequest} containing a single RenderNode\n * that can be displayed in an editor via `swiftlang/swift-docc-render`\n */\nexport interface DocCDocumentationResponse {\n    renderNode: string;\n}\n\nexport namespace DocCDocumentationRequest {\n    export const method = \"textDocument/doccDocumentation\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType<DocCDocumentationParams, DocCDocumentationResponse, never>(\n        method\n    );\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport { DocumentUri, MessageDirection, RequestType } from \"vscode-languageclient\";\n\n/** Parameters used to make a {@link GetReferenceDocumentRequest}. */\nexport interface GetReferenceDocumentParams {\n    /** The {@link DocumentUri} of the custom scheme url for which content is required. */\n    uri: DocumentUri;\n}\n\n/** Response containing `content` of a {@link GetReferenceDocumentRequest}. */\nexport interface GetReferenceDocumentResult {\n    content: string;\n}\n\n/**\n * Request from the client to the server asking for contents of a URI having a custom scheme **(LSP Extension)**\n * For example: \"sourcekit-lsp:\"\n *\n * - Parameters:\n *   - uri: The `DocumentUri` of the custom scheme url for which content is required\n *\n * - Returns: `GetReferenceDocumentResponse` which contains the `content` to be displayed.\n *\n * ### LSP Extension\n *\n * This request is an extension to LSP supported by SourceKit-LSP.\n *\n * Enable the experimental client capability `\"workspace/getReferenceDocument\"` so that the server responds with\n * reference document URLs for certain requests or commands whenever possible.\n */\nexport namespace GetReferenceDocumentRequest {\n    export const method = \"workspace/getReferenceDocument\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType<\n        GetReferenceDocumentParams,\n        GetReferenceDocumentResult,\n        never\n    >(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport {\n    Location,\n    TextDocumentIdentifier,\n    MessageDirection,\n    RequestType0,\n    RequestType,\n} from \"vscode-languageclient\";\n\n/** Test styles where test-target represents a test target that contains tests. */\nexport type TestStyle = \"XCTest\" | \"swift-testing\" | \"test-target\";\n\n/** Represents a single test returned from a {@link WorkspaceTestsRequest} or {@link TextDocumentTestsRequest}. */\nexport interface LSPTestItem {\n    /**\n     * This identifier uniquely identifies the test case or test suite. It can be used to run an individual test (suite).\n     */\n    id: string;\n\n    /**\n     * Display name describing the test.\n     */\n    label: string;\n\n    /**\n     * Optional description that appears next to the label.\n     */\n    description?: string;\n\n    /**\n     * A string that should be used when comparing this item with other items.\n     *\n     * When `undefined` the `label` is used.\n     */\n    sortText?: string;\n\n    /**\n     *  Whether the test is disabled.\n     */\n    disabled: boolean;\n\n    /**\n     * The type of test, eg. the testing framework that was used to declare the test.\n     */\n    style: TestStyle;\n\n    /**\n     * The location of the test item in the source code.\n     */\n    location: Location;\n\n    /**\n     * The children of this test item.\n     *\n     * For a test suite, this may contain the individual test cases or nested suites.\n     */\n    children: LSPTestItem[];\n\n    /**\n     * Tags associated with this test item.\n     */\n    tags: { id: string }[];\n}\n\n/**\n * A request that returns symbols for all the test classes and test methods within the current workspace.\n *\n * ### LSP Extension\n *\n * This request is an extension to LSP supported by SourceKit-LSP.\n *\n * It requires the experimental client capability `\"workspace/tests\"` to use.\n */\nexport namespace WorkspaceTestsRequest {\n    export const method = \"workspace/tests\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType0<LSPTestItem[], never>(method);\n}\n\n/** Parameters used to make a {@link TextDocumentTestsRequest}. */\nexport interface TextDocumentTestsParams {\n    textDocument: TextDocumentIdentifier;\n}\n\n/**\n * A request that returns symbols for all the test classes and test methods within a file.\n *\n * ### LSP Extension\n *\n * This request is an extension to LSP supported by SourceKit-LSP.\n *\n * It requires the experimental client capability `\"textDocument/tests\"` to use.\n */\nexport namespace TextDocumentTestsRequest {\n    export const method = \"textDocument/tests\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType<TextDocumentTestsParams, LSPTestItem[], never>(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport {\n    TextDocumentIdentifier,\n    Range,\n    Position,\n    MessageDirection,\n    RequestType,\n} from \"vscode-languageclient\";\n\n/** Parameters used to make a {@link LegacyInlayHintRequest}. */\nexport interface LegacyInlayHintsParams {\n    /**\n     * The text document.\n     */\n    textDocument: TextDocumentIdentifier;\n\n    /**\n     * If set, the reange for which inlay hints are\n     * requested. If unset, hints for the entire document\n     * are returned.\n     */\n    range?: Range;\n\n    /**\n     * The categories of inlay hints that are requested.\n     * If unset, all categories are returned.\n     */\n    only?: string[];\n}\n\n/** Inlay Hint (pre Swift 5.6) */\nexport interface LegacyInlayHint {\n    /**\n     * The position within the code that this hint is\n     * attached to.\n     */\n    position: Position;\n\n    /**\n     * The hint's kind, used for more flexible client-side\n     * styling of the hint.\n     */\n    category?: string;\n\n    /**\n     * The hint's rendered label.\n     */\n    label: string;\n}\n\n/** Inlay Hints (pre Swift 5.6) */\nexport namespace LegacyInlayHintRequest {\n    export const method = \"sourcekit-lsp/inlayHints\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType<LegacyInlayHintsParams, LegacyInlayHint[], never>(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport { DocumentUri, Position, MessageDirection, RequestType } from \"vscode-languageclient\";\n\n/** Parameters used to make a {@link PeekDocumentsRequest}. */\nexport interface PeekDocumentsParams {\n    /**\n     * The `DocumentUri` of the text document in which to show the \"peeked\" editor\n     */\n    uri: DocumentUri;\n\n    /**\n     * The `Position` in the given text document in which to show the \"peeked editor\"\n     */\n    position: Position;\n\n    /**\n     * An array `DocumentUri` of the documents to appear inside the \"peeked\" editor\n     */\n    locations: DocumentUri[];\n}\n\n/** Response to indicate the `success` of the {@link PeekDocumentsRequest}. */\nexport interface PeekDocumentsResponse {\n    success: boolean;\n}\n\n/**\n * Request from the server to the client to show the given documents in a \"peeked\" editor **(LSP Extension)**\n *\n * This request is handled by the client to show the given documents in a\n * \"peeked\" editor (i.e. inline with / inside the editor canvas). This is\n * similar to VS Code's built-in \"editor.action.peekLocations\" command.\n *\n * - Parameters:\n *   - uri: The {@link DocumentUri} of the text document in which to show the \"peeked\" editor\n *   - position: The {@link Position} in the given text document in which to show the \"peeked editor\"\n *   - locations: The {@link DocumentUri} of documents to appear inside the \"peeked\" editor\n *\n * - Returns: {@link PeekDocumentsResponse} which indicates the `success` of the request.\n *\n * ### LSP Extension\n *\n * This request is an extension to LSP supported by SourceKit-LSP.\n *\n * It requires the experimental client capability `\"workspace/peekDocuments\"` to use.\n * It also needs the client to handle the request and present the \"peeked\" editor.\n */\nexport namespace PeekDocumentsRequest {\n    export const method = \"workspace/peekDocuments\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType<PeekDocumentsParams, PeekDocumentsResponse, never>(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport { MessageDirection, RequestType0 } from \"vscode-languageclient\";\n\n/**\n * Re-index all files open in the SourceKit-LSP server.\n *\n * Users should not need to rely on this request. The index should always be updated automatically in the background.\n * Having to invoke this request means there is a bug in SourceKit-LSP's automatic re-indexing. It does, however, offer\n * a workaround to re-index files when such a bug occurs where otherwise there would be no workaround.\n *\n * ### LSP Extension\n *\n * This request is an extension to LSP supported by SourceKit-LSP.\n */\nexport namespace ReIndexProjectRequest {\n    export const method = \"workspace/triggerReindex\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType0<void, never>(\"workspace/triggerReindex\");\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport { LogMessageParams, MessageDirection, NotificationType } from \"vscode-languageclient\";\n\n/** Parameters sent in a {@link SourceKitLogMessageNotification}. */\nexport interface SourceKitLogMessageParams extends LogMessageParams {\n    logName?: string;\n}\n\n/**\n * The log message notification is sent from the server to the client to ask the client to\n * log a particular message.\n *\n * ### LSP Extension\n *\n * This notification has the same behaviour as the `window/logMessage` notification built\n * into the LSP. However, SourceKit-LSP adds extra information to the parameters.\n */\nexport namespace SourceKitLogMessageNotification {\n    export const method = \"window/logMessage\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.serverToClient;\n    export const type = new NotificationType<SourceKitLogMessageParams>(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nimport {\n    TextDocumentIdentifier,\n    Position,\n    Location,\n    SymbolKind,\n    MessageDirection,\n    RequestType,\n} from \"vscode-languageclient\";\n\n/** Parameters used to make a {@link SymbolInfoRequest}. */\nexport interface SymbolInfoParams {\n    /** The document in which to lookup the symbol location. */\n    textDocument: TextDocumentIdentifier;\n\n    /** The document location at which to lookup symbol information. */\n    position: Position;\n}\n\n/** Information about which module a symbol is defined in. */\nexport interface ModuleInfo {\n    /** The name of the module in which the symbol is defined. */\n    moduleName: string;\n\n    /** If the symbol is defined within a subgroup of a module, the name of the group. */\n    groupName?: string;\n}\n\n/** Detailed information about a symbol, such as the response to a {@link SymbolInfoRequest}. */\nexport interface SymbolDetails {\n    /** The name of the symbol, if any. */\n    name?: string;\n\n    /**\n     * The name of the containing type for the symbol, if any.\n     *\n     * For example, in the following snippet, the `containerName` of `foo()` is `C`.\n     *\n     * ```c++\n     * class C {\n     *   void foo() {}\n     * }\n     * ```\n     */\n    containerName?: string;\n\n    /** The USR of the symbol, if any. */\n    usr?: string;\n\n    /**\n     * Best known declaration or definition location without global knowledge.\n     *\n     * For a local or private variable, this is generally the canonical definition location -\n     * appropriate as a response to a `textDocument/definition` request. For global symbols this is\n     * the best known location within a single compilation unit. For example, in C++ this might be\n     * the declaration location from a header as opposed to the definition in some other\n     * translation unit.\n     * */\n    bestLocalDeclaration?: Location;\n\n    /** The kind of the symbol */\n    kind?: SymbolKind;\n\n    /**\n     * Whether the symbol is a dynamic call for which it isn't known which method will be invoked at runtime. This is\n     * the case for protocol methods and class functions.\n     *\n     * Optional because `clangd` does not return whether a symbol is dynamic.\n     */\n    isDynamic?: boolean;\n\n    /**\n     * Whether this symbol is defined in the SDK or standard library.\n     *\n     * This property only applies to Swift symbols.\n     */\n    isSystem?: boolean;\n\n    /**\n     * If the symbol is dynamic, the USRs of the types that might be called.\n     *\n     * This is relevant in the following cases:\n     * ```swift\n     * class A {\n     *   func doThing() {}\n     * }\n     * class B: A {}\n     * class C: B {\n     *   override func doThing() {}\n     * }\n     * class D: A {\n     *   override func doThing() {}\n     * }\n     * func test(value: B) {\n     *   value.doThing()\n     * }\n     * ```\n     *\n     * The USR of the called function in `value.doThing` is `A.doThing` (or its\n     * mangled form) but it can never call `D.doThing`. In this case, the\n     * receiver USR would be `B`, indicating that only overrides of subtypes in\n     * `B` may be called dynamically.\n     */\n    receiverUsrs?: string[];\n\n    /**\n     * If the symbol is defined in a module that doesn't have source information associated with it, the name and group\n     * and group name that defines this symbol.\n     *\n     * This property only applies to Swift symbols.\n     */\n    systemModule?: ModuleInfo;\n}\n\n/**\n * Request for semantic information about the symbol at a given location **(LSP Extension)**.\n *\n * This request looks up the symbol (if any) at a given text document location and returns\n * SymbolDetails for that location, including information such as the symbol's USR. The symbolInfo\n * request is not primarily designed for editors, but instead as an implementation detail of how\n * one LSP implementation (e.g. SourceKit) gets information from another (e.g. clangd) to use in\n * performing index queries or otherwise implementing the higher level requests such as definition.\n *\n * - Parameters:\n *   - textDocument: The document in which to lookup the symbol location.\n *   - position: The document location at which to lookup symbol information.\n *\n * - Returns: `[SymbolDetails]` for the given location, which may have multiple elements if there are\n *   multiple references, or no elements if there is no symbol at the given location.\n *\n * ### LSP Extension\n *\n * This request is an extension to LSP supported by SourceKit-LSP and clangd. It does *not* require\n * any additional client or server capabilities to use.\n */\nexport namespace SymbolInfoRequest {\n    export const method = \"textDocument/symbolInfo\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new RequestType<SymbolInfoParams, SymbolDetails[], never>(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport {\n    CloseAction,\n    CloseHandlerResult,\n    DidChangeWorkspaceFoldersNotification,\n    ErrorAction,\n    ErrorHandler,\n    ErrorHandlerResult,\n    LanguageClientOptions,\n    Message,\n    MessageType,\n    State,\n} from \"vscode-languageclient\";\nimport configuration from \"../configuration\";\nimport { swiftRuntimeEnv } from \"../utilities/utilities\";\nimport { Version } from \"../utilities/version\";\nimport { activateLegacyInlayHints } from \"./inlayHints\";\nimport { activatePeekDocuments } from \"./peekDocuments\";\nimport { FolderContext } from \"../FolderContext\";\nimport { Executable, LanguageClient, ServerOptions } from \"vscode-languageclient/node\";\nimport { ArgumentFilter, BuildFlags } from \"../toolchain/BuildFlags\";\nimport { LSPLogger, LSPOutputChannel } from \"./LSPOutputChannel\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\nimport { activateGetReferenceDocument } from \"./getReferenceDocument\";\nimport { LanguageClientFactory } from \"./LanguageClientFactory\";\nimport { SourceKitLogMessageNotification, SourceKitLogMessageParams } from \"./extensions\";\nimport { LSPActiveDocumentManager } from \"./didChangeActiveDocument\";\nimport { DidChangeActiveDocumentNotification } from \"./extensions/DidChangeActiveDocumentRequest\";\nimport { lspClientOptions } from \"./LanguageClientConfiguration\";\n\n/**\n * Manages the creation and destruction of Language clients as we move between\n * workspace folders\n */\nexport class LanguageClientManager implements vscode.Disposable {\n    // known log names\n    static indexingLogName = \"SourceKit-LSP: Indexing\";\n\n    // build argument to sourcekit-lsp filter\n    static buildArgumentFilter: ArgumentFilter[] = [\n        { argument: \"--build-path\", include: 1 },\n        { argument: \"--scratch-path\", include: 1 },\n        { argument: \"-Xswiftc\", include: 1 },\n        { argument: \"-Xcc\", include: 1 },\n        { argument: \"-Xcxx\", include: 1 },\n        { argument: \"-Xlinker\", include: 1 },\n        { argument: \"-Xclangd\", include: 1 },\n        { argument: \"-index-store-path\", include: 1 },\n    ];\n\n    /**\n     * current running client\n     *\n     * undefined means not setup\n     * null means in the process of restarting\n     */\n    private languageClient: LanguageClient | null | undefined;\n    private cancellationToken?: vscode.CancellationTokenSource;\n    private legacyInlayHints?: vscode.Disposable;\n    private peekDocuments?: vscode.Disposable;\n    private getReferenceDocument?: vscode.Disposable;\n    private didChangeActiveDocument?: vscode.Disposable;\n    private restartedPromise?: Promise<void>;\n    private currentWorkspaceFolder?: FolderContext;\n    private waitingOnRestartCount: number;\n    private clientReadyPromise?: Promise<void>;\n    public documentSymbolWatcher?: (\n        document: vscode.TextDocument,\n        symbols: vscode.DocumentSymbol[] | null | undefined\n    ) => void;\n    private subscriptions: vscode.Disposable[];\n    private singleServerSupport: boolean;\n    // used by single server support to keep a record of the project folders\n    // that are not at the root of their workspace\n    public subFolderWorkspaces: vscode.Uri[];\n    private namedOutputChannels: Map<string, LSPOutputChannel> = new Map();\n    private swiftVersion: Version;\n    private activeDocumentManager = new LSPActiveDocumentManager();\n\n    /** Get the current state of the underlying LanguageClient */\n    public get state(): State {\n        if (!this.languageClient) {\n            return State.Stopped;\n        }\n        return this.languageClient.state;\n    }\n\n    constructor(\n        public folderContext: FolderContext,\n        private languageClientFactory: LanguageClientFactory = new LanguageClientFactory()\n    ) {\n        this.namedOutputChannels.set(\n            LanguageClientManager.indexingLogName,\n            new LSPOutputChannel(LanguageClientManager.indexingLogName, false, true)\n        );\n        this.swiftVersion = folderContext.swiftVersion;\n        this.singleServerSupport = this.swiftVersion.isGreaterThanOrEqual(new Version(5, 7, 0));\n        this.subscriptions = [];\n        this.subFolderWorkspaces = [];\n\n        // on change config restart server\n        const onChangeConfig = vscode.workspace.onDidChangeConfiguration(event => {\n            if (!event.affectsConfiguration(\"swift.sourcekit-lsp\")) {\n                return;\n            }\n            let message =\n                \"Changing SourceKit-LSP settings requires the language server be restarted. Would you like to restart it now?\";\n            let restartLSPButton = \"Restart Language Server\";\n            // Enabling/Disabling sourcekit-lsp shows a special notification\n            if (event.affectsConfiguration(\"swift.sourcekit-lsp.disable\")) {\n                if (configuration.lsp.disable) {\n                    if (this.state === State.Stopped) {\n                        // Language client is already stopped\n                        return;\n                    }\n                    message = `You have disabled the Swift language server, but it is still running. Would you like to stop it now?\n                        This will turn off features such as code completion, error diagnostics, jump-to-definition, and test discovery.`;\n                    restartLSPButton = \"Stop Language Server\";\n                } else {\n                    if (this.state !== State.Stopped) {\n                        // Langauge client is already running\n                        return;\n                    }\n                    message =\n                        \"You have enabled the Swift language server. Would you like to start it now?\";\n                    restartLSPButton = \"Start Language Server\";\n                }\n            } else if (configuration.lsp.disable && this.state === State.Stopped) {\n                // Ignore configuration changes if SourceKit-LSP is disabled\n                return;\n            }\n            void vscode.window.showInformationMessage(message, restartLSPButton).then(selected => {\n                if (selected === restartLSPButton) {\n                    void this.restart();\n                }\n            });\n        });\n\n        this.subscriptions.push(onChangeConfig);\n\n        // Swift versions prior to 5.6 don't support file changes, so need to restart\n        // lSP server when a file is either created or deleted\n        if (this.swiftVersion.isLessThan(new Version(5, 6, 0))) {\n            folderContext.workspaceContext.outputChannel.logDiagnostic(\n                \"LSP: Adding new/delete file handlers\"\n            );\n            // restart LSP server on creation of a new file\n            const onDidCreateFileDisposable = vscode.workspace.onDidCreateFiles(() => {\n                void this.restart();\n            });\n            // restart LSP server on deletion of a file\n            const onDidDeleteFileDisposable = vscode.workspace.onDidDeleteFiles(() => {\n                void this.restart();\n            });\n            this.subscriptions.push(onDidCreateFileDisposable, onDidDeleteFileDisposable);\n        }\n\n        this.waitingOnRestartCount = 0;\n        this.documentSymbolWatcher = undefined;\n        this.cancellationToken = new vscode.CancellationTokenSource();\n    }\n\n    // The language client stops asnyhronously, so we need to wait for it to stop\n    // instead of doing it in dispose, which must be synchronous.\n    async stop() {\n        if (this.languageClient && this.languageClient.state === State.Running) {\n            await this.languageClient.dispose();\n        }\n    }\n\n    dispose() {\n        this.cancellationToken?.cancel();\n        this.cancellationToken?.dispose();\n        this.legacyInlayHints?.dispose();\n        this.peekDocuments?.dispose();\n        this.getReferenceDocument?.dispose();\n        this.subscriptions.forEach(item => item.dispose());\n        this.namedOutputChannels.forEach(channel => channel.dispose());\n    }\n\n    /**\n     * Use language client safely. Provides a cancellation token to the function\n     * which can be used to safely ensure language client request are cancelled\n     * if the language is shutdown.\n     * @param process process using language client\n     * @returns result of process\n     */\n    async useLanguageClient<Return>(process: {\n        (client: LanguageClient, cancellationToken: vscode.CancellationToken): Promise<Return>;\n    }): Promise<Return> {\n        if (!this.languageClient || !this.clientReadyPromise) {\n            throw new Error(LanguageClientError.LanguageClientUnavailable);\n        }\n        return this.clientReadyPromise.then(\n            () => {\n                if (!this.languageClient || !this.cancellationToken) {\n                    throw new Error(LanguageClientError.LanguageClientUnavailable);\n                }\n                return process(this.languageClient, this.cancellationToken.token);\n            },\n            reason => reason\n        );\n    }\n\n    /** Restart language client */\n    async restart() {\n        // force restart of language client\n        await this.setLanguageClientFolder(this.folderContext, true);\n    }\n\n    get languageClientOutputChannel(): SwiftOutputChannel | undefined {\n        return this.languageClient?.outputChannel as SwiftOutputChannel | undefined;\n    }\n\n    async addFolder(folderContext: FolderContext) {\n        if (!folderContext.isRootFolder) {\n            await this.useLanguageClient(async client => {\n                const uri = folderContext.folder;\n                this.subFolderWorkspaces.push(folderContext.folder);\n\n                const workspaceFolder = {\n                    uri: client.code2ProtocolConverter.asUri(uri),\n                    name: FolderContext.uriName(uri),\n                };\n                await client.sendNotification(DidChangeWorkspaceFoldersNotification.type, {\n                    event: { added: [workspaceFolder], removed: [] },\n                });\n            });\n        }\n    }\n\n    async removeFolder(folderContext: FolderContext) {\n        if (!folderContext.isRootFolder) {\n            await this.useLanguageClient(async client => {\n                const uri = folderContext.folder;\n                this.subFolderWorkspaces = this.subFolderWorkspaces.filter(item => item !== uri);\n\n                const workspaceFolder = {\n                    uri: client.code2ProtocolConverter.asUri(uri),\n                    name: FolderContext.uriName(uri),\n                };\n                await client.sendNotification(DidChangeWorkspaceFoldersNotification.type, {\n                    event: { added: [], removed: [workspaceFolder] },\n                });\n            });\n        }\n    }\n\n    private async addSubFolderWorkspaces(client: LanguageClient) {\n        for (const uri of this.subFolderWorkspaces) {\n            const workspaceFolder = {\n                uri: client.code2ProtocolConverter.asUri(uri),\n                name: FolderContext.uriName(uri),\n            };\n            await client.sendNotification(DidChangeWorkspaceFoldersNotification.type, {\n                event: { added: [workspaceFolder], removed: [] },\n            });\n        }\n    }\n\n    /**\n     * Set folder for LSP server.\n     * If server is already running then check if the workspace folder is the same if\n     * it isn't then restart the server using the new workspace folder.\n     */\n    async setLanguageClientFolder(folder: FolderContext, forceRestart = false) {\n        const uri = folder.folder;\n        if (this.languageClient === undefined) {\n            this.currentWorkspaceFolder = folder;\n            this.restartedPromise = this.setupLanguageClient(folder);\n            return;\n        } else {\n            // don't check for undefined uri's or if the current workspace is the same if we are\n            // running a single server. The only way we can get here while using a single server\n            // is when restart is called.\n            if (!this.singleServerSupport) {\n                if (this.currentWorkspaceFolder?.folder === uri && !forceRestart) {\n                    return;\n                }\n            }\n            await this.restartLanguageClient(folder);\n        }\n    }\n\n    /**\n     * Restart language client using supplied workspace folder\n     * @param workspaceFolder workspace folder to send to server\n     * @returns when done\n     */\n    private async restartLanguageClient(workspaceFolder: FolderContext) {\n        // count number of setLanguageClientFolder calls waiting on startedPromise\n        this.waitingOnRestartCount += 1;\n        // if in the middle of a restart then we have to wait until that\n        // restart has finished\n        if (this.restartedPromise) {\n            try {\n                await this.restartedPromise;\n            } catch (error) {\n                //ignore error\n            }\n        }\n        this.waitingOnRestartCount -= 1;\n        // only continue if no more calls are waiting on startedPromise\n        if (this.waitingOnRestartCount !== 0) {\n            return;\n        }\n\n        const client = this.languageClient;\n        // language client is set to null while it is in the process of restarting\n        this.languageClient = null;\n        this.currentWorkspaceFolder = workspaceFolder;\n        this.legacyInlayHints?.dispose();\n        this.legacyInlayHints = undefined;\n        this.peekDocuments?.dispose();\n        this.peekDocuments = undefined;\n        this.getReferenceDocument?.dispose();\n        this.getReferenceDocument = undefined;\n        if (client) {\n            this.cancellationToken?.cancel();\n            this.cancellationToken?.dispose();\n            this.restartedPromise = client\n                .stop()\n                .then(async () => {\n                    await this.setupLanguageClient(workspaceFolder);\n\n                    // Now that the client has been replaced, dispose the old client's output channel.\n                    client.outputChannel.dispose();\n                })\n                .catch(async reason => {\n                    // error message matches code here https://github.com/microsoft/vscode-languageserver-node/blob/2041784436fed53f4e77267a49396bca22a7aacf/client/src/common/client.ts#L1409C1-L1409C54\n                    if (reason.message === \"Stopping the server timed out\") {\n                        await this.setupLanguageClient(workspaceFolder);\n                    }\n                    this.folderContext.workspaceContext.outputChannel.log(`${reason}`);\n                });\n            await this.restartedPromise;\n        }\n    }\n\n    private async setupLanguageClient(folder: FolderContext) {\n        if (configuration.lsp.disable) {\n            this.languageClient = undefined;\n            return;\n        }\n        const { client, errorHandler } = this.createLSPClient(folder);\n        return this.startClient(client, errorHandler);\n    }\n\n    private createLSPClient(folder: FolderContext): {\n        client: LanguageClient;\n        errorHandler: SourceKitLSPErrorHandler;\n    } {\n        const toolchain = folder.toolchain;\n        const toolchainSourceKitLSP = toolchain.getToolchainExecutable(\"sourcekit-lsp\");\n        const lspConfig = configuration.lsp;\n        const serverPathConfig = lspConfig.serverPath;\n        const serverPath = serverPathConfig.length > 0 ? serverPathConfig : toolchainSourceKitLSP;\n        const buildFlags = toolchain.buildFlags;\n        const sdkArguments = [\n            ...buildFlags.swiftDriverSDKFlags(true),\n            ...buildFlags.swiftDriverTargetFlags(true),\n            ...BuildFlags.filterArguments(\n                configuration.buildArguments.concat(buildFlags.buildPathFlags()),\n                LanguageClientManager.buildArgumentFilter\n            ),\n        ];\n\n        const sourcekit: Executable = {\n            command: serverPath,\n            args: lspConfig.serverArguments.concat(sdkArguments),\n            options: {\n                env: {\n                    ...process.env,\n                    ...configuration.swiftEnvironmentVariables,\n                    ...swiftRuntimeEnv(),\n                },\n            },\n        };\n\n        // if path to LSP server is not equal to the path to swift and both are set, then\n        // pass swift toolchain to the LSP server\n        if (\n            serverPathConfig.length > 0 &&\n            configuration.path.length > 0 &&\n            serverPathConfig !== toolchainSourceKitLSP\n        ) {\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            sourcekit.options = {\n                env: {\n                    ...sourcekit.options?.env,\n                    SOURCEKIT_TOOLCHAIN_PATH: toolchain.toolchainPath,\n                },\n            };\n        }\n\n        const serverOptions: ServerOptions = sourcekit;\n        let workspaceFolder = undefined;\n        if (folder && !this.singleServerSupport) {\n            workspaceFolder = {\n                uri: folder.folder,\n                name: FolderContext.uriName(folder.folder),\n                index: 0,\n            };\n        }\n\n        const errorHandler = new SourceKitLSPErrorHandler(5);\n        const clientOptions: LanguageClientOptions = lspClientOptions(\n            this.swiftVersion,\n            this.folderContext.workspaceContext,\n            workspaceFolder,\n            this.activeDocumentManager,\n            errorHandler,\n            this.documentSymbolWatcher\n        );\n\n        return {\n            client: this.languageClientFactory.createLanguageClient(\n                \"swift.sourcekit-lsp\",\n                `SourceKit Language Server (${this.folderContext.toolchain.swiftVersion.toString()})`,\n                serverOptions,\n                clientOptions\n            ),\n            errorHandler,\n        };\n    }\n\n    private async startClient(client: LanguageClient, errorHandler: SourceKitLSPErrorHandler) {\n        const runningPromise = new Promise<void>((res, rej) => {\n            const disposable = client.onDidChangeState(e => {\n                // if state is now running add in any sub-folder workspaces that\n                // we have cached. If this is the first time we are starting then\n                // we won't have any sub folder workspaces, but if the server crashed\n                // or we forced a restart then we need to do this\n                if (e.oldState === State.Starting && e.newState === State.Running) {\n                    res();\n                    disposable.dispose();\n                    void this.addSubFolderWorkspaces(client);\n                } else if (e.oldState === State.Starting && e.newState === State.Stopped) {\n                    rej(\"SourceKit-LSP failed to start\");\n                    disposable.dispose();\n                }\n            });\n        });\n        if (client.clientOptions.workspaceFolder) {\n            this.folderContext.workspaceContext.outputChannel.log(\n                `SourceKit-LSP setup for ${FolderContext.uriName(\n                    client.clientOptions.workspaceFolder.uri\n                )}`\n            );\n        } else {\n            this.folderContext.workspaceContext.outputChannel.log(`SourceKit-LSP setup`);\n        }\n\n        client.onNotification(SourceKitLogMessageNotification.type, params => {\n            this.logMessage(client, params as SourceKitLogMessageParams);\n        });\n\n        // start client\n        this.clientReadyPromise = client\n            .start()\n            .then(() => runningPromise)\n            .then(() => {\n                // Now that we've started up correctly, start the error handler to auto-restart\n                // if sourcekit-lsp crashes during normal operation.\n                errorHandler.enable();\n\n                if (this.swiftVersion.isLessThan(new Version(5, 7, 0))) {\n                    this.legacyInlayHints = activateLegacyInlayHints(client);\n                }\n\n                this.peekDocuments = activatePeekDocuments(client);\n                this.getReferenceDocument = activateGetReferenceDocument(client);\n                this.subscriptions.push(this.getReferenceDocument);\n                try {\n                    if (\n                        checkExperimentalCapability(\n                            client,\n                            DidChangeActiveDocumentNotification.method,\n                            1\n                        )\n                    ) {\n                        this.didChangeActiveDocument =\n                            this.activeDocumentManager.activateDidChangeActiveDocument(client);\n                        this.subscriptions.push(this.didChangeActiveDocument);\n                    }\n                } catch {\n                    // do nothing\n                }\n            })\n            .catch(reason => {\n                this.folderContext.workspaceContext.outputChannel.log(`${reason}`);\n                void this.languageClient?.stop();\n                this.languageClient = undefined;\n                throw reason;\n            });\n\n        this.languageClient = client;\n        this.cancellationToken = new vscode.CancellationTokenSource();\n\n        return this.clientReadyPromise;\n    }\n\n    private logMessage(client: LanguageClient, params: SourceKitLogMessageParams) {\n        let logger: LSPLogger = client;\n        if (params.logName) {\n            const outputChannel =\n                this.namedOutputChannels.get(params.logName) ??\n                new LSPOutputChannel(params.logName);\n            this.namedOutputChannels.set(params.logName, outputChannel);\n            logger = outputChannel;\n        }\n        switch (params.type) {\n            case MessageType.Info:\n                logger.info(params.message);\n                break;\n            case MessageType.Debug:\n                logger.debug(params.message);\n                break;\n            case MessageType.Warning:\n                logger.warn(params.message);\n                break;\n            case MessageType.Error:\n                logger.error(params.message);\n                break;\n            case MessageType.Log:\n                logger.info(params.message);\n                break;\n        }\n    }\n}\n\n/**\n * SourceKit-LSP error handler. Copy of the default error handler, except it includes\n * an error message that asks if you want to restart the sourcekit-lsp server again\n * after so many crashes\n */\nexport class SourceKitLSPErrorHandler implements ErrorHandler {\n    private restarts: number[];\n    private enabled: boolean = false;\n\n    constructor(private maxRestartCount: number) {\n        this.restarts = [];\n    }\n    /**\n     * Start listening for errors and requesting to restart the LSP server when appropriate.\n     */\n    enable() {\n        this.enabled = true;\n    }\n    /**\n     * An error has occurred while writing or reading from the connection.\n     *\n     * @param _error - the error received\n     * @param _message - the message to be delivered to the server if know.\n     * @param count - a count indicating how often an error is received. Will\n     *  be reset if a message got successfully send or received.\n     */\n    error(\n        _error: Error,\n        _message: Message | undefined,\n        count: number | undefined\n    ): ErrorHandlerResult | Promise<ErrorHandlerResult> {\n        if (count && count <= 3) {\n            return { action: ErrorAction.Continue };\n        }\n        return { action: ErrorAction.Shutdown };\n    }\n    /**\n     * The connection to the server got closed.\n     */\n    closed(): CloseHandlerResult | Promise<CloseHandlerResult> {\n        if (!this.enabled) {\n            return {\n                action: CloseAction.DoNotRestart,\n                handled: true,\n            };\n        }\n\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.maxRestartCount) {\n            return { action: CloseAction.Restart };\n        } else {\n            const diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                return new Promise<CloseHandlerResult>(resolve => {\n                    void vscode.window\n                        .showErrorMessage(\n                            `The SourceKit-LSP server crashed ${\n                                this.maxRestartCount + 1\n                            } times in the last 3 minutes. See the output for more information. Do you want to restart it again.`,\n                            \"Yes\",\n                            \"No\"\n                        )\n                        .then(result => {\n                            if (result === \"Yes\") {\n                                this.restarts = [];\n                                resolve({ action: CloseAction.Restart });\n                            } else {\n                                resolve({ action: CloseAction.DoNotRestart });\n                            }\n                        });\n                });\n            } else {\n                this.restarts.shift();\n                return { action: CloseAction.Restart };\n            }\n        }\n    }\n}\n\n/** Language client errors */\nexport const enum LanguageClientError {\n    LanguageClientUnavailable = \"Language Client Unavailable\",\n}\n\n/**\n * Returns `true` if the LSP supports the supplied `method` at or\n * above the supplied `minVersion`.\n */\nexport function checkExperimentalCapability(\n    client: LanguageClient,\n    method: string,\n    minVersion: number\n) {\n    const experimentalCapability = client.initializeResult?.capabilities.experimental;\n    if (!experimentalCapability) {\n        throw new Error(`${method} requests not supported`);\n    }\n    const targetCapability = experimentalCapability[method];\n    return (targetCapability?.version ?? -1) >= minVersion;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as langclient from \"vscode-languageclient/node\";\nimport configuration from \"../configuration\";\nimport { LegacyInlayHintRequest } from \"./extensions\";\nimport { LanguagerClientDocumentSelectors } from \"./LanguageClientConfiguration\";\n\n/** Provide Inlay Hints using sourcekit-lsp */\nclass SwiftLegacyInlayHintsProvider implements vscode.InlayHintsProvider {\n    onDidChangeInlayHints?: vscode.Event<void> | undefined;\n\n    constructor(private client: langclient.LanguageClient) {}\n\n    provideInlayHints(\n        document: vscode.TextDocument,\n        range: vscode.Range,\n        token: vscode.CancellationToken\n    ): vscode.ProviderResult<vscode.InlayHint[]> {\n        // check configuration to see if inlay hints should be displayed\n        if (!configuration.lsp.inlayHintsEnabled) {\n            return null;\n        }\n        const params = {\n            textDocument: this.client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n            range: { start: range.start, end: range.end },\n        };\n        const result = this.client.sendRequest(LegacyInlayHintRequest.type, params, token);\n        return result.then(\n            hints => {\n                return hints.map(hint => {\n                    let label = hint.label;\n                    let kind: vscode.InlayHintKind | undefined;\n                    switch (hint.category) {\n                        case \"type\":\n                            kind = vscode.InlayHintKind.Type;\n                            label = `: ${label}`;\n                            break;\n                        case \"parameter\":\n                            kind = vscode.InlayHintKind.Parameter;\n                            break;\n                    }\n                    return {\n                        label: label,\n                        position: hint.position,\n                        kind: kind,\n                        paddingLeft: true,\n                    };\n                });\n            },\n            reason => reason\n        );\n    }\n}\n\n/** activate the inlay hints */\nexport function activateLegacyInlayHints(client: langclient.LanguageClient): vscode.Disposable {\n    const inlayHint = vscode.languages.registerInlayHintsProvider(\n        LanguagerClientDocumentSelectors.sourcekitLSPDocumentTypes(),\n        new SwiftLegacyInlayHintsProvider(client)\n    );\n\n    return inlayHint;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport {\n    DocumentSelector,\n    LanguageClientOptions,\n    RevealOutputChannelOn,\n    vsdiag,\n} from \"vscode-languageclient\";\nimport configuration from \"../configuration\";\nimport { Version } from \"../utilities/version\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { DiagnosticsManager } from \"../DiagnosticsManager\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\nimport { promptForDiagnostics } from \"../commands/captureDiagnostics\";\nimport { uriConverters } from \"./uriConverters\";\nimport { LSPActiveDocumentManager } from \"./didChangeActiveDocument\";\nimport { SourceKitLSPErrorHandler } from \"./LanguageClientManager\";\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction initializationOptions(swiftVersion: Version): any {\n    let options: any = {\n        \"workspace/peekDocuments\": true, // workaround for client capability to handle `PeekDocumentsRequest`\n        \"workspace/getReferenceDocument\": true, // the client can handle URIs with scheme `sourcekit-lsp:`\n        \"textDocument/codeLens\": {\n            supportedCommands: {\n                \"swift.run\": \"swift.run\",\n                \"swift.debug\": \"swift.debug\",\n            },\n        },\n    };\n\n    // Swift 6.0.0 and later supports background indexing.\n    // In 6.0.0 it is experimental so only \"true\" enables it.\n    // In 6.1.0 it is no longer experimental, and so \"auto\" or \"true\" enables it.\n    if (\n        swiftVersion.isGreaterThanOrEqual(new Version(6, 0, 0)) &&\n        (configuration.backgroundIndexing === \"on\" ||\n            (configuration.backgroundIndexing === \"auto\" &&\n                swiftVersion.isGreaterThanOrEqual(new Version(6, 1, 0))))\n    ) {\n        options = {\n            ...options,\n            backgroundIndexing: true,\n            backgroundPreparationMode: \"enabled\",\n        };\n    }\n\n    if (swiftVersion.isGreaterThanOrEqual(new Version(6, 1, 0))) {\n        options = {\n            ...options,\n            \"window/didChangeActiveDocument\": true, // the client can send `window/didChangeActiveDocument` notifications\n        };\n    }\n\n    if (configuration.swiftSDK !== \"\") {\n        options = {\n            ...options,\n            swiftPM: { swiftSDK: configuration.swiftSDK },\n        };\n    }\n\n    return options;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\ntype SourceKitDocumentSelector = {\n    scheme: string;\n    language: string;\n    pattern?: string;\n}[];\n\nexport class LanguagerClientDocumentSelectors {\n    static appleLangDocumentSelector: SourceKitDocumentSelector = [\n        { scheme: \"sourcekit-lsp\", language: \"swift\" },\n        { scheme: \"file\", language: \"swift\" },\n        { scheme: \"untitled\", language: \"swift\" },\n        { scheme: \"file\", language: \"objective-c\" },\n        { scheme: \"untitled\", language: \"objective-c\" },\n        { scheme: \"file\", language: \"objective-cpp\" },\n        { scheme: \"untitled\", language: \"objective-cpp\" },\n    ];\n\n    static cFamilyDocumentSelector: SourceKitDocumentSelector = [\n        { scheme: \"file\", language: \"c\" },\n        { scheme: \"untitled\", language: \"c\" },\n        { scheme: \"file\", language: \"cpp\" },\n        { scheme: \"untitled\", language: \"cpp\" },\n    ];\n\n    // document selector for swift-docc documentation\n    static documentationDocumentSelector: SourceKitDocumentSelector = [\n        { scheme: \"file\", language: \"markdown\" },\n        { scheme: \"untitled\", language: \"markdown\" },\n        { scheme: \"file\", language: \"tutorial\" },\n        { scheme: \"untitiled\", language: \"tutorial\" },\n    ];\n\n    static miscelaneousDocumentSelector: SourceKitDocumentSelector = [\n        { scheme: \"file\", language: \"plaintext\", pattern: \"**/.swift-version\" },\n    ];\n\n    static sourcekitLSPDocumentTypes(): DocumentSelector {\n        let documentSelector: SourceKitDocumentSelector;\n        switch (configuration.lsp.supportCFamily) {\n            case \"enable\":\n                documentSelector = [\n                    ...LanguagerClientDocumentSelectors.appleLangDocumentSelector,\n                    ...LanguagerClientDocumentSelectors.cFamilyDocumentSelector,\n                ];\n                break;\n\n            case \"disable\":\n                documentSelector = LanguagerClientDocumentSelectors.appleLangDocumentSelector;\n                break;\n\n            case \"cpptools-inactive\": {\n                const cppToolsActive =\n                    vscode.extensions.getExtension(\"ms-vscode.cpptools\")?.isActive;\n                documentSelector =\n                    cppToolsActive === true\n                        ? LanguagerClientDocumentSelectors.appleLangDocumentSelector\n                        : [\n                              ...LanguagerClientDocumentSelectors.appleLangDocumentSelector,\n                              ...LanguagerClientDocumentSelectors.cFamilyDocumentSelector,\n                          ];\n            }\n        }\n        documentSelector = documentSelector.filter(doc => {\n            return configuration.lsp.supportedLanguages.includes(doc.language);\n        });\n        documentSelector.push(...LanguagerClientDocumentSelectors.documentationDocumentSelector);\n        return documentSelector;\n    }\n\n    static allHandledDocumentTypes(): DocumentSelector {\n        return [\n            ...this.sourcekitLSPDocumentTypes(),\n            ...LanguagerClientDocumentSelectors.miscelaneousDocumentSelector,\n        ];\n    }\n}\n\nexport function lspClientOptions(\n    swiftVersion: Version,\n    workspaceContext: WorkspaceContext,\n    workspaceFolder: vscode.WorkspaceFolder | undefined,\n    activeDocumentManager: LSPActiveDocumentManager,\n    errorHandler: SourceKitLSPErrorHandler,\n    documentSymbolWatcher?: (\n        document: vscode.TextDocument,\n        symbols: vscode.DocumentSymbol[]\n    ) => void\n): LanguageClientOptions {\n    return {\n        documentSelector: LanguagerClientDocumentSelectors.sourcekitLSPDocumentTypes(),\n        revealOutputChannelOn: RevealOutputChannelOn.Never,\n        workspaceFolder: workspaceFolder,\n        outputChannel: new SwiftOutputChannel(\n            `SourceKit Language Server (${swiftVersion.toString()})`\n        ),\n        middleware: {\n            didOpen: activeDocumentManager.didOpen.bind(activeDocumentManager),\n            didClose: activeDocumentManager.didClose.bind(activeDocumentManager),\n            provideCodeLenses: async (document, token, next) => {\n                const result = await next(document, token);\n                return result?.map(codelens => {\n                    switch (codelens.command?.command) {\n                        case \"swift.run\":\n                            codelens.command.title = `$(play) ${codelens.command.title}`;\n                            break;\n                        case \"swift.debug\":\n                            codelens.command.title = `$(debug) ${codelens.command.title}`;\n                            break;\n                    }\n                    return codelens;\n                });\n            },\n            provideDocumentSymbols: async (document, token, next) => {\n                const result = await next(document, token);\n                const documentSymbols = result as vscode.DocumentSymbol[];\n                if (documentSymbolWatcher && documentSymbols) {\n                    documentSymbolWatcher(document, documentSymbols);\n                }\n                return result;\n            },\n            provideDefinition: async (document, position, token, next) => {\n                const result = await next(document, position, token);\n                const definitions = result as vscode.Location[];\n                if (\n                    definitions &&\n                    path.extname(definitions[0].uri.path) === \".swiftinterface\" &&\n                    definitions[0].uri.scheme === \"file\"\n                ) {\n                    const uri = definitions[0].uri.with({ scheme: \"readonly\" });\n                    return new vscode.Location(uri, definitions[0].range);\n                }\n                return result;\n            },\n            // temporarily remove text edit from Inlay hints while SourceKit-LSP\n            // returns invalid replacement text\n            provideInlayHints: async (document, position, token, next) => {\n                const result = await next(document, position, token);\n                // remove textEdits for swift version earlier than 5.10 as it sometimes\n                // generated invalid textEdits\n                if (swiftVersion.isLessThan(new Version(5, 10, 0))) {\n                    result?.forEach(r => (r.textEdits = undefined));\n                }\n                return result;\n            },\n            provideDiagnostics: async (uri, previousResultId, token, next) => {\n                const result = await next(uri, previousResultId, token);\n                if (result?.kind === vsdiag.DocumentDiagnosticReportKind.unChanged) {\n                    return undefined;\n                }\n                const document = uri as vscode.TextDocument;\n                workspaceContext.diagnostics.handleDiagnostics(\n                    document.uri ?? uri,\n                    DiagnosticsManager.isSourcekit,\n                    result?.items ?? []\n                );\n                return undefined;\n            },\n            handleDiagnostics: (uri, diagnostics) => {\n                workspaceContext.diagnostics.handleDiagnostics(\n                    uri,\n                    DiagnosticsManager.isSourcekit,\n                    diagnostics\n                );\n            },\n            handleWorkDoneProgress: (() => {\n                let lastPrompted = new Date(0).getTime();\n                return async (token, params, next) => {\n                    const result = next(token, params);\n                    const now = new Date().getTime();\n                    const oneHour = 60 * 60 * 1000;\n                    if (\n                        now - lastPrompted > oneHour &&\n                        token.toString().startsWith(\"sourcekitd-crashed\")\n                    ) {\n                        // Only prompt once an hour in case sourcekit is in a crash loop\n                        lastPrompted = now;\n                        void promptForDiagnostics(workspaceContext);\n                    }\n                    return result;\n                };\n            })(),\n        },\n        uriConverters,\n        errorHandler,\n        // Avoid attempting to reinitialize multiple times. If we fail to initialize\n        // we aren't doing anything different the second time and so will fail again.\n        initializationFailedHandler: () => false,\n        initializationOptions: initializationOptions(swiftVersion),\n    };\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport stripAnsi = require(\"strip-ansi\");\nimport configuration from \"./configuration\";\nimport { SwiftExecution } from \"./tasks/SwiftExecution\";\nimport { WorkspaceContext } from \"./WorkspaceContext\";\nimport { checkIfBuildComplete, lineBreakRegex } from \"./utilities/tasks\";\n\ninterface ParsedDiagnostic {\n    uri: string;\n    diagnostic: vscode.Diagnostic;\n}\n\ntype DiagnosticsMap = Map<string, vscode.Diagnostic[]>;\n\ntype SourcePredicate = (source: string) => boolean;\n\ntype DiagnosticPredicate = (diagnostic: vscode.Diagnostic) => boolean;\n\nconst isEqual = (d1: vscode.Diagnostic, d2: vscode.Diagnostic) =>\n    d1.range.start.isEqual(d2.range.start) && d1.message === d2.message;\n\nconst isSource = (diagnostic: vscode.Diagnostic, sourcesPredicate: SourcePredicate) =>\n    sourcesPredicate(diagnostic.source ?? \"\");\n\nconst isSwiftc: DiagnosticPredicate = diagnostic =>\n    isSource(diagnostic, DiagnosticsManager.isSwiftc);\n\nconst isSourceKit: DiagnosticPredicate = diagnostic =>\n    isSource(diagnostic, DiagnosticsManager.isSourcekit);\n\n/**\n * Handles the collection and deduplication of diagnostics from\n * various {@link vscode.Diagnostic.source | Diagnostic sources}.\n *\n * Listens for running {@link SwiftExecution} tasks and allows\n * external clients to call {@link handleDiagnostics} to provide\n * thier own diagnostics.\n */\nexport class DiagnosticsManager implements vscode.Disposable {\n    private static swiftc: string = \"swiftc\";\n    static isSourcekit: SourcePredicate = source => this.swiftc !== source;\n    static isSwiftc: SourcePredicate = source => this.swiftc === source;\n\n    private diagnosticCollection: vscode.DiagnosticCollection =\n        vscode.languages.createDiagnosticCollection(\"swift\");\n    allDiagnostics: Map<string, vscode.Diagnostic[]> = new Map();\n    private disposed = false;\n\n    constructor(context: WorkspaceContext) {\n        this.onDidChangeConfigurationDisposible = vscode.workspace.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(\"swift.diagnosticsCollection\")) {\n                this.diagnosticCollection.clear();\n                this.allDiagnostics.forEach((_, uri) =>\n                    this.updateDiagnosticsCollection(vscode.Uri.file(uri))\n                );\n            }\n        });\n        this.onDidStartTaskDisposible = vscode.tasks.onDidStartTask(event => {\n            // Will only try to provide diagnostics for `swift` tasks\n            const task = event.execution.task;\n            if (task.definition.type !== \"swift\") {\n                return;\n            }\n            if (!this.includeSwiftcDiagnostics()) {\n                return;\n            }\n            // Provide new list of diagnostics\n            const swiftExecution = task.execution as SwiftExecution;\n            const provideDiagnostics: Promise<DiagnosticsMap> =\n                this.parseDiagnostics(swiftExecution);\n\n            provideDiagnostics\n                .then(map => {\n                    // Clean up old \"swiftc\" diagnostics\n                    this.removeSwiftcDiagnostics();\n                    map.forEach((diagnostics, uri) => {\n                        this.handleDiagnostics(\n                            vscode.Uri.file(uri),\n                            DiagnosticsManager.isSwiftc,\n                            diagnostics\n                        );\n                    });\n                })\n                .catch(e =>\n                    context.outputChannel.log(`${e}`, 'Failed to provide \"swiftc\" diagnostics')\n                );\n        });\n    }\n\n    /**\n     * Provide a new list of diagnostics for a given file\n     *\n     * @param uri {@link vscode.Uri Uri} of the file these diagonstics apply to\n     * @param sourcePredicate Diagnostics of a source that satisfies the predicate will apply for cleaning\n     * up diagnostics that have been removed. See {@link isSwiftc} and {@link isSourceKit}\n     * @param newDiagnostics Array of {@link vscode.Diagnostic}. This can be empty to remove old diagnostics satisfying `sourcePredicate`.\n     */\n    handleDiagnostics(\n        uri: vscode.Uri,\n        sourcePredicate: SourcePredicate,\n        newDiagnostics: vscode.Diagnostic[]\n    ): void {\n        if (this.disposed) {\n            return;\n        }\n\n        const isFromSourceKit = !sourcePredicate(DiagnosticsManager.swiftc);\n        // Is a descrepency between SourceKit-LSP and older versions\n        // of Swift as to whether the first letter is capitalized or not,\n        // so we'll always display messages capitalized to user and this\n        // also will allow comparing messages when merging\n        newDiagnostics = newDiagnostics.map(this.capitalizeMessage).map(this.cleanMessage);\n        const allDiagnostics = this.allDiagnostics.get(uri.fsPath)?.slice() || [];\n        // Remove the old set of diagnostics from this source\n        const removedDiagnostics = this.removeDiagnostics(allDiagnostics, d =>\n            isSource(d, sourcePredicate)\n        );\n        // Clean up any \"fixed\" swiftc diagnostics\n        if (isFromSourceKit) {\n            this.removeDiagnostics(\n                removedDiagnostics,\n                d1 => !!newDiagnostics.find(d2 => isEqual(d1, d2))\n            );\n            this.removeDiagnostics(\n                allDiagnostics,\n                d1 => isSwiftc(d1) && !!removedDiagnostics.find(d2 => isEqual(d1, d2))\n            );\n        }\n\n        for (const diagnostic of newDiagnostics) {\n            if (\n                diagnostic.code &&\n                typeof diagnostic.code !== \"string\" &&\n                typeof diagnostic.code !== \"number\"\n            ) {\n                const fsPath = diagnostic.code.target.fsPath;\n\n                // Work around a bug in the nightlies where the URL comes back looking like:\n                // `/path/to/TestPackage/https:/docs.swift.org/compiler/documentation/diagnostics/nominal-types`\n                // Transform this in to a valid docs.swift.org URL which the openEducationalNote command\n                // will open in a browser.\n                // FIXME: This can be removed when the bug is fixed in sourcekit-lsp.\n                let open = false;\n                const needle = `https:${path.sep}docs.swift.org${path.sep}`;\n                if (fsPath.indexOf(needle) !== -1) {\n                    const extractedPath = `https://docs.swift.org/${fsPath.split(needle).pop()}/`;\n                    diagnostic.code.target = vscode.Uri.parse(extractedPath.replace(/\\\\/g, \"/\"));\n                    open = true;\n                } else if (diagnostic.code.target.fsPath.endsWith(\".md\")) {\n                    open = true;\n                }\n\n                if (open) {\n                    diagnostic.code = {\n                        target: vscode.Uri.parse(\n                            `command:swift.openEducationalNote?${encodeURIComponent(JSON.stringify(diagnostic.code.target))}`\n                        ),\n                        value: \"More Information...\",\n                    };\n                }\n            }\n        }\n\n        // Append the new diagnostics we just received\n        allDiagnostics.push(...newDiagnostics);\n        this.allDiagnostics.set(uri.fsPath, allDiagnostics);\n        // Update the collection\n        this.updateDiagnosticsCollection(uri);\n    }\n\n    private updateDiagnosticsCollection(uri: vscode.Uri): void {\n        const diagnostics = this.allDiagnostics.get(uri.fsPath) ?? [];\n        const swiftcDiagnostics = diagnostics.filter(isSwiftc);\n        const sourceKitDiagnostics = diagnostics.filter(isSourceKit);\n        const mergedDiagnostics: vscode.Diagnostic[] = [];\n        switch (configuration.diagnosticsCollection) {\n            case \"keepSourceKit\":\n                mergedDiagnostics.push(...swiftcDiagnostics);\n                this.mergeDiagnostics(mergedDiagnostics, sourceKitDiagnostics, isSourceKit);\n                break;\n            case \"keepSwiftc\":\n                mergedDiagnostics.push(...sourceKitDiagnostics);\n                this.mergeDiagnostics(mergedDiagnostics, swiftcDiagnostics, isSwiftc);\n                break;\n            case \"onlySourceKit\":\n                mergedDiagnostics.push(...sourceKitDiagnostics);\n                break;\n            case \"onlySwiftc\":\n                mergedDiagnostics.push(...swiftcDiagnostics);\n                break;\n            case \"keepAll\":\n                mergedDiagnostics.push(...sourceKitDiagnostics);\n                mergedDiagnostics.push(...swiftcDiagnostics);\n                break;\n        }\n        this.diagnosticCollection.set(uri, mergedDiagnostics);\n    }\n\n    private mergeDiagnostics(\n        mergedDiagnostics: vscode.Diagnostic[],\n        newDiagnostics: vscode.Diagnostic[],\n        precedencePredicate: DiagnosticPredicate\n    ): void {\n        for (const diagnostic of newDiagnostics) {\n            // See if a duplicate diagnostic exists\n            const currentDiagnostic = mergedDiagnostics.find(d => isEqual(d, diagnostic));\n            if (currentDiagnostic) {\n                mergedDiagnostics.splice(mergedDiagnostics.indexOf(currentDiagnostic), 1);\n            }\n\n            // Perform de-duplication\n            if (precedencePredicate(diagnostic)) {\n                mergedDiagnostics.push(diagnostic);\n                continue;\n            }\n            if (!currentDiagnostic || !precedencePredicate(currentDiagnostic)) {\n                mergedDiagnostics.push(diagnostic);\n                continue;\n            }\n            mergedDiagnostics.push(currentDiagnostic);\n        }\n    }\n\n    private removeSwiftcDiagnostics() {\n        this.allDiagnostics.forEach((diagnostics, path) => {\n            const newDiagnostics = diagnostics.slice();\n            this.removeDiagnostics(newDiagnostics, isSwiftc);\n            if (diagnostics.length !== newDiagnostics.length) {\n                this.allDiagnostics.set(path, newDiagnostics);\n            }\n            this.updateDiagnosticsCollection(vscode.Uri.file(path));\n        });\n    }\n\n    private removeDiagnostics(\n        diagnostics: vscode.Diagnostic[],\n        matches: DiagnosticPredicate\n    ): vscode.Diagnostic[] {\n        const removed: vscode.Diagnostic[] = [];\n        let i = diagnostics.length;\n        while (i--) {\n            if (matches(diagnostics[i])) {\n                removed.push(...diagnostics.splice(i, 1));\n            }\n        }\n        return removed;\n    }\n\n    /**\n     * Clear the `swift` diagnostics collection. Mostly meant for testing purposes.\n     */\n    clear(): void {\n        this.diagnosticCollection.clear();\n        this.allDiagnostics.clear();\n    }\n\n    dispose() {\n        this.disposed = true;\n        this.diagnosticCollection.dispose();\n        this.onDidStartTaskDisposible.dispose();\n        this.onDidChangeConfigurationDisposible.dispose();\n    }\n\n    private includeSwiftcDiagnostics(): boolean {\n        return configuration.diagnosticsCollection !== \"onlySourceKit\";\n    }\n\n    private parseDiagnostics(swiftExecution: SwiftExecution): Promise<DiagnosticsMap> {\n        return new Promise<DiagnosticsMap>(res => {\n            const diagnostics = new Map();\n            const disposables: vscode.Disposable[] = [];\n            const done = () => {\n                disposables.forEach(d => d.dispose());\n                res(diagnostics);\n            };\n            let remainingData: string | undefined;\n            let lastDiagnostic: vscode.Diagnostic | undefined;\n            let lastDiagnosticNeedsSaving = false;\n            disposables.push(\n                swiftExecution.onDidWrite(data => {\n                    const sanitizedData = (remainingData || \"\") + stripAnsi(data);\n                    const lines = sanitizedData.split(lineBreakRegex);\n                    // If ends with \\n then will be \"\" and there's no affect.\n                    // Otherwise want to keep remaining data to pre-pend next write\n                    remainingData = lines.pop();\n                    for (const line of lines) {\n                        if (checkIfBuildComplete(line)) {\n                            done();\n                            return;\n                        }\n                        const result = this.parseDiagnostic(line);\n                        if (!result) {\n                            continue;\n                        }\n                        if (result instanceof vscode.DiagnosticRelatedInformation) {\n                            if (!lastDiagnostic) {\n                                continue;\n                            }\n                            const relatedInformation =\n                                result as vscode.DiagnosticRelatedInformation;\n                            if (\n                                lastDiagnostic.relatedInformation?.find(\n                                    d =>\n                                        d.message === relatedInformation.message &&\n                                        d.location.uri.fsPath ===\n                                            relatedInformation.location.uri.fsPath &&\n                                        d.location.range.isEqual(relatedInformation.location.range)\n                                )\n                            ) {\n                                // De-duplicate duplicate notes from SwiftPM\n                                // TODO remove when https://github.com/apple/swift/issues/73973 is fixed\n                                continue;\n                            }\n                            lastDiagnostic.relatedInformation = (\n                                lastDiagnostic.relatedInformation || []\n                            ).concat(relatedInformation);\n\n                            if (lastDiagnosticNeedsSaving) {\n                                const expandedUri = relatedInformation.location.uri.fsPath;\n                                const currentUriDiagnostics = diagnostics.get(expandedUri) || [];\n                                lastDiagnostic.range = relatedInformation.location.range;\n                                diagnostics.set(expandedUri, [\n                                    ...currentUriDiagnostics,\n                                    lastDiagnostic,\n                                ]);\n\n                                lastDiagnosticNeedsSaving = false;\n                            }\n                            continue;\n                        }\n                        const { uri, diagnostic } = result as ParsedDiagnostic;\n\n                        const currentUriDiagnostics: vscode.Diagnostic[] =\n                            diagnostics.get(uri) || [];\n                        if (\n                            currentUriDiagnostics.find(\n                                d =>\n                                    d.message === diagnostic.message &&\n                                    d.range.isEqual(diagnostic.range)\n                            )\n                        ) {\n                            // De-duplicate duplicate diagnostics from SwiftPM\n                            // TODO remove when https://github.com/apple/swift/issues/73973 is fixed\n                            lastDiagnostic = undefined;\n                            continue;\n                        }\n                        lastDiagnostic = diagnostic;\n\n                        // If the diagnostic comes from a macro expansion the URI is going to be an invalid URI.\n                        // Save the diagnostic for when we get the related information which has the macro expansion location\n                        // that should be used as the correct URI.\n                        if (this.isValidUri(uri)) {\n                            diagnostics.set(uri, [...currentUriDiagnostics, diagnostic]);\n                        } else {\n                            lastDiagnosticNeedsSaving = true;\n                        }\n                    }\n                }),\n                swiftExecution.onDidClose(done)\n            );\n        });\n    }\n\n    private isValidUri(uri: string): boolean {\n        try {\n            fs.accessSync(uri, fs.constants.F_OK);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    private parseDiagnostic(\n        line: string\n    ): ParsedDiagnostic | vscode.DiagnosticRelatedInformation | undefined {\n        const diagnosticRegex =\n            /^(?:\\S+\\s+)?(.*?):(\\d+)(?::(\\d+))?:\\s+(warning|error|note):\\s+(.*)$/g;\n        const switfcExtraWarningsRegex = /\\[(-W|#).*?\\]/g;\n        const match = diagnosticRegex.exec(line);\n        if (!match) {\n            return;\n        }\n        const uri = vscode.Uri.file(match[1]).fsPath;\n        const message = this.capitalize(match[5]).replace(switfcExtraWarningsRegex, \"\").trim();\n        const range = this.range(match[2], match[3]);\n        const severity = this.severity(match[4]);\n        if (severity === vscode.DiagnosticSeverity.Information) {\n            return new vscode.DiagnosticRelatedInformation(\n                new vscode.Location(vscode.Uri.file(uri), range),\n                message\n            );\n        }\n        const diagnostic = new vscode.Diagnostic(range, message, severity);\n        diagnostic.source = DiagnosticsManager.swiftc;\n        return { uri, diagnostic };\n    }\n\n    private range(lineString: string, columnString: string): vscode.Range {\n        // Output from `swift` is 1-based but vscode expects 0-based lines and columns\n        const line = parseInt(lineString) - 1;\n        const col = parseInt(columnString) - 1;\n        const position = new vscode.Position(line, col);\n        return new vscode.Range(position, position);\n    }\n\n    private severity(severityString: string): vscode.DiagnosticSeverity {\n        let severity = vscode.DiagnosticSeverity.Error;\n        switch (severityString) {\n            case \"warning\":\n                severity = vscode.DiagnosticSeverity.Warning;\n                break;\n            case \"note\":\n                severity = vscode.DiagnosticSeverity.Information;\n                break;\n            default:\n                break;\n        }\n        return severity;\n    }\n\n    private capitalize(message: string): string {\n        return message.charAt(0).toUpperCase() + message.slice(1);\n    }\n\n    private capitalizeMessage = (diagnostic: vscode.Diagnostic): vscode.Diagnostic => {\n        const message = diagnostic.message;\n        diagnostic = { ...diagnostic };\n        diagnostic.message = this.capitalize(message);\n        return diagnostic;\n    };\n\n    private cleanMessage = (diagnostic: vscode.Diagnostic) => {\n        diagnostic = { ...diagnostic };\n        diagnostic.message = diagnostic.message.replace(\"(fix available)\", \"\").trim();\n        return diagnostic;\n    };\n\n    private onDidStartTaskDisposible: vscode.Disposable;\n    private onDidChangeConfigurationDisposible: vscode.Disposable;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport { tmpdir } from \"os\";\nimport { exec } from \"child_process\";\nimport { Writable } from \"stream\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { Version } from \"../utilities/version\";\nimport { execFileStreamOutput } from \"../utilities/utilities\";\nimport configuration from \"../configuration\";\nimport { FolderContext } from \"../FolderContext\";\n\nexport async function captureDiagnostics(\n    ctx: WorkspaceContext,\n    allowMinimalCapture: boolean = true\n) {\n    try {\n        const captureMode = await captureDiagnosticsMode(ctx, allowMinimalCapture);\n\n        // dialog was cancelled\n        if (!captureMode) {\n            return;\n        }\n\n        const diagnosticsDir = path.join(\n            tmpdir(),\n            `vscode-diagnostics-${formatDateString(new Date())}`\n        );\n\n        await fs.mkdir(diagnosticsDir);\n        await writeLogFile(diagnosticsDir, \"extension-logs.txt\", extensionLogs(ctx));\n\n        for (const folder of ctx.folders) {\n            const baseName = path.basename(folder.folder.fsPath);\n            const guid = Math.random().toString(36).substring(2, 10);\n            await writeLogFile(\n                diagnosticsDir,\n                `${baseName}-${guid}-settings.txt`,\n                settingsLogs(folder)\n            );\n\n            if (captureMode === \"Full\") {\n                await writeLogFile(\n                    diagnosticsDir,\n                    `${baseName}-${guid}-source-code-diagnostics.txt`,\n                    diagnosticLogs()\n                );\n\n                // The `sourcekit-lsp diagnose` command is only available in 6.0 and higher.\n                if (folder.toolchain.swiftVersion.isGreaterThanOrEqual(new Version(6, 0, 0))) {\n                    await sourcekitDiagnose(folder, diagnosticsDir);\n                } else {\n                    await writeLogFile(\n                        diagnosticsDir,\n                        `${baseName}-${guid}-sourcekit-lsp.txt`,\n                        sourceKitLogs(folder)\n                    );\n                }\n            }\n\n            ctx.outputChannel.log(`Saved diagnostics to ${diagnosticsDir}`);\n            await showCapturedDiagnosticsResults(diagnosticsDir);\n        }\n    } catch (error) {\n        void vscode.window.showErrorMessage(`Unable to capture diagnostic logs: ${error}`);\n    }\n}\n\nexport async function promptForDiagnostics(ctx: WorkspaceContext) {\n    const ok = \"OK\";\n    const cancel = \"Cancel\";\n    const result = await vscode.window.showInformationMessage(\n        \"SourceKit-LSP has been restored. Would you like to capture a diagnostic bundle to file an issue?\",\n        ok,\n        cancel\n    );\n\n    if (!result || result === cancel) {\n        return;\n    }\n\n    return await captureDiagnostics(ctx, false);\n}\n\nasync function captureDiagnosticsMode(\n    ctx: WorkspaceContext,\n    allowMinimalCapture: boolean\n): Promise<\"Minimal\" | \"Full\" | undefined> {\n    if (\n        ctx.globalToolchainSwiftVersion.isGreaterThanOrEqual(new Version(6, 0, 0)) ||\n        vscode.workspace.getConfiguration(\"sourcekit-lsp\").get<string>(\"trace.server\", \"off\") !==\n            \"off\"\n    ) {\n        const fullButton = allowMinimalCapture ? \"Capture Full Diagnostics\" : \"Capture Diagnostics\";\n        const minimalButton = \"Capture Minimal Diagnostics\";\n        const buttons = allowMinimalCapture ? [fullButton, minimalButton] : [fullButton];\n        const fullCaptureResult = await vscode.window.showInformationMessage(\n            `A Diagnostic Bundle collects information that helps the developers of the Swift for VS Code extension diagnose and fix issues.\n\nThis information contains:\n- Extension logs\n- Versions of Swift installed on your system\n- Crash logs from SourceKit\n- Log messages emitted by SourceKit\n- If possible, a minimized project that caused SourceKit to crash\n- If possible, a minimized project that caused the Swift compiler to crash\n\nAll information is collected locally and you can inspect the diagnose bundle before sharing it with developers of the Swift for VS Code extension.\n\nPlease file an issue with a description of the problem you are seeing at https://github.com/swiftlang/vscode-swift, and attach this diagnose bundle.`,\n            {\n                modal: true,\n                detail: allowMinimalCapture\n                    ? `If you wish to omit potentially sensitive information choose \"${minimalButton}\"`\n                    : undefined,\n            },\n            ...buttons\n        );\n        if (!fullCaptureResult) {\n            return undefined;\n        }\n\n        return fullCaptureResult === fullButton ? \"Full\" : \"Minimal\";\n    } else {\n        return \"Minimal\";\n    }\n}\n\nasync function showCapturedDiagnosticsResults(diagnosticsDir: string) {\n    const showInFinderButton = `Show In ${showCommandType()}`;\n    const copyPath = \"Copy Path to Clipboard\";\n    const result = await vscode.window.showInformationMessage(\n        `Saved diagnostic logs to ${diagnosticsDir}`,\n        showInFinderButton,\n        copyPath\n    );\n    if (result === copyPath) {\n        await vscode.env.clipboard.writeText(diagnosticsDir);\n    } else if (result === showInFinderButton) {\n        exec(showDirectoryCommand(diagnosticsDir), error => {\n            // Opening the explorer on windows returns an exit code of 1 despite opening successfully.\n            if (error && process.platform !== \"win32\") {\n                void vscode.window.showErrorMessage(\n                    `Failed to open ${showCommandType()}: ${error.message}`\n                );\n            }\n        });\n    }\n}\n\nasync function writeLogFile(dir: string, name: string, logs: string) {\n    if (logs.length === 0) {\n        return;\n    }\n    await fs.writeFile(path.join(dir, name), logs);\n}\n\nfunction extensionLogs(ctx: WorkspaceContext): string {\n    return ctx.outputChannel.logs.join(\"\\n\");\n}\n\nfunction settingsLogs(ctx: FolderContext): string {\n    const settings = JSON.stringify(vscode.workspace.getConfiguration(\"swift\"), null, 2);\n    return `${ctx.toolchain.diagnostics}\\nSettings:\\n${settings}`;\n}\n\nfunction diagnosticLogs(): string {\n    const diagnosticToString = (diagnostic: vscode.Diagnostic) => {\n        return `${severityToString(diagnostic.severity)} - ${diagnostic.message} [Ln ${diagnostic.range.start.line}, Col ${diagnostic.range.start.character}]`;\n    };\n\n    return vscode.languages\n        .getDiagnostics()\n        .map(\n            ([uri, diagnostics]) => `${uri}\\n\\t${diagnostics.map(diagnosticToString).join(\"\\n\\t\")}`\n        )\n        .join(\"\\n\");\n}\n\nfunction sourceKitLogs(folder: FolderContext) {\n    const languageClient = folder.workspaceContext.languageClientManager.get(folder);\n    const logs = languageClient.languageClientOutputChannel?.logs ?? [];\n    return logs.join(\"\\n\");\n}\n\nasync function sourcekitDiagnose(ctx: FolderContext, dir: string) {\n    const sourcekitDiagnosticDir = path.join(dir, \"sourcekit-lsp\");\n    await fs.mkdir(sourcekitDiagnosticDir);\n\n    const toolchainSourceKitLSP = ctx.toolchain.getToolchainExecutable(\"sourcekit-lsp\");\n    const lspConfig = configuration.lsp;\n    const serverPathConfig = lspConfig.serverPath;\n    const serverPath = serverPathConfig.length > 0 ? serverPathConfig : toolchainSourceKitLSP;\n\n    await vscode.window.withProgress(\n        {\n            location: vscode.ProgressLocation.Notification,\n        },\n        async progress => {\n            progress.report({ message: \"Diagnosing SourceKit-LSP...\" });\n            const writableStream = progressUpdatingWritable(percent =>\n                progress.report({ message: `Diagnosing SourceKit-LSP: ${percent}%` })\n            );\n\n            await execFileStreamOutput(\n                serverPath,\n                [\n                    \"diagnose\",\n                    \"--bundle-output-path\",\n                    sourcekitDiagnosticDir,\n                    \"--toolchain\",\n                    ctx.toolchain.toolchainPath,\n                ],\n                writableStream,\n                writableStream,\n                null,\n                {\n                    env: { ...process.env, ...configuration.swiftEnvironmentVariables },\n                    maxBuffer: 16 * 1024 * 1024,\n                },\n                ctx ?? undefined\n            );\n        }\n    );\n}\n\nfunction progressUpdatingWritable(updateProgress: (str: string) => void): Writable {\n    return new Writable({\n        write(chunk, _encoding, callback) {\n            const str = (chunk as Buffer).toString(\"utf8\").trim();\n            const percent = /^([0-9])+%/.exec(str);\n            if (percent && percent[1]) {\n                updateProgress(percent[1]);\n            }\n\n            callback();\n        },\n    });\n}\n\nfunction showDirectoryCommand(dir: string): string {\n    switch (process.platform) {\n        case \"win32\":\n            return `explorer ${dir}`;\n        case \"darwin\":\n            return `open ${dir}`;\n        default:\n            return `xdg-open ${dir}`;\n    }\n}\n\nfunction showCommandType(): string {\n    switch (process.platform) {\n        case \"win32\":\n            return \"Explorer\";\n        case \"darwin\":\n            return \"Finder\";\n        default:\n            return \"File Manager\";\n    }\n}\n\nfunction severityToString(severity: vscode.DiagnosticSeverity): string {\n    switch (severity) {\n        case vscode.DiagnosticSeverity.Error:\n            return \"Error\";\n        case vscode.DiagnosticSeverity.Warning:\n            return \"Warning\";\n        case vscode.DiagnosticSeverity.Information:\n            return \"Information\";\n        case vscode.DiagnosticSeverity.Hint:\n            return \"Hint\";\n    }\n}\n\nfunction formatDateString(date: Date): string {\n    const padZero = (num: number, length: number = 2) => num.toString().padStart(length, \"0\");\n\n    const year = date.getFullYear();\n    const month = padZero(date.getMonth() + 1);\n    const day = padZero(date.getDate());\n    const hours = padZero(date.getHours());\n    const minutes = padZero(date.getMinutes());\n    const seconds = padZero(date.getSeconds());\n    const timezoneOffset = -date.getTimezoneOffset();\n    const timezoneSign = timezoneOffset >= 0 ? \"+\" : \"-\";\n    const timezoneHours = padZero(Math.floor(Math.abs(timezoneOffset) / 60));\n    const timezoneMinutes = padZero(Math.abs(timezoneOffset) % 60);\n    return `${year}-${month}-${day}T${hours}-${minutes}-${seconds}${timezoneSign}${timezoneHours}-${timezoneMinutes}`;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\nexport const uriConverters = {\n    protocol2Code: (value: string): vscode.Uri => {\n        if (!value.startsWith(\"sourcekit-lsp:\")) {\n            // Use the default implementation for all schemes other than sourcekit-lsp, as defined here:\n            // https://github.com/microsoft/vscode-languageserver-node/blob/14ddabfc22187b698e83ecde072247aa40727308/client/src/common/protocolConverter.ts#L286\n            return vscode.Uri.parse(value);\n        }\n\n        // vscode.uri fails to round-trip URIs that have both a `=` and `%3D` (percent-encoded `=`) in the query component.\n        // ```ts\n        // vscode.Uri.parse(\"scheme://host?outer=inner%3Dvalue\").toString() -> 'scheme://host?outer%3Dinner%3Dvalue'\n        // vscode.Uri.parse(\"scheme://host?outer=inner%3Dvalue\").toString(/*skipEncoding*/ true) -> 'scheme://host?outer=inner=value'\n        // ```\n        // The SourceKit-LSP scheme relies heavily on encoding options in the query parameters, eg. for Swift macro\n        // expansions and the values of those query parameters might contain percent-encoded `=` signs.\n        //\n        // To work around the round-trip issue, use the URL type from Node.js to parse the URI and then map the URL\n        // components to the Uri components in VS Code.\n        const url = new URL(value);\n        let scheme = url.protocol;\n        if (scheme.endsWith(\":\")) {\n            // URL considers ':' part of the protocol, `vscode.URI` does not consider it part of the scheme.\n            scheme = scheme.substring(0, scheme.length - 1);\n        }\n\n        let auth = url.username;\n        if (url.password) {\n            auth += \":\" + url.password;\n        }\n        let host = url.host;\n        if (auth) {\n            host = auth + \"@\" + host;\n        }\n\n        let query = url.search;\n        if (query.startsWith(\"?\")) {\n            // URL considers '?' not part of the search, `vscode.URI` does consider '?' part of the query.\n            query = query.substring(1);\n        }\n\n        let fragment = url.hash;\n        if (fragment.startsWith(\"#\")) {\n            // URL considers '#' not part of the hash, `vscode.URI` does consider '#' part of the fragment.\n            fragment = fragment.substring(1);\n        }\n\n        return vscode.Uri.from({\n            scheme: scheme,\n            authority: host,\n            path: url.pathname,\n            query: query,\n            fragment: fragment,\n        });\n    },\n    code2Protocol: (value: vscode.Uri): string => {\n        if (value.scheme !== \"sourcekit-lsp\") {\n            // Use the default implementation for all schemes other than sourcekit-lsp, as defined here:\n            // https://github.com/microsoft/vscode-languageserver-node/blob/14ddabfc22187b698e83ecde072247aa40727308/client/src/common/codeConverter.ts#L155\n            return value.toString();\n        }\n        // Create a dummy URL. We set all the components below.\n        const url = new URL(value.scheme + \"://\");\n\n        // Uri encodes username and password in `authority`. Url has its custom fields for those.\n        let host: string;\n        let username: string;\n        let password: string;\n        const atInAuthority = value.authority.indexOf(\"@\");\n        if (atInAuthority !== -1) {\n            host = value.authority.substring(atInAuthority + 1);\n            const auth = value.authority.substring(0, atInAuthority);\n            const colonInAuth = auth.indexOf(\":\");\n            if (colonInAuth === -1) {\n                username = auth;\n                password = \"\";\n            } else {\n                username = auth.substring(0, colonInAuth);\n                password = auth.substring(colonInAuth + 1);\n            }\n        } else {\n            host = value.authority;\n            username = \"\";\n            password = \"\";\n        }\n\n        // Need to set host before username and password because otherwise setting username + password is a no-op (probably\n        // because a URL can't have a username without a host).\n        url.host = host;\n        url.username = username;\n        url.password = password;\n        url.pathname = value.path;\n\n        let search = value.query;\n        if (search) {\n            // URL considers '?' not part of the search, vscode.URI does '?' part of the query.\n            search = \"?\" + search;\n        }\n        url.search = search;\n\n        let hash = value.fragment;\n        if (hash) {\n            // URL considers '#' not part of the hash, vscode.URI does '#' part of the fragment.\n            hash = \"#\" + hash;\n        }\n        url.hash = hash;\n\n        return url.toString();\n    },\n};\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as langclient from \"vscode-languageclient/node\";\nimport { PeekDocumentsParams, PeekDocumentsRequest } from \"./extensions\";\n\n/**\n * Opens a peeked editor in `uri` at `position` having contents from `locations`.\n *\n * **NOTE**:\n * - If the `uri` is not open in the editor, this opens the `uri` in the editor and then opens a peeked editor.\n * - This closes any previously displayed peeked editor in `uri` and then, reopens a peeked editor in `uri` at\n *   the given `position` with contents from the new `locations`.\n *\n * @param uri The uri of the file in which a peeked editor is to be opened\n * @param position The position in the file in which a peeked editor is to be opened\n * @param locations The locations of the contents which has to be displayed by the peeked editor\n */\nasync function openPeekedEditorIn(\n    uri: vscode.Uri,\n    position: vscode.Position,\n    locations: vscode.Location[]\n) {\n    // #### NOTE - Undocumented behaviour of invoking VS Code's built-in \"editor.action.peekLocations\" command:\n    // 1. If the `uri` is not open in the editor, it opens the `uri` in the editor and then opens a peeked editor.\n    // 2. It always closes the previous peeked editor (If any)\n    // 3. And after closing, It opens a new peeked editor having the contents of `locations` in `uri` **if and only\n    //    if** the previous peeked editor was displayed at a *different* `position` in `uri`.\n    // 4. If it happens to be that the previous peeked editor was displayed at the *same* `position` in `uri`, then it\n    //    doesn't open the peeked editor window having the contents of new `locations` at all.\n\n    // As (4.) says above, if we invoke \"editor.action.peekLocations\" on a position in which another peeked editor\n    // window is already being shown, it won't cause the new peeked editor window to show up at all. This is not the\n    // ideal behaviour.\n    //\n    // For example:\n    // If there's already a peeked editor window at the position (2, 2) in \"main.swift\", its impossible to close this\n    // peeked editor window and open a new peeked editor window at the same position (2, 2) in \"main.swift\" by invoking\n    // the \"editor.action.peekLocations\" command in a single call.\n    //\n    // *The ideal behaviour* is to close any previously opened peeked editor window and then open the new one without\n    // any regard to its `position` in the `uri`.\n\n    // In order to achieve *the ideal behaviour*, we manually close the peeked editor window by ourselves before\n    // opening a new peeked editor window.\n    //\n    // Since there isn't any API available to close the previous peeked editor, as a **workaround**, we open a dummy\n    // peeked editor at a different position, causing the previous one to close irrespective of where it is. After\n    // which we can invoke the command again to show the actual peeked window having the contents of the `locations`.\n    await vscode.commands.executeCommand(\n        \"editor.action.peekLocations\",\n        uri,\n        new vscode.Position(position.line, position.character !== 0 ? position.character - 1 : 1),\n        [new vscode.Location(vscode.Uri.parse(\"\"), new vscode.Position(0, 0))],\n        \"peek\"\n    );\n\n    // Opens the actual peeked editor window\n    await vscode.commands.executeCommand(\n        \"editor.action.peekLocations\",\n        uri,\n        position,\n        locations,\n        \"peek\"\n    );\n}\n\nexport function activatePeekDocuments(client: langclient.LanguageClient): vscode.Disposable {\n    const peekDocuments = client.onRequest(\n        PeekDocumentsRequest.method,\n        async (params: PeekDocumentsParams) => {\n            const peekURI = client.protocol2CodeConverter.asUri(params.uri);\n\n            const peekPosition = new vscode.Position(\n                params.position.line,\n                params.position.character\n            );\n\n            const peekLocations = params.locations.map(\n                location =>\n                    new vscode.Location(\n                        client.protocol2CodeConverter.asUri(location),\n                        new vscode.Position(0, 0)\n                    )\n            );\n\n            await openPeekedEditorIn(peekURI, peekPosition, peekLocations);\n\n            return { success: true };\n        }\n    );\n\n    return peekDocuments;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\nexport interface LSPLogger {\n    debug(message: string): void;\n    info(message: string): void;\n    warn(message: string): void;\n    error(message: string): void;\n}\n\nexport class LSPOutputChannel implements LSPLogger {\n    private _channel: vscode.OutputChannel | undefined;\n\n    constructor(\n        private name: string,\n        private includeLogLevel: boolean = true,\n        private includeTimestamp: boolean = true\n    ) {}\n\n    private get channel(): vscode.OutputChannel {\n        if (!this._channel) {\n            this._channel = vscode.window.createOutputChannel(this.name);\n        }\n        return this._channel;\n    }\n\n    dispose() {\n        this._channel?.dispose();\n        this._channel = undefined;\n    }\n\n    debug(message: string) {\n        this.logOutputMessage(\"Debug\", message);\n    }\n\n    info(message: string) {\n        this.logOutputMessage(\"Info\", message);\n    }\n\n    warn(message: string) {\n        this.logOutputMessage(\"Warn\", message);\n    }\n\n    error(message: string) {\n        this.logOutputMessage(\"Error\", message);\n    }\n\n    logOutputMessage(logLevel: string, message: string) {\n        let formatted = \"\";\n        if (this.includeLogLevel) {\n            formatted = (formatted || \"[\") + logLevel.padEnd(5);\n        }\n        if (this.includeTimestamp) {\n            formatted += formatted ? \" - \" : \"[\";\n            formatted += new Date().toLocaleTimeString();\n        }\n        formatted += formatted ? \"] \" : \" \";\n        formatted += message;\n        this.channel.appendLine(formatted);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as langclient from \"vscode-languageclient/node\";\nimport { GetReferenceDocumentParams, GetReferenceDocumentRequest } from \"./extensions\";\n\nexport function activateGetReferenceDocument(client: langclient.LanguageClient): vscode.Disposable {\n    const getReferenceDocument = vscode.workspace.registerTextDocumentContentProvider(\n        \"sourcekit-lsp\",\n        {\n            provideTextDocumentContent: async (uri, token) => {\n                const params: GetReferenceDocumentParams = {\n                    uri: client.code2ProtocolConverter.asUri(uri),\n                };\n\n                const result = await client.sendRequest(\n                    GetReferenceDocumentRequest.type,\n                    params,\n                    token\n                );\n\n                if (result) {\n                    return result.content;\n                } else {\n                    return \"Unable to retrieve reference document\";\n                }\n            },\n        }\n    );\n\n    return getReferenceDocument;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { LanguageClient, LanguageClientOptions, ServerOptions } from \"vscode-languageclient/node\";\n\n/**\n * Used to create a {@link LanguageClient} for use in VS Code.\n *\n * This is primarily used to make unit testing easier so that we don't have to\n * mock out a constructor in the `vscode-languageclient` module.\n */\nexport class LanguageClientFactory {\n    /**\n     * Create a new {@link LanguageClient} for use in VS Code.\n     *\n     * @param name the human-readable name for the client\n     * @param id the identifier for the client (used in settings)\n     * @param serverOptions the {@link ServerOptions}\n     * @param clientOptions the {@link LanguageClientOptions}\n     * @returns the newly created {@link LanguageClient}\n     */\n    createLanguageClient(\n        name: string,\n        id: string,\n        serverOptions: ServerOptions,\n        clientOptions: LanguageClientOptions\n    ): LanguageClient {\n        return new LanguageClient(name, id, serverOptions, clientOptions);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as langclient from \"vscode-languageclient/node\";\nimport { checkExperimentalCapability } from \"./LanguageClientManager\";\nimport { DidChangeActiveDocumentNotification } from \"./extensions/DidChangeActiveDocumentRequest\";\n\n/**\n * Monitors the active document and notifies the LSP whenever it changes.\n * Only sends notifications for documents that produce `textDocument/didOpen`/`textDocument/didClose`\n * requests to the client.\n */\nexport class LSPActiveDocumentManager {\n    private openDocuments = new Set<vscode.Uri>();\n    private lastActiveDocument: langclient.TextDocumentIdentifier | null = null;\n\n    // These are LSP middleware functions that listen for document open and close events.\n    public async didOpen(\n        document: vscode.TextDocument,\n        next: (data: vscode.TextDocument) => Promise<void>\n    ) {\n        this.openDocuments.add(document.uri);\n        await next(document);\n    }\n\n    public async didClose(\n        document: vscode.TextDocument,\n        next: (data: vscode.TextDocument) => Promise<void>\n    ) {\n        this.openDocuments.add(document.uri);\n        await next(document);\n    }\n\n    public activateDidChangeActiveDocument(client: langclient.LanguageClient): vscode.Disposable {\n        // Fire an inital notification on startup if there is an open document.\n        this.sendNotification(client, vscode.window.activeTextEditor?.document);\n\n        // Listen for the active editor to change and send a notification.\n        return vscode.window.onDidChangeActiveTextEditor(event => {\n            this.sendNotification(client, event?.document);\n        });\n    }\n\n    private sendNotification(\n        client: langclient.LanguageClient,\n        document: vscode.TextDocument | undefined\n    ) {\n        if (checkExperimentalCapability(client, DidChangeActiveDocumentNotification.method, 1)) {\n            const textDocument =\n                document && this.openDocuments.has(document.uri)\n                    ? client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    : null;\n\n            // Avoid sending multiple identical notifications in a row.\n            if (textDocument !== this.lastActiveDocument) {\n                void client.sendNotification(DidChangeActiveDocumentNotification.method, {\n                    textDocument: textDocument,\n                });\n            }\n            this.lastActiveDocument = textDocument;\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { MessageDirection, NotificationType, TextDocumentIdentifier } from \"vscode-languageclient\";\n\n// We use namespaces to store request information just like vscode-languageclient\n/* eslint-disable @typescript-eslint/no-namespace */\n\nexport interface DidChangeActiveDocumentParams {\n    /**\n     * The document that is being displayed in the active editor.\n     */\n    textDocument?: TextDocumentIdentifier;\n}\n\n/**\n * Notify the server that the active document has changed.\n */\nexport namespace DidChangeActiveDocumentNotification {\n    export const method = \"window/didChangeActiveDocument\" as const;\n    export const messageDirection: MessageDirection = MessageDirection.clientToServer;\n    export const type = new NotificationType<DidChangeActiveDocumentParams>(method);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as TestDiscovery from \"./TestDiscovery\";\nimport {\n    LSPTestItem,\n    TextDocumentTestsRequest,\n    WorkspaceTestsRequest,\n} from \"../sourcekit-lsp/extensions\";\nimport { checkExperimentalCapability } from \"../sourcekit-lsp/LanguageClientManager\";\nimport { SwiftPackage } from \"../SwiftPackage\";\nimport { LanguageClientManager } from \"../sourcekit-lsp/LanguageClientManager\";\nimport { LanguageClient } from \"vscode-languageclient/node\";\n\n/**\n * Used to augment test discovery via `swift test --list-tests`.\n *\n * Uses document symbol request to keep a running copy of all the test methods\n * in a file. When a file is saved it checks to see if any new methods have been\n * added, or if any methods have been removed and edits the test items based on\n * these results.\n */\nexport class LSPTestDiscovery {\n    constructor(private languageClient: LanguageClientManager) {}\n\n    /**\n     * Return a list of tests in the supplied document.\n     * @param document A document to query\n     */\n    async getDocumentTests(\n        swiftPackage: SwiftPackage,\n        document: vscode.Uri\n    ): Promise<TestDiscovery.TestClass[]> {\n        return await this.languageClient.useLanguageClient(async (client, token) => {\n            // Only use the lsp for this request if it supports the\n            // textDocument/tests method, and is at least version 2.\n            if (checkExperimentalCapability(client, TextDocumentTestsRequest.method, 2)) {\n                const testsInDocument = await client.sendRequest(\n                    TextDocumentTestsRequest.type,\n                    { textDocument: { uri: document.toString() } },\n                    token\n                );\n                return this.transformToTestClass(client, swiftPackage, testsInDocument);\n            } else {\n                throw new Error(`${TextDocumentTestsRequest.method} requests not supported`);\n            }\n        });\n    }\n\n    /**\n     * Return list of workspace tests\n     * @param workspaceRoot Root of current workspace folder\n     */\n    async getWorkspaceTests(swiftPackage: SwiftPackage): Promise<TestDiscovery.TestClass[]> {\n        return await this.languageClient.useLanguageClient(async (client, token) => {\n            // Only use the lsp for this request if it supports the\n            // workspace/tests method, and is at least version 2.\n            if (checkExperimentalCapability(client, WorkspaceTestsRequest.method, 2)) {\n                const tests = await client.sendRequest(WorkspaceTestsRequest.type, token);\n                return await this.transformToTestClass(client, swiftPackage, tests);\n            } else {\n                throw new Error(`${WorkspaceTestsRequest.method} requests not supported`);\n            }\n        });\n    }\n\n    /**\n     * Convert from `LSPTestItem[]` to `TestDiscovery.TestClass[]`,\n     * updating the format of the location.\n     */\n    private async transformToTestClass(\n        client: LanguageClient,\n        swiftPackage: SwiftPackage,\n        input: LSPTestItem[]\n    ): Promise<TestDiscovery.TestClass[]> {\n        let result: TestDiscovery.TestClass[] = [];\n        for (const item of input) {\n            const location = client.protocol2CodeConverter.asLocation(item.location);\n            result = [\n                ...result,\n                {\n                    ...item,\n                    id: await this.transformId(item, location, swiftPackage),\n                    children: await this.transformToTestClass(client, swiftPackage, item.children),\n                    location,\n                },\n            ];\n        }\n        return result;\n    }\n\n    /**\n     * If the test is an XCTest, transform the ID provided by the LSP from a\n     * swift-testing style ID to one that XCTest can use. This allows the ID to\n     * be used to tell to the test runner (xctest or swift-testing) which tests to run.\n     */\n    private async transformId(\n        item: LSPTestItem,\n        location: vscode.Location,\n        swiftPackage: SwiftPackage\n    ): Promise<string> {\n        // XCTest: Target.TestClass/testCase\n        // swift-testing: TestClass/testCase()\n        //                TestClassOrStruct/NestedTestSuite/testCase()\n        const target = await swiftPackage.getTarget(location.uri.fsPath);\n\n        // If we're using an older sourcekit-lsp it doesn't prepend the target name\n        // to the test item id.\n        const id =\n            target !== undefined && !item.id.startsWith(`${target.c99name}.`)\n                ? `${target.c99name}.${item.id}`\n                : item.id;\n        return item.style === \"XCTest\" ? id.replace(/\\(\\)$/, \"\") : id;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { TestStyle } from \"../sourcekit-lsp/extensions\";\nimport { TestClass } from \"./TestDiscovery\";\n\n/*\n * Build an array of TestClasses from test list output by `swift test list`\n */\nexport function parseTestsFromSwiftTestListOutput(input: string): TestClass[] {\n    const tests = new Array<TestClass>();\n    const lines = input.match(/[^\\r\\n]+/g);\n    if (!lines) {\n        return tests;\n    }\n\n    for (const line of lines) {\n        let targetName: string | undefined;\n        let testName: string | undefined;\n        let style: TestStyle = \"XCTest\";\n\n        // Regex \"<testTarget>.<class>/<function>\"\n        const xcTestGroup = /^([\\w\\d_]*)\\.([\\w\\d_]*)\\/(.*)$/.exec(line);\n        if (xcTestGroup) {\n            targetName = xcTestGroup[1];\n            testName = `${xcTestGroup[2]}/${xcTestGroup[3]}`;\n            style = \"XCTest\";\n        }\n\n        // Regex \"<testTarget>.<testName>\"\n        const swiftTestGroup = /^([\\w\\d_]*)\\.(.*\\(.*\\))$/.exec(line);\n        if (swiftTestGroup) {\n            targetName = swiftTestGroup[1];\n            testName = swiftTestGroup[2];\n            style = \"swift-testing\";\n        }\n\n        if (!testName || !targetName) {\n            continue;\n        }\n\n        const components = [targetName, ...testName.split(\"/\")];\n        let separator = \".\";\n        // Walk the components of the fully qualified name, adding any missing nodes in the tree\n        // as we encounter them, and adding to the children of existing nodes.\n        components.reduce(\n            ({ tests, currentId }, component) => {\n                const id = currentId ? `${currentId}${separator}${component}` : component;\n                if (currentId) {\n                    separator = \"/\"; // separator starts as . after the tartget name, then switches to / for suites.\n                }\n\n                const testStyle: TestStyle = id === targetName ? \"test-target\" : style;\n                let target = tests.find(item => item.id === id);\n                if (!target) {\n                    target = {\n                        id,\n                        label: component,\n                        location: undefined,\n                        style,\n                        children: [],\n                        disabled: false,\n                        tags: [{ id: testStyle }],\n                    };\n                    tests.push(target);\n                }\n                return { tests: target.children, currentId: id };\n            },\n            { tests, currentId: undefined as undefined | string }\n        );\n    }\n    return tests;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { TestClass } from \"./TestDiscovery\";\nimport { parseTestsFromSwiftTestListOutput } from \"./SPMTestDiscovery\";\n\nexport function parseTestsFromDocumentSymbols(\n    target: string,\n    symbols: vscode.DocumentSymbol[],\n    uri: vscode.Uri\n): TestClass[] {\n    // Converts a document into the output of `swift test list`.\n    // This _only_ looks for XCTests.\n    const locationLookup = new Map<string, vscode.Location | undefined>();\n    const swiftTestListOutput = symbols\n        .filter(\n            symbol =>\n                symbol.kind === vscode.SymbolKind.Class ||\n                symbol.kind === vscode.SymbolKind.Namespace\n        )\n        .flatMap(symbol => {\n            const functions = symbol.children\n                .filter(func => func.kind === vscode.SymbolKind.Method)\n                .filter(func => func.name.match(/^test.*\\(\\)/))\n                .map(func => {\n                    const openBrackets = func.name.indexOf(\"(\");\n                    let funcName = func.name;\n                    if (openBrackets) {\n                        funcName = func.name.slice(0, openBrackets);\n                    }\n                    return {\n                        name: funcName,\n                        location: new vscode.Location(uri, func.range),\n                    };\n                });\n\n            const location =\n                symbol.kind === vscode.SymbolKind.Class\n                    ? new vscode.Location(uri, symbol.range)\n                    : undefined;\n\n            locationLookup.set(`${target}.${symbol.name}`, location);\n\n            return functions.map(func => {\n                const testName = `${target}.${symbol.name}/${func.name}`;\n                locationLookup.set(testName, func.location);\n                return testName;\n            });\n        })\n        .join(\"\\n\");\n\n    const tests = parseTestsFromSwiftTestListOutput(swiftTestListOutput);\n\n    // The locations for each test case/suite were captured when processing the\n    // symbols. Annotate the processed TestClasses with their locations.\n    const annotatedTests = annotateTestsWithLocations(tests, locationLookup);\n    return annotatedTests;\n}\n\nfunction annotateTestsWithLocations(\n    tests: TestClass[],\n    locations: Map<string, vscode.Location | undefined>\n): TestClass[] {\n    return tests.map(test => ({\n        ...test,\n        location: locations.get(test.id),\n        children: annotateTestsWithLocations(test.children, locations),\n    }));\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { getBuildAllTask } from \"./tasks/SwiftTaskProvider\";\nimport configuration from \"./configuration\";\nimport { FolderContext } from \"./FolderContext\";\nimport { TaskOperation } from \"./tasks/TaskQueue\";\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport debounce = require(\"lodash.debounce\");\n\nexport class BackgroundCompilation implements vscode.Disposable {\n    private workspaceFileWatcher?: vscode.FileSystemWatcher;\n    private configurationEventDisposable?: vscode.Disposable;\n    private validFileTypes = [\"swift\", \"c\", \"cpp\", \"h\", \"hpp\", \"m\", \"mm\"];\n    private disposables: vscode.Disposable[] = [];\n\n    constructor(private folderContext: FolderContext) {\n        // We only want to configure the file watcher if background compilation is enabled.\n        this.configurationEventDisposable = vscode.workspace.onDidChangeConfiguration(event => {\n            if (event.affectsConfiguration(\"swift.backgroundCompilation\", folderContext.folder)) {\n                if (configuration.backgroundCompilation) {\n                    this.setupFileWatching();\n                } else {\n                    this.stopFileWatching();\n                }\n            }\n        });\n\n        if (configuration.backgroundCompilation) {\n            this.setupFileWatching();\n        }\n    }\n\n    private setupFileWatching() {\n        const fileTypes = this.validFileTypes.join(\",\");\n        const rootFolders = [\"Sources\", \"Tests\", \"Snippets\", \"Plugins\"].join(\",\");\n        this.disposables.push(\n            (this.workspaceFileWatcher = vscode.workspace.createFileSystemWatcher(\n                `**/{${rootFolders}}/**/*.{${fileTypes}}`\n            ))\n        );\n\n        // Throttle events since many change events can be recieved in a short time if the user\n        // does a \"Save All\" or a process writes several files in quick succession.\n        this.disposables.push(\n            this.workspaceFileWatcher.onDidChange(\n                debounce(\n                    () => {\n                        void this.runTask();\n                    },\n                    100 /* 10 times per second */,\n                    { trailing: true }\n                )\n            )\n        );\n    }\n\n    private stopFileWatching() {\n        this.disposables.forEach(disposable => disposable.dispose());\n    }\n\n    dispose() {\n        this.configurationEventDisposable?.dispose();\n        this.disposables.forEach(disposable => disposable.dispose());\n    }\n\n    /**\n     * Run background compilation task\n     *\n     * If task is already running and nobody else is waiting for a build task\n     * then wait for the current build task to complete and then run another\n     * after. Otherwise just return\n     */\n    async runTask() {\n        // create compile task and execute it\n        const backgroundTask = await getBuildAllTask(this.folderContext);\n        if (!backgroundTask) {\n            return;\n        }\n        try {\n            await this.folderContext.taskQueue.queueOperation(new TaskOperation(backgroundTask));\n        } catch {\n            // can ignore if running task fails\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\n\nexport class RunningTask {\n    constructor(public task: vscode.Task | string) {}\n    get name(): string {\n        if (typeof this.task !== \"string\") {\n            const folder = this.task.definition.cwd as string;\n            if (folder) {\n                return `${this.task.name} (${path.basename(folder)})`;\n            } else {\n                return this.task.name;\n            }\n        } else {\n            return this.task;\n        }\n    }\n}\n\n/**\n * Manages a {@link vscode.StatusBarItem StatusBarItem} to display the status\n * of tasks run by this extension.\n */\nexport class StatusItem {\n    private item: vscode.StatusBarItem;\n    private runningTasks: RunningTask[] = [];\n\n    constructor() {\n        this.item = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    }\n\n    /**\n     * Display status item while running a process/task\n     * @param task Task or process name to display status of\n     * @param process Code to run while displaying status\n     */\n    async showStatusWhileRunning<Return>(task: vscode.Task | string, process: { (): Return }) {\n        this.start(task);\n        try {\n            const value = await process();\n            this.end(task);\n            return value;\n        } catch (error) {\n            this.end(task);\n            throw error;\n        }\n    }\n\n    /**\n     * Signals the start of a {@link vscode.Task Task}.\n     *\n     * This will display the name of the task, preceded by a spinner animation.\n     */\n    start(task: vscode.Task | string) {\n        if (this.runningTasks.findIndex(element => element.task === task) !== -1) {\n            return; // This task is already running.\n        }\n        const runningTask = new RunningTask(task);\n        this.runningTasks.push(runningTask);\n\n        this.showTask(runningTask);\n    }\n\n    /**\n     * Updates the status bar message for the running {@link vscode.Task Task}.\n     *\n     * This will display the message, preceded by a spinner animation.\n     */\n    update(task: vscode.Task | string, message: string) {\n        const runningTask = this.runningTasks.find(element => element.task === task);\n        if (!runningTask) {\n            return; // This task is not running.\n        }\n\n        this.showTask(runningTask, message);\n    }\n\n    /**\n     * Signals the end of a {@link vscode.Task Task}.\n     *\n     * If no other tasks are in progress, this will hide the {@link vscode.StatusBarItem StatusBarItem}.\n     * Otherwise, the most recently added task will be shown instead.\n     */\n    end(task: vscode.Task | string) {\n        const index = this.runningTasks.findIndex(element => element.task === task);\n        if (index === -1) {\n            return; // Unknown task.\n        }\n        this.runningTasks.splice(index, 1);\n        if (this.runningTasks.length === 0) {\n            this.hide();\n        } else {\n            const taskToDisplay = this.runningTasks[this.runningTasks.length - 1];\n            this.showTask(taskToDisplay);\n        }\n    }\n\n    /**\n     * Show status item for task\n     * @param task task to show status item for\n     */\n    private showTask(task: RunningTask, message?: string) {\n        message = message ?? task.name;\n        if (typeof task.task !== \"string\") {\n            this.show(`$(loading~spin) ${message}`, message, \"workbench.action.tasks.showTasks\");\n        } else {\n            this.show(`$(loading~spin) ${message}`, message);\n        }\n    }\n\n    /**\n     * Shows the {@link vscode.StatusBarItem StatusBarItem} with the provided message.\n     */\n    private show(\n        message: string,\n        accessibilityMessage: string | undefined = undefined,\n        command: string | undefined = undefined\n    ) {\n        this.item.text = message;\n        this.item.accessibilityInformation = { label: accessibilityMessage ?? message };\n        this.item.command = command;\n        this.item.show();\n    }\n\n    /**\n     * Hides the {@link vscode.StatusBarItem StatusBarItem}.\n     */\n    private hide() {\n        this.item.hide();\n    }\n\n    dispose() {\n        this.item.dispose();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { Version } from \"../utilities/version\";\nimport { FolderContext } from \"../FolderContext\";\nimport { LanguageClientFactory } from \"./LanguageClientFactory\";\nimport { LanguageClientManager } from \"./LanguageClientManager\";\nimport { FolderOperation, WorkspaceContext } from \"../WorkspaceContext\";\n\n/**\n * Manages the creation of LanguageClient instances for workspace folders.\n *\n * A LanguageClient will be created for each unique toolchain version. If two\n * folders share the same toolchain version then they will share the same LanguageClient.\n * This ensures that a folder always uses the LanguageClient bundled with its desired toolchain.\n */\nexport class LanguageClientToolchainCoordinator implements vscode.Disposable {\n    private subscriptions: vscode.Disposable[] = [];\n    private clients: Map<string, LanguageClientManager> = new Map();\n\n    public constructor(\n        workspaceContext: WorkspaceContext,\n        languageClientFactory: LanguageClientFactory = new LanguageClientFactory() // used for testing only\n    ) {\n        this.subscriptions.push(\n            // stop and start server for each folder based on which file I am looking at\n            workspaceContext.onDidChangeFolders(async ({ folder, operation }) => {\n                await this.handleEvent(folder, operation, languageClientFactory);\n            })\n        );\n\n        // Add any folders already in the workspace context at the time of construction.\n        // This is mainly for testing purposes, as this class should be created immediately\n        // when the extension is activated and the workspace context is first created.\n        for (const folder of workspaceContext.folders) {\n            void this.handleEvent(folder, FolderOperation.add, languageClientFactory);\n        }\n    }\n\n    private async handleEvent(\n        folder: FolderContext | null,\n        operation: FolderOperation,\n        languageClientFactory: LanguageClientFactory\n    ) {\n        if (!folder) {\n            return;\n        }\n        const singleServer = folder.swiftVersion.isGreaterThanOrEqual(new Version(5, 7, 0));\n        switch (operation) {\n            case FolderOperation.add: {\n                const client = await this.create(folder, singleServer, languageClientFactory);\n                await (singleServer\n                    ? client.addFolder(folder)\n                    : client.setLanguageClientFolder(folder));\n                break;\n            }\n            case FolderOperation.remove: {\n                const client = await this.create(folder, singleServer, languageClientFactory);\n                await client.removeFolder(folder);\n                break;\n            }\n            case FolderOperation.focus: {\n                if (!singleServer) {\n                    const client = await this.create(folder, singleServer, languageClientFactory);\n                    await client.setLanguageClientFolder(folder);\n                }\n                break;\n            }\n        }\n    }\n\n    /**\n     * Returns the LanguageClientManager for the supplied folder.\n     * @param folder\n     * @returns\n     */\n    public get(folder: FolderContext): LanguageClientManager {\n        return this.getByVersion(folder.swiftVersion.toString());\n    }\n\n    /**\n     * Returns the LanguageClientManager for the supplied toolchain version.\n     * @param folder\n     * @returns\n     */\n    public getByVersion(version: string): LanguageClientManager {\n        const client = this.clients.get(version);\n        if (!client) {\n            throw new Error(\n                \"LanguageClientManager has not yet been created. This is a bug, please file an issue at https://github.com/swiftlang/vscode-swift/issues\"\n            );\n        }\n        return client;\n    }\n\n    /**\n     * Stops all LanguageClient instances.\n     * This should be called when the extension is deactivated.\n     */\n    public async stop() {\n        for (const client of this.clients.values()) {\n            await client.stop();\n        }\n        this.clients.clear();\n    }\n\n    private async create(\n        folder: FolderContext,\n        singleServerSupport: boolean,\n        languageClientFactory: LanguageClientFactory\n    ): Promise<LanguageClientManager> {\n        const versionString = folder.swiftVersion.toString();\n        let client = this.clients.get(versionString);\n        if (!client) {\n            client = new LanguageClientManager(folder, languageClientFactory);\n            this.clients.set(versionString, client);\n            // Callers that must restart when switching folders will call setLanguageClientFolder themselves.\n            if (singleServerSupport) {\n                await client.setLanguageClientFolder(folder);\n            }\n        }\n        return client;\n    }\n\n    dispose() {\n        this.subscriptions.forEach(item => item.dispose());\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022-2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\n\n/** Manage task execution and completion handlers */\nexport class TaskManager implements vscode.Disposable {\n    constructor(private workspaceContext: WorkspaceContext) {\n        this.onDidEndTaskProcessDisposible = vscode.tasks.onDidEndTaskProcess(event => {\n            this.taskEndObservers.forEach(observer => observer(event));\n        });\n        this.onDidEndTaskDisposible = vscode.tasks.onDidEndTask(event => {\n            this.taskEndObservers.forEach(observer =>\n                observer({ execution: event.execution, exitCode: undefined })\n            );\n            // if task disabled the task queue then re-enable it\n            if (event.execution.task.definition.disableTaskQueue) {\n                this.disableTaskQueue(event.execution.task, false);\n            }\n        });\n        this.onDidStartTaskDisposible = vscode.tasks.onDidStartTask(event => {\n            if (this.taskStartObserver) {\n                this.taskStartObserver(event);\n            }\n            // if task is set to disable the task queue then disable it\n            if (event.execution.task.definition.disableTaskQueue) {\n                this.disableTaskQueue(event.execution.task, true);\n            }\n        });\n    }\n\n    /**\n     * Add handler to be called when either a task process completes or when the task\n     * completes without the process finishing.\n     *\n     * If the task process completes then it provides the return code from the process\n     * But if the process doesn't complete the return code is undefined\n     *\n     * @param observer function called when task completes\n     * @returns disposable handle. Once you have finished with the observer call dispose on this\n     */\n    onDidEndTaskProcess(observer: TaskEndObserver): vscode.Disposable {\n        this.taskEndObservers.add(observer);\n        return {\n            dispose: () => {\n                this.removeObserver(observer);\n            },\n        };\n    }\n\n    /**\n     * Execute task and wait until it is finished. This function assumes that no\n     * other tasks with the same name will be run at the same time\n     *\n     * @param task task to execute\n     * @returns exit code from executable\n     */\n    async executeTaskAndWait(\n        task: vscode.Task,\n        token?: vscode.CancellationToken\n    ): Promise<number | undefined> {\n        // set id on definition to catch this task when completing\n        task.definition.id = this.taskId;\n        this.taskId += 1;\n        return new Promise<number | undefined>((resolve, reject) => {\n            // There is a bug in the vscode task execution code where if you start two\n            // tasks with the name but different scopes at the same time the second one\n            // will not start. If you wait until the first one has started the second\n            // one will run. The startingTaskPromise is setup when a executeTask is\n            // called and resolved at the point it actually starts\n            if (this.startingTaskPromise) {\n                void this.startingTaskPromise.then(() =>\n                    this.executeTaskAndResolve(task, resolve, reject, token)\n                );\n            } else {\n                this.executeTaskAndResolve(task, resolve, reject, token);\n            }\n        });\n    }\n\n    private executeTaskAndResolve(\n        task: vscode.Task,\n        resolve: (result: number | undefined) => void,\n        reject: (reason?: Error) => void,\n        token?: vscode.CancellationToken\n    ) {\n        const disposable = this.onDidEndTaskProcess(event => {\n            if (event.execution.task.definition.id === task.definition.id) {\n                disposable.dispose();\n                resolve(event.exitCode);\n            }\n        });\n        // setup startingTaskPromise to be resolved one task has started\n        if (this.startingTaskPromise !== undefined) {\n            this.workspaceContext.outputChannel.appendLine(\n                \"TaskManager: Starting promise should be undefined if we reach here.\"\n            );\n        }\n        this.startingTaskPromise = new Promise<void>(resolve => {\n            this.taskStartObserver = () => {\n                this.taskStartObserver = undefined;\n                this.startingTaskPromise = undefined;\n                resolve();\n            };\n        });\n        vscode.tasks.executeTask(task).then(\n            execution => {\n                token?.onCancellationRequested(() => {\n                    execution.terminate();\n                    disposable.dispose();\n                    resolve(undefined);\n                });\n            },\n            error => {\n                this.workspaceContext.outputChannel.appendLine(`Error executing task: ${error}`);\n                disposable.dispose();\n                this.startingTaskPromise = undefined;\n                reject(error);\n            }\n        );\n    }\n\n    private removeObserver(observer: TaskEndObserver) {\n        this.taskEndObservers.delete(observer);\n    }\n\n    /** Find folderContext based on task an then disable/enable its task queue */\n    private disableTaskQueue(task: vscode.Task, disable: boolean) {\n        const index = this.workspaceContext.folders.findIndex(\n            context => context.folder.fsPath === task.definition.cwd\n        );\n        if (index === -1) {\n            return;\n        }\n        this.workspaceContext.folders[index].taskQueue.disabled = disable;\n    }\n\n    dispose() {\n        this.onDidEndTaskDisposible.dispose();\n        this.onDidEndTaskProcessDisposible.dispose();\n        this.onDidStartTaskDisposible.dispose();\n    }\n\n    private taskEndObservers: Set<TaskEndObserver> = new Set();\n    private onDidEndTaskProcessDisposible: vscode.Disposable;\n    private onDidEndTaskDisposible: vscode.Disposable;\n    private onDidStartTaskDisposible: vscode.Disposable;\n    private taskStartObserver: TaskStartObserver | undefined;\n    private taskId = 0;\n    private startingTaskPromise: Promise<void> | undefined;\n}\n\n/** Workspace Folder observer function */\nexport type TaskStartObserver = (event: vscode.TaskStartEvent) => unknown;\nexport type TaskEndObserver = (execution: vscode.TaskProcessEndEvent) => unknown;\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport { isDeepStrictEqual } from \"util\";\nimport { FolderContext } from \"../FolderContext\";\nimport { BuildFlags } from \"../toolchain/BuildFlags\";\nimport { stringArrayInEnglish } from \"../utilities/utilities\";\nimport { SWIFT_LAUNCH_CONFIG_TYPE } from \"./debugAdapter\";\nimport { getFolderAndNameSuffix } from \"./buildConfig\";\nimport configuration from \"../configuration\";\n\n/** Options used to configure {@link makeDebugConfigurations}. */\nexport interface WriteLaunchConfigurationsOptions {\n    /** Force the generation of launch configurations regardless of user settings. */\n    force?: boolean;\n\n    /** Automatically answer yes to update dialogs. */\n    yes?: boolean;\n}\n\n/**\n * Edit launch.json based on contents of Swift Package.\n * Adds launch configurations based on the executables in Package.swift.\n *\n * @param ctx folder context to create launch configurations for\n * @param options the options used to configure behavior of this function\n * @returns a boolean indicating whether or not launch configurations were actually updated\n */\nexport async function makeDebugConfigurations(\n    ctx: FolderContext,\n    options: WriteLaunchConfigurationsOptions = {}\n): Promise<boolean> {\n    if (\n        !options.force &&\n        !configuration.folder(ctx.workspaceFolder).autoGenerateLaunchConfigurations\n    ) {\n        return false;\n    }\n\n    const wsLaunchSection = vscode.workspace.getConfiguration(\"launch\", ctx.folder);\n    const launchConfigs = wsLaunchSection.get<vscode.DebugConfiguration[]>(\"configurations\") || [];\n\n    // Determine which launch configurations need updating/creating\n    const configsToCreate: vscode.DebugConfiguration[] = [];\n    const configsToUpdate: { index: number; config: vscode.DebugConfiguration }[] = [];\n    for (const generatedConfig of await createExecutableConfigurations(ctx)) {\n        const index = launchConfigs.findIndex(c => c.name === generatedConfig.name);\n        if (index === -1) {\n            configsToCreate.push(generatedConfig);\n            continue;\n        }\n\n        // deep clone the existing config and update with keys from generated config\n        const config = structuredClone(launchConfigs[index]);\n        updateConfigWithNewKeys(config, generatedConfig, [\n            \"program\",\n            \"cwd\",\n            \"preLaunchTask\",\n            \"type\",\n        ]);\n\n        // Check to see if the config has changed\n        if (!isDeepStrictEqual(launchConfigs[index], config)) {\n            configsToUpdate.push({ index, config });\n        }\n    }\n\n    // Create/Update launch configurations if necessary\n    let needsUpdate = false;\n    if (configsToCreate.length > 0) {\n        launchConfigs.push(...configsToCreate);\n        needsUpdate = true;\n    }\n    if (configsToUpdate.length > 0) {\n        let answer: \"Update\" | \"Cancel\" | undefined = options.yes ? \"Update\" : undefined;\n        if (!answer) {\n            const configUpdateNames = stringArrayInEnglish(\n                configsToUpdate.map(update => update.config.name)\n            );\n            const warningMessage = `The Swift extension would like to update launch configurations '${configUpdateNames}'.`;\n            answer = await vscode.window.showWarningMessage(\n                `${ctx.name}: ${warningMessage} Do you want to update?`,\n                \"Update\",\n                \"Cancel\"\n            );\n        }\n\n        if (answer === \"Update\") {\n            configsToUpdate.forEach(update => (launchConfigs[update.index] = update.config));\n            needsUpdate = true;\n        }\n    }\n\n    if (!needsUpdate) {\n        return false;\n    }\n\n    await wsLaunchSection.update(\n        \"configurations\",\n        launchConfigs,\n        vscode.ConfigurationTarget.WorkspaceFolder\n    );\n    return true;\n}\n\n// Return debug launch configuration for an executable in the given folder\nexport function getLaunchConfiguration(\n    target: string,\n    folderCtx: FolderContext\n): vscode.DebugConfiguration | undefined {\n    const wsLaunchSection = vscode.workspace.getConfiguration(\"launch\", folderCtx.workspaceFolder);\n    const launchConfigs = wsLaunchSection.get<vscode.DebugConfiguration[]>(\"configurations\") || [];\n    const { folder } = getFolderAndNameSuffix(folderCtx);\n    const targetPath = path.join(\n        BuildFlags.buildDirectoryFromWorkspacePath(folder, true),\n        \"debug\",\n        target\n    );\n    // Users could be on different platforms with different path annotations,\n    // so normalize before we compare.\n    return launchConfigs.find(\n        config => path.normalize(config.program) === path.normalize(targetPath)\n    );\n}\n\n// Return array of DebugConfigurations for executables based on what is in Package.swift\nasync function createExecutableConfigurations(\n    ctx: FolderContext\n): Promise<vscode.DebugConfiguration[]> {\n    const executableProducts = await ctx.swiftPackage.executableProducts;\n\n    // Windows understand the forward slashes, so make the configuration unified as posix path\n    // to make it easier for users switching between platforms.\n    const { folder, nameSuffix } = getFolderAndNameSuffix(ctx, undefined, \"posix\");\n    const buildDirectory = BuildFlags.buildDirectoryFromWorkspacePath(folder, true, \"posix\");\n\n    return executableProducts.flatMap(product => {\n        const baseConfig = {\n            type: SWIFT_LAUNCH_CONFIG_TYPE,\n            request: \"launch\",\n            args: [],\n            cwd: folder,\n        };\n        return [\n            {\n                ...baseConfig,\n                name: `Debug ${product.name}${nameSuffix}`,\n                program: path.posix.join(buildDirectory, \"debug\", product.name),\n                preLaunchTask: `swift: Build Debug ${product.name}${nameSuffix}`,\n            },\n            {\n                ...baseConfig,\n                name: `Release ${product.name}${nameSuffix}`,\n                program: path.posix.join(buildDirectory, \"release\", product.name),\n                preLaunchTask: `swift: Build Release ${product.name}${nameSuffix}`,\n            },\n        ];\n    });\n}\n\n/**\n * Create Debug configuration for running a Swift Snippet\n * @param snippetName Name of Swift Snippet to run\n * @param ctx Folder context for project\n * @returns Debug configuration for running Swift Snippet\n */\nexport function createSnippetConfiguration(\n    snippetName: string,\n    ctx: FolderContext\n): vscode.DebugConfiguration {\n    const { folder } = getFolderAndNameSuffix(ctx);\n    const buildDirectory = BuildFlags.buildDirectoryFromWorkspacePath(folder, true);\n\n    return {\n        type: SWIFT_LAUNCH_CONFIG_TYPE,\n        request: \"launch\",\n        name: `Run ${snippetName}`,\n        program: path.posix.join(buildDirectory, \"debug\", snippetName),\n        args: [],\n        cwd: folder,\n        runType: \"snippet\",\n    };\n}\n\n/**\n * Run debugger for given configuration\n * @param config Debug configuration\n * @param workspaceFolder Workspace to run debugger in\n */\nexport async function debugLaunchConfig(\n    workspaceFolder: vscode.WorkspaceFolder,\n    config: vscode.DebugConfiguration,\n    options: vscode.DebugSessionOptions = {}\n) {\n    return new Promise<boolean>((resolve, reject) => {\n        vscode.debug.startDebugging(workspaceFolder, config, options).then(\n            started => {\n                if (started) {\n                    const terminateSession = vscode.debug.onDidTerminateDebugSession(async () => {\n                        // dispose terminate debug handler\n                        terminateSession.dispose();\n                        resolve(true);\n                    });\n                } else {\n                    resolve(false);\n                }\n            },\n            reason => {\n                reject(reason);\n            }\n        );\n    });\n}\n\n/** Update the provided debug configuration with keys from a newly generated configuration. */\nfunction updateConfigWithNewKeys(\n    oldConfig: vscode.DebugConfiguration,\n    newConfig: vscode.DebugConfiguration,\n    keys: string[]\n) {\n    for (const key of keys) {\n        if (newConfig[key] === undefined) {\n            delete oldConfig[key];\n            continue;\n        }\n        oldConfig[key] = newConfig[key];\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { Version } from \"./utilities/version\";\n\n/**\n * References:\n *\n * - `when` clause contexts:\n *   https://code.visualstudio.com/api/references/when-clause-contexts\n */\n\n/** Interface for getting and setting the VS Code Swift extension's context keys */\ninterface ContextKeys {\n    /**\n     * Whether or not the swift extension is activated.\n     */\n    isActivated: boolean;\n\n    /**\n     * Whether the workspace folder contains a Swift package.\n     */\n    hasPackage: boolean;\n\n    /**\n     * Whether the workspace folder contains a Swift package with at least one executable product.\n     */\n    hasExecutableProduct: boolean;\n\n    /**\n     * Whether the Swift package has any dependencies to display in the Package Dependencies view.\n     */\n    packageHasDependencies: boolean;\n\n    /**\n     * Whether the dependencies list is displayed in a nested or flat view.\n     */\n    flatDependenciesList: boolean;\n\n    /**\n     * Whether the Swift package has any plugins.\n     */\n    packageHasPlugins: boolean;\n\n    /**\n     * Whether current active file is in a SwiftPM source target folder\n     */\n    currentTargetType: string | undefined;\n\n    /**\n     * Whether current active file is a Snippet\n     */\n    fileIsSnippet: boolean;\n\n    /**\n     * Whether current active file is a Snippet\n     */\n    lldbVSCodeAvailable: boolean;\n\n    /**\n     * Whether the swift.createNewProject command is available.\n     */\n    createNewProjectAvailable: boolean;\n\n    /**\n     * Whether the SourceKit-LSP server supports reindexing the workspace.\n     */\n    supportsReindexing: boolean;\n\n    /**\n     * Whether the SourceKit-LSP server supports documentation live preview.\n     */\n    supportsDocumentationLivePreview: boolean;\n\n    /**\n     * Whether the swift.switchPlatform command is available.\n     */\n    switchPlatformAvailable: boolean;\n\n    /**\n     * Sets values for context keys that are enabled/disabled based on the toolchain version in use.\n     */\n    updateKeysBasedOnActiveVersion(toolchainVersion: Version): void;\n}\n\n/** Creates the getters and setters for the VS Code Swift extension's context keys. */\nfunction createContextKeys(): ContextKeys {\n    let isActivated: boolean = false;\n    let hasPackage: boolean = false;\n    let hasExecutableProduct: boolean = false;\n    let flatDependenciesList: boolean = false;\n    let packageHasDependencies: boolean = false;\n    let packageHasPlugins: boolean = false;\n    let currentTargetType: string | undefined = undefined;\n    let fileIsSnippet: boolean = false;\n    let lldbVSCodeAvailable: boolean = false;\n    let createNewProjectAvailable: boolean = false;\n    let supportsReindexing: boolean = false;\n    let supportsDocumentationLivePreview: boolean = false;\n    let switchPlatformAvailable: boolean = false;\n\n    return {\n        updateKeysBasedOnActiveVersion(toolchainVersion: Version) {\n            this.createNewProjectAvailable = toolchainVersion.isGreaterThanOrEqual(\n                new Version(5, 8, 0)\n            );\n            this.switchPlatformAvailable =\n                process.platform === \"darwin\"\n                    ? toolchainVersion.isGreaterThanOrEqual(new Version(6, 1, 0))\n                    : false;\n        },\n\n        get isActivated() {\n            return isActivated;\n        },\n\n        set isActivated(value: boolean) {\n            isActivated = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.isActivated\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get hasPackage() {\n            return hasPackage;\n        },\n\n        set hasPackage(value: boolean) {\n            hasPackage = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.hasPackage\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get hasExecutableProduct() {\n            return hasExecutableProduct;\n        },\n\n        set hasExecutableProduct(value: boolean) {\n            hasExecutableProduct = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.hasExecutableProduct\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get packageHasDependencies() {\n            return packageHasDependencies;\n        },\n\n        set packageHasDependencies(value: boolean) {\n            packageHasDependencies = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.packageHasDependencies\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get flatDependenciesList() {\n            return flatDependenciesList;\n        },\n\n        set flatDependenciesList(value: boolean) {\n            flatDependenciesList = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.flatDependenciesList\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get packageHasPlugins() {\n            return packageHasPlugins;\n        },\n\n        set packageHasPlugins(value: boolean) {\n            packageHasPlugins = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.packageHasPlugins\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get currentTargetType() {\n            return currentTargetType;\n        },\n\n        set currentTargetType(value: string | undefined) {\n            currentTargetType = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.currentTargetType\", value ?? \"none\")\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get fileIsSnippet() {\n            return fileIsSnippet;\n        },\n\n        set fileIsSnippet(value: boolean) {\n            fileIsSnippet = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.fileIsSnippet\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get lldbVSCodeAvailable() {\n            return lldbVSCodeAvailable;\n        },\n\n        set lldbVSCodeAvailable(value: boolean) {\n            lldbVSCodeAvailable = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.lldbVSCodeAvailable\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get createNewProjectAvailable() {\n            return createNewProjectAvailable;\n        },\n\n        set createNewProjectAvailable(value: boolean) {\n            createNewProjectAvailable = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.createNewProjectAvailable\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get supportsReindexing() {\n            return supportsReindexing;\n        },\n\n        set supportsReindexing(value: boolean) {\n            supportsReindexing = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.supportsReindexing\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get supportsDocumentationLivePreview() {\n            return supportsDocumentationLivePreview;\n        },\n\n        set supportsDocumentationLivePreview(value: boolean) {\n            supportsDocumentationLivePreview = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.supportsDocumentationLivePreview\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n\n        get switchPlatformAvailable() {\n            return switchPlatformAvailable;\n        },\n\n        set switchPlatformAvailable(value: boolean) {\n            switchPlatformAvailable = value;\n            void vscode.commands\n                .executeCommand(\"setContext\", \"swift.switchPlatformAvailable\", value)\n                .then(() => {\n                    /* Put in worker queue */\n                });\n        },\n    };\n}\n\n/**\n * Type-safe wrapper around context keys used in `when` clauses.\n */\nconst contextKeys: ContextKeys = createContextKeys();\n\nexport default contextKeys;\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport contextKeys from \"./contextKeys\";\nimport { createSwiftTask } from \"./tasks/SwiftTaskProvider\";\nimport { WorkspaceContext } from \"./WorkspaceContext\";\nimport { createSnippetConfiguration, debugLaunchConfig } from \"./debugger/launch\";\nimport { TaskOperation } from \"./tasks/TaskQueue\";\n\n/**\n * Set context key indicating whether current file is a Swift Snippet\n * @param ctx Workspace context\n */\nexport function setSnippetContextKey(ctx: WorkspaceContext) {\n    if (\n        !ctx.currentFolder ||\n        !ctx.currentDocument ||\n        ctx.currentFolder.swiftVersion.isLessThan({ major: 5, minor: 7, patch: 0 })\n    ) {\n        contextKeys.fileIsSnippet = false;\n        return;\n    }\n\n    const filename = ctx.currentDocument.fsPath;\n    const snippetsFolder = path.join(ctx.currentFolder.folder.fsPath, \"Snippets\");\n    if (filename.startsWith(snippetsFolder)) {\n        contextKeys.fileIsSnippet = true;\n    } else {\n        contextKeys.fileIsSnippet = false;\n    }\n    return;\n}\n\n/**\n * If current file is a Swift Snippet run it\n * @param ctx Workspace Context\n */\nexport async function runSnippet(\n    ctx: WorkspaceContext,\n    snippet?: string\n): Promise<boolean | undefined> {\n    return await debugSnippetWithOptions(ctx, { noDebug: true }, snippet);\n}\n\n/**\n * If current file is a Swift Snippet run it in the debugger\n * @param ctx Workspace Context\n */\nexport async function debugSnippet(\n    ctx: WorkspaceContext,\n    snippet?: string\n): Promise<boolean | undefined> {\n    return await debugSnippetWithOptions(ctx, {}, snippet);\n}\n\nexport async function debugSnippetWithOptions(\n    ctx: WorkspaceContext,\n    options: vscode.DebugSessionOptions,\n    snippet?: string\n): Promise<boolean | undefined> {\n    // create build task\n    let snippetName: string;\n    if (snippet) {\n        snippetName = snippet;\n    } else if (ctx.currentDocument) {\n        snippetName = path.basename(ctx.currentDocument.fsPath, \".swift\");\n    } else {\n        return false;\n    }\n\n    const folderContext = ctx.currentFolder;\n    if (!folderContext) {\n        return false;\n    }\n\n    const snippetBuildTask = createSwiftTask(\n        [\"build\", \"--product\", snippetName],\n        `Build ${snippetName}`,\n        {\n            group: vscode.TaskGroup.Build,\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            presentationOptions: {\n                reveal: vscode.TaskRevealKind.Always,\n            },\n        },\n        folderContext.toolchain\n    );\n    const snippetDebugConfig = createSnippetConfiguration(snippetName, folderContext);\n    try {\n        ctx.buildStarted(snippetName, snippetDebugConfig, options);\n\n        // queue build task and when it is complete run executable in the debugger\n        return await folderContext.taskQueue\n            .queueOperation(new TaskOperation(snippetBuildTask))\n            .then(result => {\n                if (result === 0) {\n                    return debugLaunchConfig(\n                        folderContext.workspaceFolder,\n                        snippetDebugConfig,\n                        options\n                    );\n                }\n            })\n            .then(result => {\n                ctx.buildFinished(snippetName, snippetDebugConfig, options);\n                return result;\n            });\n    } catch (error) {\n        ctx.outputChannel.appendLine(`Failed to debug snippet: ${error}`);\n        // ignore error if task failed to run\n        return false;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { DocumentParser } from \"./DocumentParser\";\n\n/** CompletionItem for Swift Comments */\nclass CommentCompletion extends vscode.CompletionItem {\n    constructor(\n        insertText: vscode.SnippetString | string,\n        label: string,\n        detail: string,\n        sortText?: string\n    ) {\n        super(label, vscode.CompletionItemKind.Text);\n        this.detail = detail;\n        this.insertText = insertText;\n        this.sortText = sortText;\n    }\n}\n\n/**\n * CompletionItem Provider that provides \"///\" on pressing return if previous line\n * contained a \"///\" documentation comment.\n */\nclass CommentCompletionProvider implements vscode.CompletionItemProvider {\n    public async provideCompletionItems(\n        document: vscode.TextDocument,\n        position: vscode.Position\n    ): Promise<vscode.CompletionItem[] | undefined> {\n        // Is line a '///' comment\n        if (position.line === 0 || this.isLineComment(document, position.line - 1) === false) {\n            return undefined;\n        }\n        const completion = new CommentCompletion(\"/// \", \"///\", \"Documentation comment\");\n        return [completion];\n    }\n\n    private isLineComment(document: vscode.TextDocument, line: number): boolean {\n        // test if line starts with '///'\n        if (/^\\s*\\/\\/\\//.test(document.lineAt(line).text)) {\n            return true;\n        }\n        return false;\n    }\n}\n\ninterface FunctionDetails {\n    indent: number;\n    parameters: string[];\n    returns: boolean;\n    throws: boolean;\n}\n\n/**\n * CompletionItem provider that will generate a function documentation comment\n * based on the function declaration directly below. Triggered by pressing \"/\"\n */\nclass FunctionDocumentationCompletionProvider implements vscode.CompletionItemProvider {\n    public async provideCompletionItems(\n        document: vscode.TextDocument,\n        position: vscode.Position\n    ): Promise<vscode.CompletionItem[] | undefined> {\n        // Is line a '///' comment\n        const isComment = this.isLineComment(document, position.line);\n        if (isComment === false) {\n            return undefined;\n        }\n\n        // is it above function definition\n        const funcPosition = new vscode.Position(position.line + 1, 0);\n        const details = this.getFunctionDetails(document, funcPosition);\n        if (details) {\n            if (\n                details.parameters.length === 0 &&\n                details.returns === false &&\n                details.throws === false\n            ) {\n                return undefined;\n            }\n            const snippet = this.constructSnippet(details, false);\n            const completion = new CommentCompletion(\n                snippet,\n                \"/// - parameters:\",\n                \"Function documentation comment\"\n            );\n            return [completion];\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Insert function header comment text snippet\n     * @param editor text editor to edit\n     * @param line line number of function\n     */\n    async insert(editor: vscode.TextEditor, line: number) {\n        const position = new vscode.Position(line, 0);\n        const document = editor.document;\n        const details = this.getFunctionDetails(document, position);\n        if (details) {\n            const snippet = this.constructSnippet(details, true);\n            const insertPosition = new vscode.Position(line, details.indent);\n            await editor.insertSnippet(snippet, insertPosition);\n        }\n    }\n\n    private isLineComment(document: vscode.TextDocument, line: number): boolean {\n        // test if line consists of just '///'\n        if (/^\\s*\\/\\/\\/\\s*$/.test(document.lineAt(line).text)) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Extract function details from line below. Inspiration for this code can be found\n     * here https://github.com/fappelman/swift-add-documentation\n     */\n    private getFunctionDetails(\n        document: vscode.TextDocument,\n        position: vscode.Position\n    ): FunctionDetails | null {\n        const parser = new DocumentParser(document, position);\n        if (!parser.match(/^[^{]*\\b(?:func|init)/)) {\n            return null;\n        }\n        const funcName = parser.match(/^([^(<]*)\\s*(\\(|<)/);\n        if (!funcName) {\n            return null;\n        }\n        // if we catch \"<\" then we have generic arguments\n        if (funcName[1] === \"<\") {\n            parser.skipUntil(\">\");\n            // match open bracket\n            if (!parser.match(/^\\(/)) {\n                return null;\n            }\n        }\n        // extract parameters\n        const parameters: string[] = [];\n        // if next character is \")\" skip parameter parsing\n        if (!parser.match(/^\\)/)) {\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                const parameter = parser.match(/(\\S*)(?:\\s*)?:/);\n                if (!parameter) {\n                    return null;\n                }\n                parameters.push(...parameter);\n                const nextChar = parser.skipUntil(\",)\");\n                if (!nextChar) {\n                    return null;\n                }\n                if (nextChar === \")\") {\n                    break;\n                }\n            }\n        }\n        // go through function markers\n        let throws = false;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const mark = parser.match(/^\\s*([a-z]+)/);\n            if (!mark || mark.length === 0) {\n                break;\n            }\n            if (mark[0] === \"throws\") {\n                throws = true;\n\n                // Check for a type annotation on the throw i.e. throws(MyError)\n                parser.match(/^\\s*(\\(.*\\))/);\n            }\n        }\n        // if we find a `->` then function returns a value\n        const returns = parser.match(/^\\s*->/) !== null;\n        // read function\n        return {\n            indent: document.lineAt(position.line).firstNonWhitespaceCharacterIndex,\n            parameters: parameters,\n            returns: returns,\n            throws: throws,\n        };\n    }\n\n    private constructSnippet(\n        details: FunctionDetails,\n        completeSnippet: boolean\n    ): vscode.SnippetString {\n        let string = \"\";\n        if (completeSnippet) {\n            string += \"/// \";\n        }\n        string += \" $1\";\n        let snippetIndex = 2;\n        if (details.parameters.length === 1) {\n            string += `\\n/// - Parameter ${details.parameters[0]}: $${snippetIndex}`;\n            snippetIndex++;\n        } else if (details.parameters.length > 0) {\n            string += \"\\n/// - Parameters:\";\n            for (const parameter of details.parameters) {\n                string += `\\n///   - ${parameter}: $${snippetIndex}`;\n                snippetIndex++;\n            }\n        }\n        if (details.throws) {\n            string += `\\n/// - Throws: $${snippetIndex}`;\n            snippetIndex++;\n        }\n        if (details.returns) {\n            string += `\\n/// - Returns: $${snippetIndex}`;\n        }\n        if (completeSnippet) {\n            string += \"\\n\";\n        }\n        return new vscode.SnippetString(string);\n    }\n}\n\n/**\n * Interface to comment completion providers\n */\nexport class CommentCompletionProviders implements vscode.Disposable {\n    functionCommentCompletion: FunctionDocumentationCompletionProvider;\n    functionCommentCompletionProvider: vscode.Disposable;\n    commentCompletionProvider: vscode.Disposable;\n\n    constructor() {\n        this.functionCommentCompletion = new FunctionDocumentationCompletionProvider();\n        this.functionCommentCompletionProvider = vscode.languages.registerCompletionItemProvider(\n            \"swift\",\n            this.functionCommentCompletion,\n            \"/\"\n        );\n        this.commentCompletionProvider = vscode.languages.registerCompletionItemProvider(\n            \"swift\",\n            new CommentCompletionProvider(),\n            \"\\n\"\n        );\n    }\n\n    /**\n     * Insert function header comment text snippet\n     * @param editor text editor to edit\n     * @param line line number of function\n     */\n    async insert(editor: vscode.TextEditor, line: number) {\n        await this.functionCommentCompletion.insert(editor, line);\n    }\n\n    dispose() {\n        this.functionCommentCompletionProvider.dispose();\n        this.commentCompletionProvider.dispose();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\n/**\n * Parse VS Code TextDocuments using regular expressions.\n * Inspiration for this code came from https://github.com/fappelman/swift-add-documentation\n */\nexport class DocumentParser {\n    constructor(\n        readonly document: vscode.TextDocument,\n        private position: vscode.Position\n    ) {}\n\n    /**\n     * Match regular expression at current position in document. Move position to just\n     * after the match\n     * @param expression Regular expression\n     * @returns returns groups matched\n     */\n    match(expression: RegExp): string[] | null {\n        const text = this.getLine();\n        if (!text) {\n            return null;\n        }\n        // match expression\n        const result = expression.exec(text.text);\n        if (result) {\n            const offset = result.index + result[0].length;\n            this.position = this.position.translate(undefined, offset + text.whitespace);\n\n            const results = result.map(match => match);\n            results.shift();\n            return results;\n        }\n        return null;\n    }\n\n    /**\n     * Skip through document lines until you hit a character. Don't return when inside delimiters \"({[<\"\n     * @param characters skip until you find one of these characters\n     * @returns character you hit\n     */\n    skipUntil(characters: string): string | undefined {\n        const openDelimiters = '{([<\"';\n        const closeDelimiters = '})]>\"';\n        // list of delimiters that if you reach and were not expect then the swift code is not valid\n        // this does not include `>` because you can find this in `->`.\n        const closeDelimitersFailure = \"})]\";\n        const stack: string[] = [];\n        for (let text = this.getLine(); text; text = this.getLine()) {\n            let delimiterIndex = -1;\n            let index = 0;\n            while (index < text.text.length) {\n                const character = text.text[index];\n                // is this one of the expected characters\n                if (characters.indexOf(character) !== -1) {\n                    // pop previous expected characters off stack and if there isn't one then\n                    // we have found the character we were looking for. Set the position and return\n                    const value = stack.pop();\n                    if (!value) {\n                        this.position = this.position.translate(\n                            undefined,\n                            index + text.whitespace + 1\n                        );\n                        return text.text[index];\n                    }\n                    characters = value;\n                }\n                // is this an open delimiter character\n                else if ((delimiterIndex = openDelimiters.indexOf(character)) !== -1) {\n                    stack.push(characters);\n                    characters = closeDelimiters[delimiterIndex];\n                }\n                // if you find a close delimiter then we got the wrong delimiter and should fail\n                else if (closeDelimitersFailure.indexOf(character) !== -1 && characters !== '\"') {\n                    return undefined;\n                } else if (character === \"\\\\\" && characters === '\"') {\n                    index += 1;\n                }\n                index += 1;\n            }\n            this.position = this.position.translate(1, -this.position.character);\n        }\n        return undefined;\n    }\n\n    /**\n     * Get line, skipping whitespace\n     * @returns return text, whitespace skipped\n     */\n    private getLine(): { text: string; whitespace: number } | null {\n        while (this.position.line < this.document.lineCount) {\n            const line = this.document.lineAt(this.position.line).text;\n            const remainsOfLine = line.substring(this.position.character);\n            // skip whitespace\n            const whitespace = /^\\s*/.exec(remainsOfLine);\n            let whitespaceCount = 0;\n            if (whitespace) {\n                whitespaceCount = whitespace[0].length;\n            }\n            if (remainsOfLine.length > whitespaceCount) {\n                return {\n                    text: remainsOfLine.substring(whitespaceCount),\n                    whitespace: whitespaceCount,\n                };\n            }\n            this.position = this.position.translate(1, -this.position.character);\n        }\n        return null;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport stripAnsi = require(\"strip-ansi\");\nimport * as vscode from \"vscode\";\nimport configuration, { ShowBuildStatusOptions } from \"../configuration\";\nimport { RunningTask, StatusItem } from \"./StatusItem\";\nimport { SwiftExecution } from \"../tasks/SwiftExecution\";\nimport { checkIfBuildComplete, lineBreakRegex } from \"../utilities/tasks\";\n\n/**\n * Progress of `swift` build, parsed from the\n * output, ex. `[6/7] Building main.swift`\n */\ninterface SwiftProgress {\n    completed: number;\n    total: number;\n}\n\n/**\n * This class will handle detecting and updating the status\n * bar message as the `swift` process executes.\n *\n * @see {@link SwiftExecution} to see what and where the events come from\n */\nexport class SwiftBuildStatus implements vscode.Disposable {\n    private onDidStartTaskDisposible: vscode.Disposable;\n\n    constructor(private statusItem: StatusItem) {\n        this.onDidStartTaskDisposible = vscode.tasks.onDidStartTask(event => {\n            if (!configuration.showBuildStatus) {\n                return;\n            }\n            this.handleTaskStatus(event.execution.task);\n        });\n    }\n\n    dispose() {\n        this.onDidStartTaskDisposible.dispose();\n    }\n\n    private handleTaskStatus(task: vscode.Task): void {\n        // Only care about swift tasks\n        if (task.definition.type !== \"swift\") {\n            return;\n        }\n        // Default to setting if task doesn't overwrite\n        const showBuildStatus: ShowBuildStatusOptions =\n            task.definition.showBuildStatus || configuration.showBuildStatus;\n        if (showBuildStatus === \"never\") {\n            return;\n        }\n\n        const execution = task.execution as SwiftExecution;\n        const isBuildTask = task.group === vscode.TaskGroup.Build;\n        const disposables: vscode.Disposable[] = [];\n        const handleTaskOutput = (update: (message: string) => void) =>\n            new Promise<void>(res => {\n                const done = () => {\n                    disposables.forEach(d => d.dispose());\n                    res();\n                };\n                disposables.push(\n                    this.outputParser(\n                        new RunningTask(task).name,\n                        execution,\n                        isBuildTask,\n                        showBuildStatus,\n                        update,\n                        done\n                    ),\n                    execution.onDidClose(done),\n                    vscode.tasks.onDidEndTask(e => {\n                        if (e.execution.task === task) {\n                            done();\n                        }\n                    })\n                );\n            });\n        if (showBuildStatus === \"progress\" || showBuildStatus === \"notification\") {\n            void vscode.window.withProgress<void>(\n                {\n                    location:\n                        showBuildStatus === \"progress\"\n                            ? vscode.ProgressLocation.Window\n                            : vscode.ProgressLocation.Notification,\n                },\n                progress => handleTaskOutput(message => progress.report({ message }))\n            );\n        } else {\n            void this.statusItem.showStatusWhileRunning(task, () =>\n                handleTaskOutput(message => this.statusItem.update(task, message))\n            );\n        }\n    }\n\n    private outputParser(\n        name: string,\n        execution: SwiftExecution,\n        isBuildTask: boolean,\n        showBuildStatus: ShowBuildStatusOptions,\n        update: (message: string) => void,\n        done: () => void\n    ): vscode.Disposable {\n        let started = false;\n\n        const parseEvents = (data: string) => {\n            const sanitizedData = stripAnsi(data);\n            // We'll process data one line at a time, in reverse order\n            // since the latest interesting message is all we need to\n            // be concerned with\n            const lines = sanitizedData.split(lineBreakRegex).reverse();\n            for (const line of lines) {\n                if (checkIfBuildComplete(line)) {\n                    update(name);\n                    return !isBuildTask;\n                }\n                const progress = this.findBuildProgress(line);\n                if (progress) {\n                    update(`${name}: [${progress.completed}/${progress.total}]`);\n                    started = true;\n                    return false;\n                }\n                if (this.checkIfFetching(line)) {\n                    // this.statusItem.update(task, `Fetching dependencies \"${task.name}\"`);\n                    update(`${name}: Fetching Dependencies`);\n                    started = true;\n                    return false;\n                }\n            }\n            return false;\n        };\n\n        // Begin by showing a message that the build is preparing, as there is sometimes\n        // a delay before building starts, especially in large projects.\n        if (!started && showBuildStatus !== \"never\") {\n            update(`${name}: Preparing...`);\n        }\n\n        return execution.onDidWrite(data => {\n            if (parseEvents(data)) {\n                done();\n            }\n        });\n    }\n\n    private checkIfFetching(line: string): boolean {\n        const fetchRegex = /^Fetching\\s/gm;\n        return !!fetchRegex.exec(line);\n    }\n\n    private findBuildProgress(line: string): SwiftProgress | undefined {\n        const buildingRegex = /^\\[(\\d+)\\/(\\d+)\\]/g;\n        const match = buildingRegex.exec(line);\n        if (match) {\n            return { completed: parseInt(match[1]), total: parseInt(match[2]) };\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { DocumentationPreviewEditor } from \"./DocumentationPreviewEditor\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { WebviewContent } from \"./webview/WebviewMessage\";\nimport contextKeys from \"../contextKeys\";\n\nexport class DocumentationManager implements vscode.Disposable {\n    private previewEditor?: DocumentationPreviewEditor;\n    private editorUpdatedContentEmitter = new vscode.EventEmitter<WebviewContent>();\n    private editorRenderedEmitter = new vscode.EventEmitter<void>();\n\n    constructor(\n        private readonly extension: vscode.ExtensionContext,\n        private readonly context: WorkspaceContext\n    ) {}\n\n    onPreviewDidUpdateContent = this.editorUpdatedContentEmitter.event;\n    onPreviewDidRenderContent = this.editorRenderedEmitter.event;\n\n    async launchDocumentationPreview(): Promise<boolean> {\n        if (!contextKeys.supportsDocumentationLivePreview) {\n            return false;\n        }\n\n        if (!this.previewEditor) {\n            const folderContext = this.context.currentFolder;\n            if (!folderContext) {\n                return false;\n            }\n\n            this.previewEditor = await DocumentationPreviewEditor.create(\n                this.extension,\n                this.context\n            );\n            const subscriptions: vscode.Disposable[] = [\n                this.previewEditor.onDidUpdateContent(content => {\n                    this.editorUpdatedContentEmitter.fire(content);\n                }),\n                this.previewEditor.onDidRenderContent(() => {\n                    this.editorRenderedEmitter.fire();\n                }),\n                this.previewEditor.onDidDispose(() => {\n                    subscriptions.forEach(d => d.dispose());\n                    this.previewEditor = undefined;\n                }),\n            ];\n        } else {\n            this.previewEditor.reveal();\n        }\n        return true;\n    }\n\n    dispose() {\n        this.previewEditor?.dispose();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024-2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport { RenderNode, WebviewContent, WebviewMessage } from \"./webview/WebviewMessage\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { DocCDocumentationRequest, DocCDocumentationResponse } from \"../sourcekit-lsp/extensions\";\nimport { LSPErrorCodes, ResponseError } from \"vscode-languageclient\";\n// eslint-disable-next-line @typescript-eslint/no-require-imports\nimport throttle = require(\"lodash.throttle\");\n\nexport enum PreviewEditorConstant {\n    VIEW_TYPE = \"swift.previewDocumentationEditor\",\n    TITLE = \"Preview Swift Documentation\",\n    UNSUPPORTED_EDITOR_ERROR_MESSAGE = \"The active text editor does not support Swift Documentation Live Preview\",\n}\n\nexport class DocumentationPreviewEditor implements vscode.Disposable {\n    static async create(\n        extension: vscode.ExtensionContext,\n        context: WorkspaceContext\n    ): Promise<DocumentationPreviewEditor> {\n        const swiftDoccRenderPath = extension.asAbsolutePath(\n            path.join(\"assets\", \"swift-docc-render\")\n        );\n        const webviewPanel = vscode.window.createWebviewPanel(\n            PreviewEditorConstant.VIEW_TYPE,\n            PreviewEditorConstant.TITLE,\n            { viewColumn: vscode.ViewColumn.Beside, preserveFocus: true },\n            {\n                enableScripts: true,\n                localResourceRoots: [\n                    vscode.Uri.file(\n                        extension.asAbsolutePath(\n                            path.join(\"node_modules\", \"@vscode/codicons\", \"dist\")\n                        )\n                    ),\n                    vscode.Uri.file(\n                        extension.asAbsolutePath(path.join(\"assets\", \"documentation-webview\"))\n                    ),\n                    vscode.Uri.file(swiftDoccRenderPath),\n                    ...context.folders.map(f => f.folder),\n                ],\n            }\n        );\n        webviewPanel.iconPath = {\n            light: vscode.Uri.file(\n                extension.asAbsolutePath(\n                    path.join(\"assets\", \"icons\", \"light\", \"swift-documentation.svg\")\n                )\n            ),\n            dark: vscode.Uri.file(\n                extension.asAbsolutePath(\n                    path.join(\"assets\", \"icons\", \"dark\", \"swift-documentation.svg\")\n                )\n            ),\n        };\n        const webviewBaseURI = webviewPanel.webview.asWebviewUri(\n            vscode.Uri.file(swiftDoccRenderPath)\n        );\n        const scriptURI = webviewPanel.webview.asWebviewUri(\n            vscode.Uri.file(\n                extension.asAbsolutePath(path.join(\"assets\", \"documentation-webview\", \"index.js\"))\n            )\n        );\n        let doccRenderHTML = await fs.readFile(\n            path.join(swiftDoccRenderPath, \"index.html\"),\n            \"utf-8\"\n        );\n        const codiconsUri = webviewPanel.webview.asWebviewUri(\n            vscode.Uri.file(\n                extension.asAbsolutePath(\n                    path.join(\"node_modules\", \"@vscode/codicons\", \"dist\", \"codicon.css\")\n                )\n            )\n        );\n        doccRenderHTML = doccRenderHTML\n            .replaceAll(\"{{BASE_PATH}}\", webviewBaseURI.toString())\n            .replace(\"</head>\", `<link href=\"${codiconsUri}\" rel=\"stylesheet\" /></head>`)\n            .replace(\"</body>\", `<script src=\"${scriptURI.toString()}\"></script></body>`);\n        webviewPanel.webview.html = doccRenderHTML;\n        return new DocumentationPreviewEditor(context, webviewPanel);\n    }\n\n    private activeTextEditor?: vscode.TextEditor;\n    private activeTextEditorSelection?: vscode.Selection;\n    private subscriptions: vscode.Disposable[] = [];\n\n    private disposeEmitter = new vscode.EventEmitter<void>();\n    private renderEmitter = new vscode.EventEmitter<void>();\n    private updateContentEmitter = new vscode.EventEmitter<WebviewContent>();\n\n    private constructor(\n        private readonly context: WorkspaceContext,\n        private readonly webviewPanel: vscode.WebviewPanel\n    ) {\n        this.activeTextEditor = vscode.window.activeTextEditor;\n        this.subscriptions.push(\n            this.webviewPanel.webview.onDidReceiveMessage(this.receiveMessage, this),\n            vscode.window.onDidChangeActiveTextEditor(this.handleActiveTextEditorChange, this),\n            vscode.window.onDidChangeTextEditorSelection(this.handleSelectionChange, this),\n            vscode.workspace.onDidChangeTextDocument(this.handleDocumentChange, this),\n            this.webviewPanel.onDidDispose(this.dispose, this)\n        );\n        this.reveal();\n    }\n\n    /** An event that is fired when the Documentation Preview Editor is disposed */\n    onDidDispose = this.disposeEmitter.event;\n\n    /** An event that is fired when the Documentation Preview Editor updates its content */\n    onDidUpdateContent = this.updateContentEmitter.event;\n\n    /** An event that is fired when the Documentation Preview Editor renders its content */\n    onDidRenderContent = this.renderEmitter.event;\n\n    reveal() {\n        // Reveal the editor, but don't change the focus of the active text editor\n        this.webviewPanel.reveal(undefined, true);\n    }\n\n    dispose() {\n        this.subscriptions.forEach(subscription => subscription.dispose());\n        this.subscriptions = [];\n        this.webviewPanel.dispose();\n        this.disposeEmitter.fire();\n    }\n\n    private postMessage(message: WebviewMessage) {\n        if (message.type === \"update-content\") {\n            this.updateContentEmitter.fire(message.content);\n        }\n        void this.webviewPanel.webview.postMessage(message);\n    }\n\n    private receiveMessage(message: WebviewMessage) {\n        switch (message.type) {\n            case \"loaded\":\n                if (!this.activeTextEditor) {\n                    break;\n                }\n                void this.convertDocumentation(this.activeTextEditor);\n                break;\n            case \"rendered\":\n                this.renderEmitter.fire();\n                break;\n        }\n    }\n\n    private handleActiveTextEditorChange(activeTextEditor: vscode.TextEditor | undefined) {\n        if (this.activeTextEditor === activeTextEditor || activeTextEditor === undefined) {\n            return;\n        }\n        this.activeTextEditor = activeTextEditor;\n        this.activeTextEditorSelection = activeTextEditor.selection;\n        void this.convertDocumentation(activeTextEditor);\n    }\n\n    private handleSelectionChange(event: vscode.TextEditorSelectionChangeEvent) {\n        if (\n            this.activeTextEditor !== event.textEditor ||\n            this.activeTextEditorSelection === event.textEditor.selection\n        ) {\n            return;\n        }\n        this.activeTextEditorSelection = event.textEditor.selection;\n        void this.convertDocumentation(event.textEditor);\n    }\n\n    private handleDocumentChange(event: vscode.TextDocumentChangeEvent) {\n        if (this.activeTextEditor?.document === event.document) {\n            void this.convertDocumentation(this.activeTextEditor);\n        }\n    }\n\n    private convertDocumentation = throttle(\n        async (textEditor: vscode.TextEditor): Promise<void> => {\n            const document = textEditor.document;\n            if (\n                document.uri.scheme !== \"file\" ||\n                ![\"markdown\", \"tutorial\", \"swift\"].includes(document.languageId)\n            ) {\n                this.postMessage({\n                    type: \"update-content\",\n                    content: {\n                        type: \"error\",\n                        errorMessage: PreviewEditorConstant.UNSUPPORTED_EDITOR_ERROR_MESSAGE,\n                    },\n                });\n                return;\n            }\n\n            const folderContext = this.context.folders.find(folderContext =>\n                document.uri.fsPath.startsWith(folderContext.folder.fsPath)\n            );\n\n            if (!folderContext) {\n                return;\n            }\n\n            const languageClientManager = this.context.languageClientManager.get(folderContext);\n            try {\n                const response = await languageClientManager.useLanguageClient(\n                    async (client): Promise<DocCDocumentationResponse> => {\n                        return await client.sendRequest(DocCDocumentationRequest.type, {\n                            textDocument: {\n                                uri: document.uri.toString(),\n                            },\n                            position: textEditor.selection.start,\n                        });\n                    }\n                );\n                this.postMessage({\n                    type: \"update-content\",\n                    content: {\n                        type: \"render-node\",\n                        renderNode: this.parseRenderNode(response.renderNode),\n                    },\n                });\n            } catch (error) {\n                // Update the preview editor to reflect what error occurred\n                let livePreviewErrorMessage = \"An internal error occurred\";\n                const baseLogErrorMessage = `SourceKit-LSP request \"${DocCDocumentationRequest.method}\" failed: `;\n                if (error instanceof ResponseError) {\n                    if (error.code === LSPErrorCodes.RequestCancelled) {\n                        // We can safely ignore cancellations\n                        return undefined;\n                    }\n                    switch (error.code) {\n                        case LSPErrorCodes.RequestFailed:\n                            // RequestFailed response errors can be shown to the user\n                            livePreviewErrorMessage = error.message;\n                            break;\n                        default:\n                            // We should log additional info for other response errors\n                            this.context.outputChannel.log(\n                                baseLogErrorMessage + JSON.stringify(error.toJson(), undefined, 2)\n                            );\n                            break;\n                    }\n                } else {\n                    this.context.outputChannel.log(baseLogErrorMessage + `${error}`);\n                }\n                this.postMessage({\n                    type: \"update-content\",\n                    content: {\n                        type: \"error\",\n                        errorMessage: livePreviewErrorMessage,\n                    },\n                });\n            }\n        },\n        100 /* 10 times per second */,\n        { trailing: true }\n    );\n\n    private parseRenderNode(content: string): RenderNode {\n        const renderNode: RenderNode = JSON.parse(content);\n        for (const referenceKey of Object.getOwnPropertyNames(renderNode.references)) {\n            const reference = renderNode.references[referenceKey];\n            for (const variant of reference.variants ?? []) {\n                const uri = vscode.Uri.parse(variant.url).with({ scheme: \"file\" });\n                variant.url = this.webviewPanel.webview.asWebviewUri(uri).toString();\n            }\n        }\n        return renderNode;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { pathExists } from \"./filesystem\";\n\nexport async function searchForPackages(\n    folder: vscode.Uri,\n    disableSwiftPMIntegration: boolean,\n    searchSubfoldersForPackages: boolean\n): Promise<Array<vscode.Uri>> {\n    const folders: Array<vscode.Uri> = [];\n\n    async function search(folder: vscode.Uri) {\n        // add folder if Package.swift/compile_commands.json/compile_flags.txt/buildServer.json exists\n        if (await isValidWorkspaceFolder(folder.fsPath, disableSwiftPMIntegration)) {\n            folders.push(folder);\n        }\n        // should I search sub-folders for more Swift Packages\n        if (!searchSubfoldersForPackages) {\n            return;\n        }\n\n        await vscode.workspace.fs.readDirectory(folder).then(async entries => {\n            for (const entry of entries) {\n                if (\n                    entry[1] === vscode.FileType.Directory &&\n                    entry[0][0] !== \".\" &&\n                    entry[0] !== \"Packages\"\n                ) {\n                    await search(vscode.Uri.joinPath(folder, entry[0]));\n                }\n            }\n        });\n    }\n\n    await search(folder);\n\n    return folders;\n}\n\nexport async function isValidWorkspaceFolder(\n    folder: string,\n    disableSwiftPMIntegration: boolean\n): Promise<boolean> {\n    return (\n        (!disableSwiftPMIntegration && (await pathExists(folder, \"Package.swift\"))) ||\n        (await pathExists(folder, \"compile_commands.json\")) ||\n        (await pathExists(folder, \"compile_flags.txt\")) ||\n        (await pathExists(folder, \"buildServer.json\")) ||\n        (await pathExists(folder, \"build\")) ||\n        (await pathExists(folder, \"out\"))\n    );\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { PackagePlugin } from \"../SwiftPackage\";\nimport { swiftRuntimeEnv } from \"../utilities/utilities\";\nimport { SwiftExecution } from \"../tasks/SwiftExecution\";\nimport { resolveTaskCwd } from \"../utilities/tasks\";\nimport configuration, {\n    PluginPermissionConfiguration,\n    substituteVariablesInString,\n} from \"../configuration\";\nimport { SwiftTask } from \"./SwiftTaskProvider\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\n\n// Interface class for defining task configuration\ninterface TaskConfig {\n    cwd: vscode.Uri;\n    scope: vscode.WorkspaceFolder;\n    presentationOptions?: vscode.TaskPresentationOptions;\n    prefix?: string;\n}\n\n/**\n * A {@link vscode.TaskProvider TaskProvider} for tasks that match the definition\n * in **package.json**: `{ type: 'swift'; command: string; args: string[] }`.\n *\n * See {@link SwiftTaskProvider.provideTasks provideTasks} for a list of provided tasks.\n */\nexport class SwiftPluginTaskProvider implements vscode.TaskProvider {\n    constructor(private workspaceContext: WorkspaceContext) {}\n\n    /**\n     * Provides tasks to run swift plugins:\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async provideTasks(token: vscode.CancellationToken): Promise<vscode.Task[]> {\n        if (this.workspaceContext.folders.length === 0) {\n            return [];\n        }\n        const tasks = [];\n\n        for (const folderContext of this.workspaceContext.folders) {\n            for (const plugin of folderContext.swiftPackage.plugins) {\n                tasks.push(\n                    this.createSwiftPluginTask(plugin, folderContext.toolchain, {\n                        cwd: folderContext.folder,\n                        scope: folderContext.workspaceFolder,\n                        presentationOptions: {\n                            reveal: vscode.TaskRevealKind.Always,\n                        },\n                    })\n                );\n            }\n        }\n        return tasks;\n    }\n\n    /**\n     * Resolves a {@link vscode.Task Task} specified in **tasks.json**.\n     *\n     * Other than its definition, this `Task` may be incomplete,\n     * so this method should fill in the blanks.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    resolveTask(task: vscode.Task, token: vscode.CancellationToken): vscode.Task {\n        const currentFolder =\n            this.workspaceContext.currentFolder ?? this.workspaceContext.folders[0];\n        if (!currentFolder) {\n            return task;\n        }\n        // We need to create a new Task object here.\n        // Reusing the task parameter doesn't seem to work.\n        const swift = currentFolder.toolchain.getToolchainExecutable(\"swift\");\n        let swiftArgs = [\n            \"package\",\n            ...this.pluginArguments(task.definition as PluginPermissionConfiguration),\n            task.definition.command,\n            ...(task.definition.args ?? []).map(substituteVariablesInString),\n        ];\n        swiftArgs = currentFolder.toolchain.buildFlags.withAdditionalFlags(swiftArgs);\n\n        const cwd = resolveTaskCwd(task, task.definition.cwd);\n        const newTask = new vscode.Task(\n            task.definition,\n            task.scope ?? vscode.TaskScope.Workspace,\n            task.name,\n            \"swift-plugin\",\n            new SwiftExecution(swift, swiftArgs, {\n                cwd,\n                presentation: task.presentationOptions,\n            }),\n            task.problemMatchers\n        );\n        newTask.detail = task.detail ?? `swift ${swiftArgs.join(\" \")}`;\n        newTask.presentationOptions = task.presentationOptions;\n\n        return newTask;\n    }\n\n    /**\n     *\n     * @param plugin Helper function to create a swift plugin task\n     * @param args arguments sent to plugin\n     * @param config\n     * @returns\n     */\n    createSwiftPluginTask(\n        plugin: PackagePlugin,\n        toolchain: SwiftToolchain,\n        config: TaskConfig\n    ): SwiftTask {\n        const swift = toolchain.getToolchainExecutable(\"swift\");\n\n        // Add relative path current working directory\n        const relativeCwd = path.relative(config.scope.uri.fsPath, config.cwd.fsPath);\n        const taskDefinitionCwd = relativeCwd !== \"\" ? relativeCwd : undefined;\n        const definition = this.getTaskDefinition(plugin, taskDefinitionCwd);\n        let swiftArgs = [\n            \"package\",\n            ...this.pluginArgumentsFromConfiguration(config.scope, definition, plugin),\n            plugin.command,\n            ...definition.args,\n        ];\n        swiftArgs = toolchain.buildFlags.withAdditionalFlags(swiftArgs);\n\n        const presentation = config?.presentationOptions ?? {};\n        const task = new vscode.Task(\n            definition,\n            config.scope ?? vscode.TaskScope.Workspace,\n            plugin.name,\n            \"swift-plugin\",\n            new SwiftExecution(swift, swiftArgs, {\n                cwd: config.cwd.fsPath,\n                env: { ...configuration.swiftEnvironmentVariables, ...swiftRuntimeEnv() },\n                presentation,\n            }),\n            []\n        );\n        let prefix: string;\n        if (config.prefix) {\n            prefix = `(${config.prefix}) `;\n        } else {\n            prefix = \"\";\n        }\n        task.detail = `${prefix}swift ${swiftArgs.join(\" \")}`;\n        task.presentationOptions = presentation;\n        return task as SwiftTask;\n    }\n\n    /**\n     * Get task definition for a command plugin\n     */\n    private getTaskDefinition(\n        plugin: PackagePlugin,\n        cwd: string | undefined\n    ): vscode.TaskDefinition {\n        const definition = {\n            type: \"swift-plugin\",\n            command: plugin.command,\n            args: [],\n            disableSandbox: false,\n            allowWritingToPackageDirectory: false,\n            cwd,\n            disableTaskQueue: false,\n        };\n        // There are common command plugins used across the package eco-system eg for docc generation\n        // Everytime these are run they need the same default setup.\n        switch (`${plugin.package}, ${plugin.command}`) {\n            case \"swift-aws-lambda-runtime, archive\":\n                definition.disableSandbox = true;\n                definition.disableTaskQueue = true;\n                break;\n\n            case \"SwiftDocCPlugin, generate-documentation\":\n                definition.allowWritingToPackageDirectory = true;\n                break;\n\n            case \"SwiftDocCPlugin, preview-documentation\":\n                definition.disableSandbox = true;\n                definition.allowWritingToPackageDirectory = true;\n                break;\n\n            case \"SwiftFormat, swiftformat\":\n                definition.allowWritingToPackageDirectory = true;\n                break;\n\n            case \"swift-format, format-source-code\":\n                definition.allowWritingToPackageDirectory = true;\n                break;\n\n            default:\n                break;\n        }\n        return definition;\n    }\n\n    /**\n     * Generates a list of permission related plugin arguments from two potential sources,\n     * the hardcoded list of permissions defined on a per-plugin basis in getTaskDefinition\n     * and the user-configured permissions in the workspace settings. User-configured permissions\n     * are keyed by either plugin command name (package), or in the form `name:command`.\n     * User-configured permissions take precedence over the hardcoded permissions, and the more\n     * specific form of `name:command` takes precedence over the more general form of `name`.\n     * @param folderContext The folder context to search for the `swift.pluginPermissions` and `swift.pluginArguments` keys.\n     * @param taskDefinition The task definition to search for the `disableSandbox` and `allowWritingToPackageDirectory` keys.\n     * @param plugin The plugin to generate arguments for.\n     * @returns A list of permission related arguments to pass when invoking the plugin.\n     */\n    private pluginArgumentsFromConfiguration(\n        folderContext: vscode.WorkspaceFolder,\n        taskDefinition: vscode.TaskDefinition,\n        plugin: PackagePlugin\n    ): string[] {\n        const config = configuration.folder(folderContext);\n        const globalPackageConfig = config.pluginPermissions();\n        const packageConfig = config.pluginPermissions(plugin.package);\n        const commandConfig = config.pluginPermissions(`${plugin.package}:${plugin.command}`);\n\n        const globalPackageArgs = config.pluginArguments();\n        const packageArgs = config.pluginArguments(plugin.package);\n        const commandArgs = config.pluginArguments(`${plugin.package}:${plugin.command}`);\n\n        const taskDefinitionConfiguration: PluginPermissionConfiguration = {};\n        if (taskDefinition.disableSandbox) {\n            taskDefinitionConfiguration.disableSandbox = true;\n        }\n        if (taskDefinition.allowWritingToPackageDirectory) {\n            taskDefinitionConfiguration.allowWritingToPackageDirectory = true;\n        }\n        if (taskDefinition.allowWritingToDirectory) {\n            taskDefinitionConfiguration.allowWritingToDirectory =\n                taskDefinition.allowWritingToDirectory;\n        }\n        if (taskDefinition.allowNetworkConnections) {\n            taskDefinitionConfiguration.allowNetworkConnections =\n                taskDefinition.allowNetworkConnections;\n        }\n\n        return [\n            ...globalPackageArgs,\n            ...packageArgs,\n            ...commandArgs,\n            ...this.pluginArguments({\n                ...globalPackageConfig,\n                ...packageConfig,\n                ...commandConfig,\n                ...taskDefinitionConfiguration,\n            }),\n        ];\n    }\n\n    private pluginArguments(config: PluginPermissionConfiguration): string[] {\n        const args = [];\n        if (config.disableSandbox) {\n            args.push(\"--disable-sandbox\");\n        }\n        if (config.allowWritingToPackageDirectory) {\n            args.push(\"--allow-writing-to-package-directory\");\n        }\n        if (config.allowWritingToDirectory) {\n            if (Array.isArray(config.allowWritingToDirectory)) {\n                args.push(\"--allow-writing-to-directory\", ...config.allowWritingToDirectory);\n            } else {\n                args.push(\"--allow-writing-to-directory\");\n            }\n        }\n        if (config.allowNetworkConnections) {\n            args.push(\"--allow-network-connections\");\n            args.push(config.allowNetworkConnections);\n        }\n        return args;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { DebugAdapter, LaunchConfigType, SWIFT_LAUNCH_CONFIG_TYPE } from \"./debugAdapter\";\nimport { registerLoggingDebugAdapterTracker } from \"./logTracker\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\nimport { fileExists } from \"../utilities/filesystem\";\nimport { updateLaunchConfigForCI, getLLDBLibPath } from \"./lldb\";\nimport { getErrorDescription, swiftRuntimeEnv } from \"../utilities/utilities\";\nimport configuration from \"../configuration\";\n\n/**\n * Registers the active debugger with the extension, and reregisters it\n * when the debugger settings change.\n * @param workspaceContext  The workspace context\n * @returns A disposable to be disposed when the extension is deactivated\n */\nexport function registerDebugger(workspaceContext: WorkspaceContext): vscode.Disposable {\n    let subscriptions: vscode.Disposable[] = [];\n\n    // Monitor the swift.debugger.disable setting and register automatically\n    // when the setting is changed to enable.\n    const configurationEvent = vscode.workspace.onDidChangeConfiguration(event => {\n        if (event.affectsConfiguration(\"swift.debugger.disable\")) {\n            subscriptions.map(sub => sub.dispose());\n            subscriptions = [];\n            if (!configuration.debugger.disable) {\n                register();\n            }\n        }\n    });\n\n    function register() {\n        subscriptions.push(registerLoggingDebugAdapterTracker());\n        subscriptions.push(registerLLDBDebugAdapter(workspaceContext));\n    }\n\n    if (!configuration.debugger.disable) {\n        register();\n    }\n\n    return {\n        dispose: () => {\n            configurationEvent.dispose();\n            subscriptions.map(sub => sub.dispose());\n        },\n    };\n}\n\n/**\n * Registers the LLDB debug adapter with the VS Code debug adapter descriptor factory.\n * @param workspaceContext The workspace context\n * @returns A disposable to be disposed when the extension is deactivated\n */\nfunction registerLLDBDebugAdapter(workspaceContext: WorkspaceContext): vscode.Disposable {\n    return vscode.debug.registerDebugConfigurationProvider(\n        SWIFT_LAUNCH_CONFIG_TYPE,\n        workspaceContext.launchProvider\n    );\n}\n\n/** Provide configurations for lldb-vscode/lldb-dap\n *\n * Converts launch configuration that user supplies into a version that the lldb-vscode/lldb-dap\n * debug adapter will use. Primarily it converts the environment variables from Object\n * to an array of strings in format \"var=value\".\n *\n * This could also be used to augment the configuration with values from the settings\n * although it isn't at the moment.\n */\nexport class LLDBDebugConfigurationProvider implements vscode.DebugConfigurationProvider {\n    constructor(\n        private platform: NodeJS.Platform,\n        private workspaceContext: WorkspaceContext,\n        private outputChannel: SwiftOutputChannel\n    ) {}\n\n    async resolveDebugConfigurationWithSubstitutedVariables(\n        folder: vscode.WorkspaceFolder | undefined,\n        launchConfig: vscode.DebugConfiguration\n    ): Promise<vscode.DebugConfiguration | undefined | null> {\n        const workspaceFolder = this.workspaceContext.folders.find(\n            f => f.workspaceFolder.uri.fsPath === folder?.uri.fsPath\n        );\n        const toolchain = workspaceFolder?.toolchain ?? this.workspaceContext.globalToolchain;\n\n        // Fix the program path on Windows to include the \".exe\" extension\n        if (\n            this.platform === \"win32\" &&\n            launchConfig.testType === undefined &&\n            path.extname(launchConfig.program) !== \".exe\" &&\n            path.extname(launchConfig.program) !== \".xctest\"\n        ) {\n            launchConfig.program += \".exe\";\n        }\n\n        // Convert \"pid\" property from a string to a number to make the process picker work.\n        if (\"pid\" in launchConfig) {\n            const pid = Number.parseInt(launchConfig.pid, 10);\n            if (isNaN(pid)) {\n                return await vscode.window\n                    .showErrorMessage(\n                        \"Failed to launch debug session\",\n                        {\n                            modal: true,\n                            detail: `Invalid process ID: \"${launchConfig.pid}\" is not a valid integer. Please update your launch configuration`,\n                        },\n                        \"Configure\"\n                    )\n                    .then(userSelection => {\n                        if (userSelection === \"Configure\") {\n                            return null; // Opens the launch configuration when returned from a DebugConfigurationProvider\n                        }\n                        return undefined; // Only stops the debug session from starting\n                    });\n            }\n            launchConfig.pid = pid;\n        }\n\n        // Merge in the Swift runtime environment variables\n        const runtimeEnv = swiftRuntimeEnv(true);\n        if (runtimeEnv) {\n            const existingEnv = launchConfig.env ?? {};\n            launchConfig.env = { ...runtimeEnv, existingEnv };\n        }\n\n        // Delegate to the appropriate debug adapter extension\n        launchConfig.type = DebugAdapter.getLaunchConfigType(toolchain.swiftVersion);\n        if (launchConfig.type === LaunchConfigType.CODE_LLDB) {\n            launchConfig.sourceLanguages = [\"swift\"];\n            if (!vscode.extensions.getExtension(\"vadimcn.vscode-lldb\")) {\n                if (!(await this.promptToInstallCodeLLDB())) {\n                    return undefined;\n                }\n            }\n            if (!(await this.promptForCodeLldbSettings(toolchain))) {\n                return undefined;\n            }\n        } else if (launchConfig.type === LaunchConfigType.LLDB_DAP) {\n            if (launchConfig.env) {\n                launchConfig.env = this.convertEnvironmentVariables(launchConfig.env);\n            }\n            const lldbDapPath = await DebugAdapter.getLLDBDebugAdapterPath(toolchain);\n            // Verify that the debug adapter exists or bail otherwise\n            if (!(await fileExists(lldbDapPath))) {\n                void vscode.window.showErrorMessage(\n                    `Cannot find the LLDB debug adapter in your Swift toolchain: No such file or directory \"${lldbDapPath}\"`\n                );\n                return undefined;\n            }\n            launchConfig.debugAdapterExecutable = lldbDapPath;\n        }\n\n        return updateLaunchConfigForCI(launchConfig);\n    }\n\n    private async promptToInstallCodeLLDB(): Promise<boolean> {\n        const selection = await vscode.window.showErrorMessage(\n            \"The CodeLLDB extension is required to debug with Swift toolchains prior to Swift 6.0. Please install the extension to continue.\",\n            { modal: true },\n            \"Install CodeLLDB\",\n            \"View Extension\"\n        );\n        switch (selection) {\n            case \"Install CodeLLDB\":\n                await vscode.commands.executeCommand(\n                    \"workbench.extensions.installExtension\",\n                    \"vadimcn.vscode-lldb\"\n                );\n                return true;\n            case \"View Extension\":\n                await vscode.commands.executeCommand(\n                    \"workbench.extensions.search\",\n                    \"@id:vadimcn.vscode-lldb\"\n                );\n                await vscode.commands.executeCommand(\n                    \"workbench.extensions.action.showReleasedVersion\",\n                    \"vadimcn.vscode-lldb\"\n                );\n                return false;\n            case undefined:\n                return false;\n        }\n    }\n\n    async promptForCodeLldbSettings(toolchain: SwiftToolchain): Promise<boolean> {\n        const libLldbPathResult = await getLLDBLibPath(toolchain);\n        if (!libLldbPathResult.success) {\n            const errorMessage = `Error: ${getErrorDescription(libLldbPathResult.failure)}`;\n            void vscode.window.showWarningMessage(\n                `Failed to setup CodeLLDB for debugging of Swift code. Debugging may produce unexpected results. ${errorMessage}`\n            );\n            this.outputChannel.log(`Failed to setup CodeLLDB: ${errorMessage}`);\n            return true;\n        }\n        const libLldbPath = libLldbPathResult.success;\n        const lldbConfig = vscode.workspace.getConfiguration(\"lldb\");\n        if (\n            lldbConfig.get<string>(\"library\") === libLldbPath &&\n            lldbConfig.get<string>(\"launch.expressions\") === \"native\"\n        ) {\n            return true;\n        }\n        let userSelection: \"Global\" | \"Workspace\" | \"Run Anyway\" | undefined = undefined;\n        switch (configuration.debugger.setupCodeLLDB) {\n            case \"prompt\":\n                userSelection = await vscode.window.showInformationMessage(\n                    \"The Swift extension needs to update some CodeLLDB settings to enable debugging features. Do you want to set this up in your global settings or workspace settings?\",\n                    { modal: true },\n                    \"Global\",\n                    \"Workspace\",\n                    \"Run Anyway\"\n                );\n                break;\n            case \"alwaysUpdateGlobal\":\n                userSelection = \"Global\";\n                break;\n            case \"alwaysUpdateWorkspace\":\n                userSelection = \"Workspace\";\n                break;\n            case \"never\":\n                userSelection = \"Run Anyway\";\n                break;\n        }\n        switch (userSelection) {\n            case \"Global\":\n                await lldbConfig.update(\"library\", libLldbPath, vscode.ConfigurationTarget.Global);\n                await lldbConfig.update(\n                    \"launch.expressions\",\n                    \"native\",\n                    vscode.ConfigurationTarget.Global\n                );\n                // clear workspace setting\n                await lldbConfig.update(\"library\", undefined, vscode.ConfigurationTarget.Workspace);\n                // clear workspace setting\n                await lldbConfig.update(\n                    \"launch.expressions\",\n                    undefined,\n                    vscode.ConfigurationTarget.Workspace\n                );\n                break;\n            case \"Workspace\":\n                await lldbConfig.update(\n                    \"library\",\n                    libLldbPath,\n                    vscode.ConfigurationTarget.Workspace\n                );\n                await lldbConfig.update(\n                    \"launch.expressions\",\n                    \"native\",\n                    vscode.ConfigurationTarget.Workspace\n                );\n                break;\n        }\n        return true;\n    }\n\n    private convertEnvironmentVariables(map: { [key: string]: string }): string[] {\n        return Object.entries(map).map(([key, value]) => `${key}=${value}`);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport { showReloadExtensionNotification } from \"./ReloadExtension\";\nimport { SwiftToolchain } from \"../toolchain/toolchain\";\nimport configuration from \"../configuration\";\n\n/**\n * Open the installation page on Swift.org\n */\nexport async function downloadToolchain() {\n    if (await vscode.env.openExternal(vscode.Uri.parse(\"https://www.swift.org/install\"))) {\n        const selected = await showReloadExtensionNotification(\n            \"The Swift extension must be reloaded once you have downloaded and installed the new toolchain.\",\n            \"Select Toolchain\"\n        );\n        if (selected === \"Select Toolchain\") {\n            await vscode.commands.executeCommand(\"swift.selectToolchain\");\n        }\n    }\n}\n\n/**\n * Open the installation page for Swiftly\n */\nexport async function installSwiftly() {\n    if (await vscode.env.openExternal(vscode.Uri.parse(\"https://www.swift.org/install/\"))) {\n        const selected = await showReloadExtensionNotification(\n            \"The Swift extension must be reloaded once you have downloaded and installed the new toolchain.\",\n            \"Select Toolchain\"\n        );\n        if (selected === \"Select Toolchain\") {\n            await vscode.commands.executeCommand(\"swift.selectToolchain\");\n        }\n    }\n}\n\n/**\n * Prompt the user to select a folder where they have installed the swift toolchain.\n * Updates the swift.path configuration with the selected folder.\n */\nexport async function selectToolchainFolder() {\n    const selected = await vscode.window.showOpenDialog({\n        canSelectFiles: false,\n        canSelectFolders: true,\n        canSelectMany: false,\n        title: \"Select the folder containing Swift binaries\",\n        openLabel: \"Select folder\",\n    });\n    if (!selected || selected.length !== 1) {\n        return;\n    }\n    await setToolchainPath(selected[0].fsPath);\n}\n\n/**\n * Displays an error notification to the user that toolchain discovery failed.\n */\nexport async function showToolchainError(): Promise<void> {\n    let selected: \"Remove From Settings\" | \"Select Toolchain\" | undefined;\n    if (configuration.path) {\n        selected = await vscode.window.showErrorMessage(\n            `The Swift executable at \"${configuration.path}\" either could not be found or failed to launch. Please select a new toolchain.`,\n            \"Remove From Settings\",\n            \"Select Toolchain\"\n        );\n    } else {\n        selected = await vscode.window.showErrorMessage(\n            \"Unable to automatically discover your Swift toolchain. Either install a toolchain from Swift.org or provide the path to an existing toolchain.\",\n            \"Select Toolchain\"\n        );\n    }\n\n    if (selected === \"Remove From Settings\") {\n        await removeToolchainPath();\n    } else if (selected === \"Select Toolchain\") {\n        await vscode.commands.executeCommand(\"swift.selectToolchain\");\n    }\n}\n\n/** A {@link vscode.QuickPickItem} that contains the path to an installed Swift toolchain */\ntype SwiftToolchainItem = PublicSwiftToolchainItem | XcodeToolchainItem;\n\n/** Common properties for a {@link vscode.QuickPickItem} that represents a Swift toolchain */\ninterface BaseSwiftToolchainItem extends vscode.QuickPickItem {\n    type: \"toolchain\";\n    toolchainPath: string;\n    swiftFolderPath: string;\n    onDidSelect?(): Promise<void>;\n}\n\n/** A {@link vscode.QuickPickItem} for a Swift toolchain that has been installed manually */\ninterface PublicSwiftToolchainItem extends BaseSwiftToolchainItem {\n    category: \"public\" | \"swiftly\";\n}\n\n/** A {@link vscode.QuickPickItem} for a Swift toolchain provided by an installed Xcode application */\ninterface XcodeToolchainItem extends BaseSwiftToolchainItem {\n    category: \"xcode\";\n    xcodePath: string;\n}\n\n/** A {@link vscode.QuickPickItem} that performs an action for the user */\ninterface ActionItem extends vscode.QuickPickItem {\n    type: \"action\";\n    run(): Promise<void>;\n}\n\n/** A {@link vscode.QuickPickItem} that separates items in the UI */\nclass SeparatorItem implements vscode.QuickPickItem {\n    readonly type = \"separator\";\n    readonly kind = vscode.QuickPickItemKind.Separator;\n    readonly label: string;\n\n    constructor(label: string) {\n        this.label = label;\n    }\n}\n\n/** The possible types of {@link vscode.QuickPickItem} in the toolchain selection dialog */\ntype SelectToolchainItem = SwiftToolchainItem | ActionItem | SeparatorItem;\n\n/**\n * Retrieves all {@link SelectToolchainItem} that are available on the system.\n *\n * @param ctx the {@link WorkspaceContext}\n * @returns an array of {@link SelectToolchainItem}\n */\nasync function getQuickPickItems(\n    activeToolchain: SwiftToolchain | undefined\n): Promise<SelectToolchainItem[]> {\n    // Find any Xcode installations on the system\n    const xcodes = (await SwiftToolchain.findXcodeInstalls())\n        .reverse()\n        .map<SwiftToolchainItem>(xcodePath => {\n            const toolchainPath = path.join(\n                xcodePath,\n                \"Contents\",\n                \"Developer\",\n                \"Toolchains\",\n                \"XcodeDefault.xctoolchain\",\n                \"usr\"\n            );\n            return {\n                type: \"toolchain\",\n                category: \"xcode\",\n                label: path.basename(xcodePath, \".app\"),\n                detail: xcodePath,\n                xcodePath,\n                toolchainPath,\n                swiftFolderPath: path.join(toolchainPath, \"bin\"),\n            };\n        });\n    // Find any public Swift toolchains on the system\n    const toolchains = (await SwiftToolchain.getToolchainInstalls())\n        .reverse()\n        .map<SwiftToolchainItem>(toolchainPath => {\n            const result: SwiftToolchainItem = {\n                type: \"toolchain\",\n                category: \"public\",\n                label: path.basename(toolchainPath, \".xctoolchain\"),\n                detail: toolchainPath,\n                toolchainPath: path.join(toolchainPath, \"usr\"),\n                swiftFolderPath: path.join(toolchainPath, \"usr\", \"bin\"),\n            };\n            if (result.label === \"swift-latest\") {\n                result.label = \"Latest Installed Toolchain\";\n                result.onDidSelect = async () => {\n                    void vscode.window.showInformationMessage(\n                        `The Swift extension is now configured to always use the most recently installed toolchain pointed at by the symbolic link \"${toolchainPath}\".`\n                    );\n                };\n            }\n            return result;\n        });\n    // Find any Swift toolchains installed via Swiftly\n    const swiftlyToolchains = (await SwiftToolchain.getSwiftlyToolchainInstalls())\n        .reverse()\n        .map<SwiftToolchainItem>(toolchainPath => ({\n            type: \"toolchain\",\n            category: \"swiftly\",\n            label: path.basename(toolchainPath),\n            detail: toolchainPath,\n            toolchainPath: path.join(toolchainPath, \"usr\"),\n            swiftFolderPath: path.join(toolchainPath, \"usr\", \"bin\"),\n        }));\n    // Mark which toolchain is being actively used\n    if (activeToolchain) {\n        const toolchainInUse = [...xcodes, ...toolchains, ...swiftlyToolchains].find(toolchain => {\n            return toolchain.toolchainPath === activeToolchain.toolchainPath;\n        });\n        if (toolchainInUse) {\n            toolchainInUse.description = \"$(check) in use\";\n        } else {\n            toolchains.splice(0, 0, {\n                type: \"toolchain\",\n                category: \"public\",\n                label: `Swift ${activeToolchain.swiftVersion.toString()}`,\n                description: \"$(check) in use\",\n                detail: activeToolchain.toolchainPath,\n                toolchainPath: activeToolchain.toolchainPath,\n                swiftFolderPath: activeToolchain.swiftFolderPath,\n            });\n        }\n    }\n    // Various actions that the user can perform (e.g. to install new toolchains)\n    const actionItems: ActionItem[] = [];\n    if (process.platform === \"linux\") {\n        actionItems.push({\n            type: \"action\",\n            label: \"$(swift-icon) Install Swiftly for toolchain management...\",\n            detail: \"Install https://swiftlang.github.io/swiftly to manage your toolchains on Linux\",\n            run: installSwiftly,\n        });\n    }\n    actionItems.push({\n        type: \"action\",\n        label: \"$(cloud-download) Download from Swift.org...\",\n        detail: \"Open https://swift.org/install to download and install a toolchain\",\n        run: downloadToolchain,\n    });\n    actionItems.push({\n        type: \"action\",\n        label: \"$(folder-opened) Select toolchain directory...\",\n        detail: \"Select a folder on your machine where the Swift toolchain is installed\",\n        run: selectToolchainFolder,\n    });\n    return [\n        ...(xcodes.length > 0 ? [new SeparatorItem(\"Xcode\"), ...xcodes] : []),\n        ...(toolchains.length > 0 ? [new SeparatorItem(\"toolchains\"), ...toolchains] : []),\n        ...(swiftlyToolchains.length > 0\n            ? [new SeparatorItem(\"swiftly\"), ...swiftlyToolchains]\n            : []),\n        new SeparatorItem(\"actions\"),\n        ...actionItems,\n    ];\n}\n\n/**\n * Prompt the user to select or install a swift toolchain. Updates the swift.path configuration\n * with the user's selection.\n *\n * @param activeToolchain the {@link WorkspaceContext}\n */\nexport async function showToolchainSelectionQuickPick(activeToolchain: SwiftToolchain | undefined) {\n    let xcodePaths: string[] = [];\n    const selected = await vscode.window.showQuickPick<SelectToolchainItem>(\n        getQuickPickItems(activeToolchain).then(result => {\n            xcodePaths = result\n                .filter((i): i is XcodeToolchainItem => \"category\" in i && i.category === \"xcode\")\n                .map(xcode => xcode.xcodePath);\n            return result;\n        }),\n        {\n            title: \"Select the Swift toolchain\",\n            placeHolder: \"Pick a Swift toolchain that VS Code will use\",\n            canPickMany: false,\n        }\n    );\n    if (selected?.type === \"action\") {\n        return await selected.run();\n    }\n    if (selected?.type === \"toolchain\") {\n        // Select an Xcode to build with\n        let developerDir: string | undefined = undefined;\n        if (process.platform === \"darwin\") {\n            let selectedXcodePath: string | undefined = undefined;\n            if (selected.category === \"xcode\") {\n                selectedXcodePath = selected.xcodePath;\n            } else if (xcodePaths.length === 1) {\n                selectedXcodePath = xcodePaths[0];\n            } else if (xcodePaths.length > 1) {\n                selectedXcodePath = await showDeveloperDirQuickPick(xcodePaths);\n                if (!selectedXcodePath) {\n                    return;\n                }\n            }\n            // Find the actual DEVELOPER_DIR based on the selected Xcode app\n            if (selectedXcodePath) {\n                developerDir = await SwiftToolchain.getXcodeDeveloperDir({\n                    ...process.env,\n                    DEVELOPER_DIR: selectedXcodePath,\n                });\n            }\n        }\n        // Update the toolchain path\n        const isUpdated = await setToolchainPath(selected.swiftFolderPath, developerDir);\n        if (isUpdated && selected.onDidSelect) {\n            await selected.onDidSelect();\n        }\n        return;\n    }\n}\n\n/**\n * Prompt the user to choose a value for the DEVELOPER_DIR environment variable.\n *\n * @param xcodePaths An array of paths to available Xcode installations on the system\n * @returns The selected DEVELOPER_DIR or undefined if the user cancelled selection\n */\nasync function showDeveloperDirQuickPick(xcodePaths: string[]): Promise<string | undefined> {\n    const selected = await vscode.window.showQuickPick<vscode.QuickPickItem>(\n        SwiftToolchain.getXcodeDeveloperDir(configuration.swiftEnvironmentVariables).then(\n            existingDeveloperDir => {\n                return xcodePaths\n                    .map(xcodePath => {\n                        const result: vscode.QuickPickItem = {\n                            label: path.basename(xcodePath, \".app\"),\n                            detail: xcodePath,\n                        };\n                        if (existingDeveloperDir.startsWith(xcodePath)) {\n                            result.description = \"$(check) in use\";\n                        }\n                        return result;\n                    })\n                    .sort((a, b) => {\n                        // Bring the active Xcode to the top\n                        if (existingDeveloperDir.startsWith(a.detail ?? \"\")) {\n                            return -1;\n                        } else if (existingDeveloperDir.startsWith(b.detail ?? \"\")) {\n                            return 1;\n                        }\n                        // Otherwise sort by name\n                        return a.label.localeCompare(b.label);\n                    });\n            }\n        ),\n        {\n            title: \"Select a developer directory\",\n            placeHolder:\n                \"Pick an Xcode installation to use as the developer directory and for the macOS SDK\",\n            canPickMany: false,\n        }\n    );\n    return selected?.detail;\n}\n\n/**\n * Delete all set Swift path settings.\n */\nasync function removeToolchainPath() {\n    const swiftSettings = vscode.workspace.getConfiguration(\"swift\");\n    const swiftEnvironmentSettings = swiftSettings.inspect(\"swiftEnvironmentVariables\");\n    if (swiftEnvironmentSettings?.globalValue) {\n        await swiftSettings.update(\n            \"swiftEnvironmentVariables\",\n            {\n                ...swiftEnvironmentSettings?.globalValue,\n                DEVELOPER_DIR: undefined,\n            },\n            vscode.ConfigurationTarget.Global\n        );\n    }\n    await swiftSettings.update(\"path\", undefined, vscode.ConfigurationTarget.Global);\n    if (swiftEnvironmentSettings?.workspaceValue) {\n        await swiftSettings.update(\n            \"swiftEnvironmentVariables\",\n            {\n                ...swiftEnvironmentSettings?.workspaceValue,\n                DEVELOPER_DIR: undefined,\n            },\n            vscode.ConfigurationTarget.Workspace\n        );\n    }\n    await swiftSettings.update(\"path\", undefined, vscode.ConfigurationTarget.Workspace);\n}\n\n/**\n * Update the toolchain path\n * @param swiftFolderPath\n * @param developerDir\n * @returns\n */\nasync function setToolchainPath(\n    swiftFolderPath: string | undefined,\n    developerDir?: string\n): Promise<boolean> {\n    let target: vscode.ConfigurationTarget | undefined;\n    const items: (vscode.QuickPickItem & {\n        target?: vscode.ConfigurationTarget;\n    })[] = [];\n    if (vscode.workspace.workspaceFolders) {\n        items.push({\n            label: \"Workspace Configuration\",\n            description: \"(Recommended)\",\n            detail: \"Add to VS Code workspace configuration\",\n            target: vscode.ConfigurationTarget.Workspace,\n        });\n    }\n    items.push({\n        label: \"User Configuration\",\n        detail: \"Add to VS Code user configuration.\",\n        target: vscode.ConfigurationTarget.Global,\n    });\n    if (items.length > 1) {\n        const selected = await vscode.window.showQuickPick(items, {\n            title: \"Toolchain Configuration\",\n            placeHolder: \"Select a location to update the toolchain selection\",\n            canPickMany: false,\n        });\n        if (!selected) {\n            return false;\n        }\n        target = selected.target;\n    } else {\n        target = vscode.ConfigurationTarget.Global; // Global scope by default\n    }\n    const swiftConfiguration = vscode.workspace.getConfiguration(\"swift\");\n    await swiftConfiguration.update(\"path\", swiftFolderPath, target);\n    const swiftEnv = configuration.swiftEnvironmentVariables;\n    await swiftConfiguration.update(\n        \"swiftEnvironmentVariables\",\n        {\n            ...swiftEnv,\n            DEVELOPER_DIR: developerDir,\n        },\n        target\n    );\n    await checkAndRemoveWorkspaceSetting(target);\n    return true;\n}\n\nasync function checkAndRemoveWorkspaceSetting(target: vscode.ConfigurationTarget | undefined) {\n    // Check to see if the configuration would be overridden by workspace settings\n    if (target !== vscode.ConfigurationTarget.Global) {\n        return;\n    }\n    const inspect = vscode.workspace.getConfiguration(\"swift\").inspect<string>(\"path\");\n    if (inspect?.workspaceValue) {\n        const confirmation = await vscode.window.showWarningMessage(\n            \"You already have a Swift path configured in Workspace Settings which takes precedence over User Settings.\" +\n                \" Would you like to remove the setting from your workspace and use the User Settings instead?\",\n            \"Remove Workspace Setting\"\n        );\n        if (confirmation !== \"Remove Workspace Setting\") {\n            return;\n        }\n        const swiftSettings = vscode.workspace.getConfiguration(\"swift\");\n        const swiftEnvironmentSettings = swiftSettings.inspect(\"swiftEnvironmentVariables\");\n        if (swiftEnvironmentSettings?.workspaceValue) {\n            await swiftSettings.update(\n                \"swiftEnvironmentVariables\",\n                {\n                    ...swiftEnvironmentSettings?.workspaceValue,\n                    DEVELOPER_DIR: undefined,\n                },\n                vscode.ConfigurationTarget.Workspace\n            );\n        }\n        await swiftSettings.update(\"path\", undefined, vscode.ConfigurationTarget.Workspace);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { SWIFT_LAUNCH_CONFIG_TYPE } from \"../debugger/debugAdapter\";\n\n/**\n * Attaches the LLDB debugger to a running process selected by the user.\n *\n * This function retrieves a list of processes using `getLldbProcess`, then presents\n * a process picker to the user. If the user selects a process, it configures LLDB\n * to attach to that process and starts the debugging session in VS Code.\n *\n * @param {WorkspaceContext} ctx - The workspace context, which provides access to toolchain and configuration details.\n * @returns {Promise<void>} - A promise that resolves when the debugger is successfully attached or the user cancels the operation.\n *\n * @throws Will display an error message if no processes are available, or if the debugger fails to attach to the selected process.\n */\nexport async function attachDebugger() {\n    await vscode.debug.startDebugging(undefined, {\n        type: SWIFT_LAUNCH_CONFIG_TYPE,\n        request: \"attach\",\n        name: \"Attach\",\n        pid: \"${command:pickProcess}\",\n    });\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { ReIndexProjectRequest } from \"../sourcekit-lsp/extensions\";\n\n/**\n * Request that the SourceKit-LSP server reindexes the workspace.\n */\nexport async function reindexProject(\n    workspaceContext: WorkspaceContext\n): Promise<void | undefined> {\n    if (!workspaceContext.currentFolder) {\n        return;\n    }\n\n    const languageClientManager = workspaceContext.languageClientManager.get(\n        workspaceContext.currentFolder\n    );\n    return languageClientManager.useLanguageClient(async (client, token) => {\n        try {\n            await client.sendRequest(ReIndexProjectRequest.type, token);\n            const result = await vscode.window.showWarningMessage(\n                \"Re-indexing a project should never be necessary and indicates a bug in SourceKit-LSP. Please file an issue describing which symbol was out-of-date and how you got into the state.\",\n                \"Report Issue\",\n                \"Close\"\n            );\n            if (result === \"Report Issue\") {\n                await vscode.commands.executeCommand(\n                    \"vscode.open\",\n                    vscode.Uri.parse(\n                        \"https://github.com/swiftlang/sourcekit-lsp/issues/new?template=BUG_REPORT.yml&title=Symbol%20Indexing%20Issue\"\n                    )\n                );\n            }\n        } catch (err) {\n            const error = err as { code: number; message: string };\n            // methodNotFound, version of sourcekit-lsp is likely too old.\n            if (error.code === -32601) {\n                void vscode.window.showWarningMessage(\n                    \"The installed version of SourceKit-LSP does not support background indexing.\"\n                );\n            } else {\n                void vscode.window.showWarningMessage(error.message);\n            }\n        }\n    });\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { createSwiftTask, SwiftTaskProvider } from \"../tasks/SwiftTaskProvider\";\nimport { debugLaunchConfig, getLaunchConfiguration } from \"../debugger/launch\";\nimport { executeTaskWithUI } from \"./utilities\";\nimport { FolderContext } from \"../FolderContext\";\nimport { Target } from \"../SwiftPackage\";\n\n/**\n * Executes a {@link vscode.Task task} to run swift target.\n */\nexport async function runBuild(ctx: WorkspaceContext, target?: string) {\n    return await debugBuildWithOptions(ctx, { noDebug: true }, target);\n}\n\n/**\n * Executes a {@link vscode.Task task} to debug swift target.\n */\nexport async function debugBuild(ctx: WorkspaceContext, target?: string) {\n    return await debugBuildWithOptions(ctx, {}, target);\n}\n\n/**\n * Executes a {@link vscode.Task task} to delete all build artifacts.\n */\nexport async function cleanBuild(ctx: WorkspaceContext) {\n    const current = ctx.currentFolder;\n    if (!current) {\n        return;\n    }\n    return await folderCleanBuild(current);\n}\n\n/**\n * Run `swift package clean` inside a folder\n * @param folderContext folder to run update inside\n */\nexport async function folderCleanBuild(folderContext: FolderContext) {\n    const task = createSwiftTask(\n        [\"package\", \"clean\"],\n        SwiftTaskProvider.cleanBuildName,\n        {\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            prefix: folderContext.name,\n            presentationOptions: { reveal: vscode.TaskRevealKind.Silent },\n            group: vscode.TaskGroup.Clean,\n        },\n        folderContext.toolchain\n    );\n\n    return await executeTaskWithUI(task, \"Clean Build\", folderContext);\n}\n\n/**\n * Executes a {@link vscode.Task task} to debug swift target.\n */\nexport async function debugBuildWithOptions(\n    ctx: WorkspaceContext,\n    options: vscode.DebugSessionOptions,\n    targetName?: string\n) {\n    const current = ctx.currentFolder;\n    if (!current) {\n        ctx.outputChannel.appendLine(\n            \"debugBuildWithOptions: No current folder on WorkspaceContext\"\n        );\n        return;\n    }\n\n    let target: Target | undefined;\n    if (targetName) {\n        const targets = await current.swiftPackage.targets;\n        target = targets.find(target => target.name === targetName);\n    } else {\n        const file = vscode.window.activeTextEditor?.document.fileName;\n        if (!file) {\n            ctx.outputChannel.appendLine(\"debugBuildWithOptions: No active text editor\");\n            return;\n        }\n\n        target = await current.swiftPackage.getTarget(file);\n    }\n\n    if (!target) {\n        ctx.outputChannel.appendLine(\"debugBuildWithOptions: No active target\");\n        return;\n    }\n\n    if (target.type !== \"executable\") {\n        ctx.outputChannel.appendLine(\n            `debugBuildWithOptions: Target is not an executable, instead is ${target.type}`\n        );\n        return;\n    }\n\n    const launchConfig = getLaunchConfiguration(target.name, current);\n    if (launchConfig) {\n        ctx.buildStarted(target.name, launchConfig, options);\n        const result = await debugLaunchConfig(current.workspaceFolder, launchConfig, options);\n        ctx.buildFinished(target.name, launchConfig, options);\n        return result;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"../FolderContext\";\nimport { TaskOperation } from \"../tasks/TaskQueue\";\nimport { FolderOperation } from \"../WorkspaceContext\";\n\n/**\n * Execute task and show UI while running.\n *\n * @param task The task to execute\n * @param description Task description shown in logs and errors\n * @param folderContext The folder context the task is running in\n * @param showErrors Whether to show errors with a vscode error window\n * @param checkAlreadyRunning Check if the task is already running and skip if true\n * @returns Whether or not the task completed successfully.\n */\nexport async function executeTaskWithUI(\n    task: vscode.Task,\n    description: string,\n    folderContext: FolderContext,\n    showErrors = false,\n    checkAlreadyRunning: boolean = false\n): Promise<boolean> {\n    try {\n        const exitCode = await folderContext.taskQueue.queueOperation(\n            new TaskOperation(task, {\n                showStatusItem: true,\n                checkAlreadyRunning,\n                log: description,\n            })\n        );\n        if (exitCode === 0) {\n            return true;\n        } else {\n            if (showErrors) {\n                void vscode.window.showErrorMessage(`${description} failed`);\n            }\n            return false;\n        }\n    } catch (error) {\n        if (showErrors) {\n            void vscode.window.showErrorMessage(`${description} failed: ${error}`);\n        }\n        return false;\n    }\n}\n\n/**\n * If the folder previously had resolve errors and now no longer does then\n * send a Package.resolved updated event to trigger the display of the package\n * dependencies view.\n * @param result If there were resolve errors in the supplied `FolderContext`\n * @param folderContext The folder to act on\n */\nexport function updateAfterError(result: boolean, folderContext: FolderContext) {\n    const triggerResolvedUpdatedEvent = folderContext.hasResolveErrors;\n    // Save if the folder has resolve errors for the next call.\n    folderContext.hasResolveErrors = !result;\n\n    if (triggerResolvedUpdatedEvent && !folderContext.hasResolveErrors) {\n        void folderContext.fireEvent(FolderOperation.resolvedUpdated);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as fs from \"fs/promises\";\nimport { createSwiftTask } from \"../tasks/SwiftTaskProvider\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { Version } from \"../utilities/version\";\nimport configuration from \"../configuration\";\n\n/**\n * Run the active document through the Swift REPL\n */\nexport async function runSwiftScript(ctx: WorkspaceContext) {\n    const document = vscode.window.activeTextEditor?.document;\n    if (!document) {\n        return;\n    }\n\n    if (!ctx.currentFolder) {\n        return;\n    }\n\n    // Swift scripts require new swift driver to work on Windows. Swift driver is available\n    // from v5.7 of Windows Swift\n    if (\n        process.platform === \"win32\" &&\n        ctx.currentFolder.swiftVersion.isLessThan(new Version(5, 7, 0))\n    ) {\n        void vscode.window.showErrorMessage(\n            \"Run Swift Script is unavailable with the legacy driver on Windows.\"\n        );\n        return;\n    }\n\n    let target: string;\n\n    const defaultVersion = configuration.scriptSwiftLanguageVersion;\n    if (defaultVersion === \"Ask Every Run\") {\n        const picked = await vscode.window.showQuickPick(\n            [\n                // Potentially add more versions here\n                { value: \"5\", label: \"Swift 5\" },\n                { value: \"6\", label: \"Swift 6\" },\n            ],\n            {\n                placeHolder: \"Select a target Swift version\",\n            }\n        );\n\n        if (!picked) {\n            return;\n        }\n        target = picked.value;\n    } else {\n        target = defaultVersion;\n    }\n\n    let filename = document.fileName;\n    let isTempFile = false;\n    if (document.isUntitled) {\n        // if document hasn't been saved, save it to a temporary file\n        isTempFile = true;\n        filename = ctx.tempFolder.filename(document.fileName, \"swift\");\n        const text = document.getText();\n        await fs.writeFile(filename, text);\n    } else {\n        // otherwise save document\n        await document.save();\n    }\n    const runTask = createSwiftTask(\n        [\"-swift-version\", target, filename],\n        `Run ${filename}`,\n        {\n            scope: vscode.TaskScope.Global,\n            cwd: vscode.Uri.file(path.dirname(filename)),\n            presentationOptions: { reveal: vscode.TaskRevealKind.Always, clear: true },\n        },\n        ctx.currentFolder.toolchain\n    );\n    await ctx.tasks.executeTaskAndWait(runTask);\n\n    // delete file after running swift\n    if (isTempFile) {\n        await fs.rm(filename);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderOperation, WorkspaceContext } from \"../../WorkspaceContext\";\nimport { createSwiftTask } from \"../../tasks/SwiftTaskProvider\";\nimport { executeTaskWithUI } from \"../utilities\";\n\n/**\n * Use local version of package dependency\n *\n * equivalent of `swift package edit --path <localpath> identifier\n * @param identifier Identifier for dependency\n * @param ctx workspace context\n */\nexport async function useLocalDependency(\n    identifier: string,\n    ctx: WorkspaceContext,\n    dep: vscode.Uri | undefined\n): Promise<boolean> {\n    const currentFolder = ctx.currentFolder;\n    if (!currentFolder) {\n        ctx.outputChannel.log(\"currentFolder is not set.\");\n        return false;\n    }\n    let folder = dep;\n    if (!folder) {\n        const folders = await vscode.window.showOpenDialog({\n            canSelectFiles: false,\n            canSelectFolders: true,\n            canSelectMany: false,\n            defaultUri: currentFolder.folder,\n            openLabel: \"Select\",\n            title: \"Select folder\",\n        });\n        if (!folders) {\n            return false;\n        }\n        folder = folders[0];\n    }\n    const task = createSwiftTask(\n        currentFolder.toolchain.buildFlags.withAdditionalFlags([\n            \"package\",\n            \"edit\",\n            \"--path\",\n            folder.fsPath,\n            identifier,\n        ]),\n        \"Edit Package Dependency\",\n        {\n            scope: currentFolder.workspaceFolder,\n            cwd: currentFolder.folder,\n            prefix: currentFolder.name,\n        },\n        currentFolder.toolchain\n    );\n\n    const success = await executeTaskWithUI(\n        task,\n        `Use local version of ${identifier}`,\n        currentFolder,\n        true\n    );\n    if (success) {\n        await ctx.fireEvent(currentFolder, FolderOperation.resolvedUpdated);\n    }\n    return success;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { createSwiftTask } from \"../../tasks/SwiftTaskProvider\";\nimport { FolderOperation, WorkspaceContext } from \"../../WorkspaceContext\";\nimport { executeTaskWithUI } from \"../utilities\";\n\n/**\n * Setup package dependency to be edited\n * @param identifier Identifier of dependency we want to edit\n * @param ctx workspace context\n */\nexport async function editDependency(identifier: string, ctx: WorkspaceContext) {\n    const currentFolder = ctx.currentFolder;\n    if (!currentFolder) {\n        return;\n    }\n\n    const task = createSwiftTask(\n        [\"package\", \"edit\", identifier],\n        \"Edit Package Dependency\",\n        {\n            scope: currentFolder.workspaceFolder,\n            cwd: currentFolder.folder,\n            prefix: currentFolder.name,\n        },\n        currentFolder.toolchain\n    );\n\n    const success = await executeTaskWithUI(\n        task,\n        `edit locally ${identifier}`,\n        currentFolder,\n        true\n    );\n\n    if (success) {\n        await ctx.fireEvent(currentFolder, FolderOperation.resolvedUpdated);\n        // add folder to workspace\n        const index = vscode.workspace.workspaceFolders?.length ?? 0;\n        vscode.workspace.updateWorkspaceFolders(index, 0, {\n            uri: vscode.Uri.file(currentFolder.editedPackageFolder(identifier)),\n            name: identifier,\n        });\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\nimport { FolderOperation, WorkspaceContext } from \"../../WorkspaceContext\";\nimport { SwiftExecOperation } from \"../../tasks/TaskQueue\";\nimport { FolderContext } from \"../../FolderContext\";\n\n/**\n * Stop local editing of package dependency\n * @param identifier Identifier of dependency\n * @param ctx workspace context\n */\nexport async function uneditDependency(identifier: string, ctx: WorkspaceContext) {\n    const currentFolder = ctx.currentFolder;\n    if (!currentFolder) {\n        ctx.outputChannel.log(\"currentFolder is not set.\");\n        return false;\n    }\n    ctx.outputChannel.log(`unedit dependency ${identifier}`, currentFolder.name);\n    const status = `Reverting edited dependency ${identifier} (${currentFolder.name})`;\n    return await ctx.statusItem.showStatusWhileRunning(status, async () => {\n        return await uneditFolderDependency(currentFolder, identifier, ctx);\n    });\n}\n\nasync function uneditFolderDependency(\n    folder: FolderContext,\n    identifier: string,\n    ctx: WorkspaceContext,\n    args: string[] = []\n) {\n    try {\n        const uneditOperation = new SwiftExecOperation(\n            folder.toolchain.buildFlags.withAdditionalFlags([\n                \"package\",\n                \"unedit\",\n                ...args,\n                identifier,\n            ]),\n            folder,\n            `Finish editing ${identifier}`,\n            { showStatusItem: true, checkAlreadyRunning: false, log: \"Unedit\" },\n            () => {\n                // do nothing. Just want to run the process on the Task queue to ensure it\n                // doesn't clash with another swifr process\n            }\n        );\n        await folder.taskQueue.queueOperation(uneditOperation);\n\n        await ctx.fireEvent(folder, FolderOperation.resolvedUpdated);\n        // find workspace folder, and check folder still exists\n        const folderIndex = vscode.workspace.workspaceFolders?.findIndex(\n            item => item.name === identifier\n        );\n        if (folderIndex) {\n            try {\n                // check folder exists. if error thrown remove folder\n                await fs.stat(vscode.workspace.workspaceFolders![folderIndex].uri.fsPath);\n            } catch {\n                vscode.workspace.updateWorkspaceFolders(folderIndex, 1);\n            }\n        }\n        return true;\n    } catch (error) {\n        const execError = error as { stderr: string };\n        // if error contains \"has uncommited changes\" then ask if user wants to force the unedit\n        if (execError.stderr.match(/has uncommited changes/)) {\n            const result = await vscode.window.showWarningMessage(\n                `${identifier} has uncommitted changes. Are you sure you want to continue?`,\n                \"Yes\",\n                \"No\"\n            );\n\n            if (result === \"No\") {\n                ctx.outputChannel.log(execError.stderr, folder.name);\n                return false;\n            }\n            await uneditFolderDependency(folder, identifier, ctx, [\"--force\"]);\n        } else {\n            ctx.outputChannel.log(execError.stderr, folder.name);\n            void vscode.window.showErrorMessage(`${execError.stderr}`);\n        }\n        return false;\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { PackageNode } from \"../ui/ProjectPanelProvider\";\n\n/**\n * Open a local package in workspace\n * @param packageNode PackageNode attached to dependency tree item\n */\nexport async function openInWorkspace(packageNode: PackageNode) {\n    const index = vscode.workspace.workspaceFolders?.length ?? 0;\n    vscode.workspace.updateWorkspaceFolders(index, 0, {\n        uri: vscode.Uri.file(packageNode.path),\n        name: packageNode.name,\n    });\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { PackageNode } from \"../ui/ProjectPanelProvider\";\n\n/**\n * Opens the supplied `PackageNode` externally using the default application.\n * @param packageNode PackageNode attached to dependency tree item\n */\nexport function openInExternalEditor(packageNode: PackageNode) {\n    try {\n        const uri = vscode.Uri.parse(packageNode.location, true);\n        void vscode.env.openExternal(uri);\n    } catch {\n        // ignore error\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport {\n    DarwinCompatibleTarget,\n    SwiftToolchain,\n    getDarwinTargetTriple,\n} from \"../toolchain/toolchain\";\nimport configuration from \"../configuration\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\n\n/**\n * Switches the appropriate SDK setting to the platform selected in a QuickPick UI.\n */\nexport async function switchPlatform(ctx: WorkspaceContext) {\n    const picked = await vscode.window.showQuickPick(\n        [\n            { value: undefined, label: \"macOS\" },\n            { value: DarwinCompatibleTarget.iOS, label: \"iOS\" },\n            { value: DarwinCompatibleTarget.tvOS, label: \"tvOS\" },\n            { value: DarwinCompatibleTarget.watchOS, label: \"watchOS\" },\n            { value: DarwinCompatibleTarget.visionOS, label: \"visionOS\" },\n        ],\n        {\n            placeHolder: \"Select a new target platform\",\n        }\n    );\n    if (picked) {\n        // show a status item as getSDKForTarget can sometimes take a long while to run xcrun to find the SDK\n        const statusItemText = `Setting target platform to ${picked.label}`;\n        ctx.statusItem.start(statusItemText);\n        try {\n            if (picked.value) {\n                // verify that the SDK for the platform actually exists\n                await SwiftToolchain.getSDKForTarget(picked.value);\n            }\n            const swiftSDKTriple = picked.value ? getDarwinTargetTriple(picked.value) : \"\";\n            if (swiftSDKTriple !== \"\") {\n                // set a swiftSDK for non-macOS Darwin platforms so that SourceKit-LSP can provide syntax highlighting\n                configuration.swiftSDK = swiftSDKTriple;\n                void vscode.window.showWarningMessage(\n                    `Selecting the ${picked.label} target platform will provide code editing support, but compiling with a ${picked.label} SDK will have undefined results.`\n                );\n            } else {\n                // set swiftSDK to an empty string for macOS and other platforms\n                configuration.swiftSDK = \"\";\n            }\n        } catch {\n            void vscode.window.showErrorMessage(\n                `Unable set the Swift SDK setting to ${picked.label}, verify that the SDK exists`\n            );\n        }\n        ctx.statusItem.end(statusItemText);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\n\n/**\n * Uses the workspace's comment completion provider to insert a function comment\n * at the active line.\n * @param workspaceContext Workspace context, required to get comment completion provider\n */\nexport async function insertFunctionComment(workspaceContext: WorkspaceContext) {\n    const activeEditor = vscode.window.activeTextEditor;\n    if (!activeEditor) {\n        return;\n    }\n    const line = activeEditor.selection.active.line;\n    await workspaceContext.commentCompletionProvider.insert(activeEditor, line);\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\nimport configuration from \"../configuration\";\nimport { SwiftToolchain, SwiftProjectTemplate } from \"../toolchain/toolchain\";\nimport { showToolchainError } from \"../ui/ToolchainSelection\";\nimport { withDelayedProgress } from \"../ui/withDelayedProgress\";\nimport { execSwift } from \"../utilities/utilities\";\nimport { Version } from \"../utilities/version\";\n\n/**\n * Prompts the user to input project details and then executes `swift package init`\n * to create the project.\n */\nexport async function createNewProject(toolchain: SwiftToolchain | undefined): Promise<void> {\n    // It is possible for this command to be run without a valid toolchain because it can be\n    // run before the Swift extension is activated. Show the toolchain error notification in\n    // this case.\n    if (!toolchain) {\n        void showToolchainError();\n        return;\n    }\n\n    // The context key `swift.createNewProjectAvailable` only works if the extension has been\n    // activated. As such, we also have to allow this command to run when no workspace is\n    // active. Show an error to the user if the command is unavailable.\n    if (!toolchain.swiftVersion.isGreaterThanOrEqual(new Version(5, 8, 0))) {\n        void vscode.window.showErrorMessage(\n            \"Creating a new swift project is only available starting in swift version 5.8.0.\"\n        );\n        return;\n    }\n\n    // Prompt the user for the type of project they would like to create\n    const availableProjectTemplates = await toolchain.getProjectTemplates();\n    const selectedProjectTemplate = await vscode.window.showQuickPick<\n        vscode.QuickPickItem & { type: SwiftProjectTemplate }\n    >(\n        availableProjectTemplates.map(type => ({\n            label: type.name,\n            description: type.id,\n            detail: type.description,\n            type,\n        })),\n        {\n            placeHolder: \"Select a swift project template\",\n        }\n    );\n    if (!selectedProjectTemplate) {\n        return undefined;\n    }\n    const projectType = selectedProjectTemplate.type.id;\n\n    // Prompt the user for a location in which to create the new project\n    const selectedFolder = await vscode.window.showOpenDialog({\n        title: \"Select a folder to create a new swift project in\",\n        openLabel: \"Select folder\",\n        canSelectFiles: false,\n        canSelectFolders: true,\n        canSelectMany: false,\n    });\n    if (!selectedFolder || selectedFolder.length === 0) {\n        return undefined;\n    }\n\n    // Prompt the user for the project name\n    const existingNames = await fs.readdir(selectedFolder[0].fsPath, { encoding: \"utf-8\" });\n    let initialValue = `swift-${projectType}`;\n    for (let i = 1; ; i++) {\n        if (!existingNames.includes(initialValue)) {\n            break;\n        }\n        initialValue = `swift-${projectType}-${i}`;\n    }\n    const projectName = await vscode.window.showInputBox({\n        value: initialValue,\n        prompt: \"Enter a name for your new swift project\",\n        validateInput(value) {\n            // Swift Package Manager doesn't seem to do any validation on the name.\n            // So, we'll just check for obvious failure cases involving mkdir.\n            if (value.trim() === \"\") {\n                return \"Project name cannot be empty.\";\n            } else if (value.includes(\"/\") || value.includes(\"\\\\\")) {\n                return \"Project name cannot contain '/' or '\\\\' characters.\";\n            } else if (value === \".\" || value === \"..\") {\n                return \"Project name cannot be '.' or '..'.\";\n            }\n            // Ensure there are no name collisions\n            if (existingNames.includes(value)) {\n                return \"A file/folder with this name already exists.\";\n            }\n            return undefined;\n        },\n    });\n    if (projectName === undefined) {\n        return undefined;\n    }\n\n    // Create the folder that will store the new project\n    const projectUri = vscode.Uri.joinPath(selectedFolder[0], projectName);\n    await fs.mkdir(projectUri.fsPath);\n\n    // Use swift package manager to initialize the swift project\n    await withDelayedProgress(\n        {\n            location: vscode.ProgressLocation.Notification,\n            title: `Creating swift project ${projectName}`,\n        },\n        async () => {\n            await execSwift(\n                [\"package\", \"init\", \"--type\", projectType, \"--name\", projectName],\n                toolchain,\n                {\n                    cwd: projectUri.fsPath,\n                }\n            );\n        },\n        1000\n    );\n\n    // Prompt the user whether or not they want to open the newly created project\n    const isWorkspaceOpened = !!vscode.workspace.workspaceFolders;\n    const openAfterCreate = configuration.openAfterCreateNewProject;\n\n    let action: \"open\" | \"openNewWindow\" | \"addToWorkspace\" | undefined;\n    if (openAfterCreate === \"always\") {\n        action = \"open\";\n    } else if (openAfterCreate === \"alwaysNewWindow\") {\n        action = \"openNewWindow\";\n    } else if (openAfterCreate === \"whenNoFolderOpen\" && !isWorkspaceOpened) {\n        action = \"open\";\n    }\n\n    if (action === undefined) {\n        let message = `Would you like to open ${projectName}?`;\n        const open = \"Open\";\n        const openNewWindow = \"Open in New Window\";\n        const choices = [open, openNewWindow];\n\n        const addToWorkspace = \"Add to Workspace\";\n        if (isWorkspaceOpened) {\n            message = `Would you like to open ${projectName}, or add it to the current workspace?`;\n            choices.push(addToWorkspace);\n        }\n\n        const result = await vscode.window.showInformationMessage(\n            message,\n            { modal: true, detail: \"The default action can be configured in settings\" },\n            ...choices\n        );\n        if (result === open) {\n            action = \"open\";\n        } else if (result === openNewWindow) {\n            action = \"openNewWindow\";\n        } else if (result === addToWorkspace) {\n            action = \"addToWorkspace\";\n        }\n    }\n\n    if (action === \"open\") {\n        await vscode.commands.executeCommand(\"vscode.openFolder\", projectUri, {\n            forceReuseWindow: true,\n        });\n    } else if (action === \"openNewWindow\") {\n        await vscode.commands.executeCommand(\"vscode.openFolder\", projectUri, {\n            forceNewWindow: true,\n        });\n    } else if (action === \"addToWorkspace\") {\n        const index = vscode.workspace.workspaceFolders?.length ?? 0;\n        vscode.workspace.updateWorkspaceFolders(index, 0, { uri: projectUri });\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\nimport * as vscode from \"vscode\";\n\n/**\n * A wrapper around {@link vscode.Progress} that allows for delaying progress reporting.\n */\nclass ProgressWrapper<T> implements vscode.Progress<T> {\n    private lastProgressReport: T | undefined;\n    private progressReportEmitter: vscode.EventEmitter<T> = new vscode.EventEmitter();\n\n    report(value: T): void {\n        this.lastProgressReport = value;\n        this.progressReportEmitter.fire(value);\n    }\n\n    onDidReportProgress: vscode.Event<T> = listener => {\n        if (this.lastProgressReport !== undefined) {\n            listener(this.lastProgressReport);\n        }\n        return this.progressReportEmitter.event(listener);\n    };\n}\n\n/**\n * A wrapper around {@link vscode.window.withProgress withProgress} that will show progress\n * only after a certain timeout is reached. Useful for user-initiated background\n * tasks that are expected to complete quickly, but should be reported to the user\n * otherwise.\n * @param options A {@link vscode.ProgressOptions ProgressOptions} object to pass to {@link vscode.window.withProgress withProgress}\n * @param task A callback returning a promise. Progress state can be reported with the provided {@link vscode.Progress Progress}-object.\n * @param timeout The delay (in milliseconds) to wait before showing progress\n */\nexport async function withDelayedProgress<R>(\n    options: vscode.ProgressOptions,\n    task: (\n        progress: vscode.Progress<{ message?: string; increment?: number }>,\n        token: vscode.CancellationToken\n    ) => Promise<R>,\n    timeout: number\n): Promise<R> {\n    const cancellationTokenSource = new vscode.CancellationTokenSource();\n    const progressWrapper = new ProgressWrapper<{ message?: string; increment?: number }>();\n    const disposables: vscode.Disposable[] = [cancellationTokenSource];\n    const taskPromise = task(progressWrapper, cancellationTokenSource.token);\n    // Trigger vscode.window.withProgress() after a delay\n    const nodeTimeout = setTimeout(() => {\n        vscode.window\n            .withProgress(options, async (progress, token) => {\n                // Forward progress events\n                disposables.push(\n                    progressWrapper.onDidReportProgress(value => progress.report(value))\n                );\n                // Forward cancellation events\n                if (token.isCancellationRequested) {\n                    cancellationTokenSource.cancel();\n                }\n                token.onCancellationRequested(() => cancellationTokenSource.cancel());\n                // Progress notification will disappear once the task completes\n                await taskPromise;\n            })\n            .then(undefined, () => {\n                /* errors will be handled by the await below */\n            });\n    }, timeout);\n    // Make sure the timeout gets cancelled on completion\n    disposables.push({\n        dispose: () => clearTimeout(nodeTimeout),\n    });\n    // Wait for task completion and clean up any disposables\n    try {\n        return await taskPromise;\n    } finally {\n        for (const disposable of disposables) {\n            disposable.dispose();\n        }\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\n/**\n * Handle the user requesting to show an educational note.\n *\n * The default behaviour is to open it in a markdown preview to the side.\n */\nexport async function openEducationalNote(markdownFile: vscode.Uri | undefined): Promise<void> {\n    if (markdownFile?.fsPath.endsWith(\".md\")) {\n        await vscode.commands.executeCommand(\"markdown.showPreviewToSide\", markdownFile);\n    } else if (markdownFile !== undefined) {\n        await vscode.env.openExternal(markdownFile);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { Version } from \"../utilities/version\";\nimport { fileExists } from \"../utilities/filesystem\";\n\n/**\n * Open Package.swift for in focus project. If there is a version specific manifest that\n * matches the user's current Swift version that file is opened, otherwise opens Package.swift.\n * @param workspaceContext Workspace context, required to get current project\n */\nexport async function openPackage(swiftVersion: Version, currentFolder: vscode.Uri) {\n    const packagePath = await packageSwiftFile(currentFolder, swiftVersion);\n    if (packagePath) {\n        await vscode.window.showTextDocument(packagePath);\n    }\n}\n\nasync function packageSwiftFile(\n    currentFolder: vscode.Uri,\n    version: Version\n): Promise<vscode.Uri | null> {\n    // Follow the logic outlined in the SPM documentation on version specific manifest selection\n    // https://github.com/swiftlang/swift-package-manager/blob/main/Documentation/Usage.md#version-specific-manifest-selection\n    const files = [\n        `Package@swift-${version.major}.${version.minor}.${version.patch}.swift`,\n        `Package@swift-${version.major}.${version.minor}.swift`,\n        `Package@swift-${version.major}.swift`,\n        \"Package.swift\",\n    ].map(file => vscode.Uri.joinPath(currentFolder, file));\n\n    for (const file of files) {\n        if (await fileExists(file.fsPath)) {\n            return file;\n        }\n    }\n    return null;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"../../FolderContext\";\nimport { createSwiftTask, SwiftTaskProvider } from \"../../tasks/SwiftTaskProvider\";\nimport { WorkspaceContext } from \"../../WorkspaceContext\";\nimport { executeTaskWithUI, updateAfterError } from \"../utilities\";\n\n/**\n * Executes a {@link vscode.Task task} to resolve this package's dependencies.\n */\nexport async function resolveDependencies(ctx: WorkspaceContext) {\n    const current = ctx.currentFolder;\n    if (!current) {\n        return false;\n    }\n    return await resolveFolderDependencies(current);\n}\n\n/**\n * Run `swift package resolve` inside a folder\n * @param folderContext folder to run resolve for\n */\nexport async function resolveFolderDependencies(\n    folderContext: FolderContext,\n    checkAlreadyRunning?: boolean\n) {\n    const task = createSwiftTask(\n        [\"package\", \"resolve\"],\n        SwiftTaskProvider.resolvePackageName,\n        {\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            prefix: folderContext.name,\n            presentationOptions: { reveal: vscode.TaskRevealKind.Silent },\n        },\n        folderContext.toolchain\n    );\n\n    const success = await executeTaskWithUI(\n        task,\n        \"Resolving Dependencies\",\n        folderContext,\n        false,\n        checkAlreadyRunning\n    );\n    updateAfterError(success, folderContext);\n    return success;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"../FolderContext\";\nimport { createSwiftTask, SwiftTaskProvider } from \"../tasks/SwiftTaskProvider\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { executeTaskWithUI } from \"./utilities\";\n\n/**\n * Executes a {@link vscode.Task task} to reset the complete cache/build directory.\n */\nexport async function resetPackage(ctx: WorkspaceContext) {\n    const current = ctx.currentFolder;\n    if (!current) {\n        return;\n    }\n    return await folderResetPackage(current);\n}\n\n/**\n * Run `swift package reset` inside a folder\n * @param folderContext folder to run update inside\n */\nexport async function folderResetPackage(folderContext: FolderContext) {\n    const task = createSwiftTask(\n        folderContext.toolchain.buildFlags.withAdditionalFlags([\"package\", \"reset\"]),\n        \"Reset Package Dependencies\",\n        {\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            prefix: folderContext.name,\n            presentationOptions: { reveal: vscode.TaskRevealKind.Silent },\n            group: vscode.TaskGroup.Clean,\n        },\n        folderContext.toolchain\n    );\n\n    return await executeTaskWithUI(task, \"Reset Package\", folderContext).then(\n        async success => {\n            if (!success) {\n                return false;\n            }\n            const resolveTask = createSwiftTask(\n                [\"package\", \"resolve\"],\n                SwiftTaskProvider.resolvePackageName,\n                {\n                    cwd: folderContext.folder,\n                    scope: folderContext.workspaceFolder,\n                    prefix: folderContext.name,\n                    presentationOptions: { reveal: vscode.TaskRevealKind.Silent },\n                },\n                folderContext.toolchain\n            );\n\n            const result = await executeTaskWithUI(\n                resolveTask,\n                \"Resolving Dependencies\",\n                folderContext\n            );\n            return result;\n        },\n        reason => {\n            return reason;\n        }\n    );\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { FolderContext } from \"../../FolderContext\";\nimport { WorkspaceContext } from \"../../WorkspaceContext\";\nimport { createSwiftTask, SwiftTaskProvider } from \"../../tasks/SwiftTaskProvider\";\nimport { executeTaskWithUI, updateAfterError } from \"./../utilities\";\n\n/**\n * Executes a {@link vscode.Task task} to update this package's dependencies.\n */\nexport async function updateDependencies(ctx: WorkspaceContext) {\n    const current = ctx.currentFolder;\n    if (!current) {\n        ctx.outputChannel.log(\"currentFolder is not set.\");\n        return false;\n    }\n    return await updateFolderDependencies(current);\n}\n\n/**\n * Run `swift package update` inside a folder\n * @param folderContext folder to run update inside\n */\nexport async function updateFolderDependencies(folderContext: FolderContext) {\n    const task = createSwiftTask(\n        [\"package\", \"update\"],\n        SwiftTaskProvider.updatePackageName,\n        {\n            cwd: folderContext.folder,\n            scope: folderContext.workspaceFolder,\n            prefix: folderContext.name,\n            presentationOptions: { reveal: vscode.TaskRevealKind.Silent },\n        },\n        folderContext.toolchain\n    );\n\n    const result = await executeTaskWithUI(task, \"Updating Dependencies\", folderContext);\n    updateAfterError(result, folderContext);\n    return result;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\nexport async function runPluginTask() {\n    await vscode.commands.executeCommand(\"workbench.action.tasks.runTask\", {\n        type: \"swift-plugin\",\n    });\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { TestKind } from \"../TestExplorer/TestKind\";\nimport { TestRunner, TestRunnerTestRunState, TestRunState } from \"../TestExplorer/TestRunner\";\nimport { FolderContext } from \"../FolderContext\";\n\n/**\n * Runs the supplied TestItem a number of times. The user is prompted with a dialog\n * to pick how many times they want the test to run.\n * @param ctx The workspace context, used to get the Test Explorer\n * @param test The test to run multiple times\n * @param untilFailure If `true` stop running the test if it fails\n */\nexport async function runTestMultipleTimes(\n    currentFolder: FolderContext,\n    test: vscode.TestItem,\n    untilFailure: boolean,\n    count: number | undefined = undefined,\n    testRunner?: () => Promise<TestRunState>\n) {\n    let numExecutions = count;\n    if (numExecutions === undefined) {\n        const str = await vscode.window.showInputBox({\n            prompt: \"Label: \",\n            placeHolder: `${untilFailure ? \"Maximum \" : \"\"}# of times to run`,\n            validateInput: value =>\n                /^[1-9]\\d*$/.test(value) ? undefined : \"Enter an integer value\",\n        });\n        if (!str) {\n            return;\n        }\n        numExecutions = parseInt(str);\n    }\n\n    if (!currentFolder.testExplorer) {\n        return;\n    }\n    const token = new vscode.CancellationTokenSource();\n    const testExplorer = currentFolder.testExplorer;\n    const runner = new TestRunner(\n        TestKind.standard,\n        new vscode.TestRunRequest([test]),\n        currentFolder,\n        testExplorer.controller,\n        token.token\n    );\n\n    testExplorer.onDidCreateTestRunEmitter.fire(runner.testRun);\n\n    const testRunState = new TestRunnerTestRunState(runner.testRun);\n\n    await vscode.commands.executeCommand(\"workbench.panel.testResults.view.focus\");\n\n    const runStates: TestRunState[] = [];\n    for (let i = 0; i < numExecutions; i++) {\n        runner.setIteration(i);\n        runner.testRun.appendOutput(`\\x1b[36mBeginning Test Iteration #${i + 1}\\x1b[0m\\n`);\n\n        const runState = await (testRunner !== undefined\n            ? testRunner()\n            : runner.runSession(testRunState));\n\n        runStates.push(runState);\n\n        if (\n            runner.testRun.isCancellationRequested ||\n            (untilFailure && (runState.failed.length > 0 || runState.errored.length > 0))\n        ) {\n            break;\n        }\n    }\n    await runner.testRun.end();\n\n    return runStates;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\n\nconst extension = \"swift\";\nconst defaultFileName = `Untitled.${extension}`;\n\nexport async function newSwiftFile(\n    uri?: vscode.Uri,\n    isDirectory: (uri: vscode.Uri) => Promise<boolean> = async uri => {\n        return (await vscode.workspace.fs.stat(uri)).type === vscode.FileType.Directory;\n    }\n) {\n    if (uri) {\n        // Attempt to create the file at the given directory.\n        const dir = (await isDirectory(uri)) ? uri.fsPath : path.dirname(uri.fsPath);\n        const defaultName = vscode.Uri.file(path.join(dir, defaultFileName));\n        const targetUri = await vscode.window.showSaveDialog({\n            defaultUri: defaultName,\n            title: \"Enter a file path to be created\",\n        });\n\n        if (!targetUri) {\n            return;\n        }\n\n        try {\n            await fs.writeFile(targetUri.fsPath, \"\", \"utf-8\");\n            const document = await vscode.workspace.openTextDocument(targetUri);\n            await vscode.languages.setTextDocumentLanguage(document, \"swift\");\n            await vscode.window.showTextDocument(document);\n        } catch (err) {\n            void vscode.window.showErrorMessage(`Failed to create ${targetUri.fsPath}`);\n        }\n    } else {\n        // If no path is supplied then open an untitled editor w/ Swift language type\n        const document = await vscode.workspace.openTextDocument({\n            language: \"swift\",\n        });\n        await vscode.window.showTextDocument(document);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { TestKind } from \"../TestExplorer/TestKind\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { flattenTestItemCollection } from \"../TestExplorer/TestUtils\";\n\nexport async function runAllTests(ctx: WorkspaceContext, testKind: TestKind, target?: string) {\n    const testExplorer = ctx.currentFolder?.testExplorer;\n    if (testExplorer === undefined) {\n        return;\n    }\n\n    const profile = testExplorer.testRunProfiles.find(profile => profile.label === testKind);\n    if (profile === undefined) {\n        return;\n    }\n\n    let tests = flattenTestItemCollection(testExplorer.controller.items);\n\n    // If a target is specified, filter the tests to only run those that match the target.\n    if (target) {\n        const targetRegex = new RegExp(`^${target}(\\\\.|$)`);\n        tests = tests.filter(test => targetRegex.test(test.id));\n    }\n    const tokenSource = new vscode.CancellationTokenSource();\n    await profile.runHandler(\n        new vscode.TestRunRequest(tests, undefined, profile),\n        tokenSource.token\n    );\n\n    await vscode.commands.executeCommand(\"testing.showMostRecentOutput\");\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport contextKeys from \"../../contextKeys\";\nimport { FolderOperation, WorkspaceContext } from \"../../WorkspaceContext\";\n\nexport function updateDependenciesViewList(ctx: WorkspaceContext, flatList: boolean) {\n    if (ctx.currentFolder) {\n        contextKeys.flatDependenciesList = flatList;\n        void ctx.fireEvent(ctx.currentFolder, FolderOperation.packageViewUpdated);\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { TaskOperation } from \"../tasks/TaskQueue\";\n\nexport const runTask = async (ctx: WorkspaceContext, name: string) => {\n    if (!ctx.currentFolder) {\n        return;\n    }\n\n    const tasks = await vscode.tasks.fetchTasks();\n    let task = tasks.find(task => task.name === name);\n    if (!task) {\n        const pluginTaskProvider = ctx.pluginProvider;\n        const pluginTasks = await pluginTaskProvider.provideTasks(\n            new vscode.CancellationTokenSource().token\n        );\n        task = pluginTasks.find(task => task.name === name);\n    }\n\n    if (!task) {\n        void vscode.window.showErrorMessage(`Task \"${name}\" not found`);\n        return;\n    }\n\n    return ctx.currentFolder.taskQueue\n        .queueOperation(new TaskOperation(task))\n        .then(result => result === 0);\n};\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport { createProcessList } from \"../process-list\";\n\ninterface ProcessQuickPick extends vscode.QuickPickItem {\n    processId?: number;\n}\n\n/**\n * Prompts the user to select a running process.\n *\n * The return value must be a string so that it is compatible with VS Code's\n * string substitution infrastructure. The value will eventually be converted\n * to a number by the debug configuration provider.\n *\n * @param configuration The related debug configuration, if any\n * @returns The pid of the process as a string or undefined if cancelled.\n */\nexport async function pickProcess(\n    configuration?: vscode.DebugConfiguration\n): Promise<string | undefined> {\n    const processList = createProcessList();\n    const selectedProcess = await vscode.window.showQuickPick<ProcessQuickPick>(\n        processList.listAllProcesses().then((processes): ProcessQuickPick[] => {\n            // Sort by start date in descending order\n            processes.sort((a, b) => b.start - a.start);\n            // Filter by program if requested\n            if (typeof configuration?.program === \"string\") {\n                const program = configuration.program;\n                const programBaseName = path.basename(program);\n                processes = processes\n                    .filter(proc => path.basename(proc.command) === programBaseName)\n                    .sort((a, b) => {\n                        // Bring exact command matches to the top\n                        const aIsExactMatch = a.command === program ? 1 : 0;\n                        const bIsExactMatch = b.command === program ? 1 : 0;\n                        return bIsExactMatch - aIsExactMatch;\n                    });\n                // Show a better message if all processes were filtered out\n                if (processes.length === 0) {\n                    return [\n                        {\n                            label: \"No processes matched the debug configuration's program\",\n                        },\n                    ];\n                }\n            }\n            // Convert to a QuickPickItem\n            return processes.map(proc => {\n                return {\n                    processId: proc.id,\n                    label: path.basename(proc.command),\n                    description: proc.id.toString(),\n                    detail: proc.arguments,\n                } satisfies ProcessQuickPick;\n            });\n        }),\n        {\n            placeHolder: \"Select a process to attach the debugger to\",\n            matchOnDetail: true,\n            matchOnDescription: true,\n        }\n    );\n    return selectedProcess?.processId?.toString();\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as util from \"util\";\nimport * as child_process from \"child_process\";\nimport { Process, ProcessList } from \".\";\nimport { lineBreakRegex } from \"../utilities/tasks\";\n\nconst exec = util.promisify(child_process.execFile);\n\n/** Parses process information from a given line of process output. */\nexport type ProcessListParser = (line: string) => Process | undefined;\n\n/**\n * Implements common behavior between the different {@link ProcessList} implementations.\n */\nexport abstract class BaseProcessList implements ProcessList {\n    /**\n     * Get the command responsible for collecting all processes on the system.\n     */\n    protected abstract getCommand(): string;\n\n    /**\n     * Get the list of arguments used to launch the command.\n     */\n    protected abstract getCommandArguments(): string[];\n\n    /**\n     * Create a new parser that can read the process information from stdout of the process\n     * spawned by {@link spawnProcess spawnProcess()}.\n     */\n    protected abstract createParser(): ProcessListParser;\n\n    async listAllProcesses(): Promise<Process[]> {\n        const execCommand = exec(this.getCommand(), this.getCommandArguments(), {\n            maxBuffer: 10 * 1024 * 1024, // Increase the max buffer size to 10Mb\n        });\n        const parser = this.createParser();\n        return (await execCommand).stdout.split(lineBreakRegex).flatMap(line => {\n            const process = parser(line.toString());\n            if (!process || process.id === execCommand.child.pid) {\n                return [];\n            }\n            return [process];\n        });\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { BaseProcessList, ProcessListParser } from \"../BaseProcessList\";\n\nexport class LinuxProcessList extends BaseProcessList {\n    protected override getCommand(): string {\n        return \"ps\";\n    }\n\n    protected override getCommandArguments(): string[] {\n        return [\n            \"-axo\",\n            // The length of exe must be large enough or data will be truncated.\n            `pid=PID,state=STATE,lstart=START,exe:128=COMMAND,args=ARGUMENTS`,\n        ];\n    }\n\n    protected override createParser(): ProcessListParser {\n        let commandOffset: number | undefined;\n        let argumentsOffset: number | undefined;\n        return line => {\n            if (!commandOffset || !argumentsOffset) {\n                commandOffset = line.indexOf(\"COMMAND\");\n                argumentsOffset = line.indexOf(\"ARGUMENTS\");\n                return;\n            }\n\n            const pidAndState = /^\\s*([0-9]+)\\s+([a-zA-Z<>+]+)\\s+/.exec(line);\n            if (!pidAndState) {\n                return;\n            }\n\n            // Make sure the process isn't in a trace/debug or zombie state as we cannot attach to them\n            const state = pidAndState[2];\n            if (state.includes(\"X\") || state.includes(\"Z\")) {\n                return;\n            }\n\n            // ps will list \"-\" as the command if it does not know where the executable is located\n            const command = line.slice(commandOffset, argumentsOffset).trim();\n            if (command === \"-\") {\n                return;\n            }\n\n            return {\n                id: Number(pidAndState[1]),\n                command,\n                arguments: line.slice(argumentsOffset).trim(),\n                start: Date.parse(line.slice(pidAndState[0].length, commandOffset).trim()),\n            };\n        };\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { LinuxProcessList } from \"./LinuxProcessList\";\n\nexport class DarwinProcessList extends LinuxProcessList {\n    protected override getCommandArguments(): string[] {\n        return [\n            \"-axo\",\n            // The length of comm must be large enough or data will be truncated.\n            `pid=PID,state=STATE,lstart=START,comm=${\"COMMAND\".padEnd(256, \"-\")},args=ARGUMENTS`,\n        ];\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { BaseProcessList, ProcessListParser } from \"../BaseProcessList\";\n\nexport class WindowsProcessList extends BaseProcessList {\n    protected override getCommand(): string {\n        return \"PowerShell\";\n    }\n\n    protected override getCommandArguments(): string[] {\n        return [\n            \"-Command\",\n            'Get-CimInstance -ClassName Win32_Process | Format-Table ProcessId, @{Label=\"CreationDate\";Expression={\"{0:yyyyMddHHmmss}\" -f $_.CreationDate}}, CommandLine | Out-String -width 9999',\n        ];\n    }\n\n    protected override createParser(): ProcessListParser {\n        const lineRegex = /^([0-9]+)\\s+([0-9]+)\\s+(.*)$/;\n\n        return line => {\n            const matches = lineRegex.exec(line.trim());\n            if (!matches || matches.length !== 4) {\n                return;\n            }\n\n            const id = Number(matches[1]);\n            const start = Number(matches[2]);\n            const fullCommandLine = matches[3].trim();\n            if (isNaN(id) || !fullCommandLine) {\n                return;\n            }\n            // Extract the command from the full command line\n            let command = fullCommandLine;\n            if (fullCommandLine[0] === '\"') {\n                const end = fullCommandLine.indexOf('\"', 1);\n                if (end > 0) {\n                    command = fullCommandLine.slice(1, end);\n                }\n            } else {\n                const end = fullCommandLine.indexOf(\" \");\n                if (end > 0) {\n                    command = fullCommandLine.slice(0, end);\n                }\n            }\n\n            return { id, command, arguments: fullCommandLine, start };\n        };\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { DarwinProcessList } from \"./platforms/DarwinProcessList\";\nimport { LinuxProcessList } from \"./platforms/LinuxProcessList\";\nimport { WindowsProcessList } from \"./platforms/WindowsProcessList\";\n\n/**\n * Represents a single process running on the system.\n */\nexport interface Process {\n    /** Process ID */\n    id: number;\n\n    /** Command that was used to start the process */\n    command: string;\n\n    /** The full command including arguments that was used to start the process */\n    arguments: string;\n\n    /** The date when the process was started */\n    start: number;\n}\n\nexport interface ProcessList {\n    listAllProcesses(): Promise<Process[]>;\n}\n\n/** Returns a {@link ProcessList} based on the current platform. */\nexport function createProcessList(): ProcessList {\n    switch (process.platform) {\n        case \"darwin\":\n            return new DarwinProcessList();\n        case \"win32\":\n            return new WindowsProcessList();\n        default:\n            return new LinuxProcessList();\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\n\n/**\n * Handle the user requesting to show the vscode-swift documentation.\n */\nexport async function openDocumentation(): Promise<boolean> {\n    return await vscode.env.openExternal(\n        vscode.Uri.parse(\"https://docs.swift.org/vscode/documentation/userdocs\")\n    );\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport { FolderContext } from \"../FolderContext\";\n\n/**\n * Restart the sourcekit-lsp server. If multiple sourcekit-lsp instances\n * are running, the user will be prompted to select which one to restart.\n * If only one instance is running, it will be restarted automatically.\n * If no instances are running, this command will do nothing.\n * @param ctx The workspace context\n */\nexport default async function restartLSPServer(ctx: WorkspaceContext) {\n    let toolchains = toolchainQuickPickItems(ctx);\n    if (toolchains.length === 0) {\n        return undefined;\n    } else if (toolchains.length === 1) {\n        // Skip picking a toolchain if there is only one option to pick\n        return restartLSP(ctx, toolchains[0].label);\n    } else {\n        toolchains = [\n            ...toolchains,\n            {\n                label: \"All\",\n                description: \"Restart all sourcekit-lsp instances\",\n                detail: toolchains.map(tc => tc.detail).join(\", \"),\n            },\n        ];\n    }\n\n    const selected = await vscode.window.showQuickPick(toolchains, {\n        title: \"Restart LSP server\",\n        placeHolder: \"Select a sourcekit-lsp instance to restart\",\n        canPickMany: false,\n    });\n\n    if (!selected) {\n        return undefined;\n    }\n\n    if (selected.label === \"All\") {\n        const originalToolchains = toolchains.slice(0, -1);\n        for (const toolchain of originalToolchains) {\n            return restartLSP(ctx, toolchain.label);\n        }\n    } else {\n        return restartLSP(ctx, selected.label);\n    }\n}\n\n/**\n * Create a list of toolchain quick pick items from the workspace context\n * @param ctx The workspace context\n * @returns An array of quick pick items for each toolchain\n */\nfunction toolchainQuickPickItems(ctx: WorkspaceContext): vscode.QuickPickItem[] {\n    const toolchainLookup = ctx.folders.reduce(\n        (acc, folder) => {\n            acc[folder.swiftVersion.toString()] = acc[folder.swiftVersion.toString()] ?? [];\n            acc[folder.swiftVersion.toString()].push({\n                folder,\n                fullToolchainName: folder.toolchain.swiftVersionString,\n            });\n            return acc;\n        },\n        {} as Record<string, { folder: FolderContext; fullToolchainName: string }[]>\n    );\n\n    return Object.keys(toolchainLookup).map(key => ({\n        label: key,\n        description: toolchainLookup[key][0].fullToolchainName,\n        detail: toolchainLookup[key].map(({ folder }) => folder.name).join(\", \"),\n    }));\n}\n\n/**\n * Restart the LSP server for a specific toolchain version\n * @param ctx The workspace context\n * @param version The toolchain version to restart\n */\nasync function restartLSP(ctx: WorkspaceContext, version: string) {\n    const languageClientManager = ctx.languageClientManager.getByVersion(version);\n    await languageClientManager.restart();\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2025 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport { makeDebugConfigurations } from \"../debugger/launch\";\nimport { FolderContext } from \"../FolderContext\";\nimport { WorkspaceContext } from \"../WorkspaceContext\";\nimport * as vscode from \"vscode\";\n\nexport async function generateLaunchConfigurations(ctx: WorkspaceContext): Promise<boolean> {\n    if (ctx.folders.length === 0) {\n        return false;\n    }\n\n    if (ctx.folders.length === 1) {\n        return await makeDebugConfigurations(ctx.folders[0], { force: true, yes: true });\n    }\n\n    const quickPickItems: SelectFolderQuickPick[] = ctx.folders.map(folder => ({\n        type: \"folder\",\n        folder,\n        label: folder.name,\n        detail: folder.workspaceFolder.uri.fsPath,\n    }));\n    quickPickItems.push({ type: \"all\", label: \"Generate For All Folders\" });\n    const selection = await vscode.window.showQuickPick(quickPickItems, {\n        matchOnDetail: true,\n        placeHolder: \"Select a folder to generate launch configurations for\",\n    });\n\n    if (!selection) {\n        return false;\n    }\n\n    const foldersToUpdate: FolderContext[] = [];\n    if (selection.type === \"all\") {\n        foldersToUpdate.push(...ctx.folders);\n    } else {\n        foldersToUpdate.push(selection.folder);\n    }\n\n    return (\n        await Promise.all(\n            foldersToUpdate.map(folder =>\n                makeDebugConfigurations(folder, { force: true, yes: true })\n            )\n        )\n    ).reduceRight((prev, curr) => prev || curr);\n}\n\ntype SelectFolderQuickPick = AllQuickPickItem | FolderQuickPickItem;\n\ninterface AllQuickPickItem extends vscode.QuickPickItem {\n    type: \"all\";\n}\n\ninterface FolderQuickPickItem extends vscode.QuickPickItem {\n    type: \"folder\";\n    folder: FolderContext;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2022 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport { Command } from \"vscode-languageclient\";\nimport { WorkspaceContext, FolderOperation } from \"../WorkspaceContext\";\nimport { LanguagerClientDocumentSelectors } from \"../sourcekit-lsp/LanguageClientConfiguration\";\n\nexport class LanguageStatusItems implements vscode.Disposable {\n    constructor(workspaceContext: WorkspaceContext) {\n        // Swift language version item\n        const swiftVersionItem = vscode.languages.createLanguageStatusItem(\n            \"swiftlang-version\",\n            LanguagerClientDocumentSelectors.allHandledDocumentTypes()\n        );\n        const toolchain =\n            workspaceContext.currentFolder?.toolchain ?? workspaceContext.globalToolchain;\n        swiftVersionItem.text = toolchain.swiftVersionString;\n        swiftVersionItem.accessibilityInformation = {\n            label: `Swift Version ${toolchain.swiftVersion.toString()}`,\n        };\n\n        // Package.swift item\n        const packageSwiftItem = vscode.languages.createLanguageStatusItem(\"swiftlang-package\", [\n            ...LanguagerClientDocumentSelectors.appleLangDocumentSelector,\n            ...LanguagerClientDocumentSelectors.cFamilyDocumentSelector,\n        ]);\n        packageSwiftItem.text = \"No Package.swift\";\n        packageSwiftItem.accessibilityInformation = { label: \"There is no Package.swift\" };\n\n        // Update Package.swift item based on current focus\n        const onFocus = workspaceContext.onDidChangeFolders(async ({ folder, operation }) => {\n            switch (operation) {\n                case FolderOperation.focus:\n                    if (folder && (await folder.swiftPackage.foundPackage)) {\n                        packageSwiftItem.text = \"Package.swift\";\n                        packageSwiftItem.command = Command.create(\n                            \"Open Package\",\n                            \"swift.openPackage\"\n                        );\n                        packageSwiftItem.accessibilityInformation = {\n                            label: \"Open Package.swift\",\n                        };\n\n                        swiftVersionItem.text = folder.toolchain.swiftVersionString;\n                        swiftVersionItem.accessibilityInformation = {\n                            label: `Swift Version ${folder.toolchain.swiftVersion.toString()}`,\n                        };\n                    } else {\n                        packageSwiftItem.text = \"No Package.swift\";\n                        packageSwiftItem.accessibilityInformation = {\n                            label: \"There is no Package.swift\",\n                        };\n                        packageSwiftItem.command = undefined;\n\n                        swiftVersionItem.text = workspaceContext.globalToolchain.swiftVersionString;\n                        swiftVersionItem.accessibilityInformation = {\n                            label: `Swift Version ${workspaceContext.globalToolchain.swiftVersion.toString()}`,\n                        };\n                    }\n            }\n        });\n        this.subscriptions = [onFocus, swiftVersionItem, packageSwiftItem];\n    }\n\n    dispose() {\n        this.subscriptions.forEach(element => element.dispose());\n    }\n\n    private subscriptions: { dispose(): unknown }[];\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2023 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport * as fs from \"fs/promises\";\n\n/**\n * Registers a {@link vscode.TextDocumentContentProvider TextDocumentContentProvider} that will display\n * a readonly version of a file\n */\nexport function getReadOnlyDocumentProvider(): vscode.Disposable {\n    const provider = vscode.workspace.registerTextDocumentContentProvider(\"readonly\", {\n        provideTextDocumentContent: async uri => {\n            try {\n                const contents = await fs.readFile(uri.fsPath, \"utf8\");\n                return contents;\n            } catch (error) {\n                return `Failed to load swiftinterface ${uri.path}`;\n            }\n        },\n    });\n    return provider;\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs/promises\";\nimport { SwiftOutputChannel } from \"./SwiftOutputChannel\";\nimport { TemporaryFolder } from \"../utilities/tempFolder\";\nimport configuration from \"../configuration\";\nimport * as vscode from \"vscode\";\n\n/**\n * Warns the user about lack of symbolic link support on Windows. Performs the\n * check in the background to avoid extending extension startup times.\n *\n * @param outputChannel The Swift output channel to log any errors to\n */\nexport function checkAndWarnAboutWindowsSymlinks(outputChannel: SwiftOutputChannel) {\n    if (process.platform === \"win32\" && configuration.warnAboutSymlinkCreation) {\n        void isSymlinkAllowed(outputChannel).then(async canCreateSymlink => {\n            if (canCreateSymlink) {\n                return;\n            }\n            const selected = await vscode.window.showWarningMessage(\n                \"The Swift extension is unable to create symbolic links on your system and some features may not work correctly. Please either enable Developer Mode or allow symlink creation via Windows privileges.\",\n                \"Learn More\",\n                \"Don't Show Again\"\n            );\n            if (selected === \"Learn More\") {\n                return vscode.env.openExternal(\n                    vscode.Uri.parse(\n                        \"https://learn.microsoft.com/en-us/windows/apps/get-started/enable-your-device-for-development\"\n                    )\n                );\n            } else if (selected === \"Don't Show Again\") {\n                configuration.warnAboutSymlinkCreation = false;\n            }\n        });\n    }\n}\n\n/**\n * Checks to see if the platform allows creating symlinks.\n *\n * @returns whether or not a symlink can be created\n */\nexport async function isSymlinkAllowed(outputChannel?: SwiftOutputChannel): Promise<boolean> {\n    const temporaryFolder = await TemporaryFolder.create();\n    return await temporaryFolder.withTemporaryFile(\"\", async testFilePath => {\n        const testSymlinkPath = temporaryFolder.filename(\"symlink-\");\n        try {\n            await fs.symlink(testFilePath, testSymlinkPath, \"file\");\n            await fs.unlink(testSymlinkPath);\n            return true;\n        } catch (error) {\n            outputChannel?.log(`${error}`);\n            return false;\n        }\n    });\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as vscode from \"vscode\";\nimport configuration from \"./configuration\";\n\n/** The separator to use between paths in the PATH environment variable */\nconst pathSeparator: string = process.platform === \"win32\" ? \";\" : \":\";\n\n/**\n * Configures Swift environment variables for VS Code. Will automatically update\n * whenever the configuration changes.\n */\nexport class SwiftEnvironmentVariablesManager implements vscode.Disposable {\n    private subscriptions: vscode.Disposable[] = [];\n\n    constructor(private context: vscode.ExtensionContext) {\n        this.update();\n        this.subscriptions.push(\n            vscode.workspace.onDidChangeConfiguration(event => {\n                if (\n                    event.affectsConfiguration(\"swift.enableTerminalEnvironment\") ||\n                    event.affectsConfiguration(\"swift.path\") ||\n                    event.affectsConfiguration(\"swift.swiftEnvironmentVariables\")\n                ) {\n                    this.update();\n                }\n            })\n        );\n    }\n\n    dispose() {\n        this.context.environmentVariableCollection.clear();\n        for (const disposable of this.subscriptions) {\n            disposable.dispose();\n        }\n    }\n\n    private update() {\n        const environment = this.context.environmentVariableCollection;\n        environment.clear();\n\n        if (!configuration.enableTerminalEnvironment) {\n            return;\n        }\n\n        if (configuration.path) {\n            environment.prepend(\"PATH\", configuration.path + pathSeparator, {\n                applyAtShellIntegration: true,\n            });\n        }\n        for (const variable in configuration.swiftEnvironmentVariables) {\n            environment.replace(variable, configuration.swiftEnvironmentVariables[variable], {\n                applyAtShellIntegration: true,\n            });\n        }\n    }\n}\n\n/**\n * A {@link vscode.TerminalProfileProvider} used to create a terminal with the appropriate Swift\n * environment variables applied.\n */\nexport class SwiftTerminalProfileProvider implements vscode.TerminalProfileProvider {\n    provideTerminalProfile(): vscode.ProviderResult<vscode.TerminalProfile> {\n        const env: vscode.TerminalOptions[\"env\"] = {\n            ...configuration.swiftEnvironmentVariables,\n        };\n        if (!configuration.enableTerminalEnvironment) {\n            const disposable = vscode.window.onDidOpenTerminal(terminal => {\n                if (configuration.path) {\n                    terminal.sendText(`export PATH=${configuration.path + pathSeparator}$PATH`);\n                }\n                disposable.dispose();\n            });\n        }\n        return new vscode.TerminalProfile({\n            name: \"Swift Terminal\",\n            iconPath: new vscode.ThemeIcon(\"swift-icon\"),\n            shellArgs: [],\n            env,\n        });\n    }\n\n    /**\n     * Registers the Swift terminal profile provider with VS Code.\n     * @returns A disposable that unregisters the provider when disposed.\n     */\n    public static register(): vscode.Disposable {\n        return vscode.window.registerTerminalProfileProvider(\n            \"swift.terminalProfile\",\n            new SwiftTerminalProfileProvider()\n        );\n    }\n}\n", "//===----------------------------------------------------------------------===//\n//\n// This source file is part of the VS Code Swift open source project\n//\n// Copyright (c) 2021-2024 the VS Code Swift project authors\n// Licensed under Apache License v2.0\n//\n// See LICENSE.txt for license information\n// See CONTRIBUTORS.txt for the list of VS Code Swift project authors\n//\n// SPDX-License-Identifier: Apache-2.0\n//\n//===----------------------------------------------------------------------===//\n\nimport * as fs from \"fs/promises\";\nimport * as vscode from \"vscode\";\nimport { SwiftOutputChannel } from \"../ui/SwiftOutputChannel\";\nimport { showReloadExtensionNotification } from \"../ui/ReloadExtension\";\nimport configuration from \"../configuration\";\n\nexport class SelectedXcodeWatcher implements vscode.Disposable {\n    private xcodePath: string | undefined;\n    private disposed: boolean = false;\n    private interval: NodeJS.Timeout | undefined;\n    private checkIntervalMs: number;\n    private xcodeSymlink: () => Promise<string | undefined>;\n\n    private static DEFAULT_CHECK_INTERVAL_MS = 2000;\n    private static XCODE_SYMLINK_LOCATION = \"/var/select/developer_dir\";\n\n    constructor(\n        private outputChannel: SwiftOutputChannel,\n        testDependencies?: {\n            checkIntervalMs?: number;\n            xcodeSymlink?: () => Promise<string | undefined>;\n        }\n    ) {\n        this.checkIntervalMs =\n            testDependencies?.checkIntervalMs || SelectedXcodeWatcher.DEFAULT_CHECK_INTERVAL_MS;\n        this.xcodeSymlink =\n            testDependencies?.xcodeSymlink ||\n            (async () => {\n                try {\n                    return await fs.readlink(SelectedXcodeWatcher.XCODE_SYMLINK_LOCATION);\n                } catch (e) {\n                    return undefined;\n                }\n            });\n\n        if (!this.isValidXcodePlatform()) {\n            return;\n        }\n\n        // Deliberately not awaiting this, as we don't want to block the extension activation.\n        void this.setup();\n    }\n\n    dispose() {\n        this.disposed = true;\n        clearInterval(this.interval);\n    }\n\n    /**\n     * Polls the Xcode symlink location checking if it has changed.\n     * If the user has `swift.path` set in their settings this check is skipped.\n     */\n    private async setup() {\n        this.xcodePath = await this.xcodeSymlink();\n        this.interval = setInterval(async () => {\n            if (this.disposed) {\n                return clearInterval(this.interval);\n            }\n\n            const newXcodePath = await this.xcodeSymlink();\n            if (!configuration.path && newXcodePath && this.xcodePath !== newXcodePath) {\n                this.outputChannel.appendLine(\n                    `Selected Xcode changed from ${this.xcodePath} to ${newXcodePath}`\n                );\n                this.xcodePath = newXcodePath;\n                await showReloadExtensionNotification(\n                    \"The Swift Extension has detected a change in the selected Xcode. Please reload the extension to apply the changes.\"\n                );\n            }\n        }, this.checkIntervalMs);\n    }\n\n    /**\n     * Xcode selection is a macOS only concept.\n     */\n    private isValidXcodePlatform() {\n        return process.platform === \"darwin\";\n    }\n}\n"],
  "mappings": "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",
  "names": ["require_base64", "__commonJSMin", "exports", "intToCharMap", "number", "charCode", "bigA", "bigZ", "littleA", "littleZ", "zero", "nine", "plus", "slash", "littleOffset", "numberOffset", "require_base64_vlq", "__commonJSMin", "exports", "base64", "VLQ_BASE_SHIFT", "VLQ_BASE", "VLQ_BASE_MASK", "VLQ_CONTINUATION_BIT", "toVLQSigned", "aValue", "fromVLQSigned", "isNegative", "shifted", "encoded", "digit", "vlq", "aStr", "aIndex", "aOutParam", "strLen", "result", "shift", "continuation", "require_util", "__commonJSMin", "exports", "getArg", "aArgs", "aName", "aDefaultValue", "urlRegexp", "dataUrlRegexp", "urlParse", "aUrl", "match", "urlGenerate", "aParsedUrl", "url", "normalize", "aPath", "path", "isAbsolute", "parts", "part", "up", "i", "join", "aRoot", "aPathUrl", "aRootUrl", "joined", "relative", "level", "index", "supportsNullProto", "obj", "identity", "s", "toSetString", "aStr", "isProtoString", "fromSetString", "length", "compareByOriginalPositions", "mappingA", "mappingB", "onlyCompareOriginal", "cmp", "strcmp", "compareByGeneratedPositionsDeflated", "onlyCompareGenerated", "aStr1", "aStr2", "compareByGeneratedPositionsInflated", "parseSourceMapInput", "str", "computeSourceURL", "sourceRoot", "sourceURL", "sourceMapURL", "parsed", "require_array_set", "__commonJSMin", "exports", "util", "has", "hasNativeMap", "ArraySet", "aArray", "aAllowDuplicates", "set", "len", "aStr", "sStr", "isDuplicate", "idx", "aIdx", "require_mapping_list", "__commonJSMin", "exports", "util", "generatedPositionAfter", "mappingA", "mappingB", "lineA", "lineB", "columnA", "columnB", "MappingList", "aCallback", "aThisArg", "aMapping", "require_source_map_generator", "__commonJSMin", "exports", "base64VLQ", "util", "ArraySet", "MappingList", "SourceMapGenerator", "aArgs", "aSourceMapConsumer", "sourceRoot", "generator", "mapping", "newMapping", "sourceFile", "sourceRelative", "content", "generated", "original", "source", "name", "aSourceFile", "aSourceContent", "aSourceMapPath", "newSources", "newNames", "aGenerated", "aOriginal", "aSource", "aName", "previousGeneratedColumn", "previousGeneratedLine", "previousOriginalColumn", "previousOriginalLine", "previousName", "previousSource", "result", "next", "nameIdx", "sourceIdx", "mappings", "i", "len", "aSources", "aSourceRoot", "key", "map", "require_binary_search", "__commonJSMin", "exports", "recursiveSearch", "aLow", "aHigh", "aNeedle", "aHaystack", "aCompare", "aBias", "mid", "cmp", "index", "require_quick_sort", "__commonJSMin", "exports", "swap", "ary", "x", "y", "temp", "randomIntInRange", "low", "high", "doQuickSort", "comparator", "p", "r", "pivotIndex", "i", "pivot", "j", "q", "require_source_map_consumer", "__commonJSMin", "exports", "util", "binarySearch", "ArraySet", "base64VLQ", "quickSort", "SourceMapConsumer", "aSourceMap", "aSourceMapURL", "sourceMap", "IndexedSourceMapConsumer", "BasicSourceMapConsumer", "aStr", "index", "c", "aSourceRoot", "aCallback", "aContext", "aOrder", "context", "order", "mappings", "sourceRoot", "mapping", "source", "aArgs", "line", "needle", "originalLine", "originalColumn", "version", "sources", "names", "sourcesContent", "file", "s", "aSource", "relativeSource", "i", "smc", "generatedMappings", "destGeneratedMappings", "destOriginalMappings", "length", "srcMapping", "destMapping", "Mapping", "generatedLine", "previousGeneratedColumn", "previousOriginalLine", "previousOriginalColumn", "previousSource", "previousName", "cachedSegments", "temp", "originalMappings", "str", "segment", "end", "value", "aNeedle", "aMappings", "aLineName", "aColumnName", "aComparator", "aBias", "nextMapping", "name", "sc", "nullOnMissing", "url", "fileUriAbsPath", "sections", "lastOffset", "offset", "offsetLine", "offsetColumn", "j", "sectionIndex", "section", "cmp", "content", "generatedPosition", "ret", "sectionMappings", "adjustedMapping", "require_source_node", "__commonJSMin", "exports", "SourceMapGenerator", "util", "REGEX_NEWLINE", "NEWLINE_CODE", "isSourceNode", "SourceNode", "aLine", "aColumn", "aSource", "aChunks", "aName", "aGeneratedCode", "aSourceMapConsumer", "aRelativePath", "node", "remainingLines", "remainingLinesIndex", "shiftNextLine", "lineContents", "getNextLine", "newLine", "lastGeneratedLine", "lastGeneratedColumn", "lastMapping", "mapping", "addMappingWithCode", "nextLine", "code", "sourceFile", "content", "source", "aChunk", "chunk", "i", "aFn", "len", "aSep", "newChildren", "aPattern", "aReplacement", "lastChild", "aSourceFile", "aSourceContent", "sources", "str", "aArgs", "generated", "map", "sourceMappingActive", "lastOriginalSource", "lastOriginalLine", "lastOriginalColumn", "lastOriginalName", "original", "idx", "length", "sourceContent", "require_source_map", "__commonJSMin", "exports", "require_buffer_from", "__commonJSMin", "exports", "module", "toString", "isModern", "isArrayBuffer", "input", "fromArrayBuffer", "obj", "byteOffset", "length", "maxLength", "fromString", "string", "encoding", "bufferFrom", "value", "encodingOrOffset", "require_source_map_support", "__commonJSMin", "exports", "module", "SourceMapConsumer", "path", "fs", "bufferFrom", "dynamicRequire", "mod", "request", "errorFormatterInstalled", "uncaughtShimInstalled", "emptyCacheBetweenOperations", "environment", "fileContentsCache", "sourceMapCache", "reSourceMap", "retrieveFileHandlers", "retrieveMapHandlers", "isInBrowser", "hasGlobalProcessEventEmitter", "globalProcessVersion", "globalProcessStderr", "globalProcessExit", "code", "handlerExec", "list", "arg", "i", "ret", "retrieveFile", "protocol", "drive", "contents", "xhr", "supportRelativeURL", "file", "url", "dir", "match", "startPath", "retrieveSourceMapURL", "source", "fileData", "sourceMapHeader", "re", "lastMatch", "retrieveSourceMap", "sourceMappingURL", "sourceMapData", "rawData", "mapSourcePosition", "position", "sourceMap", "urlAndMap", "originalPosition", "mapEvalOrigin", "origin", "CallSiteToString", "fileName", "fileLocation", "lineNumber", "columnNumber", "line", "functionName", "addSuffix", "isConstructor", "isMethodCall", "typeName", "methodName", "cloneCallSite", "frame", "object", "name", "wrapCallSite", "state", "column", "noHeader", "headerLength", "originalFunctionName", "prepareStackTrace", "error", "stack", "message", "errorString", "processedStack", "getErrorSource", "printErrorAndExit", "stderr", "shimEmitUncaughtException", "origEmit", "type", "hasStack", "hasListeners", "originalRetrieveFileHandlers", "originalRetrieveMapHandlers", "options", "Module", "$compile", "content", "filename", "installHandler", "worker_threads", "require_lodash", "__commonJSMin", "exports", "module", "FUNC_ERROR_TEXT", "NAN", "symbolTag", "reTrim", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "freeGlobal", "freeSelf", "root", "objectProto", "objectToString", "nativeMax", "nativeMin", "now", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "result", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "toNumber", "isObject", "invokeFunc", "time", "args", "thisArg", "leadingEdge", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "shouldInvoke", "trailingEdge", "cancel", "flush", "debounced", "isInvoking", "value", "type", "isObjectLike", "isSymbol", "other", "isBinary", "require_conventions", "__commonJSMin", "exports", "find", "list", "predicate", "ac", "i", "item", "freeze", "object", "oc", "assign", "target", "source", "key", "MIME_TYPE", "value", "NAMESPACE", "uri", "require_dom", "__commonJSMin", "exports", "conventions", "find", "NAMESPACE", "notEmptyString", "input", "splitOnASCIIWhitespace", "orderedSetReducer", "current", "element", "toOrderedSet", "list", "arrayIncludes", "copy", "src", "dest", "p", "_extends", "Class", "Super", "pt", "t", "NodeType", "ELEMENT_NODE", "ATTRIBUTE_NODE", "TEXT_NODE", "CDATA_SECTION_NODE", "ENTITY_REFERENCE_NODE", "ENTITY_NODE", "PROCESSING_INSTRUCTION_NODE", "COMMENT_NODE", "DOCUMENT_NODE", "DOCUMENT_TYPE_NODE", "DOCUMENT_FRAGMENT_NODE", "NOTATION_NODE", "ExceptionCode", "ExceptionMessage", "INDEX_SIZE_ERR", "DOMSTRING_SIZE_ERR", "HIERARCHY_REQUEST_ERR", "WRONG_DOCUMENT_ERR", "INVALID_CHARACTER_ERR", "NO_DATA_ALLOWED_ERR", "NO_MODIFICATION_ALLOWED_ERR", "NOT_FOUND_ERR", "NOT_SUPPORTED_ERR", "INUSE_ATTRIBUTE_ERR", "INVALID_STATE_ERR", "SYNTAX_ERR", "INVALID_MODIFICATION_ERR", "NAMESPACE_ERR", "INVALID_ACCESS_ERR", "DOMException", "code", "message", "error", "NodeList", "index", "isHTML", "nodeFilter", "buf", "i", "serializeToString", "predicate", "item", "LiveNodeList", "node", "refresh", "_updateLiveList", "inc", "ls", "__set__", "NamedNodeMap", "_findNodeIndex", "_addNamedNode", "el", "newAttr", "oldAttr", "doc", "_onRemoveAttribute", "_onAddAttribute", "_removeNamedNode", "attr", "lastIndex", "key", "namespaceURI", "localName", "DOMImplementation", "feature", "version", "qualifiedName", "doctype", "Document", "root", "publicId", "systemId", "DocumentType", "Node", "newChild", "refChild", "_insertBefore", "oldChild", "assertPreReplacementValidityInDocument", "_removeChild", "deep", "cloneNode", "child", "next", "map", "prefix", "_xmlEncoder", "c", "_visitNode", "callback", "ns", "remove", "_onUpdateChild", "cs", "parentNode", "previous", "hasValidParentNodeType", "hasInsertableNodeType", "isElementNode", "isTextNode", "isDocTypeNode", "isElementInsertionPossible", "parentChildNodes", "docTypeNode", "isElementReplacementPossible", "hasElementChildThatIsNotChild", "assertPreInsertionValidity1to5", "parent", "assertPreInsertionValidityInDocument", "nodeChildNodes", "nodeChildElements", "parentElementChild", "hasDoctypeChildThatIsNotChild", "_inDocumentAssertion", "cp", "newFirst", "newLast", "pre", "_appendSingleChild", "importedNode", "importNode", "id", "rtv", "classNames", "classNamesSet", "base", "nodeClassNames", "matches", "nodeClassNamesSet", "tagName", "Element", "attrs", "DocumentFragment", "data", "Text", "Comment", "CDATASection", "target", "ProcessingInstruction", "name", "Attr", "EntityReference", "pl", "value", "old", "CharacterData", "offset", "count", "text", "start", "end", "newText", "newNode", "Notation", "Entity", "XMLSerializer", "isHtml", "nodeSerializeToString", "refNode", "uri", "visibleNamespaces", "needNamespaceDefine", "addSerializedAttribute", "len", "nodeName", "prefixedNodeName", "defaultNS", "ai", "nsi", "namespace", "pubid", "sysid", "sub", "node2", "n", "v", "attrs2", "object", "getTextContent", "require_entities", "__commonJSMin", "exports", "freeze", "require_sax", "__commonJSMin", "exports", "NAMESPACE", "nameStartChar", "nameChar", "tagNamePattern", "S_TAG", "S_ATTR", "S_ATTR_SPACE", "S_EQ", "S_ATTR_NOQUOT_VALUE", "S_ATTR_END", "S_TAG_SPACE", "S_TAG_CLOSE", "ParseError", "message", "locator", "XMLReader", "source", "defaultNSMap", "entityMap", "domBuilder", "_copy", "parse", "defaultNSMapCopy", "errorHandler", "fixedFromCharCode", "code", "surrogate1", "surrogate2", "entityReplacer", "a", "k", "appendText", "end", "start", "xt", "position", "p", "m", "lineEnd", "linePattern", "lineStart", "parseStack", "closeMap", "tagStart", "doc", "text", "tagName", "config", "localNSMap", "endMatch", "endIgnoreCaseMach", "prefix", "parseInstruction", "parseDCC", "el", "ElementAttributes", "currentNSMap", "parseElementStartPart", "len", "fixSelfClosed", "locator2", "copyLocator", "i", "appendElement", "parseHtmlSpecialContent", "e", "f", "t", "addAttribute", "qname", "value", "startIndex", "attrName", "s", "c", "qName", "nsp", "localName", "nsPrefix", "ns", "elStartEnd", "elEndStart", "pos", "target", "n", "next", "matchs", "split", "name", "pubid", "sysid", "lastMatch", "match", "offset", "buf", "reg", "require_dom_parser", "__commonJSMin", "exports", "conventions", "dom", "entities", "sax", "DOMImplementation", "NAMESPACE", "ParseError", "XMLReader", "normalizeLineEndings", "input", "DOMParser", "options", "source", "mimeType", "domBuilder", "DOMHandler", "errorHandler", "locator", "defaultNSMap", "isHTML", "entityMap", "buildErrorHandler", "normalize", "errorImpl", "isCallback", "build", "key", "fn", "msg", "_locator", "position", "node", "namespaceURI", "localName", "qName", "attrs", "doc", "el", "len", "appendElement", "i", "value", "attr", "current", "tagName", "prefix", "uri", "target", "data", "ins", "ch", "start", "length", "chars", "_toString", "charNode", "name", "comm", "publicId", "systemId", "impl", "dt", "error", "l", "hander", "require_lib", "__commonJSMin", "exports", "dom", "require_parse", "__commonJSMin", "exports", "DOMParser", "parse", "TEXT_NODE", "CDATA_NODE", "COMMENT_NODE", "shouldIgnoreNode", "node", "isEmptyNode", "invariant", "test", "message", "xml", "doc", "plist", "parsePlistXML", "i", "new_obj", "key", "val", "new_arr", "res", "counter", "type", "require_base64_js", "__commonJSMin", "exports", "byteLength", "toByteArray", "fromByteArray", "lookup", "revLookup", "Arr", "code", "i", "len", "getLens", "b64", "validLen", "placeHoldersLen", "lens", "_byteLength", "tmp", "arr", "curByte", "tripletToBase64", "num", "encodeChunk", "uint8", "start", "end", "output", "extraBytes", "parts", "maxChunkLength", "len2", "require_Utility", "__commonJSMin", "exports", "module", "assign", "getValue", "isArray", "isEmpty", "isFunction", "isObject", "isPlainObject", "hasProp", "target", "sources", "i", "key", "len", "source", "val", "ref", "ctor", "proto", "obj", "require_XMLDOMImplementation", "__commonJSMin", "exports", "module", "XMLDOMImplementation", "feature", "version", "qualifiedName", "publicId", "systemId", "namespaceURI", "doctype", "title", "require_XMLDOMErrorHandler", "__commonJSMin", "exports", "module", "XMLDOMErrorHandler", "error", "require_XMLDOMStringList", "__commonJSMin", "exports", "module", "XMLDOMStringList", "arr", "index", "str", "require_XMLDOMConfiguration", "__commonJSMin", "exports", "module", "XMLDOMConfiguration", "XMLDOMErrorHandler", "XMLDOMStringList", "clonedSelf", "name", "value", "require_NodeType", "__commonJSMin", "exports", "module", "require_XMLAttribute", "__commonJSMin", "exports", "module", "NodeType", "XMLAttribute", "XMLNode", "parent", "name", "value", "options", "node", "require_XMLNamedNodeMap", "__commonJSMin", "exports", "module", "XMLNamedNodeMap", "nodes", "name", "node", "oldNode", "index", "namespaceURI", "localName", "require_XMLElement", "__commonJSMin", "exports", "module", "NodeType", "XMLAttribute", "XMLElement", "XMLNamedNodeMap", "XMLNode", "getValue", "isFunction", "isObject", "hasProp", "parent", "name", "attributes", "child", "j", "len", "ref", "att", "attName", "clonedSelf", "clonedChild", "value", "attValue", "options", "newAttr", "oldAttr", "namespaceURI", "localName", "qualifiedName", "isId", "idAttr", "tagname", "classNames", "node", "i", "require_XMLCharacterData", "__commonJSMin", "exports", "module", "XMLCharacterData", "XMLNode", "parent", "offset", "count", "arg", "node", "value", "require_XMLCData", "__commonJSMin", "exports", "module", "NodeType", "XMLCData", "XMLCharacterData", "parent", "text", "options", "require_XMLComment", "__commonJSMin", "exports", "module", "NodeType", "XMLCharacterData", "XMLComment", "parent", "text", "options", "require_XMLDeclaration", "__commonJSMin", "exports", "module", "NodeType", "XMLDeclaration", "XMLNode", "isObject", "parent", "version", "encoding", "standalone", "options", "require_XMLDTDAttList", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDAttList", "XMLNode", "parent", "elementName", "attributeName", "attributeType", "defaultValueType", "defaultValue", "options", "require_XMLDTDEntity", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDEntity", "XMLNode", "isObject", "parent", "pe", "name", "value", "options", "require_XMLDTDElement", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDElement", "XMLNode", "parent", "name", "value", "options", "require_XMLDTDNotation", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDNotation", "XMLNode", "parent", "name", "value", "options", "require_XMLDocType", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDAttList", "XMLDTDElement", "XMLDTDEntity", "XMLDTDNotation", "XMLDocType", "XMLNamedNodeMap", "XMLNode", "isObject", "parent", "pubID", "sysID", "child", "i", "len", "ref", "name", "value", "elementName", "attributeName", "attributeType", "defaultValueType", "defaultValue", "options", "node", "nodes", "require_XMLRaw", "__commonJSMin", "exports", "module", "NodeType", "XMLNode", "XMLRaw", "parent", "text", "options", "require_XMLText", "__commonJSMin", "exports", "module", "NodeType", "XMLCharacterData", "XMLText", "parent", "text", "options", "offset", "content", "next", "prev", "str", "require_XMLProcessingInstruction", "__commonJSMin", "exports", "module", "NodeType", "XMLCharacterData", "XMLProcessingInstruction", "parent", "target", "value", "options", "node", "require_XMLDummy", "__commonJSMin", "exports", "module", "NodeType", "XMLDummy", "XMLNode", "parent", "options", "require_XMLNodeList", "__commonJSMin", "exports", "module", "XMLNodeList", "nodes", "index", "require_DocumentPosition", "__commonJSMin", "exports", "module", "require_XMLNode", "__commonJSMin", "exports", "module", "DocumentPosition", "NodeType", "XMLCData", "XMLComment", "XMLDeclaration", "XMLDocType", "XMLDummy", "XMLElement", "XMLNamedNodeMap", "XMLNode", "XMLNodeList", "XMLProcessingInstruction", "XMLRaw", "XMLText", "getValue", "isEmpty", "isFunction", "isObject", "hasProp", "splice", "parent1", "parent", "child", "j", "len", "ref1", "results", "name", "attributes", "text", "childNode", "item", "k", "key", "lastChild", "len1", "val", "i", "newChild", "refChild", "removed", "value", "target", "insTarget", "insValue", "instruction", "version", "encoding", "standalone", "doc", "xmldec", "pubID", "sysID", "doctype", "ref2", "node", "options", "clonedRoot", "oldChild", "deep", "feature", "other", "ref", "res", "namespaceURI", "prefix", "data", "handler", "isDescendantChild", "nodePos", "thisPos", "found", "pos", "func", "str", "require_XMLStringifier", "__commonJSMin", "exports", "module", "XMLStringifier", "hasProp", "options", "key", "ref", "value", "val", "str", "regex", "res", "ampregex", "require_WriterState", "__commonJSMin", "exports", "module", "require_XMLWriterBase", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLCData", "XMLComment", "XMLDTDAttList", "XMLDTDElement", "XMLDTDEntity", "XMLDTDNotation", "XMLDeclaration", "XMLDocType", "XMLDummy", "XMLElement", "XMLProcessingInstruction", "XMLRaw", "XMLText", "XMLWriterBase", "assign", "hasProp", "options", "key", "ref", "value", "filteredOptions", "ref1", "ref2", "ref3", "ref4", "ref5", "ref6", "ref7", "node", "level", "indentLevel", "att", "r", "child", "i", "len1", "attLen", "childNodeCount", "firstChildNode", "j", "len", "len2", "name", "prettySuppressed", "ratt", "rline", "e", "require_XMLStringWriter", "__commonJSMin", "exports", "module", "XMLStringWriter", "XMLWriterBase", "options", "doc", "child", "i", "len", "r", "ref", "require_XMLDocument", "__commonJSMin", "exports", "module", "NodeType", "XMLDOMConfiguration", "XMLDOMImplementation", "XMLDocument", "XMLNode", "XMLStringWriter", "XMLStringifier", "isPlainObject", "options", "writer", "writerOptions", "tagName", "data", "target", "name", "tagname", "importedNode", "deep", "namespaceURI", "qualifiedName", "localName", "elementId", "source", "node", "classNames", "eventInterface", "root", "whatToShow", "filter", "child", "i", "len", "ref", "require_XMLDocumentCB", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLAttribute", "XMLCData", "XMLComment", "XMLDTDAttList", "XMLDTDElement", "XMLDTDEntity", "XMLDTDNotation", "XMLDeclaration", "XMLDocType", "XMLDocument", "XMLDocumentCB", "XMLElement", "XMLProcessingInstruction", "XMLRaw", "XMLStringWriter", "XMLStringifier", "XMLText", "getValue", "isFunction", "isObject", "isPlainObject", "hasProp", "options", "onData", "onEnd", "writerOptions", "node", "att", "attName", "attributes", "child", "i", "len", "ref", "ref1", "name", "text", "oldValidationFlag", "root", "value", "attValue", "target", "insTarget", "insValue", "version", "encoding", "standalone", "pubID", "sysID", "elementName", "attributeName", "attributeType", "defaultValueType", "defaultValue", "chunk", "level", "require_XMLStreamWriter", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLStreamWriter", "XMLWriterBase", "hasProp", "stream", "options", "node", "level", "doc", "child", "i", "j", "k", "len1", "len2", "ref", "ref1", "results", "att", "attLen", "childNodeCount", "firstChildNode", "len", "name", "prettySuppressed", "r", "ratt", "ref2", "rline", "e", "require_lib", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLDOMImplementation", "XMLDocument", "XMLDocumentCB", "XMLStreamWriter", "XMLStringWriter", "assign", "isFunction", "name", "xmldec", "doctype", "options", "doc", "root", "onData", "onEnd", "stream", "require_build", "__commonJSMin", "exports", "base64", "xmlbuilder", "build", "ISODateString", "d", "pad", "n", "toString", "type", "obj", "m", "opts", "XMLHDR", "XMLDTD", "doc", "walk_obj", "next", "next_child", "tag_type", "i", "prop", "name", "require_plist", "__commonJSMin", "exports", "parserFunctions", "k", "builderFunctions", "require_ansi_regex", "__commonJSMin", "exports", "module", "onlyFirst", "pattern", "require_strip_ansi", "__commonJSMin", "exports", "module", "ansiRegex", "string", "require_defaults", "__commonJSMin", "exports", "require_Utility", "__commonJSMin", "exports", "module", "assign", "getValue", "isArray", "isEmpty", "isFunction", "isObject", "isPlainObject", "slice", "hasProp", "i", "key", "len", "source", "sources", "target", "val", "ref", "ctor", "proto", "obj", "require_XMLDOMImplementation", "__commonJSMin", "exports", "module", "XMLDOMImplementation", "feature", "version", "qualifiedName", "publicId", "systemId", "namespaceURI", "doctype", "title", "require_XMLDOMErrorHandler", "__commonJSMin", "exports", "module", "XMLDOMErrorHandler", "error", "require_XMLDOMStringList", "__commonJSMin", "exports", "module", "XMLDOMStringList", "arr", "index", "str", "require_XMLDOMConfiguration", "__commonJSMin", "exports", "module", "XMLDOMConfiguration", "XMLDOMErrorHandler", "XMLDOMStringList", "clonedSelf", "name", "value", "require_NodeType", "__commonJSMin", "exports", "module", "require_XMLAttribute", "__commonJSMin", "exports", "module", "NodeType", "XMLAttribute", "XMLNode", "parent", "name", "value", "options", "node", "require_XMLNamedNodeMap", "__commonJSMin", "exports", "module", "XMLNamedNodeMap", "nodes", "name", "node", "oldNode", "index", "namespaceURI", "localName", "require_XMLElement", "__commonJSMin", "exports", "module", "NodeType", "XMLAttribute", "XMLElement", "XMLNamedNodeMap", "XMLNode", "getValue", "isFunction", "isObject", "ref", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "name", "attributes", "j", "len", "ref1", "att", "attName", "clonedSelf", "clonedChild", "value", "attValue", "options", "newAttr", "oldAttr", "namespaceURI", "localName", "qualifiedName", "isId", "idAttr", "tagname", "classNames", "node", "i", "require_XMLCharacterData", "__commonJSMin", "exports", "module", "XMLCharacterData", "XMLNode", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "value", "offset", "count", "arg", "node", "require_XMLCData", "__commonJSMin", "exports", "module", "NodeType", "XMLCData", "XMLCharacterData", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "text", "options", "require_XMLComment", "__commonJSMin", "exports", "module", "NodeType", "XMLCharacterData", "XMLComment", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "text", "options", "require_XMLDeclaration", "__commonJSMin", "exports", "module", "NodeType", "XMLDeclaration", "XMLNode", "isObject", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "version", "encoding", "standalone", "ref", "options", "require_XMLDTDAttList", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDAttList", "XMLNode", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "elementName", "attributeName", "attributeType", "defaultValueType", "defaultValue", "options", "require_XMLDTDEntity", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDEntity", "XMLNode", "isObject", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "pe", "name", "value", "options", "require_XMLDTDElement", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDElement", "XMLNode", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "name", "value", "options", "require_XMLDTDNotation", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDNotation", "XMLNode", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "name", "value", "options", "require_XMLDocType", "__commonJSMin", "exports", "module", "NodeType", "XMLDTDAttList", "XMLDTDElement", "XMLDTDEntity", "XMLDTDNotation", "XMLDocType", "XMLNamedNodeMap", "XMLNode", "isObject", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "pubID", "sysID", "i", "len", "ref", "ref1", "ref2", "nodes", "name", "value", "elementName", "attributeName", "attributeType", "defaultValueType", "defaultValue", "options", "node", "require_XMLRaw", "__commonJSMin", "exports", "module", "NodeType", "XMLNode", "XMLRaw", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "text", "options", "require_XMLText", "__commonJSMin", "exports", "module", "NodeType", "XMLCharacterData", "XMLText", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "text", "next", "prev", "str", "options", "offset", "content", "require_XMLProcessingInstruction", "__commonJSMin", "exports", "module", "NodeType", "XMLCharacterData", "XMLProcessingInstruction", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "target", "value", "options", "node", "require_XMLDummy", "__commonJSMin", "exports", "module", "NodeType", "XMLDummy", "XMLNode", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "options", "require_XMLNodeList", "__commonJSMin", "exports", "module", "XMLNodeList", "nodes", "index", "require_DocumentPosition", "__commonJSMin", "exports", "module", "require_XMLNode", "__commonJSMin", "exports", "module", "DocumentPosition", "NodeType", "XMLCData", "XMLComment", "XMLDeclaration", "XMLDocType", "XMLDummy", "XMLElement", "XMLNamedNodeMap", "XMLNode", "XMLNodeList", "XMLProcessingInstruction", "XMLRaw", "XMLText", "getValue", "isEmpty", "isFunction", "isObject", "ref1", "hasProp", "parent1", "i", "child", "j", "len", "ref2", "str", "value", "parent", "results", "name", "attributes", "text", "childNode", "item", "k", "key", "lastChild", "len1", "ref3", "val", "newChild", "refChild", "removed", "target", "insTarget", "insValue", "instruction", "version", "encoding", "standalone", "doc", "xmldec", "pubID", "sysID", "doctype", "node", "options", "clonedRoot", "oldChild", "deep", "feature", "other", "ref", "res", "namespaceURI", "prefix", "data", "handler", "isDescendantChild", "nodePos", "thisPos", "found", "pos", "func", "require_XMLStringifier", "__commonJSMin", "exports", "module", "XMLStringifier", "bind", "fn", "me", "hasProp", "options", "key", "ref", "value", "val", "str", "regex", "res", "ampregex", "require_WriterState", "__commonJSMin", "exports", "module", "require_XMLWriterBase", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLCData", "XMLComment", "XMLDTDAttList", "XMLDTDElement", "XMLDTDEntity", "XMLDTDNotation", "XMLDeclaration", "XMLDocType", "XMLDummy", "XMLElement", "XMLProcessingInstruction", "XMLRaw", "XMLText", "XMLWriterBase", "assign", "hasProp", "options", "key", "ref", "value", "filteredOptions", "ref1", "ref2", "ref3", "ref4", "ref5", "ref6", "node", "level", "indentLevel", "att", "r", "child", "i", "len", "childNodeCount", "firstChildNode", "j", "len1", "name", "prettySuppressed", "e", "require_XMLStringWriter", "__commonJSMin", "exports", "module", "XMLStringWriter", "XMLWriterBase", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "options", "doc", "i", "len", "r", "ref", "require_XMLDocument", "__commonJSMin", "exports", "module", "NodeType", "XMLDOMConfiguration", "XMLDOMImplementation", "XMLDocument", "XMLNode", "XMLStringWriter", "XMLStringifier", "isPlainObject", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "options", "i", "len", "ref", "writer", "writerOptions", "tagName", "data", "target", "name", "tagname", "importedNode", "deep", "namespaceURI", "qualifiedName", "localName", "elementId", "source", "node", "classNames", "eventInterface", "root", "whatToShow", "filter", "require_XMLDocumentCB", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLAttribute", "XMLCData", "XMLComment", "XMLDTDAttList", "XMLDTDElement", "XMLDTDEntity", "XMLDTDNotation", "XMLDeclaration", "XMLDocType", "XMLDocument", "XMLDocumentCB", "XMLElement", "XMLProcessingInstruction", "XMLRaw", "XMLStringWriter", "XMLStringifier", "XMLText", "getValue", "isFunction", "isObject", "isPlainObject", "ref", "hasProp", "options", "onData", "onEnd", "writerOptions", "node", "att", "attName", "attributes", "child", "i", "len", "ref1", "ref2", "name", "text", "oldValidationFlag", "root", "value", "attValue", "target", "insTarget", "insValue", "version", "encoding", "standalone", "pubID", "sysID", "elementName", "attributeName", "attributeType", "defaultValueType", "defaultValue", "chunk", "level", "require_XMLStreamWriter", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLStreamWriter", "XMLWriterBase", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "stream", "options", "node", "level", "doc", "i", "j", "k", "len", "len1", "ref", "ref1", "results", "att", "childNodeCount", "firstChildNode", "name", "prettySuppressed", "e", "require_lib", "__commonJSMin", "exports", "module", "NodeType", "WriterState", "XMLDOMImplementation", "XMLDocument", "XMLDocumentCB", "XMLStreamWriter", "XMLStringWriter", "assign", "isFunction", "ref", "name", "xmldec", "doctype", "options", "doc", "root", "onData", "onEnd", "ref1", "stream", "require_builder", "__commonJSMin", "exports", "builder", "defaults", "escapeCDATA", "requiresCDATA", "wrapCDATA", "hasProp", "entry", "Builder", "opts", "key", "ref", "value", "rootObj", "attrkey", "charkey", "render", "rootElement", "rootName", "_this", "element", "obj", "attr", "child", "index", "require_sax", "__commonJSMin", "exports", "sax", "strict", "opt", "SAXParser", "SAXStream", "createStream", "buffers", "parser", "clearBuffers", "S", "rootNS", "emit", "o", "F", "newf", "a", "i", "checkBufferLength", "maxAllowed", "maxActual", "l", "len", "closeText", "emitNode", "error", "m", "flushBuffers", "end", "write", "Stream", "streamWraps", "ev", "me", "er", "h", "data", "SD", "chunk", "handler", "args", "CDATA", "DOCTYPE", "XML_NAMESPACE", "XMLNS_NAMESPACE", "nameStart", "nameBody", "entityStart", "entityBody", "isWhitespace", "c", "isQuote", "isAttribEnd", "isMatch", "regex", "notMatch", "key", "e", "s", "event", "nodeType", "textopts", "text", "strictFail", "message", "newTag", "parent", "tag", "qname", "name", "attribute", "qualName", "prefix", "local", "attrib", "qn", "openTag", "selfClosing", "p", "nv", "value", "uri", "closeTag", "t", "tagName", "closeTo", "close", "x", "n", "parseEntity", "entity", "entityLC", "num", "numStr", "beginWhiteSpace", "charAt", "result", "starti", "pad", "returnState", "buffer", "stringFromCharCode", "floor", "fromCodePoint", "MAX_SIZE", "codeUnits", "highSurrogate", "lowSurrogate", "index", "length", "codePoint", "require_bom", "__commonJSMin", "exports", "str", "require_processors", "__commonJSMin", "exports", "prefixMatch", "str", "require_parser", "__commonJSMin", "exports", "bom", "defaults", "defineProperty", "events", "isEmpty", "processItem", "processors", "sax", "setImmediate", "bind", "fn", "me", "extend", "child", "parent", "key", "hasProp", "ctor", "thing", "item", "i", "len", "process", "obj", "value", "descriptor", "superClass", "Parser", "opts", "ref", "chunk", "err", "error1", "newValue", "attrkey", "charkey", "ontext", "stack", "_this", "error", "node", "processedKey", "cdata", "emptyStr", "nodeName", "objClone", "old", "s", "xpath", "results", "text", "charChild", "str", "cb", "result", "resolve", "reject", "a", "b", "options", "parser", "require_xml2js", "__commonJSMin", "exports", "builder", "defaults", "parser", "processors", "extend", "child", "parent", "key", "hasProp", "ctor", "superClass", "ValidationError", "message", "require_lib", "__commonJSMin", "exports", "module", "fs", "path", "exists", "walkFile", "str", "cb", "data", "item", "line", "allparts", "parts", "lines", "fn", "i", "k", "parse", "file", "x", "err", "require_is", "__commonJSMin", "exports", "boolean", "value", "string", "number", "error", "func", "array", "stringArray", "elem", "typedArray", "check", "thenable", "asPromise", "resolve", "reject", "resolved", "require_is", "__commonJSMin", "exports", "boolean", "value", "string", "number", "error", "func", "array", "stringArray", "elem", "require_messages", "__commonJSMin", "exports", "is", "ErrorCodes", "ResponseError", "_ResponseError", "code", "message", "data", "result", "ParameterStructures", "_ParameterStructures", "kind", "value", "AbstractMessageSignature", "method", "numberOfParams", "RequestType0", "RequestType", "_parameterStructures", "RequestType1", "RequestType2", "RequestType3", "RequestType4", "RequestType5", "RequestType6", "RequestType7", "RequestType8", "RequestType9", "NotificationType", "NotificationType0", "NotificationType1", "NotificationType2", "NotificationType3", "NotificationType4", "NotificationType5", "NotificationType6", "NotificationType7", "NotificationType8", "NotificationType9", "Message", "isRequest", "candidate", "isNotification", "isResponse", "require_linkedMap", "__commonJSMin", "exports", "_a", "Touch", "LinkedMap", "key", "touch", "item", "value", "callbackfn", "thisArg", "state", "current", "iterator", "result", "newSize", "currentSize", "next", "previous", "data", "LRUCache", "limit", "ratio", "require_disposable", "__commonJSMin", "exports", "Disposable", "create", "func", "require_ral", "__commonJSMin", "exports", "_ral", "RAL", "install", "ral", "require_events", "__commonJSMin", "exports", "ral_1", "Event", "_disposable", "CallbackList", "callback", "context", "bucket", "foundCallbackWithDifferentContext", "len", "args", "ret", "callbacks", "contexts", "i", "e", "Emitter", "_Emitter", "_options", "listener", "thisArgs", "disposables", "result", "event", "require_cancellation", "__commonJSMin", "exports", "ral_1", "Is", "events_1", "CancellationToken", "is", "value", "candidate", "shortcutEvent", "callback", "context", "handle", "MutableToken", "CancellationTokenSource", "require_sharedArrayCancellation", "__commonJSMin", "exports", "cancellation_1", "CancellationState", "SharedArraySenderStrategy", "request", "buffer", "data", "_conn", "id", "SharedArrayBufferCancellationToken", "SharedArrayBufferCancellationTokenSource", "SharedArrayReceiverStrategy", "require_semaphore", "__commonJSMin", "exports", "ral_1", "Semaphore", "capacity", "thunk", "resolve", "reject", "next", "result", "value", "err", "require_messageReader", "__commonJSMin", "exports", "ral_1", "Is", "events_1", "semaphore_1", "MessageReader", "is", "value", "candidate", "AbstractMessageReader", "error", "info", "ResolvedMessageReaderOptions", "fromOptions", "options", "charset", "result", "contentDecoder", "contentDecoders", "contentTypeDecoder", "contentTypeDecoders", "decoder", "ReadableStreamMessageReader", "readable", "timeout", "callback", "data", "headers", "contentLength", "length", "body", "bytes", "message", "token", "require_messageWriter", "__commonJSMin", "exports", "ral_1", "Is", "semaphore_1", "events_1", "ContentLength", "CRLF", "MessageWriter", "is", "value", "candidate", "AbstractMessageWriter", "error", "message", "count", "ResolvedMessageWriterOptions", "fromOptions", "options", "WriteableStreamMessageWriter", "writable", "msg", "buffer", "headers", "data", "require_messageBuffer", "__commonJSMin", "exports", "CR", "LF", "CRLF", "AbstractMessageBuffer", "encoding", "chunk", "toAppend", "lowerCaseKeys", "state", "chunkIndex", "offset", "chunkBytesRead", "row", "buffer", "result", "headers", "i", "header", "index", "key", "value", "length", "byteCount", "resultOffset", "chunkPart", "require_connection", "__commonJSMin", "exports", "ral_1", "Is", "messages_1", "linkedMap_1", "events_1", "cancellation_1", "CancelNotification", "ProgressToken", "is", "value", "ProgressNotification", "ProgressType", "StarRequestHandler", "Trace", "TraceValues", "fromString", "toString", "TraceFormat", "SetTraceNotification", "LogTraceNotification", "ConnectionErrors", "ConnectionError", "_ConnectionError", "code", "message", "ConnectionStrategy", "candidate", "IdCancellationReceiverStrategy", "RequestCancellationReceiverStrategy", "CancellationReceiverStrategy", "_", "CancellationSenderStrategy", "conn", "id", "CancellationStrategy", "MessageStrategy", "ConnectionOptions", "ConnectionState", "createMessageConnection", "messageReader", "messageWriter", "_logger", "options", "logger", "sequenceNumber", "notificationSequenceNumber", "unknownResponseSequenceNumber", "version", "starRequestHandler", "requestHandlers", "starNotificationHandler", "notificationHandlers", "progressHandlers", "timer", "messageQueue", "responsePromises", "knownCanceledRequests", "requestTokens", "trace", "traceFormat", "tracer", "state", "errorEmitter", "closeEmitter", "unhandledNotificationEmitter", "unhandledProgressEmitter", "disposeEmitter", "cancellationStrategy", "createRequestQueueKey", "createResponseQueueKey", "createNotificationQueueKey", "addMessageToQueue", "queue", "cancelUndispatched", "_message", "isListening", "isClosed", "isDisposed", "closeHandler", "readErrorHandler", "error", "writeErrorHandler", "data", "triggerMessageQueue", "processMessageQueue", "handleMessage", "handleRequest", "handleNotification", "handleResponse", "handleInvalidMessage", "messageStrategy", "callback", "cancelId", "key", "toCancel", "strategy", "response", "traceSendingResponse", "cancellationToken", "traceReceivedNotification", "requestMessage", "reply", "resultOrError", "method", "startTime", "replyError", "replySuccess", "result", "traceReceivedRequest", "element", "type", "requestHandler", "tokenKey", "cancellationSource", "handlerResult", "promise", "responseMessage", "responsePromise", "traceReceivedResponse", "notificationHandler", "params", "responseHandler", "stringifyTrace", "traceSendingRequest", "logLSPMessage", "traceSendingNotification", "lspMessage", "throwIfClosedOrDisposed", "throwIfListening", "throwIfNotListening", "undefinedToNull", "param", "nullToUndefined", "isNamedParam", "computeSingleParam", "parameterStructures", "computeMessageParams", "numberOfParams", "i", "connection", "args", "messageParams", "first", "paramStart", "paramEnd", "notificationMessage", "handler", "_type", "token", "last", "disposable", "p", "resolve", "reject", "resolveWithCleanup", "r", "rejectWithCleanup", "_value", "_tracer", "sendNotificationOrTraceOptions", "_sendNotification", "_traceFormat", "verbose", "require_api", "__commonJSMin", "exports", "messages_1", "linkedMap_1", "disposable_1", "events_1", "cancellation_1", "sharedArrayCancellation_1", "messageReader_1", "messageWriter_1", "messageBuffer_1", "connection_1", "ral_1", "require_ril", "__commonJSMin", "exports", "util_1", "api_1", "MessageBuffer", "_MessageBuffer", "encoding", "value", "buffer", "length", "ReadableStreamWrapper", "stream", "listener", "WritableStreamWrapper", "data", "resolve", "reject", "callback", "error", "_ril", "msg", "options", "err", "ms", "args", "handle", "RIL", "install", "require_main", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "ril_1", "path", "os", "crypto_1", "net_1", "api_1", "IPCMessageReader", "process", "eventEmitter", "error", "callback", "IPCMessageWriter", "msg", "PortMessageReader", "port", "message", "PortMessageWriter", "SocketMessageReader", "socket", "encoding", "SocketMessageWriter", "options", "StreamMessageReader", "readable", "StreamMessageWriter", "writable", "XDG_RUNTIME_DIR", "safeIpcPathLengths", "generateRandomPipeName", "randomSuffix", "result", "limit", "createClientPipeTransport", "pipeName", "connectResolve", "connected", "resolve", "_reject", "reject", "server", "createServerPipeTransport", "createClientSocketTransport", "createServerSocketTransport", "isReadableStream", "value", "candidate", "isWritableStream", "createMessageConnection", "input", "output", "logger", "reader", "writer", "require_node", "__commonJSMin", "exports", "module", "require_main", "__commonJSMin", "exports", "module", "factory", "v", "require", "DocumentUri", "is", "value", "URI", "integer", "uinteger", "Position", "create", "line", "character", "candidate", "Is", "Range", "one", "two", "three", "four", "Location", "uri", "range", "LocationLink", "targetUri", "targetRange", "targetSelectionRange", "originSelectionRange", "Color", "red", "green", "blue", "alpha", "ColorInformation", "color", "ColorPresentation", "label", "textEdit", "additionalTextEdits", "TextEdit", "FoldingRangeKind", "FoldingRange", "startLine", "endLine", "startCharacter", "endCharacter", "kind", "collapsedText", "result", "DiagnosticRelatedInformation", "location", "message", "DiagnosticSeverity", "DiagnosticTag", "CodeDescription", "Diagnostic", "severity", "code", "source", "relatedInformation", "_a", "Command", "title", "command", "args", "_i", "replace", "newText", "insert", "position", "del", "ChangeAnnotation", "needsConfirmation", "description", "ChangeAnnotationIdentifier", "AnnotatedTextEdit", "annotation", "TextDocumentEdit", "textDocument", "edits", "OptionalVersionedTextDocumentIdentifier", "CreateFile", "options", "RenameFile", "oldUri", "newUri", "DeleteFile", "WorkspaceEdit", "change", "TextEditChangeImpl", "changeAnnotations", "edit", "id", "ChangeAnnotations", "annotations", "idOrAnnotation", "WorkspaceChange", "workspaceEdit", "_this", "textEditChange", "key", "textDocumentEdit", "optionsOrAnnotation", "operation", "TextDocumentIdentifier", "VersionedTextDocumentIdentifier", "version", "TextDocumentItem", "languageId", "text", "MarkupKind", "MarkupContent", "CompletionItemKind", "InsertTextFormat", "CompletionItemTag", "InsertReplaceEdit", "InsertTextMode", "CompletionItemLabelDetails", "CompletionItem", "CompletionList", "items", "isIncomplete", "MarkedString", "fromPlainText", "plainText", "Hover", "ParameterInformation", "documentation", "SignatureInformation", "parameters", "DocumentHighlightKind", "DocumentHighlight", "SymbolKind", "SymbolTag", "SymbolInformation", "name", "containerName", "WorkspaceSymbol", "DocumentSymbol", "detail", "selectionRange", "children", "CodeActionKind", "CodeActionTriggerKind", "CodeActionContext", "diagnostics", "only", "triggerKind", "CodeAction", "kindOrCommandOrEdit", "checkKind", "CodeLens", "data", "FormattingOptions", "tabSize", "insertSpaces", "DocumentLink", "target", "SelectionRange", "parent", "SemanticTokenTypes", "SemanticTokenModifiers", "SemanticTokens", "InlineValueText", "InlineValueVariableLookup", "variableName", "caseSensitiveLookup", "InlineValueEvaluatableExpression", "expression", "InlineValueContext", "frameId", "stoppedLocation", "InlayHintKind", "InlayHintLabelPart", "InlayHint", "StringValue", "createSnippet", "InlineCompletionItem", "insertText", "filterText", "InlineCompletionList", "InlineCompletionTriggerKind", "SelectedCompletionInfo", "InlineCompletionContext", "selectedCompletionInfo", "WorkspaceFolder", "TextDocument", "content", "FullTextDocument", "applyEdits", "document", "sortedEdits", "mergeSort", "a", "b", "diff", "lastModifiedOffset", "i", "e", "startOffset", "endOffset", "compare", "p", "left", "right", "leftIdx", "rightIdx", "ret", "start", "end", "event", "lineOffsets", "isLineStart", "ch", "offset", "low", "high", "mid", "lineOffset", "nextLineOffset", "toString", "defined", "undefined", "boolean", "string", "number", "numberRange", "min", "max", "func", "objectLiteral", "typedArray", "check", "require_messages", "__commonJSMin", "exports", "vscode_jsonrpc_1", "MessageDirection", "RegistrationType", "method", "ProtocolRequestType0", "ProtocolRequestType", "ProtocolNotificationType0", "ProtocolNotificationType", "require_is", "__commonJSMin", "exports", "boolean", "value", "string", "number", "error", "func", "array", "stringArray", "elem", "typedArray", "check", "objectLiteral", "require_protocol_implementation", "__commonJSMin", "exports", "messages_1", "ImplementationRequest", "require_protocol_typeDefinition", "__commonJSMin", "exports", "messages_1", "TypeDefinitionRequest", "require_protocol_workspaceFolder", "__commonJSMin", "exports", "messages_1", "WorkspaceFoldersRequest", "DidChangeWorkspaceFoldersNotification", "require_protocol_configuration", "__commonJSMin", "exports", "messages_1", "ConfigurationRequest", "require_protocol_colorProvider", "__commonJSMin", "exports", "messages_1", "DocumentColorRequest", "ColorPresentationRequest", "require_protocol_foldingRange", "__commonJSMin", "exports", "messages_1", "FoldingRangeRequest", "FoldingRangeRefreshRequest", "require_protocol_declaration", "__commonJSMin", "exports", "messages_1", "DeclarationRequest", "require_protocol_selectionRange", "__commonJSMin", "exports", "messages_1", "SelectionRangeRequest", "require_protocol_progress", "__commonJSMin", "exports", "vscode_jsonrpc_1", "messages_1", "WorkDoneProgress", "is", "value", "WorkDoneProgressCreateRequest", "WorkDoneProgressCancelNotification", "require_protocol_callHierarchy", "__commonJSMin", "exports", "messages_1", "CallHierarchyPrepareRequest", "CallHierarchyIncomingCallsRequest", "CallHierarchyOutgoingCallsRequest", "require_protocol_semanticTokens", "__commonJSMin", "exports", "messages_1", "TokenFormat", "SemanticTokensRegistrationType", "SemanticTokensRequest", "SemanticTokensDeltaRequest", "SemanticTokensRangeRequest", "SemanticTokensRefreshRequest", "require_protocol_showDocument", "__commonJSMin", "exports", "messages_1", "ShowDocumentRequest", "require_protocol_linkedEditingRange", "__commonJSMin", "exports", "messages_1", "LinkedEditingRangeRequest", "require_protocol_fileOperations", "__commonJSMin", "exports", "messages_1", "FileOperationPatternKind", "WillCreateFilesRequest", "DidCreateFilesNotification", "WillRenameFilesRequest", "DidRenameFilesNotification", "DidDeleteFilesNotification", "WillDeleteFilesRequest", "require_protocol_moniker", "__commonJSMin", "exports", "messages_1", "UniquenessLevel", "MonikerKind", "MonikerRequest", "require_protocol_typeHierarchy", "__commonJSMin", "exports", "messages_1", "TypeHierarchyPrepareRequest", "TypeHierarchySupertypesRequest", "TypeHierarchySubtypesRequest", "require_protocol_inlineValue", "__commonJSMin", "exports", "messages_1", "InlineValueRequest", "InlineValueRefreshRequest", "require_protocol_inlayHint", "__commonJSMin", "exports", "messages_1", "InlayHintRequest", "InlayHintResolveRequest", "InlayHintRefreshRequest", "require_protocol_diagnostic", "__commonJSMin", "exports", "vscode_jsonrpc_1", "Is", "messages_1", "DiagnosticServerCancellationData", "is", "value", "candidate", "DocumentDiagnosticReportKind", "DocumentDiagnosticRequest", "WorkspaceDiagnosticRequest", "DiagnosticRefreshRequest", "require_protocol_notebook", "__commonJSMin", "exports", "vscode_languageserver_types_1", "Is", "messages_1", "NotebookCellKind", "is", "value", "ExecutionSummary", "create", "executionOrder", "success", "result", "candidate", "equals", "one", "other", "NotebookCell", "kind", "document", "diff", "two", "equalsMetadata", "oneArray", "otherArray", "i", "oneKeys", "otherKeys", "prop", "NotebookDocument", "uri", "notebookType", "version", "cells", "NotebookDocumentSyncRegistrationType", "DidOpenNotebookDocumentNotification", "NotebookCellArrayChange", "start", "deleteCount", "DidChangeNotebookDocumentNotification", "DidSaveNotebookDocumentNotification", "DidCloseNotebookDocumentNotification", "require_protocol_inlineCompletion", "__commonJSMin", "exports", "messages_1", "InlineCompletionRequest", "require_protocol", "__commonJSMin", "exports", "messages_1", "vscode_languageserver_types_1", "Is", "protocol_implementation_1", "protocol_typeDefinition_1", "protocol_workspaceFolder_1", "protocol_configuration_1", "protocol_colorProvider_1", "protocol_foldingRange_1", "protocol_declaration_1", "protocol_selectionRange_1", "protocol_progress_1", "protocol_callHierarchy_1", "protocol_semanticTokens_1", "protocol_showDocument_1", "protocol_linkedEditingRange_1", "protocol_fileOperations_1", "protocol_moniker_1", "protocol_typeHierarchy_1", "protocol_inlineValue_1", "protocol_inlayHint_1", "protocol_diagnostic_1", "protocol_notebook_1", "protocol_inlineCompletion_1", "TextDocumentFilter", "is", "value", "candidate", "NotebookDocumentFilter", "NotebookCellTextDocumentFilter", "DocumentSelector", "elem", "RegistrationRequest", "UnregistrationRequest", "ResourceOperationKind", "FailureHandlingKind", "PositionEncodingKind", "StaticRegistrationOptions", "hasId", "TextDocumentRegistrationOptions", "WorkDoneProgressOptions", "hasWorkDoneProgress", "InitializeRequest", "InitializeErrorCodes", "InitializedNotification", "ShutdownRequest", "ExitNotification", "DidChangeConfigurationNotification", "MessageType", "ShowMessageNotification", "ShowMessageRequest", "LogMessageNotification", "TelemetryEventNotification", "TextDocumentSyncKind", "DidOpenTextDocumentNotification", "TextDocumentContentChangeEvent", "isIncremental", "event", "isFull", "DidChangeTextDocumentNotification", "DidCloseTextDocumentNotification", "DidSaveTextDocumentNotification", "TextDocumentSaveReason", "WillSaveTextDocumentNotification", "WillSaveTextDocumentWaitUntilRequest", "DidChangeWatchedFilesNotification", "FileChangeType", "RelativePattern", "WatchKind", "PublishDiagnosticsNotification", "CompletionTriggerKind", "CompletionRequest", "CompletionResolveRequest", "HoverRequest", "SignatureHelpTriggerKind", "SignatureHelpRequest", "DefinitionRequest", "ReferencesRequest", "DocumentHighlightRequest", "DocumentSymbolRequest", "CodeActionRequest", "CodeActionResolveRequest", "WorkspaceSymbolRequest", "WorkspaceSymbolResolveRequest", "CodeLensRequest", "CodeLensResolveRequest", "CodeLensRefreshRequest", "DocumentLinkRequest", "DocumentLinkResolveRequest", "DocumentFormattingRequest", "DocumentRangeFormattingRequest", "DocumentRangesFormattingRequest", "DocumentOnTypeFormattingRequest", "PrepareSupportDefaultBehavior", "RenameRequest", "PrepareRenameRequest", "ExecuteCommandRequest", "ApplyWorkspaceEditRequest", "require_connection", "__commonJSMin", "exports", "vscode_jsonrpc_1", "createProtocolConnection", "input", "output", "logger", "options", "require_api", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "connection_1", "LSPErrorCodes", "require_main", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "node_1", "createProtocolConnection", "input", "output", "logger", "options", "require_async", "__commonJSMin", "exports", "vscode_languageserver_protocol_1", "Delayer", "defaultDelay", "task", "delay", "resolve", "result", "Semaphore", "capacity", "thunk", "reject", "next", "value", "err", "$test", "setTestMode", "clearTestMode", "defaultYieldTimeout", "Timer", "yieldAfter", "timeTaken", "timeLeft", "map", "items", "func", "token", "options", "timer", "convertBatch", "start", "i", "index", "mapAsync", "forEach", "runBatch", "require_protocolCompletionItem", "__commonJSMin", "exports", "code", "ProtocolCompletionItem", "label", "require_protocolCodeLens", "__commonJSMin", "exports", "code", "ProtocolCodeLens", "range", "require_protocolDocumentLink", "__commonJSMin", "exports", "code", "ProtocolDocumentLink", "range", "target", "require_protocolCodeAction", "__commonJSMin", "exports", "vscode", "ProtocolCodeAction", "title", "data", "require_protocolDiagnostic", "__commonJSMin", "exports", "vscode", "Is", "DiagnosticCode", "is", "value", "candidate", "ProtocolDiagnostic", "range", "message", "severity", "data", "require_protocolCallHierarchyItem", "__commonJSMin", "exports", "code", "ProtocolCallHierarchyItem", "kind", "name", "detail", "uri", "range", "selectionRange", "data", "require_protocolTypeHierarchyItem", "__commonJSMin", "exports", "code", "ProtocolTypeHierarchyItem", "kind", "name", "detail", "uri", "range", "selectionRange", "data", "require_protocolWorkspaceSymbol", "__commonJSMin", "exports", "code", "WorkspaceSymbol", "name", "kind", "containerName", "locationOrUri", "data", "hasRange", "require_protocolInlayHint", "__commonJSMin", "exports", "code", "ProtocolInlayHint", "position", "label", "kind", "require_codeConverter", "__commonJSMin", "exports", "code", "proto", "Is", "async", "protocolCompletionItem_1", "protocolCodeLens_1", "protocolDocumentLink_1", "protocolCodeAction_1", "protocolDiagnostic_1", "protocolCallHierarchyItem_1", "protocolTypeHierarchyItem_1", "protocolWorkspaceSymbol_1", "protocolInlayHint_1", "InsertReplaceRange", "is", "value", "candidate", "createConverter", "uriConverter", "_uriConverter", "asUri", "asTextDocumentIdentifier", "textDocument", "asTextDocumentItem", "asVersionedTextDocumentIdentifier", "asOpenTextDocumentParams", "isTextDocumentChangeEvent", "isTextDocument", "asChangeTextDocumentParams", "arg0", "arg1", "arg2", "uri", "version", "change", "range", "asCloseTextDocumentParams", "asSaveTextDocumentParams", "includeContent", "result", "asTextDocumentSaveReason", "reason", "asWillSaveTextDocumentParams", "event", "asDidCreateFilesParams", "fileUri", "asDidRenameFilesParams", "file", "asDidDeleteFilesParams", "asWillCreateFilesParams", "asWillRenameFilesParams", "asWillDeleteFilesParams", "asTextDocumentPositionParams", "position", "asWorkerPosition", "asCompletionTriggerKind", "triggerKind", "asCompletionParams", "context", "asSignatureHelpTriggerKind", "asParameterInformation", "asParameterInformations", "values", "asSignatureInformation", "asSignatureInformations", "asSignatureHelp", "asSignatureHelpParams", "asPosition", "asPositions", "token", "asPositionsSync", "asRange", "asRanges", "asLocation", "asDiagnosticSeverity", "asDiagnosticTags", "tags", "tag", "converted", "asDiagnosticTag", "asRelatedInformation", "item", "asRelatedInformations", "items", "asDiagnosticCode", "asDiagnostic", "protocolDiagnostic", "asDiagnostics", "asDiagnosticsSync", "asDocumentation", "format", "documentation", "asCompletionItemTag", "asCompletionItemTags", "asCompletionItemKind", "original", "asCompletionItem", "labelDetailsSupport", "label", "labelDetails", "protocolItem", "fillPrimaryInsertText", "asTextEdits", "asCommand", "index", "target", "source", "text", "asCompletionTextEdit", "newText", "asTextEdit", "edit", "edits", "asSymbolKind", "asSymbolTag", "asSymbolTags", "asReferenceParams", "options", "asCodeAction", "asCodeActionKind", "asCodeActionSync", "asCodeActionContext", "only", "asCodeActionTriggerKind", "asCodeActionContextSync", "kind", "asInlineValueContext", "asInlineCompletionParams", "document", "asCodeLens", "asFormattingOptions", "fileOptions", "asDocumentSymbolParams", "asCodeLensParams", "asDocumentLink", "asDocumentLinkParams", "asCallHierarchyItem", "asTypeHierarchyItem", "asWorkspaceSymbol", "asInlayHint", "asInlayHintLabelPart", "asTooltip", "require_protocolConverter", "__commonJSMin", "exports", "code", "ls", "Is", "async", "protocolCompletionItem_1", "protocolCodeLens_1", "protocolDocumentLink_1", "protocolCodeAction_1", "protocolDiagnostic_1", "protocolCallHierarchyItem_1", "protocolTypeHierarchyItem_1", "protocolWorkspaceSymbol_1", "protocolInlayHint_1", "vscode_languageserver_protocol_1", "CodeBlock", "is", "value", "candidate", "createConverter", "uriConverter", "trustMarkdown", "supportHtml", "_uriConverter", "asUri", "asDocumentSelector", "selector", "result", "filter", "notebookType", "asDiagnostics", "diagnostics", "token", "asDiagnostic", "asDiagnosticsSync", "i", "diagnostic", "asRange", "asDiagnosticSeverity", "diagnosticCode", "asRelatedInformation", "asDiagnosticTags", "relatedInformation", "info", "asLocation", "tags", "tag", "converted", "asDiagnosticTag", "asPosition", "asRanges", "items", "range", "asHoverContent", "asMarkdownString", "element", "item", "asDocumentation", "asHover", "hover", "asCompletionResult", "allCommitCharacters", "asCompletionItem", "list", "defaultRange", "commitCharacters", "getCompletionItemDefaults", "rangeDefaults", "asCompletionItemKind", "asCompletionItemTag", "asCompletionItemTags", "defaultCommitCharacters", "defaultInsertTextMode", "defaultInsertTextFormat", "defaultData", "label", "asCompletionItemLabel", "insertText", "asCompletionInsertText", "itemKind", "original", "asTextEditsSync", "asCommand", "data", "insertTextMode", "insertTextFormat", "newText", "getCompletionRangeAndText", "asTextEdit", "edit", "asTextEdits", "asSignatureHelp", "asSignatureInformations", "asSignatureInformation", "asParameterInformations", "asParameterInformation", "asDeclarationResult", "asLocationResult", "asDefinitionResult", "asLocationLink", "links", "locations", "asReferences", "values", "asDocumentHighlights", "asDocumentHighlight", "asDocumentHighlightKind", "asSymbolInformations", "asSymbolInformation", "asSymbolKind", "asSymbolTag", "asSymbolTags", "location", "fillTags", "asDocumentSymbols", "asDocumentSymbol", "children", "child", "asCommands", "kindMapping", "asCodeActionKind", "parts", "part", "asCodeActionKinds", "kind", "asCodeAction", "asWorkspaceEdit", "asCodeActionResult", "asCodeLens", "asCodeLenses", "sharedMetadata", "changeAnnotations", "key", "metaData", "asWorkspaceEditEntryMetadata", "asMetadata", "annotation", "documentChanges", "change", "uri", "changes", "asDocumentLink", "target", "link", "asDocumentLinks", "asColor", "color", "asColorInformation", "ci", "asColorInformations", "colorInformation", "asColorPresentation", "cp", "presentation", "asColorPresentations", "colorPresentations", "asFoldingRangeKind", "asFoldingRange", "r", "asFoldingRanges", "foldingRanges", "asSelectionRange", "selectionRange", "asSelectionRanges", "selectionRanges", "asInlineValue", "inlineValue", "asInlineValues", "inlineValues", "asInlayHint", "asInlayHintLabelPart", "asTooltip", "asInlayHints", "asCallHierarchyItem", "asCallHierarchyItems", "asCallHierarchyIncomingCall", "asCallHierarchyIncomingCalls", "asCallHierarchyOutgoingCall", "asCallHierarchyOutgoingCalls", "asSemanticTokens", "_token", "asSemanticTokensEdit", "asSemanticTokensEdits", "asSemanticTokensLegend", "asLinkedEditingRanges", "asRegularExpression", "asTypeHierarchyItem", "asTypeHierarchyItems", "asGlobPattern", "pattern", "workspaceFolder", "asInlineCompletionResult", "asInlineCompletionItem", "command", "inlineCompletionItem", "require_uuid", "__commonJSMin", "exports", "ValueUUID", "_value", "other", "V4UUID", "_V4UUID", "array", "v4", "_UUIDPattern", "isUUID", "value", "parse", "generateUuid", "require_progressPart", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "Is", "ProgressPart", "_client", "_token", "done", "value", "params", "progress", "cancellationToken", "resolve", "reject", "percentage", "delta", "require_features", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "Is", "UUID", "LSPCancellationError", "data", "ensure", "target", "key", "StaticFeature", "is", "value", "candidate", "DynamicFeature", "DynamicDocumentFeature", "client", "selectors", "count", "selector", "document", "registrations", "TextDocumentEventFeature", "textDocument", "event", "type", "middleware", "createParams", "selectorFilter", "error", "doSend", "params", "id", "TextDocumentLanguageFeature", "registrationType", "registration", "documentSelector", "capability", "options", "result", "item", "WorkspaceFeature", "require_path", "__commonJSMin", "exports", "module", "isWindows", "require_balanced_match", "__commonJSMin", "exports", "module", "balanced", "a", "b", "str", "maybeMatch", "r", "range", "reg", "m", "begs", "beg", "left", "right", "result", "ai", "bi", "i", "require_brace_expansion", "__commonJSMin", "exports", "module", "balanced", "expandTop", "escSlash", "escOpen", "escClose", "escComma", "escPeriod", "numeric", "str", "escapeBraces", "unescapeBraces", "parseCommaParts", "parts", "m", "pre", "body", "post", "p", "postParts", "expand", "embrace", "isPadded", "el", "lte", "i", "y", "gte", "isTop", "expansions", "k", "expansion", "isNumericSequence", "isAlphaSequence", "isSequence", "isOptions", "n", "N", "x", "width", "incr", "test", "reverse", "pad", "c", "need", "z", "j", "require_minimatch", "__commonJSMin", "exports", "module", "minimatch", "p", "pattern", "options", "assertValidPattern", "Minimatch", "path", "GLOBSTAR", "expand", "plTypes", "qmark", "star", "twoStarDot", "twoStarNoDot", "charSet", "s", "set", "c", "reSpecials", "addPatternStartSet", "slashSplit", "i", "list", "ext", "a", "b", "k", "def", "orig", "m", "braceExpand", "MAX_PATTERN_LENGTH", "SUBPARSE", "mm", "f", "globUnescape", "charUnescape", "regExpEscape", "braExpEscape", "args", "si", "negate", "negateOffset", "file", "partial", "fi", "pi", "fl", "pl", "fr", "pr", "swallowee", "hit", "isSub", "re", "hasMagic", "escaping", "patternListStack", "negativeLists", "stateChar", "inClass", "reClassStart", "classStart", "cs", "sp", "patternStart", "clearStateChar", "tail", "_", "$1", "$2", "t", "addPatternStart", "n", "nl", "nlBefore", "nlFirst", "nlAfter", "nlLast", "openParensBefore", "cleanAfter", "dollar", "flags", "twoStar", "filename", "require_diagnostic", "__commonJSMin", "exports", "minimatch", "vscode_1", "vscode_languageserver_protocol_1", "uuid_1", "features_1", "ensure", "target", "key", "vsdiag", "DocumentDiagnosticReportKind", "DiagnosticPullMode", "RequestStateKind", "Tabs", "_Tabs", "openTabsHandler", "event", "oldTabs", "currentTabs", "closed", "opened", "tab", "toFire", "item", "document", "uri", "result", "strings", "uris", "seen", "group", "input", "PullState", "DocumentOrUri", "asKey", "DocumentPullStateTracker", "kind", "arg1", "states", "version", "state", "arg2", "resultId", "value", "DiagnosticRequestor", "client", "tabs", "options", "cb", "error", "isUri", "currentRequestState", "documentState", "tokenSource", "report", "afterState", "request", "previousResultIds", "chunk", "previousResultId", "token", "provideDiagnostics", "params", "middleware", "resultIds", "resultReporter", "convertReport", "convertPreviousResultIds", "converted", "partialResultToken", "disposable", "partialResult", "BackgroundScheduler", "diagnosticRequestor", "DiagnosticFeatureProviderImpl", "diagnosticPullOptions", "documentSelector", "disposables", "matchResource", "resource", "selector", "filter", "matcher", "matches", "isActiveDocument", "addToBackgroundIfNeeded", "editor", "oldActive", "openFeature", "textDocument", "uriStr", "pulledTextDocuments", "changeFeature", "saveFeature", "closeFeature", "DiagnosticFeature", "capabilities", "capability", "provider", "id", "require_notebook", "__commonJSMin", "exports", "vscode", "minimatch", "proto", "UUID", "Is", "ensure", "target", "key", "Converter", "c2p", "asVersionedNotebookDocumentIdentifier", "notebookDocument", "base", "asNotebookDocument", "cells", "result", "asNotebookCells", "asMetadata", "cell", "asNotebookCell", "metadata", "deepCopy", "asNotebookCellKind", "kind", "seen", "value", "elem", "props", "prop", "asTextContentChange", "event", "params", "asNotebookDocumentChangeEvent", "changedCells", "$NotebookCell", "computeDiff", "originalCells", "modifiedCells", "compareMetadata", "originalLength", "modifiedLength", "startIndex", "equals", "originalEndIndex", "modifiedEndIndex", "deleteCount", "newCells", "one", "other", "compareMetaData", "equalsExecution", "equalsMetadata", "equalsTiming", "oneArray", "otherArray", "i", "isObjectLiteral", "oneKeys", "otherKeys", "$NotebookDocumentFilter", "matchNotebook", "filter", "uri", "matcher", "$NotebookDocumentSyncOptions", "asDocumentSelector", "options", "selector", "element", "notebookType", "scheme", "pattern", "asDocumentFilter", "language", "SyncInfo", "create", "NotebookDocumentSyncFeatureProvider", "client", "notebook", "textDocument", "syncInfo", "cellMatches", "cellIsSynced", "matchingCells", "cellUri", "index", "item", "deleted", "disposable", "newEvent", "syncedCells", "send", "nb", "cellDocuments", "error", "middleware", "matchingCellsSet", "data", "cellChange", "oldCells", "diff", "addedCells", "removedCells", "didOpen", "didClose", "filtered", "cellSelector", "cellLanguage", "NotebookDocumentSyncFeature", "_NotebookDocumentSyncFeature", "notebookCell", "provider", "state", "capabilities", "synchronization", "id", "require_configuration", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "Is", "UUID", "features_1", "ConfigurationFeature", "client", "capabilities", "params", "token", "configuration", "result", "item", "resource", "middleware", "section", "index", "toJSONObject", "config", "key", "obj", "res", "SyncConfigurationFeature", "_client", "data", "disposable", "event", "id", "configurationSection", "sections", "didChangeConfiguration", "error", "keys", "ensurePath", "path", "current", "i", "require_textSynchronization", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DidOpenTextDocumentFeature", "client", "syncedDocuments", "textDocument", "data", "capabilities", "documentSelector", "textDocumentSyncOptions", "uri", "middleware", "didOpen", "error", "type", "params", "DidCloseTextDocumentFeature", "pendingTextDocumentChanges", "id", "selector", "selectors", "didClose", "DidChangeTextDocumentFeature", "event", "version", "promises", "changeData", "didChange", "eventUri", "excludes", "result", "entry", "document", "syncKind", "WillSaveFeature", "willSaveEvent", "value", "WillSaveWaitUntilFeature", "willSaveWaitUntil", "edits", "vEdits", "DidSaveTextDocumentFeature", "saveOptions", "require_completion", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "SupportedCompletionItemKinds", "CompletionItemFeature", "client", "capabilities", "completion", "documentSelector", "options", "id", "triggerCharacters", "defaultCommitCharacters", "selector", "provider", "document", "position", "token", "context", "middleware", "provideCompletionItems", "result", "error", "item", "resolveCompletionItem", "require_hover", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "HoverFeature", "client", "capabilities", "hoverCapability", "documentSelector", "options", "selector", "provider", "document", "position", "token", "provideHover", "result", "error", "middleware", "require_definition", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DefinitionFeature", "client", "capabilities", "definitionSupport", "documentSelector", "options", "selector", "provider", "document", "position", "token", "provideDefinition", "result", "error", "middleware", "require_signatureHelp", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "SignatureHelpFeature", "client", "capabilities", "config", "documentSelector", "options", "provider", "document", "position", "token", "context", "providerSignatureHelp", "result", "error", "middleware", "selector", "triggerCharacters", "metaData", "require_documentHighlight", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DocumentHighlightFeature", "client", "capabilities", "documentSelector", "options", "selector", "provider", "document", "position", "token", "_provideDocumentHighlights", "result", "error", "middleware", "require_documentSymbol", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DocumentSymbolFeature", "client", "capabilities", "symbolCapabilities", "documentSelector", "options", "selector", "provider", "document", "token", "_provideDocumentSymbols", "data", "first", "error", "middleware", "metaData", "require_workspaceSymbol", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "documentSymbol_1", "UUID", "WorkspaceSymbolFeature", "client", "capabilities", "symbolCapabilities", "options", "provider", "query", "token", "provideWorkspaceSymbols", "result", "error", "middleware", "item", "resolveWorkspaceSymbol", "require_reference", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "ReferencesFeature", "client", "capabilities", "documentSelector", "options", "selector", "provider", "document", "position", "token", "_providerReferences", "result", "error", "middleware", "require_codeAction", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "CodeActionFeature", "client", "capabilities", "cap", "documentSelector", "options", "selector", "provider", "document", "range", "context", "token", "_provideCodeActions", "params", "values", "error", "middleware", "item", "resolveCodeAction", "result", "require_codeLens", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "CodeLensFeature", "client", "capabilities", "documentSelector", "provider", "options", "selector", "eventEmitter", "document", "token", "provideCodeLenses", "result", "error", "middleware", "codeLens", "resolveCodeLens", "require_formatting", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "FileFormattingOptions", "fromConfiguration", "document", "filesConfig", "DocumentFormattingFeature", "client", "capabilities", "documentSelector", "options", "selector", "provider", "token", "provideDocumentFormattingEdits", "params", "result", "error", "middleware", "DocumentRangeFormattingFeature", "capability", "range", "provideDocumentRangeFormattingEdits", "ranges", "provideDocumentRangesFormattingEdits", "DocumentOnTypeFormattingFeature", "position", "ch", "provideOnTypeFormattingEdits", "moreTriggerCharacter", "require_rename", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "Is", "features_1", "RenameFeature", "client", "capabilities", "rename", "documentSelector", "options", "selector", "provider", "document", "position", "newName", "token", "provideRenameEdits", "params", "result", "error", "middleware", "prepareRename", "value", "candidate", "require_documentLink", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DocumentLinkFeature", "client", "capabilities", "documentLinkCapabilities", "documentSelector", "options", "selector", "provider", "document", "token", "provideDocumentLinks", "result", "error", "middleware", "link", "resolveDocumentLink", "require_executeCommand", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "ExecuteCommandFeature", "client", "capabilities", "data", "middleware", "executeCommand", "command", "args", "params", "error", "disposables", "id", "disposable", "value", "require_fileSystemWatcher", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "FileSystemWatcherFeature", "client", "notifyFileEvent", "capabilities", "_capabilities", "_documentSelector", "data", "disposables", "watcher", "globPattern", "watchCreate", "watchChange", "watchDelete", "fileSystemWatcher", "id", "fileSystemWatchers", "listeners", "resource", "disposable", "require_colorProvider", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "ColorProviderFeature", "client", "capabilities", "documentSelector", "id", "options", "selector", "provider", "color", "context", "token", "provideColorPresentations", "requestParams", "result", "error", "middleware", "document", "provideDocumentColors", "require_implementation", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "ImplementationFeature", "client", "capabilities", "implementationSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideImplementation", "result", "error", "middleware", "require_typeDefinition", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "TypeDefinitionFeature", "client", "capabilities", "typeDefinitionSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideTypeDefinition", "result", "error", "middleware", "require_workspaceFolder", "__commonJSMin", "exports", "UUID", "vscode_1", "vscode_languageserver_protocol_1", "access", "target", "key", "arrayDiff", "left", "right", "element", "WorkspaceFoldersFeature", "client", "params", "folders", "folder", "currentWorkspaceFolders", "capabilities", "token", "workspaceFolders", "middleware", "value", "id", "promise", "removed", "added", "error", "addedFolders", "removedFolders", "data", "disposable", "event", "didChangeWorkspaceFolders", "workspaceFolder", "require_foldingRange", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "FoldingRangeFeature", "client", "capabilities", "capability", "documentSelector", "provider", "id", "options", "selector", "eventEmitter", "document", "context", "token", "provideFoldingRanges", "_", "requestParams", "result", "error", "middleware", "require_declaration", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "DeclarationFeature", "client", "capabilities", "declarationSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideDeclaration", "result", "error", "middleware", "require_selectionRange", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "SelectionRangeFeature", "client", "capabilities", "capability", "documentSelector", "id", "options", "selector", "provider", "document", "positions", "token", "provideSelectionRanges", "requestParams", "ranges", "error", "middleware", "require_progress", "__commonJSMin", "exports", "vscode_languageserver_protocol_1", "progressPart_1", "ensure", "target", "key", "ProgressFeature", "_client", "capabilities", "client", "deleteHandler", "part", "createHandler", "params", "require_callHierarchy", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "CallHierarchyProvider", "client", "document", "position", "token", "middleware", "prepareCallHierarchy", "params", "result", "error", "item", "provideCallHierarchyIncomingCalls", "provideCallHierarchyOutgoingCalls", "CallHierarchyFeature", "cap", "capabilities", "capability", "documentSelector", "id", "options", "provider", "require_semanticTokens", "__commonJSMin", "exports", "vscode", "vscode_languageserver_protocol_1", "features_1", "Is", "SemanticTokensFeature", "client", "capabilities", "capability", "documentSelector", "provider", "id", "options", "selector", "fullProvider", "hasEditProvider", "eventEmitter", "documentProvider", "document", "token", "middleware", "provideDocumentSemanticTokens", "params", "result", "error", "previousResultId", "provideDocumentSemanticTokensEdits", "rangeProvider", "range", "provideDocumentRangeSemanticTokens", "disposables", "legend", "item", "require_fileOperations", "__commonJSMin", "exports", "code", "minimatch", "proto", "UUID", "ensure", "target", "key", "access", "assign", "value", "FileOperationFeature", "_FileOperationFeature", "client", "event", "registrationType", "clientCapability", "serverCapability", "capabilities", "options", "capability", "e", "data", "minimatchFilter", "filter", "matcher", "id", "uri", "prop", "fileMatches", "item", "path", "filters", "fileType", "files", "_", "index", "result", "NotificationFileOperationFeature", "notificationType", "accessUri", "createParams", "originalEvent", "filteredEvent", "next", "CachingNotificationFileOperationFeature", "fsPath", "type", "DidCreateFilesFeature", "i", "middleware", "DidRenameFilesFeature", "DidDeleteFilesFeature", "RequestFileOperationFeature", "requestType", "waitUntil", "WillCreateFilesFeature", "WillRenameFilesFeature", "WillDeleteFilesFeature", "require_linkedEditingRange", "__commonJSMin", "exports", "code", "proto", "features_1", "LinkedEditingFeature", "client", "capabilities", "linkedEditingSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideLinkedEditing", "result", "error", "middleware", "require_typeHierarchy", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "TypeHierarchyProvider", "client", "document", "position", "token", "middleware", "prepareTypeHierarchy", "params", "result", "error", "item", "provideTypeHierarchySupertypes", "provideTypeHierarchySubtypes", "TypeHierarchyFeature", "capabilities", "capability", "documentSelector", "id", "options", "provider", "require_inlineValue", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "InlineValueFeature", "client", "capabilities", "documentSelector", "provider", "id", "options", "selector", "eventEmitter", "document", "viewPort", "context", "token", "provideInlineValues", "requestParams", "values", "error", "middleware", "require_inlayHint", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "InlayHintsFeature", "client", "capabilities", "inlayHint", "documentSelector", "provider", "id", "options", "selector", "eventEmitter", "document", "viewPort", "token", "provideInlayHints", "requestParams", "values", "error", "middleware", "hint", "resolveInlayHint", "item", "value", "result", "require_inlineCompletion", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "InlineCompletionItemFeature", "client", "capabilities", "inlineCompletion", "documentSelector", "options", "selector", "provider", "document", "position", "context", "token", "middleware", "provideInlineCompletionItems", "result", "error", "require_client", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "c2p", "p2c", "Is", "async_1", "UUID", "progressPart_1", "features_1", "diagnostic_1", "notebook_1", "configuration_1", "textSynchronization_1", "completion_1", "hover_1", "definition_1", "signatureHelp_1", "documentHighlight_1", "documentSymbol_1", "workspaceSymbol_1", "reference_1", "codeAction_1", "codeLens_1", "formatting_1", "rename_1", "documentLink_1", "executeCommand_1", "fileSystemWatcher_1", "colorProvider_1", "implementation_1", "typeDefinition_1", "workspaceFolder_1", "foldingRange_1", "declaration_1", "selectionRange_1", "progress_1", "callHierarchy_1", "semanticTokens_1", "fileOperations_1", "linkedEditingRange_1", "typeHierarchy_1", "inlineValue_1", "inlayHint_1", "inlineCompletion_1", "RevealOutputChannelOn", "ErrorAction", "CloseAction", "State", "SuspendMode", "ResolvedClientOptions", "sanitizeIsTrusted", "isTrusted", "DefaultErrorHandler", "client", "maxRestartCount", "_error", "_message", "count", "ClientState", "MessageTransports", "is", "value", "BaseLanguageClient", "_BaseLanguageClient", "id", "name", "clientOptions", "markdown", "messageOrDataObject", "data", "oldState", "newState", "type", "params", "connection", "_sendRequest", "param", "token", "handler", "method", "disposable", "needsPendingFullTextDocumentSync", "openNotification", "_sendNotification", "error", "handleWorkDoneProgress", "realHandler", "responseError", "message", "showNotification", "reveal", "selection", "promise", "resolve", "reject", "messageFunc", "actions", "showDocument", "uri", "options", "middleware", "_resolve", "_reject", "initOption", "rootPath", "workspaceFolders", "initParams", "part", "result", "textDocumentSyncOptions", "item", "folders", "folder", "timeout", "mode", "tp", "c", "shutdown", "disposables", "feature", "entry", "event", "didChangeWatchedFile", "workSpaceMiddleware", "changes", "document", "key", "next", "diagnostics", "tokenSource", "converted", "errorHandler", "closeHandler", "transports", "createConnection", "handlerResult", "sendNotification", "config", "trace", "traceFormat", "traceConfig", "_connection", "fileEvents", "watchers", "features", "registrationType", "request", "textDocument", "pendingFullTextDocumentChanges", "ProposedFeatures", "workspaceEdit", "windowCapabilities", "showMessage", "generalCapabilities", "documentSelector", "nextParams", "registration", "err", "unregistration", "openTextDocuments", "versionMismatch", "change", "changeUri", "defaultValue", "ConsoleLogger", "input", "output", "logger", "tracer", "sendNotificationOrTraceOptions", "defaultTraceOptions", "createAll", "_client", "require_processes", "__commonJSMin", "exports", "cp", "path_1", "isWindows", "isMacintosh", "isLinux", "terminate", "process", "cwd", "options", "cmd", "result", "require_node", "__commonJSMin", "exports", "module", "require_debug", "__commonJSMin", "exports", "module", "debug", "args", "require_constants", "__commonJSMin", "exports", "module", "SEMVER_SPEC_VERSION", "MAX_SAFE_INTEGER", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "RELEASE_TYPES", "require_re", "__commonJSMin", "exports", "module", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "MAX_LENGTH", "debug", "re", "safeRe", "src", "safeSrc", "t", "R", "LETTERDASHNUMBER", "safeRegexReplacements", "makeSafeRegex", "value", "token", "max", "createToken", "name", "isGlobal", "safe", "index", "require_parse_options", "__commonJSMin", "exports", "module", "looseOption", "emptyOpts", "parseOptions", "options", "require_identifiers", "__commonJSMin", "exports", "module", "numeric", "compareIdentifiers", "a", "b", "anum", "bnum", "rcompareIdentifiers", "require_semver", "__commonJSMin", "exports", "module", "debug", "MAX_LENGTH", "MAX_SAFE_INTEGER", "re", "t", "parseOptions", "compareIdentifiers", "SemVer", "_SemVer", "version", "options", "m", "id", "num", "other", "i", "a", "b", "release", "identifier", "identifierBase", "match", "base", "prerelease", "require_parse", "__commonJSMin", "exports", "module", "SemVer", "parse", "version", "options", "throwErrors", "er", "require_lrucache", "__commonJSMin", "exports", "module", "LRUCache", "key", "value", "firstKey", "require_compare", "__commonJSMin", "exports", "module", "SemVer", "compare", "a", "b", "loose", "require_eq", "__commonJSMin", "exports", "module", "compare", "eq", "a", "b", "loose", "require_neq", "__commonJSMin", "exports", "module", "compare", "neq", "a", "b", "loose", "require_gt", "__commonJSMin", "exports", "module", "compare", "gt", "a", "b", "loose", "require_gte", "__commonJSMin", "exports", "module", "compare", "gte", "a", "b", "loose", "require_lt", "__commonJSMin", "exports", "module", "compare", "lt", "a", "b", "loose", "require_lte", "__commonJSMin", "exports", "module", "compare", "lte", "a", "b", "loose", "require_cmp", "__commonJSMin", "exports", "module", "eq", "neq", "gt", "gte", "lt", "lte", "cmp", "a", "op", "b", "loose", "require_comparator", "__commonJSMin", "exports", "module", "ANY", "Comparator", "_Comparator", "comp", "options", "parseOptions", "debug", "r", "re", "t", "m", "SemVer", "version", "cmp", "Range", "require_range", "__commonJSMin", "exports", "module", "SPACE_CHARACTERS", "Range", "_Range", "range", "options", "parseOptions", "Comparator", "r", "c", "first", "isNullSet", "isAny", "i", "comps", "k", "memoKey", "FLAG_INCLUDE_PRERELEASE", "FLAG_LOOSE", "cached", "cache", "loose", "hr", "re", "t", "hyphenReplace", "debug", "comparatorTrimReplace", "tildeTrimReplace", "caretTrimReplace", "rangeList", "comp", "parseComparator", "replaceGTE0", "rangeMap", "comparators", "result", "thisComparators", "isSatisfiable", "rangeComparators", "thisComparator", "rangeComparator", "version", "SemVer", "testSet", "LRU", "remainingComparators", "testComparator", "otherComparator", "replaceCarets", "replaceTildes", "replaceXRanges", "replaceStars", "isX", "id", "replaceTilde", "_", "M", "m", "p", "pr", "ret", "replaceCaret", "z", "replaceXRange", "gtlt", "xM", "xm", "xp", "anyX", "incPr", "$0", "from", "fM", "fm", "fp", "fpr", "fb", "to", "tM", "tm", "tp", "tpr", "set", "allowed", "require_satisfies", "__commonJSMin", "exports", "module", "Range", "satisfies", "version", "range", "options", "require_api", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "diagnostic_1", "require_main", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "cp", "fs", "path", "vscode_1", "Is", "client_1", "processes_1", "node_1", "semverParse", "semverSatisfies", "REQUIRED_VSCODE_VERSION", "TransportKind", "Transport", "isSocket", "value", "candidate", "Executable", "is", "NodeModule", "StreamInfo", "ChildProcessInfo", "LanguageClient", "arg1", "arg2", "arg3", "arg4", "arg5", "id", "name", "serverOptions", "clientOptions", "forceDebug", "error", "codeVersion", "resolve", "timeout", "toCheck", "childProcess", "params", "encoding", "getEnvironment", "env", "fork", "result", "key", "debugStartWith", "debugEquals", "startedInDebugMode", "args", "arg", "assertStdio", "process", "server", "data", "json", "runDebug", "serverWorkingDir", "node", "transport", "options", "element", "execOptions", "runtime", "pipeName", "serverProcess", "handleChildProcessStartError", "protocol", "reject", "sp", "command", "code", "signal", "serverWorkingDirectory", "mainRootPath", "folders", "folder", "cwd", "s", "err", "stats", "SettingMonitor", "_client", "_setting", "index", "primary", "rest", "enabled", "message", "_", "require_node", "__commonJSMin", "exports", "module", "require_lodash", "__commonJSMin", "exports", "module", "FUNC_ERROR_TEXT", "NAN", "symbolTag", "reTrim", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "freeGlobal", "freeSelf", "root", "objectProto", "objectToString", "nativeMax", "nativeMin", "now", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "result", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "toNumber", "isObject", "invokeFunc", "time", "args", "thisArg", "leadingEdge", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "shouldInvoke", "trailingEdge", "cancel", "flush", "debounced", "isInvoking", "throttle", "value", "type", "isObjectLike", "isSymbol", "other", "isBinary", "extension_exports", "__export", "activate", "__toCommonJS", "vscode", "path", "vscode", "vscode", "fs", "path", "vscode", "os", "path", "vscode", "debounce", "showReloadExtensionNotificationInstance", "inFlight", "message", "items", "buttons", "selected", "showReloadExtensionNotification", "configuration", "substituteVariablesInString", "workspaceFolder", "pluginSetting", "setting", "pluginId", "resultIsArray", "wildcardSetting", "args", "inspectUseDebugAdapterFromToolchain", "useDebugAdapterFromToolchain", "selectedAdapter", "value", "vsCodeVariableRegex", "val", "substring", "varName", "computeVscodeVar", "activeEditor", "documentUri", "folder", "file", "supportedVariables", "handleConfigurationChangeEvent", "ctx", "event", "showReloadExtensionNotification", "configuration_default", "vscode", "path", "vscode", "path", "vscode", "fs", "path", "pathExists", "pathComponents", "fileExists", "isPathInsidePath", "subpath", "parent", "expandFilePathTilde", "filepath", "directory", "platform", "LinuxMain", "_LinuxMain", "folder", "exists", "hasLinuxMain", "pathExists", "path", "fs", "vscode", "path", "fs", "path", "os", "plist", "vscode", "vscode", "vscode", "cp", "path", "IS_RUNNING_IN_CI", "swiftRuntimeEnv", "base", "runtimePath", "configuration_default", "key", "swiftLibraryPathKey", "separator", "runtimeEnv", "value", "swiftPlatformLibraryPathKey", "platform", "ExecFileError", "causedBy", "stdout", "stderr", "execFile", "executable", "args", "options", "folderContext", "customSwiftRuntime", "resolve", "reject", "error", "execFileStreamOutput", "token", "killSignal", "cancellation", "p", "execSwift", "toolchain", "swift", "getSwiftExecutable", "poll", "fn", "everyMilliseconds", "wait", "milliseconds", "compactMap", "arr", "transform", "acc", "item", "result", "exe", "windowsExeSuffix", "randomString", "length", "getErrorDescription", "error", "stringArrayInEnglish", "strings", "hashString", "str", "seed", "h1", "h2", "ch", "sourceLocationToVSCodeLocation", "file", "line", "column", "regexEscapedCharacters", "regexEscapedString", "string", "omitting", "result", "c", "SwiftOutputChannel", "name", "logStoreLinesSize", "RollingLog", "value", "_column", "preserveFocus", "message", "label", "fullMessage", "configuration_default", "IS_RUNNING_IN_CI", "maxLogs", "logs", "i", "index", "log", "newLogLine", "Version", "_Version", "major", "minor", "patch", "s", "numbers", "rhs", "path", "Sanitizer", "_Sanitizer", "type", "toolchain", "lib", "path", "vscode", "lineBreakRegex", "resolveTaskCwd", "task", "cwd", "scopeWorkspaceFolder", "getScopeWorkspaceFolder", "checkIfBuildComplete", "line", "match", "getDarwinSDKName", "target", "getDarwinTargetTriple", "SwiftToolchain", "_SwiftToolchain", "swiftFolderPath", "toolchainPath", "targetInfo", "swiftVersion", "runtimePath", "defaultSDK", "customSDK", "xcTestPath", "swiftTestingPath", "swiftPMTestingHelperPath", "folder", "BuildFlags", "name", "Sanitizer", "Version", "env", "stdout", "execFile", "sdk", "configuration_default", "mdfindOutput", "xcodeDeveloperDir", "spotlightXcodes", "lineBreakRegex", "selectedXcode", "result", "xcode", "swiftlyHomeDir", "swiftlyConfig", "installedToolchains", "toolchain", "swiftlyConfigRaw", "results", "a", "directory", "dirent", "toolchainSwiftPath", "pathExists", "execSwift", "lines", "position", "line", "typeRegex", "match", "nameSegments", "seg", "commandLineToolsPath", "executable", "executableSuffix", "xcodeDirectory", "toolchainExecutablePath", "error", "errorMessage", "base", "frameworks", "privateFrameworks", "str", "channel", "swift", "windowsExeSuffix", "paths", "swiftMatch", "realSwift", "swiftPath", "expandFilePathTilde", "swiftenvPath", "swiftenv", "cwd", "swiftlyToolchainLocation", "swiftLocation", "swiftlyLocation", "trimmedLocation", "err", "swiftCore", "toolchainSwiftPMHelperPath", "sdkroot", "swiftEnvironmentVariables", "developerDir", "type", "fallbackPath", "platformPath", "platformManifest", "data", "infoPlist", "plistKey", "version", "SwiftOutputChannel", "bindir", "arch", "swiftExecutable", "path", "BuildFlags", "toolchain", "args", "subcommand", "newArgs", "configuration_default", "flags", "Version", "workspacePath", "absolute", "platform", "nodePath", "path", "buildPath", "indirect", "arg", "targetMap", "sdkKindParts", "sdkKind", "target", "version", "getDarwinTargetTriple", "disableSandboxFlags", "filter", "filteredArguments", "includeCount", "argFilter", "item", "PackageWatcher", "folderContext", "workspaceContext", "watcher", "uri", "BuildFlags", "fileExists", "version", "showReloadExtensionNotification", "versionFile", "contents", "Version", "error", "packageResolvedHash", "vscode", "fs", "path", "PackageResolved", "fileContents", "json", "version", "hashString", "v1Json", "pin", "PackageResolvedPin", "v2Json", "url", "identity", "location", "state", "isPackage", "isError", "SwiftPackage", "_SwiftPackage", "folder", "contentsPromise", "resolved", "workspaceState", "toolchain", "contents", "describe", "execSwift", "packageState", "dependencies", "error", "execError", "getErrorDescription", "uri", "outputChannel", "stdout", "plugins", "lines", "lineBreakRegex", "item", "line", "pluginMatch", "BuildFlags", "loadedContents", "dependency", "workspaceStateDep", "dep", "workspaceFolder", "type", "buildDirectory", "products", "product", "targets", "target", "file", "filePath", "isPathInsidePath", "firstNewLine", "vscode", "vscode", "path", "stream", "os", "asyncfs", "vscode", "vscode", "child_process", "vscode", "vscode", "requireNativeModule", "id", "spawn", "requireNativeModule", "CloseHandler", "exitCode", "SwiftPtyProcess", "command", "args", "options", "isWindows", "useConpty", "data", "event", "error", "s", "signal", "dimensions", "d", "ReadOnlySwiftProcess", "code", "_s", "_dimensions", "vscode", "SwiftPseudoterminal", "createSwiftProcess", "options", "initialDimensions", "commandLine", "data", "e", "event", "disposable", "buf", "dimensions", "SwiftExecution", "command", "args", "options", "swiftProcess", "createSwiftProcess", "ReadOnlySwiftProcess", "SwiftPtyProcess", "SwiftPseudoterminal", "e", "d", "signal", "os", "path", "fs", "SWIFT_LAUNCH_CONFIG_TYPE", "DebugAdapter", "swiftVersion", "Version", "configuration_default", "toolchain", "customDebugAdapterPath", "isDebugging", "testKind", "isRelease", "path", "fs", "Result", "_Result", "success", "failure", "updateLaunchConfigForCI", "config", "IS_RUNNING_IN_CI", "result", "getLLDBLibPath", "toolchain", "executable", "error", "Result", "pathHint", "args", "stdout", "execFile", "m", "lldbPath", "findLibLLDB", "libDir", "pattern", "dir", "file", "findFileByPattern", "path", "files", "BuildConfigurationFactory", "_BuildConfigurationFactory", "ctx", "isTestBuild", "isRelease", "additionalArgs", "buildOptions", "configuration_default", "Version", "hasLinuxMain", "testDiscoveryByDefault", "getBaseConfig", "SwiftTestingBuildAguments", "_SwiftTestingBuildAguments", "fifoPipePath", "attachmentPath", "SwiftTestingConfigurationSetup", "_SwiftTestingConfigurationSetup", "folderContext", "testRunTime", "outputChannel", "error", "dateString", "time", "date", "TestingConfigurationFactory", "_TestingConfigurationFactory", "testKind", "testLibrary", "testList", "swiftTestingArguments", "expandEnvVariables", "buildArguments", "isDebugging", "testEnv", "swiftRuntimeEnv", "runtimePath", "xcTestPath", "swiftTestingPath", "baseConfig", "toolchain", "libraryPath", "frameworkPath", "swiftPMTestingHelperPath", "args", "swiftVersion", "xcTestArgs", "testFilterArg", "folder", "nameSuffix", "getFolderAndNameSuffix", "xctestPath", "arch", "sanitizer", "envCommands", "key", "value", "SWIFT_LAUNCH_CONFIG_TYPE", "swiftTestingArgs", "arg", "regexEscapedString", "result", "major", "minor", "patch", "BuildFlags", "mode", "triple", "packageName", "targets", "updateLaunchConfigForCI", "platform", "nodePath", "path", "workspaceFolder", "platformDebugBuildOptions", "toolchain", "Version", "diagnosticsStyleOptions", "configuration_default", "buildOptions", "debug", "args", "sanitizer", "getBuildRevealOption", "buildAllTaskCache", "cache", "key", "name", "folderContext", "task", "cached", "buildAllTaskName", "folderContext", "release", "buildTaskName", "SwiftTaskProvider", "createBuildAllTask", "args", "BuildConfigurationFactory", "task", "createSwiftTask", "getBuildRevealOption", "buildAllTaskCache", "getBuildAllTask", "folderWorkingDir", "workspaceTasks", "cwd", "createBuildTasks", "product", "toolchain", "buildTaskNameSuffix", "buildDebugName", "buildDebugTask", "buildOptions", "buildDebug", "buildReleaseName", "buildReleaseTask", "buildRelease", "name", "config", "cmdEnv", "options", "swift", "fullCwd", "env", "configuration_default", "swiftRuntimeEnv", "presentation", "SwiftExecution", "prefix", "workspaceContext", "token", "tasks", "activeOperation", "Version", "executables", "executable", "currentFolder", "platform", "substituteVariablesInString", "resolveTaskCwd", "fullEnv", "newTask", "stripAnsi", "darwinTestRegex", "nonDarwinTestRegex", "ParallelXCTestOutputParser", "hasMultiLineParallelTestOutput", "regex", "XCTestOutputParser", "output", "runState", "ParallelXCTestRunStateProxy", "value", "id", "filename", "index", "message", "isKnown", "location", "startTime", "timing", "name", "rawOutput", "output2", "stripAnsi", "lines", "lineBreakRegex", "line", "startedMatch", "testName", "startedTestIndex", "finishedMatch", "testIndex", "state", "duration", "errorMatch", "failedTestIndex", "skippedMatch", "skippedTestIndex", "startedSuiteMatch", "suite", "startedSuiteIndex", "totalLines", "i", "associateLineWithSuite", "resultMethod", "suiteIndex", "file", "lineNumber", "sourceLocationToVSCodeLocation", "diff", "match", "readline", "import_stream", "fs", "net", "WindowsNamedPipeReader", "path", "readable", "resolve", "reject", "server", "stream", "data", "error", "UnixNamedPipeReader", "err", "fd", "pipe", "import_child_process", "SwiftTestingOutputParser", "testRunStarted", "addParameterizedTestCase", "onAttachment", "path", "runState", "pipeReader", "reader", "readlinePipe", "line", "resolve", "chunk", "lineBreakRegex", "WindowsNamedPipeReader", "UnixNamedPipeReader", "id", "nameMatcher", "matches", "testId", "testCaseId", "testCase", "testID", "location", "index", "record", "map", "fullNameIndex", "messages", "buckets", "message", "key", "item", "testName", "testIndex", "sourceLocationToVSCodeLocation", "testClass", "isKnown", "sourceLocation", "issues", "details", "additionalDetails", "MessageRenderer", "symbolType", "ansiEscapeCodePrefix", "resetANSIEscapeCode", "SymbolRenderer", "_SymbolRenderer", "symbol", "vscode", "LoggingDebugAdapterTrackerFactory", "session", "LoggingDebugAdapterTracker", "registerLoggingDebugAdapterTracker", "trackerFactory", "subscriptions", "sub", "_LoggingDebugAdapterTracker", "id", "outputChannel", "cb", "loggingDebugAdapter", "o", "message", "debugMessage", "output", "vscode", "TaskOperation", "task", "options", "scopeString", "workspaceContext", "token", "SwiftExecOperation", "args", "folderContext", "name", "process", "stdout", "stderr", "execSwift", "QueuedOperation", "operation", "cb", "TaskQueue", "queuedOperation", "promise", "resolve", "fail", "result", "error", "poll", "xml2js", "TestXUnitParser", "hasMultiLineParallelTestOutput", "buffer", "runState", "outputChannel", "xml", "error", "xUnit", "tests", "failures", "errors", "testsuite", "suiteFailures", "className", "testcase", "id", "index", "reduceTestItemChildren", "array", "callback", "initialValue", "accumulator", "currentValue", "flattenTestItemCollection", "coll", "items", "item", "TestRunArguments", "request", "isDebug", "testItems", "xcTestArgs", "swiftTestArgs", "includes", "excludes", "parents", "map", "include", "parent", "testArgs", "arg", "tag", "isXCTest", "hasChildren", "terminator", "exclude", "previousValue", "testItem", "xcTestResult", "swiftTestResult", "isSwiftTestingTest", "reduceTestItemChildren", "result", "child", "import_os", "path", "fs", "TemporaryFolder", "_TemporaryFolder", "path", "DisposableFileCollection", "prefix", "extension", "filename", "randomString", "process", "tmpPath", "paths", "rt", "error", "folder", "file", "vscode", "runnableTag", "defaultTags", "updateTestsFromClasses", "testController", "swiftPackage", "testItems", "targets", "results", "target", "filteredItems", "testItem", "updateTests", "updateTestsForTarget", "testTarget", "filterFile", "synthesizeChildren", "item", "idComponents", "newId", "remainingIdComponents", "testTargetClass", "incomingTestsLookup", "createIncomingTestLookup", "removeOldTests", "child", "collection", "testItemHasParameterizedTestResultChildren", "upsertTestItem", "reduceTestItemChildren", "acc", "dictionary", "traverse", "deepMergeTestItemChildren", "existingItem", "newItem", "existing", "applyTagsToChildren", "testClass", "tagsToAdd", "tag", "parent", "existingChildren", "hasTestStyleTag", "zeros", "vscode", "lcov", "asyncfs", "path", "import_stream", "import_util", "TestCoverage", "folderContext", "tmpFolder", "uri", "testLibrary", "buildDirectory", "BuildFlags", "result", "filename", "testRun", "lcovFiles", "sourceFileCoverage", "detailedCoverage", "lineCoverage", "statementCoverage", "coverage", "profDataFiles", "llvmProfdata", "execFileStreamOutput", "mergedProfileFile", "path", "lcovData", "types", "coveredBinaries", "xcTestBinary", "TestingConfigurationFactory", "packageName", "swiftTestBinary", "buffer", "writableStream", "chunk", "_encoding", "callback", "configuration_default", "basePath", "buildFolder", "snippetsFolder", "pluginsFolder", "testTargets", "target", "excluded", "lcovContents", "value", "vscode", "CompositeCancellationToken", "tokens", "token", "t", "e", "d", "stripAnsi", "TestRunProxy", "_TestRunProxy", "testRunRequest", "controller", "args", "folderContext", "testProfileCancellationToken", "addedTestItems", "testClass", "parentIndex", "parent", "compactMap", "t", "runnableTag", "added", "upsertTestItem", "p", "outputLine", "test", "testIndex", "attachment", "attachments", "testItem", "TestCoverage", "CompositeCancellationToken", "id", "filename", "DarwinTestItemFinder", "NonDarwinTestItemFinder", "duration", "message", "iteration", "output", "tranformedOutput", "location", "attachmentKeys", "totalAttachments", "acc", "key", "SymbolRenderer", "testRun", "stripAnsi", "itr", "line", "removeTestRunTags", "_acc", "tags", "tag", "reduceTestItemChildren", "TestRunner", "_TestRunner", "testKind", "request", "token", "TestRunArguments", "isDebugging", "ParallelXCTestOutputParser", "XCTestOutputParser", "SwiftTestingOutputParser", "items", "item", "onCreateTestRun", "runner", "_testRun", "fileCoverage", "targets", "target", "testTargets", "runState", "TestRunnerTestRunState", "cancellationDisposable", "error", "getErrorDescription", "testRunTime", "fifoPipePath", "TemporaryFolder", "execFile", "attachmentFolder", "SwiftTestingConfigurationSetup", "swiftTestingArgs", "SwiftTestingBuildAguments", "testBuildConfig", "TestingConfigurationFactory", "outputStream", "testLibrary", "resolve", "reject", "kindLabel", "task", "createSwiftTask", "str", "replaced", "code", "TaskOperation", "buffer", "results", "TestXUnitParser", "buildOutput", "chunk", "_encoding", "next", "BuildConfigurationFactory", "isRelease", "buildExitCode", "subscriptions", "buildConfigs", "swiftTestBuildConfig", "configuration_default", "configJSON", "xcTestBuildConfig", "config", "startSession", "session", "outputHandler", "LoggingDebugAdapterTracker", "cancellation", "terminateSession", "e", "sub", "started", "reason", "fn", "preambleComplete", "handler", "testRunDateNow", "testItems", "testName", "targetTestItem", "fileErrorIsIn", "targetPath", "relativePath", "source", "index", "startTime", "timing", "isSuite", "issues", "allUnknownIssues", "isKnown", "issue", "diff", "msg", "issueList", "name", "suiteIndex", "lastClassTestItem", "uri", "range", "import_vscode_languageclient", "DocCDocumentationRequest", "import_vscode_languageclient", "GetReferenceDocumentRequest", "import_vscode_languageclient", "WorkspaceTestsRequest", "TextDocumentTestsRequest", "import_vscode_languageclient", "LegacyInlayHintRequest", "import_vscode_languageclient", "PeekDocumentsRequest", "import_vscode_languageclient", "ReIndexProjectRequest", "import_vscode_languageclient", "SourceKitLogMessageNotification", "import_vscode_languageclient", "SymbolInfoRequest", "vscode", "import_vscode_languageclient", "vscode", "vscode", "path", "import_vscode_languageclient", "vscode", "fs", "path", "stripAnsi", "isEqual", "d1", "d2", "isSource", "diagnostic", "sourcesPredicate", "isSwiftc", "DiagnosticsManager", "isSourceKit", "_DiagnosticsManager", "context", "message", "e", "_", "uri", "event", "task", "swiftExecution", "map", "diagnostics", "source", "sourcePredicate", "newDiagnostics", "isFromSourceKit", "allDiagnostics", "removedDiagnostics", "d", "fsPath", "open", "needle", "extractedPath", "swiftcDiagnostics", "sourceKitDiagnostics", "mergedDiagnostics", "configuration_default", "precedencePredicate", "currentDiagnostic", "path", "matches", "removed", "res", "disposables", "done", "remainingData", "lastDiagnostic", "lastDiagnosticNeedsSaving", "data", "lines", "lineBreakRegex", "line", "checkIfBuildComplete", "result", "relatedInformation", "expandedUri", "currentUriDiagnostics", "diagnosticRegex", "switfcExtraWarningsRegex", "match", "range", "severity", "lineString", "columnString", "col", "position", "severityString", "fs", "path", "vscode", "import_os", "import_child_process", "import_stream", "captureDiagnostics", "ctx", "allowMinimalCapture", "captureMode", "captureDiagnosticsMode", "diagnosticsDir", "formatDateString", "writeLogFile", "extensionLogs", "folder", "baseName", "guid", "settingsLogs", "diagnosticLogs", "Version", "sourcekitDiagnose", "sourceKitLogs", "showCapturedDiagnosticsResults", "error", "promptForDiagnostics", "ok", "cancel", "result", "fullButton", "minimalButton", "buttons", "fullCaptureResult", "showInFinderButton", "showCommandType", "copyPath", "showDirectoryCommand", "dir", "name", "logs", "settings", "diagnosticToString", "diagnostic", "severityToString", "uri", "diagnostics", "sourcekitDiagnosticDir", "toolchainSourceKitLSP", "serverPathConfig", "configuration_default", "serverPath", "progress", "writableStream", "progressUpdatingWritable", "percent", "execFileStreamOutput", "updateProgress", "chunk", "_encoding", "callback", "str", "severity", "date", "padZero", "num", "length", "year", "month", "day", "hours", "minutes", "seconds", "timezoneOffset", "timezoneSign", "timezoneHours", "timezoneMinutes", "vscode", "uriConverters", "value", "url", "scheme", "auth", "host", "query", "fragment", "username", "password", "atInAuthority", "colonInAuth", "search", "hash", "initializationOptions", "swiftVersion", "options", "Version", "configuration_default", "LanguagerClientDocumentSelectors", "_LanguagerClientDocumentSelectors", "documentSelector", "doc", "lspClientOptions", "workspaceContext", "workspaceFolder", "activeDocumentManager", "errorHandler", "documentSymbolWatcher", "SwiftOutputChannel", "document", "token", "next", "codelens", "result", "documentSymbols", "position", "definitions", "uri", "r", "previousResultId", "DiagnosticsManager", "diagnostics", "lastPrompted", "params", "now", "oneHour", "promptForDiagnostics", "uriConverters", "SwiftLegacyInlayHintsProvider", "client", "document", "range", "token", "configuration_default", "params", "LegacyInlayHintRequest", "hints", "hint", "label", "kind", "reason", "activateLegacyInlayHints", "LanguagerClientDocumentSelectors", "vscode", "openPeekedEditorIn", "uri", "position", "locations", "activatePeekDocuments", "client", "PeekDocumentsRequest", "params", "peekURI", "peekPosition", "peekLocations", "location", "vscode", "LSPOutputChannel", "name", "includeLogLevel", "includeTimestamp", "message", "logLevel", "formatted", "vscode", "activateGetReferenceDocument", "client", "uri", "token", "params", "result", "GetReferenceDocumentRequest", "import_node", "LanguageClientFactory", "name", "id", "serverOptions", "clientOptions", "vscode", "import_vscode_languageclient", "DidChangeActiveDocumentNotification", "LSPActiveDocumentManager", "document", "next", "client", "event", "checkExperimentalCapability", "DidChangeActiveDocumentNotification", "textDocument", "LanguageClientManager", "_LanguageClientManager", "folderContext", "languageClientFactory", "LanguageClientFactory", "LSPActiveDocumentManager", "LSPOutputChannel", "Version", "onChangeConfig", "event", "message", "restartLSPButton", "configuration_default", "selected", "onDidCreateFileDisposable", "onDidDeleteFileDisposable", "item", "channel", "process", "reason", "client", "uri", "workspaceFolder", "FolderContext", "folder", "forceRestart", "errorHandler", "toolchain", "toolchainSourceKitLSP", "lspConfig", "serverPathConfig", "serverPath", "buildFlags", "sdkArguments", "BuildFlags", "sourcekit", "swiftRuntimeEnv", "serverOptions", "SourceKitLSPErrorHandler", "clientOptions", "lspClientOptions", "runningPromise", "res", "rej", "disposable", "e", "SourceKitLogMessageNotification", "params", "activateLegacyInlayHints", "activatePeekDocuments", "activateGetReferenceDocument", "checkExperimentalCapability", "DidChangeActiveDocumentNotification", "logger", "outputChannel", "maxRestartCount", "_error", "_message", "count", "resolve", "result", "checkExperimentalCapability", "client", "method", "minVersion", "experimentalCapability", "LSPTestDiscovery", "languageClient", "swiftPackage", "document", "client", "token", "checkExperimentalCapability", "TextDocumentTestsRequest", "testsInDocument", "WorkspaceTestsRequest", "tests", "input", "result", "item", "location", "target", "id", "parseTestsFromSwiftTestListOutput", "input", "tests", "lines", "line", "targetName", "testName", "style", "xcTestGroup", "swiftTestGroup", "components", "separator", "currentId", "component", "id", "testStyle", "target", "item", "vscode", "parseTestsFromDocumentSymbols", "target", "symbols", "uri", "locationLookup", "swiftTestListOutput", "symbol", "functions", "func", "openBrackets", "funcName", "location", "testName", "tests", "parseTestsFromSwiftTestListOutput", "annotateTestsWithLocations", "locations", "test", "TestExplorer", "_TestExplorer", "folderContext", "item", "TestRunner", "languageClientManager", "LSPTestDiscovery", "onDidEndTask", "event", "task", "execution", "targets", "fileWatcher", "uri", "target", "element", "workspaceContext", "tokenSource", "disposable", "folder", "operation", "workspace", "configuration_default", "hasTestTargets", "document", "symbols", "items", "flattenTestItemCollection", "id", "testExplorer", "isPathInsidePath", "tests", "updateTestsForTarget", "parseTestsFromDocumentSymbols", "controller", "updateTests", "token", "runDiscover", "explorer", "firstTry", "ok", "enable", "selected", "toolchain", "testBuildOptions", "buildOptions", "getBuildAllTask", "exitCode", "TaskOperation", "listTestArguments", "Version", "listTestsOperation", "SwiftExecOperation", "stdout", "parseTestsFromSwiftTestListOutput", "error", "backgroundTask", "errorDescription", "getErrorDescription", "updateTestsFromClasses", "title", "errorItem", "vscode", "debounce", "BackgroundCompilation", "folderContext", "event", "configuration_default", "fileTypes", "rootFolders", "disposable", "backgroundTask", "getBuildAllTask", "TaskOperation", "FolderContext", "_FolderContext", "folder", "toolchain", "linuxMain", "swiftPackage", "workspaceFolder", "workspaceContext", "PackageWatcher", "BackgroundCompilation", "TaskQueue", "statusItemText", "SwiftToolchain", "LinuxMain", "SwiftPackage", "folderContext", "error", "outputChannel", "event", "identifier", "TestExplorer", "uri", "type", "isPathInsidePath", "element", "relativeUri", "file", "vscode", "path", "RunningTask", "task", "folder", "StatusItem", "process", "value", "error", "element", "runningTask", "message", "index", "taskToDisplay", "accessibilityMessage", "command", "LanguageClientToolchainCoordinator", "workspaceContext", "languageClientFactory", "LanguageClientFactory", "folder", "operation", "singleServer", "Version", "client", "version", "singleServerSupport", "versionString", "LanguageClientManager", "item", "vscode", "TaskManager", "workspaceContext", "event", "observer", "task", "token", "resolve", "reject", "disposable", "execution", "error", "disable", "index", "context", "path", "vscode", "import_util", "makeDebugConfigurations", "ctx", "options", "configuration_default", "wsLaunchSection", "launchConfigs", "configsToCreate", "configsToUpdate", "generatedConfig", "createExecutableConfigurations", "index", "c", "config", "updateConfigWithNewKeys", "needsUpdate", "answer", "warningMessage", "stringArrayInEnglish", "update", "getLaunchConfiguration", "target", "folderCtx", "folder", "getFolderAndNameSuffix", "targetPath", "BuildFlags", "executableProducts", "nameSuffix", "buildDirectory", "product", "baseConfig", "SWIFT_LAUNCH_CONFIG_TYPE", "createSnippetConfiguration", "snippetName", "debugLaunchConfig", "workspaceFolder", "resolve", "reject", "started", "terminateSession", "reason", "oldConfig", "newConfig", "keys", "key", "vscode", "createContextKeys", "isActivated", "hasPackage", "hasExecutableProduct", "flatDependenciesList", "packageHasDependencies", "packageHasPlugins", "currentTargetType", "fileIsSnippet", "lldbVSCodeAvailable", "createNewProjectAvailable", "supportsReindexing", "supportsDocumentationLivePreview", "switchPlatformAvailable", "toolchainVersion", "Version", "value", "contextKeys", "contextKeys_default", "vscode", "path", "setSnippetContextKey", "ctx", "contextKeys_default", "filename", "snippetsFolder", "runSnippet", "snippet", "debugSnippetWithOptions", "debugSnippet", "options", "snippetName", "folderContext", "snippetBuildTask", "createSwiftTask", "snippetDebugConfig", "createSnippetConfiguration", "TaskOperation", "result", "debugLaunchConfig", "error", "vscode", "DocumentParser", "document", "position", "expression", "text", "result", "offset", "results", "match", "characters", "openDelimiters", "closeDelimiters", "closeDelimitersFailure", "stack", "delimiterIndex", "index", "character", "value", "remainsOfLine", "whitespace", "whitespaceCount", "CommentCompletion", "insertText", "label", "detail", "sortText", "CommentCompletionProvider", "document", "position", "line", "FunctionDocumentationCompletionProvider", "funcPosition", "details", "snippet", "editor", "insertPosition", "parser", "DocumentParser", "funcName", "parameters", "parameter", "nextChar", "throws", "mark", "returns", "completeSnippet", "string", "snippetIndex", "CommentCompletionProviders", "vscode", "stripAnsi", "SwiftBuildStatus", "statusItem", "event", "configuration_default", "task", "showBuildStatus", "execution", "isBuildTask", "disposables", "handleTaskOutput", "update", "res", "done", "d", "RunningTask", "e", "progress", "message", "name", "started", "parseEvents", "data", "lines", "lineBreakRegex", "line", "checkIfBuildComplete", "match", "vscode", "vscode", "fs", "path", "import_vscode_languageclient", "throttle", "DocumentationPreviewEditor", "_DocumentationPreviewEditor", "context", "webviewPanel", "throttle", "textEditor", "document", "folderContext", "languageClientManager", "response", "client", "DocCDocumentationRequest", "error", "livePreviewErrorMessage", "baseLogErrorMessage", "extension", "swiftDoccRenderPath", "f", "webviewBaseURI", "scriptURI", "doccRenderHTML", "codiconsUri", "subscription", "message", "activeTextEditor", "event", "content", "renderNode", "referenceKey", "reference", "variant", "uri", "DocumentationManager", "extension", "context", "contextKeys_default", "DocumentationPreviewEditor", "subscriptions", "content", "d", "vscode", "searchForPackages", "folder", "disableSwiftPMIntegration", "searchSubfoldersForPackages", "folders", "search", "isValidWorkspaceFolder", "entries", "entry", "pathExists", "vscode", "path", "SwiftPluginTaskProvider", "workspaceContext", "token", "tasks", "folderContext", "plugin", "task", "currentFolder", "swift", "swiftArgs", "substituteVariablesInString", "cwd", "resolveTaskCwd", "newTask", "SwiftExecution", "toolchain", "config", "relativeCwd", "taskDefinitionCwd", "definition", "presentation", "configuration_default", "swiftRuntimeEnv", "prefix", "taskDefinition", "globalPackageConfig", "packageConfig", "commandConfig", "globalPackageArgs", "packageArgs", "commandArgs", "taskDefinitionConfiguration", "args", "vscode", "path", "registerDebugger", "workspaceContext", "subscriptions", "configurationEvent", "event", "sub", "configuration_default", "register", "registerLoggingDebugAdapterTracker", "registerLLDBDebugAdapter", "SWIFT_LAUNCH_CONFIG_TYPE", "LLDBDebugConfigurationProvider", "platform", "outputChannel", "folder", "launchConfig", "toolchain", "f", "pid", "userSelection", "runtimeEnv", "swiftRuntimeEnv", "existingEnv", "DebugAdapter", "lldbDapPath", "fileExists", "updateLaunchConfigForCI", "libLldbPathResult", "getLLDBLibPath", "errorMessage", "getErrorDescription", "libLldbPath", "lldbConfig", "map", "key", "value", "WorkspaceContext", "_WorkspaceContext", "extensionContext", "tempFolder", "outputChannel", "globalToolchain", "StatusItem", "SwiftBuildStatus", "LanguageClientToolchainCoordinator", "TaskManager", "DiagnosticsManager", "SwiftTaskProvider", "SwiftPluginTaskProvider", "LLDBDebugConfigurationProvider", "DocumentationManager", "CommentCompletionProviders", "onChangeConfig", "event", "swiftLibraryPathKey", "selected", "ctx", "makeDebugConfigurations", "contextKeysUpdate", "onDidEndTask", "configuration_default", "swiftFileWatcher", "uri", "observer", "f", "item", "toolchain", "TemporaryFolder", "folderContext", "contextKeys_default", "foundPackage", "executableProducts", "dependencies", "target", "client", "experimentalCaps", "ReIndexProjectRequest", "DocCDocumentationRequest", "setSnippetContextKey", "hasPlugins", "folder", "onWorkspaceChange", "onDidChangeActiveWindow", "editor", "operation", "kind", "targets", "targetName", "launchConfig", "options", "workspaceFolder", "folders", "searchForPackages", "index", "context", "FolderContext", "observersReversed", "listener", "packageFolder", "url", "isPathInsidePath", "workspacePath", "packagePath", "currentFolder", "isValidWorkspaceFolder", "autoGenerate", "requiresAutoGenerate", "LOADING_ICON", "getChildren", "directoryPath", "parentId", "contents", "results", "excludes", "configuration_default", "fileName", "filePath", "stats", "FileNode", "first", "second", "PackageNode", "_PackageNode", "dependency", "childDependencies", "item", "childDeps", "files", "dep", "name", "path", "isDirectory", "TaskNode", "type", "id", "active", "testTaskName", "snippetTaskName", "TargetNode", "target", "activeTasks", "hasChildren", "HeaderNode", "icon", "_getChildren", "ErrorNode", "folder", "ProjectPanelProvider", "workspaceContext", "contextKeys_default", "ctx", "TaskPoller", "e", "taskId", "treeView", "operation", "element", "folderContext", "nodes", "dependencies", "snippets", "commands", "pkg", "rootDeps", "existenceMap", "gatherChildren", "result", "targetSort", "node", "a", "b", "task", "_TaskPoller", "onTasksChanged", "tasks", "prev", "c1", "c2", "vscode", "path", "downloadToolchain", "showReloadExtensionNotification", "installSwiftly", "selectToolchainFolder", "selected", "setToolchainPath", "showToolchainError", "configuration_default", "removeToolchainPath", "SeparatorItem", "label", "getQuickPickItems", "activeToolchain", "xcodes", "SwiftToolchain", "xcodePath", "toolchainPath", "toolchains", "result", "swiftlyToolchains", "toolchainInUse", "toolchain", "actionItems", "showToolchainSelectionQuickPick", "xcodePaths", "xcode", "developerDir", "selectedXcodePath", "showDeveloperDirQuickPick", "existingDeveloperDir", "a", "b", "swiftSettings", "swiftEnvironmentSettings", "swiftFolderPath", "target", "items", "swiftConfiguration", "swiftEnv", "checkAndRemoveWorkspaceSetting", "vscode", "attachDebugger", "SWIFT_LAUNCH_CONFIG_TYPE", "vscode", "reindexProject", "workspaceContext", "client", "token", "ReIndexProjectRequest", "err", "error", "vscode", "vscode", "executeTaskWithUI", "task", "description", "folderContext", "showErrors", "checkAlreadyRunning", "TaskOperation", "error", "updateAfterError", "result", "triggerResolvedUpdatedEvent", "runBuild", "ctx", "target", "debugBuildWithOptions", "debugBuild", "cleanBuild", "current", "folderCleanBuild", "folderContext", "task", "createSwiftTask", "SwiftTaskProvider", "executeTaskWithUI", "options", "targetName", "file", "launchConfig", "getLaunchConfiguration", "result", "debugLaunchConfig", "vscode", "path", "fs", "runSwiftScript", "ctx", "document", "Version", "target", "defaultVersion", "configuration_default", "picked", "filename", "isTempFile", "text", "runTask", "createSwiftTask", "vscode", "useLocalDependency", "identifier", "ctx", "dep", "currentFolder", "folder", "folders", "task", "createSwiftTask", "success", "executeTaskWithUI", "vscode", "editDependency", "identifier", "ctx", "currentFolder", "task", "createSwiftTask", "executeTaskWithUI", "index", "vscode", "fs", "uneditDependency", "identifier", "ctx", "currentFolder", "status", "uneditFolderDependency", "folder", "args", "uneditOperation", "SwiftExecOperation", "folderIndex", "item", "error", "execError", "vscode", "openInWorkspace", "packageNode", "index", "vscode", "openInExternalEditor", "packageNode", "uri", "vscode", "switchPlatform", "ctx", "picked", "statusItemText", "SwiftToolchain", "swiftSDKTriple", "getDarwinTargetTriple", "configuration_default", "vscode", "insertFunctionComment", "workspaceContext", "activeEditor", "line", "vscode", "fs", "vscode", "ProgressWrapper", "listener", "value", "withDelayedProgress", "options", "task", "timeout", "cancellationTokenSource", "progressWrapper", "disposables", "taskPromise", "nodeTimeout", "progress", "token", "disposable", "createNewProject", "toolchain", "showToolchainError", "Version", "availableProjectTemplates", "selectedProjectTemplate", "type", "projectType", "selectedFolder", "existingNames", "initialValue", "i", "projectName", "value", "projectUri", "withDelayedProgress", "execSwift", "isWorkspaceOpened", "openAfterCreate", "configuration_default", "action", "message", "open", "openNewWindow", "choices", "addToWorkspace", "result", "index", "vscode", "openEducationalNote", "markdownFile", "vscode", "openPackage", "swiftVersion", "currentFolder", "packagePath", "packageSwiftFile", "version", "files", "file", "fileExists", "vscode", "resolveDependencies", "ctx", "current", "resolveFolderDependencies", "folderContext", "checkAlreadyRunning", "task", "createSwiftTask", "SwiftTaskProvider", "success", "executeTaskWithUI", "updateAfterError", "vscode", "resetPackage", "ctx", "current", "folderResetPackage", "folderContext", "task", "createSwiftTask", "executeTaskWithUI", "success", "resolveTask", "SwiftTaskProvider", "reason", "vscode", "updateDependencies", "ctx", "current", "updateFolderDependencies", "folderContext", "task", "createSwiftTask", "SwiftTaskProvider", "result", "executeTaskWithUI", "updateAfterError", "vscode", "runPluginTask", "vscode", "runTestMultipleTimes", "currentFolder", "test", "untilFailure", "count", "testRunner", "numExecutions", "str", "value", "token", "testExplorer", "runner", "TestRunner", "testRunState", "TestRunnerTestRunState", "runStates", "i", "runState", "fs", "path", "vscode", "extension", "defaultFileName", "newSwiftFile", "uri", "isDirectory", "dir", "defaultName", "targetUri", "document", "vscode", "runAllTests", "ctx", "testKind", "target", "testExplorer", "profile", "tests", "flattenTestItemCollection", "targetRegex", "test", "tokenSource", "updateDependenciesViewList", "ctx", "flatList", "contextKeys_default", "vscode", "runTask", "ctx", "name", "task", "TaskOperation", "result", "path", "vscode", "util", "child_process", "exec", "BaseProcessList", "execCommand", "parser", "lineBreakRegex", "line", "process", "LinuxProcessList", "BaseProcessList", "commandOffset", "argumentsOffset", "line", "pidAndState", "state", "command", "DarwinProcessList", "LinuxProcessList", "WindowsProcessList", "BaseProcessList", "lineRegex", "line", "matches", "id", "start", "fullCommandLine", "command", "end", "createProcessList", "DarwinProcessList", "WindowsProcessList", "LinuxProcessList", "pickProcess", "configuration", "processList", "createProcessList", "processes", "a", "b", "program", "programBaseName", "proc", "aIsExactMatch", "vscode", "openDocumentation", "vscode", "restartLSPServer", "ctx", "toolchains", "toolchainQuickPickItems", "restartLSP", "tc", "selected", "originalToolchains", "toolchain", "toolchainLookup", "acc", "folder", "key", "version", "vscode", "generateLaunchConfigurations", "ctx", "makeDebugConfigurations", "quickPickItems", "folder", "selection", "foldersToUpdate", "prev", "curr", "registerToolchainCommands", "toolchain", "createNewProject", "showToolchainSelectionQuickPick", "configuration", "pickProcess", "register", "ctx", "generateLaunchConfigurations", "uri", "newSwiftFile", "resolveDependencies", "updateDependencies", "target", "runBuild", "unwrapTreeItem", "debugBuild", "cleanBuild", "item", "count", "runTestMultipleTimes", "switchPlatform", "resetPackage", "runSwiftScript", "openPackage", "runSnippet", "debugSnippet", "runPluginTask", "name", "runTask", "restartLSPServer", "reindexProject", "insertFunctionComment", "dep", "PackageNode", "useLocalDependency", "editDependency", "uneditDependency", "openInWorkspace", "openInExternalEditor", "attachDebugger", "captureDiagnostics", "runAllTests", "updateDependenciesViewList", "openEducationalNote", "packagePath", "openDocumentation", "vscode", "import_vscode_languageclient", "LanguageStatusItems", "workspaceContext", "swiftVersionItem", "LanguagerClientDocumentSelectors", "toolchain", "packageSwiftItem", "onFocus", "folder", "operation", "element", "vscode", "fs", "getReadOnlyDocumentProvider", "uri", "fs", "vscode", "checkAndWarnAboutWindowsSymlinks", "outputChannel", "configuration_default", "isSymlinkAllowed", "canCreateSymlink", "selected", "temporaryFolder", "TemporaryFolder", "testFilePath", "testSymlinkPath", "error", "vscode", "pathSeparator", "SwiftEnvironmentVariablesManager", "context", "event", "disposable", "environment", "configuration_default", "variable", "SwiftTerminalProfileProvider", "_SwiftTerminalProfileProvider", "env", "terminal", "fs", "SelectedXcodeWatcher", "_SelectedXcodeWatcher", "outputChannel", "testDependencies", "newXcodePath", "configuration_default", "showReloadExtensionNotification", "activate", "context", "outputChannel", "SwiftOutputChannel", "checkAndWarnAboutWindowsSymlinks", "toolchain", "createActiveToolchain", "showToolchainError", "deactivate", "workspaceContext", "WorkspaceContext", "SwiftEnvironmentVariablesManager", "SwiftTerminalProfileProvider", "registerToolchainCommands", "handleConfigurationChangeEvent", "register", "registerDebugger", "SelectedXcodeWatcher", "LanguageStatusItems", "getReadOnlyDocumentProvider", "folder", "operation", "projectPanelProvider", "ProjectPanelProvider", "dependenciesView", "handleFolderEvent", "TestExplorer", "contextKeys_default", "error", "errorMessage", "getErrorDescription", "folderAdded", "workspace", "configuration_default", "resolveFolderDependencies", "Version", "FolderContext", "makeDebugConfigurations", "SwiftToolchain", "subscription"]
}
